{"title": "A Hybrid Data-Driven Approach For Analyzing And Predicting Inpatient Length Of Stay\nIn Health Centre", "authors": ["Tasfia Noor Chowdhury", "Sanjida Afrin Mou", "Kazi Naimur Rahmana"], "abstract": "Patient length of stay (LoS) is a critical metric for evaluating the efficacy of hospital management. The primary objectives\nencompass to improve efficiency and reduce costs while enhancing patient outcomes and hospital capacity within the patient\njourney. By seamlessly merging data-driven techniques with simulation methodologies, the study proposes an all-encompassing\nframework for the optimization of patient flow. Using a comprehensive dataset of 2.3 million de-identified patient records, we\nanalyzed demographics, diagnoses, treatments, services, costs, and charges with machine learning models (Decision Tree,\nLogistic Regression, Random Forest, Adaboost, LightGBM) and Python tools (Spark, AWS clusters, dimensionality reduction).\nOur model predicts patient length of stay (LoS) upon admission using supervised learning algorithms. This hybrid approach\nenables the identification of key factors influencing LoS, offering a robust framework for hospitals to streamline patient flow\nand resource utilization. The research focuses on patient flow corroborates the efficacy of the approach, illustrating decreased\npatient length of stay within a real healthcare environment. The findings underscore the potential of hybrid data-driven models\nin transforming hospital management practices. This innovative methodology provides generally flexible decision-making,\ntraining, and patient flow enhancement; such a system could have huge implications for healthcare administration and overall\nsatisfaction with healthcare.", "sections": [{"title": "1. Introduction", "content": "Health systems worldwide face such scarcities as excess patient\nadmission, lack of resources in public hospitals, and high costs with private\nhealthcare. Length of Stay (LoS) is one of the key metrics in gauging hospital\nefficiency, and it affects operations, availability of beds, and even patient\noutcomes. Accurate prediction of LoS can foster optimum resource utilization,\nreduction of delays, and enhance patient satisfaction.\nCheng and Hu (2009) [1] underscored the impact of LoS on care costs and\nservice quality, forming the basis for predictive systems. Fang et al. (2022) [2]\nproposed a hybrid model combining convolutional neural networks and\nsupport vector machines for predicting traumatic brain injury outcomes. He et\nal. (2019) [3] highlighted simulation modeling's dominance in bed\nmanagement, emphasizing interunit interactions during peak volumes. Ortiz-\nBarrios et al. (2024) [4] examined AI and simulation to mitigate bed shortages,\nidentifying Random Forest as an effective predictive tool.\nChiara Cirrone [5] utilized Lean Six Sigma and super network\nframeworks to optimize emergency department flow. Kieran Stone [6]\nemphasized comprehensive frameworks for LoS prediction using diverse\nparameters, while Deepak Yaduvanshi [7] tackled outpatient queueing issues\nvia queueing theory and SWOT analysis. Studies by Bean et al. [8] and Crilly\net al. [9] highlighted tools like the Patient Admission Prediction Tool (PAPT)\nfor improved patient flow, although limitations like localized data and\ncommunication gaps remain. Lei Zhao [10] applied queueing theory and\nMarkov Chains, and Xin Ma and Yabin Si [11] utilized Just-in-Time Learning\nwith one-class Extreme Learning Machine for LoS prediction.\nChuang et al. [12] demonstrated machine learning classifiers, including\nRandom Forest, SVM, and Gradient Boosting, for LoS predictions. Baek et al.\n(2018) [13] analyzed clinical and administrative variables affecting LoS,\nnoting that diagnoses like cerebral infarction and myocardial infarction\nprolonged stays. Breda et al. (2022) [14] evaluated the Geriatric Fracture\nProgram, demonstrating reduced LoS and costs. Bhadouria and Singh (2023)\n[15] integrated patient profiles and machine learning for LoS and mortality\nprediction, enhancing decision-making.\nLongo et al. (2024) [16] reviewed AI/ML applications in orthopedic LoS\npredictions, while Guo et al. (2023) [17] explored the impact of social\ndeterminants of health on LoS during COVID-19, emphasizing comprehensive\ndata sharing. Sivarajkumar et al. (2023) [18] addressed bias in patient data\nmodels, enhancing equity in predictions. Young et al. (2023) [19] identified\nrisk factors in SARS-CoV-2-positive pregnancies using Random Forest,\nachieving high accuracy. Grill et al. (2011) [20] linked goal attainment in\ngeriatric rehabilitation to improved functioning and shorter LoS.\nIsmail et al. (2012) [21] analyzed predictors of LoS in mood disorder\npatients, finding factors like living alone and frequent admissions to prolong\nstays. Roshanghalb et al. (2024) [22] proposed a data-fusion model integrating\ndiverse clinical data, achieving superior performance. Chen et al. (2024) [23]\nemployed deep learning techniques, combining convolutional neural networks\nand long short-term memory models for accurate LoS predictions. Lastly, Chen\net al. (2023) [24] addressed patient data heterogeneity with a robust data-fusion\nmodel.\nOur research study proposed a hybrid data-driven approach integrating\nmachine learning, process mining, and simulation techniques for LoS\npredictions. Key determinants will be identified through the analysis of various\ndatasets and scalable solutions will be proposed. Results from this study would\naid the hospitals to predict patient needs, optimize resources, and enhance\noperational efficiency."}, {"title": "2. Method", "content": "Length of stay (LoS) in the hospital measures the number of days an\ninpatient spends in the hospital and is critical for improving patient care,\nreducing costs, and optimizing resource utilization. LoS differs widely\namong patients with the same condition, depending on patient\ncharacteristics, complications, and treatment complexity. Reliable LoS\nprediction allows for better healthcare planning such as staff allocations,\nadmissions, and optimizing the use of beds while improving operational\nefficiency. Reliable models will enable hospitals to adopt preventive\nmeasures that may reduce the risk of falls, infections, and medication\nerrors that usually occur during prolonged stays. For patients, shorter LoS\npromotes quicker recovery in preferred settings like home care. From a\nhealthcare provider's perspective, reducing LoS improves resource\nallocation, benefiting more patients. While prior studies categorize\npatients by health issues with suggested LoS ranges, accurate prediction\nremains challenging due to diverse influencing factors. This paper\nproposes a robust LoS prediction approach to ensure consistent,\nactionable insights across healthcare settings, with Fig. 3 presenting the\nstudy's workflow."}, {"title": "2.1 LoS & PLoS", "content": "Length of Stay (LoS) refers to the stay of a patient in the hospital from\nadmission to discharge. It is a crucial measure most hospitals utilize for\nunderstanding and managing patient flow, resource allocation, and overall\nefficiency within the hospital. LoS has commonly been used to evaluate\nthe quality of care, improve hospital operations, and manage the costs of\nhealthcare. Prolonged Length of Stay (Prolonged LoS) occurs when a\npatient's hospital stay extends beyond the expected or standard duration\nfor their specific diagnosis or procedure. This extended stay can result\nfrom various factors such as complications, comorbidities, delays in\ntreatment, discharge planning issues, or social circumstances. Prolonged\nLoS can indicate potential inefficiencies in care delivery and may lead to\nincreased healthcare costs, higher risk of hospital-acquired infections, and\ngreater strain on hospital resources. Reducing prolonged LoS is a key\nobjective for healthcare providers to improve patient outcomes and\noptimize resource utilization."}, {"title": "2.2 Patient Flow", "content": "Fig.1. presents the Patient flow network topology to the structure and\ninterconnectedness of various units, departments, and pathways within a\nhealthcare facility that patients navigate during their care journey.\nTopology may include different units such as emergency departments,\noutpatient clinics, inpatient wards, operating rooms, diagnostic centers,\nand other specialized areas. It also encompasses the pathways and\ntransition patients follow, from admission and triage to treatment,\nmonitoring, and eventual discharge or transfer."}, {"title": "2.3 Cause & Effect - Ishikawa Diagram", "content": "The central problem \"Long Queued Patient Flow in Public Hospital\" is shown\nin the diagram. The main causes are categorized into four groups: Process\nFactors, Resource Factors, Communication Factors, and External Factors\n(shown in Fig.2.)\nEach cause is further divided into sub causes that contribute to the extended\nwaiting times for patients in a public hospital. Some causes are:\nAn inefficient triage process (cause) can lead to prolonged waiting\ntimes for patients (effect).\nInsufficient staffing in inpatient wards can lead to overcrowding and\ndelays in allocating beds for admitted patients.\nPoor communication between different departments responsible for\npatient care transitions.\nIf scheduling of diagnostic procedures and tests is done\nindiscriminately without coordination, it would lead to a longer stay\nof patients waiting for test results. This could affect the flow of\npatients and increase resource utilization."}, {"title": "2.4 Data Collection", "content": "A wide variety of data types are needed in order to anticipate patient's LoS\nusing machine learning. The dataset, available at New York State Government\nHealth Data Website and provided by NY Department of Health includes over\n2.3 million rows of de-identified inpatient discharge information. This data\ncontains a variety of variables associated with individual patient information,\nmedical codes, and hospital details, including Service Area, Facility ID, Age\nGroup, Gender, Length of Stay, Type of Admission, and diagnostic and\nprocedural codes. Such abundant data lend themselves to numerous\ninvestigations, including machine learning models predicting hospital LOS.\nThis rich data is essential for designing accurate predictive models that will\nsupport health-care planning and resource allocation."}, {"title": "2.5 Data Pre-Processing and Visualization", "content": "Before any analysis starts, exploring the dataset is instrumental in making\nbetter-informed decisions. It also allows the determination of issues such as\nmissing values or outliers. At the same time, it assists in the selection of the\nright statistical techniques, helping people observe trends and relationships.\nProcess of data cleaning: Data cleaning is the exercise of cleaning information\nsuch that issues include some aspects of missing values, outliers in a dataset,\nand noise within it. This process may include techniques like imputing missing\nvalues, removing outlier values, or filtering out noisy data points to ensure\nhigh levels of quality or reliable dataset. We removed the variables of License\nNumber, Payment Typology 2,3, Zip Code 3 digits, Facility Id, Attending\nProvider License Number, which did not aid our analysis. Further, we\nexamined the relationship between the numerical variables and established\nthose by correlation heatmaps.\nFrom our first glance at the correlation map, it's clear that some features are\ntightly connected, and importantly, with the length of stay. While not all\ncolumns in the correlation matrix are meaningful to analyze we can spot some\nnotable relationships. The severity of illness code, along with total costs,\nshows a strong positive correlation with the LoS."}, {"title": "2.6 Feature Encoding", "content": "Feature encoding involved transforming categorical columns\ncontaining strings. Categories with corresponding codes, like Severity of\nIllness, were numerically encoded. String indexing was used for a selection\nof characteristics, including Age Group and Risk of Mortality. For instance,\n'0 to 17' received a code of 1, indicating a younger age group. Similarly,\n'Minor' was encoded as 1, while 'Extreme' received 4 in APR Risk of\nMortality. String indexing helps maintain dataset dimensionality and lets\nmodels learn the order among feature categories."}, {"title": "2.7 Applying Bins", "content": "We use a multi-class classification strategy to predict hospital stays\nlasting from one to 120 days. Rather than treating each day as a separate\nclass, we divide them into relevant categories. This strategy strikes a\nbalance between model accuracy and forecast specificity. Our final bins are\nas follows: 1-5, 6-10, 11-20, 21-30, 31-50, and 50-120 days. The Fig: 13\nclearly indicates a huge class imbalance in the dataset."}, {"title": "2.8 Principal Component Analysis", "content": "Principal Component Analysis (PCA) is a versatile technique that can\nhandle datasets with various characteristics like correlated variables,\nmissing data, and outliers. Its goal is to identify the key information in the\ndata and express it as principal components - summary indices that capture\nthe most variance. PCA finds the principal part that are orthogonal linear\ncombinations of the actual variables, with the first component capturing the\nmost variance.\nHere, PCA was applied after normalizing the train and test data with\nStandardScaler(). It is useful for reducing dataset dimensionality, which is\nbeneficial for large datasets, while also removing multicollinearity.\nAlthough not primarily designed for mixed numerical/categorical data,\nPCA's performance wasn't significantly impacted here. Importantly, data\nshould always be normalized before PCA because it projects raw data onto\nvariance-maximizing directions by calculating relative distances within\nfeatures. When features have different scales, PCA can be skewed."}, {"title": "2.9 Feature Selection", "content": "Feature selection is a method that aims to improve model performance\nby identifying and retaining only the most related data features while\ndiscarding unnecessary or redundant ones. It involves automatically\nselecting the input variables for the machine learning model that are most\nimportant. From the feature importance plot, we can see that certain feature,\nsuch as the age group, type of admission, risk of mortality, payment\ntypology, and emergency department indicator, play a significant role in\nexplaining the variance in the dataset. These features are likely capturing\nkey information related to the target variable we are trying to predict, and\ntherefore, should be given higher priority during model building and\ninterpretation."}, {"title": "2.10 ML Models Used", "content": "In our research, we sought to compare different models of machine learning\nto predict stay length in hospital; accordingly, each highlighted its own\npositives and unique contribution.\nLogistic Regression (LoR) is a simple yet powerful model that is often used\nin binary classification tasks. It estimates the probability of an outcome\nusing maximum likelihood estimation. The simplicity and easy-to-interpret\nnature of the LoR make it a great tool for interpreting which of the different\ninput features have an impact on predictions.\nDecision Trees (DTs) provide an intuitive and visual method of addressing\nclassification and regression problems. They accomplish this using a\n\"divide-and-conquer\" technique whereby information is progressively\nbroken down into its smaller constituents. It starts with a root node by\nwhich the entire data set is covered, each decision node being linked to a\nfeature-based question, and each leaf node is then the final classification\nprediction. The idea is to split the input data such that different classes will\nnot mix, using metrics such as the GINI index and Information Gain to\nwork out optimal splits A few hyperparameters can be varied to fine-tune\nthe performance and efficiency of the Decision Tree. In particular, the\ngeneral attributes are: n_estimators-hence the number of trees built before\naveraging predictions; max_features-hence the number of features that are\nmaintained while calculating the split; min_samples_leaf-minimum samples\nnecessary for splitting an internal node; max_leaf_nodes-maximum number\nof leaf nodes allowed per tree. The adjustment of these hyperparameters\nallows tuning the model's behavior and thus improving its efficiency."}, {"title": null, "content": "Entropy of a node S, $H(S) = P(0) log2 P(0) - P(1) log2 P(1)$\n(1)\nGini index for node S = $1 - {(P\u2081)\u00b2 + (Po)2}$\n(2)\nNleft\nNright\nInformation Gain, IG(D, f) = $H(D) H(Dleft) H(Dright)$(4)\nN\nN\n(3)\nRandom Forests improve on decision trees by building multiple trees and\naveraging their predictions. This strategy decreases the risk of overfitting,\nwhich occurs when a model is trained well but does badly on previously\nunseen data. By averaging the results of many trees, Random Forests\nprovide more accurate and stable predictions."}, {"title": null, "content": "Final Prediction, $\u0177 = mode {(T\u2081 (x), T2 (x), T\u2081(x)}$\n(5)\nAdaBoost enhances weak learners by putting more emphasis on cases\npreviously misclassified. The weights of the cases are adjusted in each\niteration to improve accuracy. Such an approach leads AdaBoost to\ncombine weak models to yield a strong predictive model and thus enhance\nperformance.\nGradient Boosting builds models sequentially to minimize the prediction\nerrors. Using decision trees as base classifiers, it refines the model\nsequentially by addressing the residual errors of earlier models to improve\naccuracy.\nFinal Prediction, $y(x) = + \u03a3\u039c=1 \u03b7hm(x)$\nLightGBM enhances training and reduces memory utilization via novel\napproaches such as GOSS and EFB.\nObjective Function: $Obj(t) = \u2211 [gif;(xi) +=hif;\u00b2(xi)] + n(fj)$(7)."}, {"title": "3. Result", "content": "In this section we have evaluated the following ML models namely\nLogistic Regression, Decision Tree, Random Forest, AdaBoost, and\nLightGBM to predict Hospital Length of Stay treated as a multiclass\nclassification problem. With the definition of meaningful class bins together\nwith robust evaluation metrics, such as Cohen's Kappa, MCC, F1-score,\nrecall, accuracy, and precision, we guaranteed correct and interpretable\npredictions. Our methodology offers a full-scope focus on predictive\nmodeling in healthcare, emphasizing model selection, tuning, and robust\nevaluation, which ensured the generation of reliable and actionable\npredictive insights leading to informed decision-making in a clinical setting.\nLoS is categorized into discrete bins (e.g 1-5, 6-10) so we use\nclassification metrics.\nAccuracy: The percentage of accurately classified incidents.\nAccuracy\nNumber of Correct Prediction\nTotal Number of Prediction\nPrecision: The ratio of accurately predicted positive findings to total\nanticipated positives.\nPrecision\nTP\nTP + FP\nRecall: The percentage of accurately predicted positive observations to total\nobservations in the actual class.\nRecall\nTP\nTP + FN\nF1-Score: The harmonic mean of Precision and Recall.\nPrecision + Recall\nF1 - Score = 2\nPrecision Recall\nCohen's Kappa: A metric that compares observed accuracy to expected\naccuracy (by chance).\nPo - Pe\n1\nPe\nMatthews Correlation Coefficient (MCC): A metric for the accuracy of\nmulticlass classifications, that considers true and false positives and\nnegatives."}, {"title": null, "content": "TPTN-FP FN\nMCC\nTP + FP)(TP + FN) (TN + FP)(TN + FN)"}, {"title": "5. Conclusion", "content": "One major reason to reduce in length of stay in health care is to\noptimize resource use and improve patient outcomes. Our study revealed\nthat, among the models applied for length-of-stay prediction, LightGBM\nwas the most effective in forecasting. Thus, one has to keep in mind the\nproper training using the most suitable ML method for any given dataset\nand relevant problem. These measures would justify patent clinical early-\nstage decision-making solely on the performance factors of the algorithms\nfor identifying optimal models. Within this study, both Gradient Boosting\n(GB) and Logistic Regression (LoR) has shown themselves to be the most\neffective in identifying a high-risk patient group that has the potential\nbenefit from timely interventions that lead to reduced length of stay. It\noffers insight and the opportunity for informed decision-making for current\nand future patient care. However, by nature, there is no universal agreement\non how one would decide the appropriate model for every specific context\nbecause different model choices depend on data type and analysis goals. A\nthorough evaluation and comparison are, however, to ensure the general\napplicability of models.\nThe study demonstrates the importance of the APR DRG Code as a vital\npredictor of LoS, which classifies patients based on the reason for their\nadmission, illness severity, and risk of death. We built five action-based\nmachine learning models for predicting LoS, then evaluated the output\nusing performance metrics such as accuracy, precision, recall, and F1 score.\nLightGBM model was revealed to perform robustly and would be a suitable\ncandidate in classification-related tasks in predictive analytics and\nhealthcare decision-making. With these advantages, predictive models can,\nfurther, streamline healthcare providers in resource allocation, discharge\nplanning, and patient management. Also, finally, it has been shown that\nthere is 70% accuracy in the prediction of patient LoS based on who was\nadmitted into the study, and this is an insight that could modify healthcare\nmanagement.\nFuture research should design sequential models to estimate total treatment\ncosts based on LoS to help resource allocation and financial planning for\nhealth care systems. Advanced predictive tasks such as LoS prediction after\nsurgeries and critical hospital resources consumption optimization should\nbe covered as well. Additionally, development could be made on a robust\nmanagement system to interface various data analytics to support real-time\nplanning and decisions for health care centers. These enhancements will\nenable improved efficiencies in the delivery of health care and patient care."}, {"title": "Statements of ethical approval", "content": "This article does not contain any studies with human participants or\nanimals performs by any of the authors."}, {"title": "Declaration of Competing Interest", "content": "The authors declare that they have no conflict of interest."}]}