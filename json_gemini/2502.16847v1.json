{"title": "Characterizing Structured versus Unstructured Environments based on Pedestrians' and Vehicles' Motion Trajectories*", "authors": ["Mahsa Golchoubian", "Moojan Ghafurian", "Nasser Lashgarian Azad", "Kerstin Dautenhahn"], "abstract": "Abstract-Trajectory behaviours of pedestrians and vehicles\noperating close to each other can be different in unstructured\ncompared to structured environments. These differences in the\nmotion behaviour are valuable to be considered in the trajectory\nprediction algorithm of an autonomous vehicle. However, the\navailable datasets on pedestrians' and vehicles' trajectories\nthat are commonly used as benchmarks for trajectory pre-\ndiction have not been classified based on the nature of their\nenvironment. On the other hand, the definitions provided for\nunstructured and structured environments are rather quali-\ntative and hard to be used for justifying the type of a given\nenvironment. In this paper, we have compared different existing\ndatasets based on a couple of extracted trajectory features,\nsuch as mean speed and trajectory variability. Through K-\nmeans clustering and generalized linear models, we propose\nmore quantitative measures for distinguishing the two different\ntypes of environments. Our results show that features such as\ntrajectory variability, stop fraction and density of pedestrians\nare different among the two environmental types and can be\nused to classify the existing datasets.", "sections": [{"title": "I. INTRODUCTION", "content": "Many researchers in the area of motion prediction and\nplanning are using the terms structured and unstructured\nenvironments for addressing two distinct application areas\nfor their automated systems [1], [2], [3], [4], [5]. Different\ndefinitions have been proposed in the literature for classi-\nfying these environments into structured and unstructured.\nIn one type of definition that is focused on vehicular traffic\nenvironments, the distinction is made based on the existence\nof lane marks and strict traffic rules (e.g., see [6], [7],\n[8], [9]). Within this definition, a structured environment\nis believed to be a place with clear lane marks and road\ndividers, and where traffic participants adhere to strict traffic\nrules [6]. On the other hand, in an unstructured environment,\nsuch marked lanes or road dividers do not exist and no strict\ntraffic rules are followed by drivers and pedestrians. In un-\nstructured environments, all traffic participants are required\nto pay more attention due to the reduced traffic rules [6].\nPedestrianized spaces and parking lots are considered as\nunstructured environments under this definition [6], [7].\nIn another definition, the coherency of the movement\npattern has been introduced as the aspect that distinguishes\nstructured from unstructured environments [10], [11], [12].\nIn this definition, an environments is called structured when\na main motion track can be identified which is usually\ncaused by a condition in the environment, such as the\npedestrian crosswalks on roads. In contrast, in unstructured\nenvironments, pedestrians can move freely in different di-\nrections [10]. In this definition, unlike the previous one,\na pedestrianized environment can be either structured or\nunstructured based on the existing motion patterns.\nAlthough there are some overlaps between these two\ndefinitions, there are also some differences that make it\nhard to specify whether an environment is structured or\nunstructured solely based on these qualitative definitions.\nDespite the differences in the two definitions provided\nabove, it is agreed in the literature that the behaviours of\ntraffic participants in these two types of environments are\ndifferent. This becomes important for an autonomous vehicle\nthat needs to predict the future motions of other traffic\nparticipants [13], [14], as this prediction will differ based on\nthe type of the environment in which the vehicle is operating.\nMany data-driven trajectory prediction models have been\nproposed for the use of autonomous transportation systems.\nThese models are usually trained on datasets that contain\nreal-world trajectories of pedestrians and vehicles in an\nenvironment. Depending on the type of the environment\nthese datasets have been captured from, the trained predictive\nmodel will also learn the motion behaviour of traffic partici-\npants within the same type of environment. Paying attention\nto this point is crucial when it comes to generalizing the\ntrained motion predictor to other similar environments.\nTherefore, while it is valuable to classify the datasets\nbased on the type of the environment (i.e., unstructured\nversus structured), it is hard to do this classification based on\nthe different qualitative definitions provided in the literature.\nTherefore, the present work investigates how to quantitatively\ndefine the type of environments through evaluating quantita-\ntive features for classifying environments to unstructured and\nstructured, by focusing on the traffic participants' behaviours\nembedded in the trajectories. We use two methods, (a) clus-\ntering, to see if the existing datasets can be divided into two\nclusters showing structured vs. non-structured environments,\nand (b) regression to investigate if our assumptions about\nthe effect of features on identifying the type of environment\nis hold. Based on the existing literature, we assume that\ntraffic participants have similar behaviours in each type of\nenvironment, and based on this similarity we will suggest a\nrelationship between the extracted quantitative features and\nthe structured/unstructured nature of the environment. To the\nbest of our knowledge, this is the first work that proposes a"}, {"title": "II. RELATED WORK", "content": "Pedestrian trajectory prediction is an active field of re-\nsearch with different application areas in autonomous driving\nand social robotics [15]. Various approaches have been used\nfor this trajectory prediction from physics-based models such\nas social force model [16], [17], [18] to data-driven models\nespecially deep learning ones [19], [20], [21]. Corresponding\nto this line of research, many real-world datasets have\nbeen collected from different environments to be used as a\nbenchmark for these trajectory prediction algorithms. While\nthe nature of the environment and vehicles' presence can\nhave a considerable influence on the trajectory profile of\npedestrians, no clear classification has been made between\nthe different datasets based on quantitative measures such as\nthe pedestrians' and vehicles' trajectory features.\nDifferent datasets have been compared in terms of the\ncomplexity of the human trajectories for the prediction task\nby introducing some indicators in [22]. However, the focus\nof this comparison was only on pedestrians' behaviour and\ntherefore mostly included datasets in which pedestrians are\nthe only agent present without being influenced by vehicles.\nRobicquet et al. have detected different classes of naviga-\ntion styles for pedestrians in a dataset based on the different\nways pedestrians handle their interaction in a collision avoid-\nance situation [23]. But it is still unclear how these navigation\nstyles can also be affected by the type of the environment.\nFurthermore, traffic participants' spatial and movement\nbehaviour in different shared space layouts is studied in [24],\nconsidering both vehicles and pedestrians. But the number"}, {"title": "III. DATASETS", "content": "There are a few datasets that include both pedestrians and\nvehicles which are analyzed in this paper, discussed below.\nStanford Drone Dataset (SDD) is a dataset that has been\ncaptured from the campus of Stanford university and con-\nsists of eight different scenes [23]. The dataset includes\ntrajectories of around 19k agents in different classes from\npedestrians, bicyclists, skateboarders to cars, carts, and buses.\nIn this paper, we have analyzed the trajectories of only\npedestrians, cars and carts within four scenes of this dataset\n(hyang, coupa, nexus, death circle) that include a relatively\nhigher percentage of car/cart compared to the other scenes. In\nthis dataset, we filtered out the annotations with \"lost\" value\nof 1 which indicates annotations outside the view screen.\ninD dataset contains trajectories of more than 11K traffic\nparticipants including pedestrians, vehicles, and bicycles\n[26]. The dataset was recorded from four different German\nintersections with two of these intersections being used in\nthe analysis of the current article.\nDUT dataset contains trajectories of pedestrians and ve-\nhicles interacting with each other in two locations on the\ncampus of Dalian University of Technology in China with\nclose to 2K pedestrian and 65 vehicle trajectory data [27].\nOne of the locations is an intersection without a traffic light.\nThe other location is a shared space near a roundabout where\nagents can move freely.\nHamburg Bergedorf Station (HBS) dataset is captured\nfrom a shared space street in Germany near a busy railway\nstation [28]. It includes trajectory data of 1115 pedestrians,\n331 cars and 29 cyclists.\nHC dataset was captured from a shared street in a university\ncampus in Germany [29]. It contains trajectory data of 282\npedestrians, 15 vehicles and 40 cyclists.\nAll the above datasets have been captured from stationary\ncameras or drones. In each of these datasets, the position\ntrack of different agents is provided frame by frame. These\npositions were all transformed to a world cartesian coordinate\nbefore being used for analysis.\nThree of the above datasets (i.e. HBS, HC and the\nroundabout scene of the DUT dataset) are collected from\nshared spaces environments which are defined as urban\nenvironments where the curbs, road surface markings and\ntraffic signs have been removed to encourage different traffic"}, {"title": "IV. METHOD", "content": "For each dataset and for all of its different scenes, we\nextracted thirteen features from the traffic participants' tra-\njectories that could be helpful in distinguishing a structured\nenvironment from an unstructured one. We have categorized\nour extracted features into three sets of pedestrian motion\nfeatures, vehicle motion features, and pedestrian-vehicle in-\nteraction features that are described in order.\nPedestrian motion features: The features that we ex-\ntracted from each individual pedestrian's trajectory were: (a)\nmean speed of pedestrian, (b) stop fraction of pedestrian,\n(c) variability of pedestrian's trajectory, (d) path efficiency\nof pedestrian, (e) pedestrians' path orientation entropy, (f)\ndensity of pedestrians, and (g) density of standing pedestrian.\nThe first three features are related to the speed profile of\nthe pedestrian. We calculated the velocity vector from the\npedestrian's position vector in consecutive frames knowing\nthe frame rate through which the dataset was captured. For\nthe mean speed feature, we calculated the average speed\nof the pedestrian during its whole trajectory. For the stop\nfraction, we computed the percentage of time the pedestrian\nis in a stop along its whole trajectory. We have considered a\npedestrian to be in a stopping position when their speed gets\nlower than 0.5 m/s [25]. Variability of trajectory is defined\nas the trace of the covariance matrix of the speed [25] and\nis calculated according to the equation below:\n$tr(cov(V)) = \\frac{1}{n}\\sum_{i=1}^{n} (v_i - \\bar{v})^2$\nIn this equation, \u2207 is a vector of speeds in different time\nsteps t, (V = [v1, v2, ..., Un]), \u016b is the average speed and n is\nthe total number of time steps that the pedestrian is present\nin the scene.\nWe calculated path efficiency as the ratio of the distance\nbetween the endpoints of the trajectory over the trajectory\nlength and indicates how close the path is to a straight\nline [22]. Some of the datasets have a wider perspective\nof the capturing scene and therefore in those scenes, the\npedestrians' trajectories can deviate from a straight line\ndue to some geometrical constraints in the scene such as\nthe buildings. To compensate for that in the calculation of\nthe path efficiency, we divide the trajectories into smaller\nsections each lasting 4.8 seconds and the path efficiency is\ncalculated using the cumulative value of the smaller sections\nof the trajectory within the formulation. These smaller pieces\nof the trajectory that last 4.8 seconds are called trajlet in\n[22] and are commonly used in trajectory prediction as the\nobservation interval of each agents' trajectory for future\nposition prediction.\nFor the path orientation feature, we calculate the angle\nof the straight line connecting the start and endpoint of each\ntrajlet relative to a global horizon. However, the exact number\nof the path orientation is not important and cannot be com-\npared between the different datasets due to the inconsistency\nof the orientation of their global Cartesian frame. In fact,\nwhat is important is the diversity of the path orientation\nwithin each environment that could represent the pedestrians'\nlevel of freedom in selecting their movement direction. For\nmeasuring this diversity, we calculate the entropy of the path\norientation for each dataset and keep it as a feature.\nAll the above features are calculated for the pedestri-\nans that are not stationary throughout the whole dataset.\nStationary pedestrians are considered as those with a stop\nfraction of more than 90% and are excluded from the above\nfeature calculations as those features are not meaningful for\nstationary pedestrians and the calculations are prone to high\nerror for pedestrians that have a speed of more than 0.5\nm/s only at 10% of their whole trajectory. However, for\ncalculating the density of the pedestrians, all the moving\nand standing pedestrians are being considered and their total\nnumber is divided by the area of the scene from which the\ndataset is being captured. As the stationary pedestrians were\nignored in the first 5 features, we added a last feature that\nspecifies the density of standing pedestrians in the dataset.\nThese two density features are calculated for each pedestrian\nas the average density while the pedestrian is present in\nthe scene since the density of the crowd could affect each\nindividual's motion behaviour.\nVehicle motion features: From the vehicle trajectory data\nwe extracted: (a) mean speed of the vehicle, (b) stop fraction\nof the vehicle, and (c) variability of vehicle's trajectory.\nWe defined and calculated these features in the same way\nas in the pedestrian features. The only difference is in the\nstop fraction feature, where a vehicle is considered to be in\na stop when its speed is less than 1 m/s. Same as in the\npedestrians feature, here we also exclude vehicles that have\na means speed of less than 0.5 m/s throughout their whole\npresence which is used as an indication for a parked vehicle.\nPedestrian-vehicle interaction features: The way pedes-\ntrians and vehicles interact in a structured vs. unstructured\nenvironment can also be very different. In an unstructured\nenvironment as there are no pre-specified paths or lane\nmarks present [7], pedestrians and vehicles can approach one"}, {"title": "V. RESULTS AND DISCUSSION", "content": "The mean and 95% confidence intervals for each feature\nare shown in Figs. 2, 3, and 4. Note that the different scenes\nof each dataset are plotted separately. According to Fig. 2,\npedestrians in the SDD dataset have higher stop fraction and\ntrajectory variability with a lower path efficiency compared\nto the other datasets. In Fig. 2f, it is observed that the DUT\ndataset has the highest pedestrian density as it has been\ncaptured from a small congested area, but the density of\nstanding pedestrians is higher in SDD according to Fig 2g.\nThe highest vehicle mean speed is from the inD dataset as\nit is being captured from a typical road environment (Fig 3).\nThe inD dataset also has the highest ration of vehicles to\npedestrians among all the datasets (Fig. 4c) and also the\nhighest percentage of vehicle priority (Fig. 4b).\nThe clustering results for each dataset based on these\nthirteen defined trajectory features is shown in Fig. 5. This\nfigure shows the percentage of the dataset that goes into each\nof the two clusters, A and B. For majority of the dataset, all\nthe data points stand unanimously within one cluster.\nAccording to this clustering result, cluster A which con-\ntains the four different scenes of the SDD dataset represents\ntrajectory behaviours that happen in a campus environment\nand mainly off the road. All the other datasets fall into\nthe second cluster, cluster B, which contains mostly road\nenvironments having either a conventional structure with\ndesignated operational areas for pedestrians and vehicles or\nhaving the design of a shared street.\nBy assigning all the points in a dataset to a label that\nrepresents the label of the majority of the points in that\ndataset from the k-means clustering, we have then compared\nthe values of each feature between the two clusters in Figs.\n6-8. In these figures, the mean value of each feature is shown\nwith the 95% confidence interval. The statistical analysis\nusing linear mixed-effects models (LMMs) [31] for each\nfeature separately while considering the dataset as a random\neffect shows that pedestrians' stop fraction (se = 0.005, t =\n-91.06, p < 0.001), the variability of pedestrians' trajectory\n(se = 0.069, t = \u221230.11,p < 0.001), and the pedestrians'\npath efficiency (se = 0.023, t = 4.731, p < 0.05) are signif-\nicantly different among the two clusters. The path efficiency\nis significantly lower in cluster A compared to cluster B. In\naddition, the density of standing pedestrians has significantly\ndifferent values in the two clusters (se = 1.82e\n      5, t =\n-30.86, p < 0.001). Among the vehicle-related features, the\nstop fraction of the vehicle (se = 0.051, t = \u22124.157, p <\n0.05) is significantly different between the two clusters.\nFor considering the effect of pedestrians' features all\ntogether, we fitted a generalized linear model (GLM, using\nmaximum likelihood estimation) for predicting the label\nof clusters. All the features were centred to have a mean\nof zero for this analysis. To avoid collinearity, pedestrian\nfeatures that only had no or low correlation (< 0.3) with\neach other were selected as fixed effects, and to improve\nmodel fit, the combination resulting in the least AIC was\nconsidered, which is reported in Table I. The result of the\nGLM shows that all the three fixed effects of mean speed,\nvariability, and average pedestrian density had a significant\neffect on the clustering result. Using other combinations\nof non-correlating features, other pedestrian features not\nconsidered in the model of Table I also had significant effects\non predicting the clustering result. We also added the dataset"}, {"title": "VI. LIMITATIONS AND FUTURE WORK", "content": "Our work had limitations. The number of existing datasets\nthat include both pedestrians and vehicles is limited espe-\ncially when it takes place outside the road structure, which\nis closer to the definition of an unstructured environment.\nAn unstructured environment similar to the SDD dataset can\nbe also found in other areas, such as in airport terminals\nand shopping malls, for which we could not find any data.\nTherefore, cluster A in our results only contains one major\ndataset (SDD) with its different scenes. Although having\nmore datasets that could have fallen under cluster A would\nhave strengthened our argument about the clusters represent-\ning unstructured vs. structured environments, there is still a\nclear difference between the SDD dataset and all the other\ndatasets which are believed to be a result of the different\nnature of the environments.\nThe other limitation comes from the differences between\nthe field of view and the geometry of the environments where\nthe data were captured from, with some datasets (e.g. DUT)\nbeing more focused on a small area as opposed to the others\nthat have covered a wider region (e.g. in, SDD). This would\naffect the length of the trajectory for each agent present in\nthe dataset with shorter trajectories probably showing fewer\nvariations in the trajectory profile due to limited information\navailable from them. Further analysis on a larger set of\ndatasets from various environments in which both pedestrians\nand vehicles are present could help address these limitations.\nAlthough we tried to be comprehensive in the list of\nfeatures extracted based on agents' trajectories, there could\nbe other features that have not been considered which could\nreveal other differences between the two environment types.\nMore features can be investigated in the future, as well as\nusing a larger dataset that contains more examples of unstruc-\ntured environments, which, to the best of our knowledge, is"}, {"title": "VII. CONCLUSION", "content": "We studied the differences in the trajectory features of five\nexisting datasets that contain both pedestrians and vehicles.\nAfter dividing the datasets into two clusters based on 13\ndifferent features related to agents' motion trajectories, we\nstudied the effect of trajectory features on distinguishing\nbetween unstructured or structured nature of the captured\nenvironment. Among the resulting two clusters, one included\nmainly road-like environments which we named structured\nenvironment and the other class that contained scenes from\na campus environment happening mainly outside of a road\nstructure, was interpreted to be the unstructured environment\nclass. We discussed the differences between the motion\nbehaviours of vehicles and agents in structured and un-\nstructured environments and provided a quantitative measure\nfor distinguishing between these environments. Considering\nthese features, one can then use the related dataset for the\nsimilar type of environment to train a pedestrian trajectory\npredictor for learning the behavioural elements that are\nprobable to be seen in the same type of environment."}]}