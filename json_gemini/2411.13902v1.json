{"title": "PIORS: Personalized Intelligent Outpatient Reception based on Large Language Model with Multi-Agents Medical Scenario Simulation", "authors": ["Zhijie Bao", "Qingyun Liu", "Ying Guo", "Zhengqiang Ye", "Jun Shen", "Shirong Xie", "Jiajie Peng", "Xuanjing Huang", "Zhongyu Wei"], "abstract": "In China, receptionist nurses face overwhelming workloads in outpatient settings, limiting their time and attention for each patient and ultimately reducing service quality. In this paper, we present the Personalized Intelligent Outpatient Reception System (PIORS). This system integrates an LLM-based reception nurse and a collaboration between LLM and hospital information system (HIS) into real outpatient reception setting, aiming to deliver personalized, high-quality, and efficient reception services. Additionally, to enhance the performance of LLMs in real-world healthcare scenarios, we propose a medical conversational data generation framework named Service Flow aware Medical Scenario Simulation (SFMSS), aiming to adapt the LLM to the real-world environments and PIORS settings. We evaluate the effectiveness of PIORS and SFMSS through automatic and human assessments involving 15 users and 15 clinical experts. The results demonstrate that PIORS-Nurse outperforms all baselines, including the current state-of-the-art model GPT-40, and aligns with human preferences and clinical needs. Further details and demo can be found at https://github.com/FudanDISC/PIORS", "sections": [{"title": "1 Introduction", "content": "Outpatient reception play a crucial role in daily hospital workflow. Receptionist nurses are responsible for guiding patients to the appropriate departments and addressing their questions and concerns regarding general administration and primary care. An effective and empathetic supportive conversation will ease patients' anxiety and discomfort, improve their medical adherence, facilitate subsequent diagnosis and is the cornerstone of the overall positive experience. \nIn 2023, China recorded an astounding 9.3 billion outpatient visits, representing a 13% increase from the previous year (of the PRC, 2024). This surge highlights the immerse burden on the healthcare system and ongoing challenges in the efficiency of hospital administration. Previous study indicate that receptionist nurses are required to address nearly one case per minute, communicating an average of 2,149.2 words per hour. This overwhelming workload restricts the time and attention available for each patient, leading to a limited quality of services provided. Moreover, patients often spend meaningless time in the waiting during the outpatient process, which could be utilized more productively to improve overall efficiency.\nGiven the remarkable capabilities and cost-effectiveness of large language models (LLMs), integrating them into the outpatient reception workflow presents a promising solution for these issues. \nIn this paper, we develop Personalized Intelligent Outpatient Reception System (PIORS), which integrates an LLM-based reception nurse into real outpatient reception setting to deliver personalized, high-quality, and efficient reception services. The system is detailed in Figure 1, which include four participants, a patient, a reception nurse, the clinical doctor and a information assistant, and is integrated with the hospital information system (HIS). The LLM nurse can access and maintain patients' information with assistance from a"}, {"title": "2 Personalized Intelligent Outpatient Reception System (PIORS)", "content": "The service processes of PIORS involves four paticipants, a patient, anurse, a information assistant and the clinical doctor, and is integrated with the hospital information system (HIS). Among these, nurse and information assistant are two LLM agents, specific to PIORS-Nurse (the development details is provided in \u00a74.2) and HospInfo-Assistant respectively.\nDuring the reception, PIORS-Nurse interacts with the patient to gather essential medical information and address their questions and concerns regarding administration and primary care. The medical information is used to guide them to the appropriate department or enhance the consultation of primary care. This interaction is enhanced by the HospInfo-Assistant, which make hospital information and patient archives available to PIORS-Nurse, enabling the provision of personalized and high-quality service. Following the reception process, details such as symptoms and medical history are updated in the patient archives and made available to clinical doctors, enhancing the efficiency of outpatient processes and reducing the workload of physicians."}, {"title": "2.1 Workflow", "content": "Patient Intake The outpatient visit begins when a patient enters the hospital, where PIORS-Nurse receives the patient, conducts a pre-consultation to gather information about the chief complient and medical history, and provides appropriate department recommendation. Notably, for follow-up visits, PIORS-Nurse will raise retrieval requests for the corresponding initial consultation record and provides personalized inquiries based on this information. HospInfo-Assistant executes the retrieval query, obtains results from HIS, and forwards them to PIORS-Nurse.\nRecord Documentation and Handoff At the conclusion of the conversation, PIORS-Nurse will summarize the dialogue to extract pre-diagnosis information, hand this information to subsequent clinical doctors, and send a record creation request to the HospInfo-Assistant. The assistant will then create a medical record in HIS, documenting the patient's basic information (name, gender, ID, and age), chief complaint, department assignment, and relevant medical history, including present illness history, past medical history, and drug allergy history."}, {"title": "2.2 Duties of Nurse in PIORS", "content": "Reception nurses manage the patient intake process, responsible for guiding patients, addressing their basic inquiries and documenting their information. Based on the demand in outpatient reception scenario, we summarize the nurses' core responsibilities below.\nOffer department guidance. Ask patients for reasons coming to hospital and provide appropriate department recommendation based on their complaints. When the patient's description is too vague and precise department guidance is challenging, additional inquiry should be conducted.\nGather pre-diagnosis information. Further collect the detailed symptoms and medical history after the department recommendation is made. Mainly focus on chief complaint, history of present illness and past medical history. For follow-up visits, nurses should inquire about changes in symptoms, adherence to prescribed treatment, and other relevant aspects of the patient's progress.\nAdministrative and primary care consultation. Respond to patient queries about services, procedures and policies of hospital, provide clear and concise answers. Explain medical-related questions that patients may not understand, and address basic medical inquiries without offering specific medical advice.\nPersonalized service and Empathetic support. Greet patients and make them feel welcomed and comfortable. Ease patients when they feel anxiety or panic. Offer personalized service based on the patient's conditions and concerns."}, {"title": "2.3 Composition of Nurse Agent", "content": "We design a nurse agent composed of three key components: an interaction module for communication with patients, a query generation module for information retrieval, and a summarization module that extracts pre-diagnosis information from the dialogue.\nInteraction Module The core component of the nurse agent, interacting directly with patients, address their questions and concerns regarding administration and primary care and guiding them to appropriate departments. It generates response based on the dialogue history, and will refer to retrieved information if given.\nQuery Generation Module This module first determines whether external information, such as hospital administrative information or patient archives, from HIS is needed and then generates a relevant query if required.\nSummarization Module Iteratively extract symptoms and medical history from each turn of the dialogue, beginning with the first turn. For each subsequent turn, incorporate previously extracted information along with the new dialogue round to refine and expand the extracted information. Then summarize these information as medical record creation instruction and a pre-diagnosis report for subsequent clinical doctors."}, {"title": "2.4 HospInfo-Assistant", "content": "HospInfo-Assistant receives natural language instructions, extracts structured parameters, and calls APIs to interact with HIS. We prompt GPT-4-turbo to finish the process.\nPatient Archives Management The assistant manages patient archives through creating, selecting, updating, and deleting medical records. The assistant can identify the required operation and parameters from natural language input, then invoke the appropriate API to execute the operation. Personal information can be accessed by querying the medical records associated with the patient ID and is well-maintained.\nAdministrative Information Retrieval When a administrative query is received, such as questions about the department locations or real-time physician schedules, HospInfo-Assistant will extracts"}, {"title": "2.5 Promising Extensions in PIORS", "content": "The system has the potential to expand to cover services during outpatient visits and post-visit care. The nurse agent in PIORS can be readily extended with additional functional modules, promising broad applicability across various tasks, including report explanation, outpatient flow management, and post-consultation follow-up. Further extend the accessibility of HospInfo-Assistant, automated payment, examination planning and booking will become possible."}, {"title": "3 Service Flow aware Medical Scenario Simulation (SFMSS)", "content": "Based on the needs of real-world medical scenarios, we propose a simulation-based data generation framework, named Service Flow aware Medical Scenario Simulation (SFMSS), to construct a high-quality dataset that captures the expected behavior of the reception nurse (\u00a72.2) and realistic patient interactions.\nThe SFMSS targets on the medical senario of outpatient reception and comprises three main LLM agents: a reception nurse simulator (referred to as 'nurse') and a patient simulator (referred to as 'patient') for conducting outpatient reception conversation, as well as a supervisor agent to refine the behavior of nurse. Simulators are built on the real-world data seed as input and employ the the role-playing capabilities of LLMs for dialogue generation. Given the modeling of actions and service flow, SFMSS ensures the conversations progress in alignment with medical objectives like department guiding in our scenario, facilitating goal-oriented decision-making. Appendix B contains all the prompts of the SFMSS."}, {"title": "3.1 Overall workflow", "content": "Scenario Preparing: SFMSS utilize LLMs to generate scenario settings and patient profiles for agent initialization based on outpatient records, personality traits, and demographic characteristics. Detailed medical conditions and visiting department are provided to agents as references for information gathering and decision-making.\nConversation Simulation: The conversation starts by a patient expresses the initial demand for healthcare services. Then followed by a"}, {"title": "3.2 Reception nurse simulator", "content": "Under outpatient reception scenario, the nurse conducts pre-consultation with patients, guiding them to correct department. To control the overall service flow in our scenario, we design a three-step pipeline and pre-define an action space, enabling the nurse to be aware of and follow the service flow.\nAction space definition Based on the primary tasks of the reception nurse outlining in \u00a72.2, we carefully define the seven actions of the nurse simulator with guidance from clinical experts: (1) Symptom inquiry, (2) Medical history inquiry, (3) Department recommendation, (4) Priority assistance, (5) Medical question answering, (6) Administrative question answering, (7) Conclusion and confirmation. Further descriptions of the actions, depending on the type of visit, are provided in Appendix C.\nPipeline In each round conversation, given the dialogue history, the response from the nurse simulator is generated through the following three-step process. (1) Action Decision. An action selector identifies the most suitable action from the pre-defined action space and retrieves corresponding description. (2) Reflection with Feedback. The agent receives feedback from the supervisor and make modification to the chosen action if needed. (3) Response Generation. The simulator generates the final response for this turn based on the dialogue history, medical conditions from outpatient case, specific of selected action and suggestions provided by supervisor."}, {"title": "3.3 Patient simulator", "content": "We incorporate personality simulation into the patient simulator, and generate diverse patients with distinct communication styles and complex behavioral logic. This diversity contributes to better alignment with real-world scenarios.\nPersonality simulation We derive the Big Five personality traits and demographic characteristics from real-world to simulate characters of the patient. This include gender, age, incoming level,"}, {"title": "3.4 Supervisor agent", "content": "The supervisor agent is designed to oversee the overall quality of dialogue and the completeness of information gathering. After each patient response, it provides two suggestions to the nurse agent. The supervisor agent comprises two sub-agents.\nDialogue quality. The dialogue quality supervisor mainly focus on monitoring patient emotions and the effectiveness of the dialogue. When the latest input from the patient indicates clear dissatisfaction or when there are multiple rounds of repetitive/ineffective dialogue, appropriate suggestions are given to the nurse agent.\nInformation gathering. The information gathering supervisor consists of three components: a memory bank, an information extractor and a suggestion generator. Whenever the nurse and a patient complete a round of dialogue, the information extractor extract new patient information given in the new round and add them to the memory bank. Then, the suggestion generator will compare the known memory bank and the true patient profile, and determine if the information collected is complete. If it is not completed, it will provide recommendations and corresponding action for further information collection."}, {"title": "4 PIORS-Nurse Development", "content": ""}, {"title": "4.1 Source Dataset", "content": "Real-world Outpatient Records. We collect the year 2023-2024 outpatient record data from a public hospital, which consists of over 750k examples covering 174 departments. Each record primarily consists of the following fields: chief complaint, present illness history, past history, department and preliminary diagnosis. All field names and their detailed descriptions are in the Appendix E.1. The real-world data is noisy and often of low quality, so we filter the records and retained a smaller high-quality dataset containing 25k examples from 36 departments. Then we extract 2,400 records as the training set and 500 records as the test set from the filter dataset through stratified sampling by department. The training set is used to construct the Supervised Fine-Tuning (SFT) dataset, while the test set is used to assess the performance of different models when serving as nurses.\nDistribution of Real Patients The demographic distribution of patients is from Analysis Report of National Health Services Survey in China, 2018 (NHC, 2018). For the BigFive personality traits, we utilize the dataset collected over 1M online questionnaire answers to 50 personality items\u00b9 to represent the real distribution. To transform the data from questionnaire answers to high, low or moderate levels of each trait, we sum up all scores (positive score for high description and negative score for low description) and classify the questionnaire based on the distance between the sum and the median of the whole dataset."}, {"title": "4.2 SFMSS-CD", "content": "We divide the training set into two parts: 2,000 records for first visit simulation and 400 records for follow-up visit simulation.\nWe utilize SFMSS, based on GPT-40, to construct a simulated conversation dataset for outpatient reception, named SFMSS-CD. To accommodate different types of visits, we define two distinct action space descriptions for for the nurse and patient simulators, each designed to reflect their respective behaviors in first and follow-up visit scenarios. The detailed descriptions of each action are provided in AppendixC. SFMSS-CD is composed of two parts: 2,000 first-visit conversations generated through SFMSS with the first visit action space definition, and 400 follow-up conversations generated using SFMSS with the corresponding follow-up action space definition.\nTogether, SFMSS-CD is a high-fidelity simulated conversation dataset covering 36 departments and various contexts, comprising a total of 2,400 samples."}, {"title": "4.3 Models used in PIORS-Nurse", "content": "PIORS-Nurse consists of three components, interaction module, query generation module and summarization module. For the last two modules, we leverage the capabilities of general-purpose LLMs: the query generation module utilizes GPT-40-mini, while the summarization module employs GPT-40. For interaction module, the core part, we develop a model specifically adapted for real-world outpatient reception scenarios, capable of fulfilling the specified responsibilities of reception nurse."}, {"title": "4.4 Details of Implementation", "content": "Interaction module is fine-tuned on top of Qwen2-7B-Instruct (Yang et al., 2024). Qwen2-7B-Instruct is an open-source LLM with 7 billion parameters, trained and further instruction-tuned on a large-scale dataset that encompasses up to 7 trillion tokens. It exhibits ideal performance, especially in Chinese.\nThe SFT dataset is constructed by integrating 1,000 general-domain conversation and instruction samples with SFMSS-CD, comprising 3,400 samples in total. The general-domian data consists of consists of 500 samples from sharegpt_gpt4, and"}, {"title": "5 Automatic Evaluation", "content": "To evaluate the core component of our system, PIORS-Nurse, we introduce an automatic dynamic evaluation pipeline to assess the performance of different models playing the role as reception nurse, using the test set as simulated patient profiles."}, {"title": "5.1 Evaluation Pipeline", "content": "The whole pipeline includes two parts: dialogue simulation and quality evaluation. First, prompt the selected model to play the role of nurse, then interact with the patient simulator defined in SFMSS under the outpatient reception scenario and derive the simulated dialogue. One conversation ends when patient simulator picks the ending action or the dialogue exceeds 10 rounds. Second, assess the model's performance by evaluating the quality of simulated dialogues."}, {"title": "5.2 Evaluation Metrics", "content": "Based on the core responsibilities of nurses and the needs in outpatient reception scenarios, we design the following four dimensions to assess the performance of different models.\nAccuracy: We evaluate the accuracy by comparing the department recommended by the model with the ground truth label given by human doctors.\nEfficiency: The efficiency can be measured by length of the patient-nurse dialogue. This includes two metrics: Average Turn Number and Average Turn Length.\nInformation Gathering Ability: Collecting symptoms and medical history in advance can facilitate subsequent doctor diagnoses and improve the accuracy of triage. From this perspective, we introduce Info Score for information gathering, and prompt GPT-4o as evaluator to provide a 5-point score, given the true patient profile for reference.\nOverall Performance: To assess the overall performance of a nurse model, we prompted the GPT-40 as evaluator to provide a 5-point Overall Score"}, {"title": "5.3 Baselines", "content": "We first directly prompt current general LLMs GPT-40, Qwen2-7B-Instruct and Meta-Llama-3-8b-instruct to play the role of reception nurse. We also prompt HuaTuoGPT2-13B (Chen et al., 2023), a model specialized in medical domain, to show the gap between traditional training knowledge and complex real-world settings."}, {"title": "5.4 Ablation study", "content": "For further study on the effectiveness of the workflow and functional design of the nurse in PIORS, we introduce an ablated model, service-flow-ablated nurse (SF-ablated nurse), which is fine-tuned with same training settings describe in \u00a74.4, utilizing the data generated solely based on the LLM's parametric knowledge. In this approach, GPT-40 is directly prompted as a nurse simulator given the true department, without a pre-defined action space or supervisor agent, while the patient simulator and scene description remains unchanged. Prompts are provided in Appendix E.2."}, {"title": "5.5 Overall Results", "content": "The overall results are shown in Table 1. PIORS-Nurse ranks the first in all performance metrics, and has the shortest average turn number and average turn length.\nPIORS contributes to more accurate department guidance. PIORS-Nurse demonstrates a significant improvement in accuracy compared to baselines without fine-tuning, demonstrating an 18% increase relative to the Qwen2-7b backbone. Moreover, PIORS-Nurse achieves higher accuracy compared to the SF-ablated nurse, emphasizing that the pre-designed functions and workflow in PIORS contribute to better department guidance. This also demonstrates that the heuristic knowledge is successfully embedded in LLMs through the pre-defined action space and the proposed supervisory agent.\nEnhanced Information Gathering in Patient Intake Process by PIORS PIORS-Nurse outperforms all baseline models by a large margin in Info Score metric. This underscores the model's enhanced pre-diagnosis information-gathering abilities. Distribution of Info Score is in Appendix G.\nEfficient outpatient reception services via PIORS. As shown in Table1, dialogues guided by PIORS-Nurse tend to have the shortest turn length, with over 70 characters fewer compared to the SF-ablated nurse baseline, and the shortest rounds. The total conversation length is significantly shorter compared to all baselines. These results ensure the efficiency and seamlessness communication between PIORS-Nurse and patients."}, {"title": "6 Human Evaluation", "content": "To ensure high-quality evaluations from those with significant medical experience (experts) and from the population who may engage with PIORS in practice (users), we conducted separate assessments for users and experts."}, {"title": "6.1 User Study", "content": "We recruit 15 volunteers to participate in the study, and randomly sample 20 records from test set as patient profiles. Each participant was assigned to simulate the 20 patients sequentially based on given profiles and engage in conversations with PIORS-Nurse, GPT-40, and baseline, respectively. After completing the three conversations in each iteration, they made blind pairwise comparisons of PIORS-Nurse with other two model, selecting from the options: \"A is better than B (Win)\", \"about the same (Tie)\", or \"B is better than A (Loss)\"."}, {"title": "6.2 Expert Evaluation", "content": "We recruit 15 experts, who are currently graduate or PhD students in clinical psychology, or have worked for more than 2 months in this field. Each expert was randomly assigned with 20 samples, each consists of three dialogues from the same simulated patient and different reception nurses role-played by PIORS-Nurse, GPT-40, and SF-ablated nurse. Experts were asked to make two pairwise comparisons between PIORS-Nurse and other two models blindly, and evaluate the fidelity of simulated patients.\nThe comparison options for nurse are the same as those used in the user study. Fidelity is assessed using four levels: \"Extremely High\", \"High\", \"Moderate\" and \"Low\". The detailed definitions of patient fidelity are in Appendix F.2.\nFigure 3 (upper) shows the distribution of expert comparisons. In 80% samples, experts voted PIORS-Nurse has better or comparable performance compared to SF-ablated nurse. And the ratio is even higher when compared to GPT-40. Furthermore, 12 of 15 clinical experts believed that PIORS-Nurse performed the best overall in the evaluation of the 20 samples.\nThe experts highly commended PIORS-Nurse for its proactive inquiry capabilities and concise responses. They noted that PIORS-Nurse's reasoning more closely aligns with that of real-world nurses. Furthermore, they observed that PIORS-Nurse remains focused on department triage throughout the conversation, without being easily diverted by patient input."}, {"title": "7 Further Analysis", "content": "In this section, we provide a more detailed analysis of the experiment results. Further demonstrate SFMSS's ability to simulate complex real-world scenarios."}, {"title": "7.1 Fidelity of Patient Simulation", "content": ""}, {"title": "7.2 Results of Different Patient Simulation", "content": "\nEducation Level From the results of GPT-40 in Figure 5, we can observe that, except for the associate degree, the accuracy of department guiding increases with higher education levels. This is consistent with common sense. The exception may stem from the misalignment of the term \"Associate Degree\" between GPT-40's internal knowledge and its actual meaning in Chinese context. Figure 5 further illustrates the improvements from Qwen2-7B to PIORS-Nurse, especially in higher education level. After embedding the service flow and designed duties through SFT, the model can better addressing tasks in real-world scenarios, where primary and middle school education levels are most prevalent.\nBigFive Personality Traits For Qwen2-7B, patients with specific personalities, such as high extraversion, low openness to experience and high neuroticism are more easy to handle (Figure 6). Such preference can be explained: These personalities tend to provide more information (high extraversion and high neuroticism) or introduce fewer off-topic discussions(low openness to experience). After training, PIORS-Nurse exhibits a more balanced performance across various personality traits, allowing it to better adapt to complex healthcare scenarios."}, {"title": "8 Related Works", "content": "Medical LLMs and its Application Natural Language Processing (NLP) has found extensive application in the medical field. With the advent of large language models (LLMs), significant advancements have been made in developing models specially for healthcare-domain. Models like Med-PaLM2 , DISC-MedLLM , HuatuoGPT-2, Med-Gemini, Aqulia-Med are developed using different datasets, techniques, and frameworks. These efforts primarily focus on enhancing the medical knowledge embedded within language models and often fall short of effectively addressing the complexities of real-world scenarios. Recent"}, {"title": "Scenario Simulation in Healthcare", "content": "Recent developments indicate that agents powered by LLMs can resolve complex tasks through human-like actions, such as tool invocation, role-playing, and reasoning. There is significant potential to bridge the gap between existing LLMs and their real-world applications by leveraging agent roles and scenario simulations. Research such as AI Hospital, AgentClinic, and AIE have created multi-agent simulation environments to evaluate the performance of LLMs in dynamic and interactive healthcare settings. Patient-\u03a8 and CureFun propose approaches to train healthcare workers through simulated patient. However, these studies often neglect to simulate patient personality traits and demographic characteristics. Moreover, there is a lack of research utilizing scenario simulations to generate authentic data for improved real-world healthcare applications. Our work addresses these existing gaps and deficiencies, contributing to the advancement of more effective LLM-driven solutions in healthcare."}, {"title": "9 Conclusion", "content": "In this paper, we propose the following approach to contribute to a more efficient and patient-centered outpatient reception experience: (1) a system named Personalized Intelligent Outpatient Reception System (PIORS), to deliver personalized, high-quality, and efficient reception services. (2) a data generation framework named Service Flow aware Medical Scenario Simulation (SFMSS), to adapt LLMs to the real-world healthcare environments and support to the development of PIORS. Both automatic and human evaluation are conducted to demonstrate the effectiveness of PIORS and SFMSS in enhancing the application of LLMs in outpatient reception. Our framework has potential to transform the application of LLMs in outpatient reception, and be generalized to boarder real-world healthcare applications."}, {"title": "Limitations", "content": "While PIORS and SFMSS demonstrates their effectiveness to contribute to a more efficient and patient-centered healthcare experience authentic, several limitations still remain. There may be regional variations in scenarios due to differences in language, culture, and social organization. As a result, relying solely on medical records from one hospital may limit the model's generalizability. Although the study includes diverse departments and personality simulations, the sample size of 2,400 is relatively small and may not fully capture the complexity of real clinical scenarios, particularly in departments focused on specific diseases. The simulated patient-nurse conversations may deviate from human-to-human interactions and require further validation. Additionally, PIORS have not been validated in real clinical environments. Despite these limitations, PIORS and SFMSS remains highly significant for the application of LLMs in healthcare settings, providing a novel method to enhance the application of LLMs in outpatient reception and boarder healthcare settings."}, {"title": "Ethics Statement", "content": "Participant Recruitment\nWe recruited participants of user study and expert evaluation through online advertising and networks of our co-authors, as well as snowball sampling. Users are adults with normal cognitive abilities, primarily consisting of university students and graduate students from various fields of study. Experts are individuals who have obtained a graduate (Master's or PhD) degree in clinical medicine or a related field, or who are currently pursuing such a degree, or who have at least two months of clinical work experience. We pay for each expert for participation. Users are volunteers.\nInformed Consent\nAll participants in the user study and expert evaluation were 18 or older and provided informed consent. We did not assess any clinical outcomes. All data collected from the participants were de-identified and consented to be released for research purposes."}, {"title": "System and Data Usages", "content": "All the data and framework developed in this work are intended solely for academic research purposes. The framework developed in this work are intended to augment existing outpatient reception serve, not to replace it. Our framework is designed for academic and educational purposes only. Real-world deployment will require further work, including larger-scale training and testing, alignment with departmental and administrative information in real hospitals, and broader user and expert evaluations.\nAll the hospital outpatient records we utilize in the study are de-identified and consented to be released for research purposes, and do not contain and Personally Identifiable Information (PII) of any patients and hospital staff. The data has been anonymized and does not contain any sensitive information. It data is intended solely for academic research purposes."}, {"title": "A Prompts Used in PIORS", "content": "All the prompts provided are translated from the original Chinese version."}, {"title": "A.1 PIORS-Nurse", "content": "Here we provide the prompts used in PIORS-Nurse.\nQuery Generation Module Below we provide the prompts used in the query generation module. First determine whether retrieval is necessary (upper), and then generate a query statement if required (lower)."}, {"title": "Summarization Module", "content": "Below we provide the prompts used in summarization module. Iteratively extract pre-diagnosis information (upper) and summarize for record creation (lower)."}, {"title": "A.2 HospInfo-Assistant", "content": "The prompts used in HospInfo-Assistant for extracting operation parameters are shown below."}, {"title": "B Prompts Used in SFMSS", "content": "All the prompts provided are translated from the original Chinese version."}, {"title": "B.1 Reception Nurse simulator", "content": "Here we provide the prompts used in the reception nurse simulator. Below are the prompts for action decision (upper) and response generation (Lower)."}, {"title": "B.2 Patient simulator", "content": "Patient Profile Generating\nPrompts used for patient profile generating, including behavioural preference (Upper) and scene description (Lower)."}, {"title": "Response Pipeline", "content": "Prompts used inside the patient simulator, including action decision (upper) and response generation (Lower)."}, {"title": "B.3 Supervisor Agent", "content": "Dialogue quality\nBelow is prompts used in dialogue quality supervisor."}, {"title": "C Action Space Definition", "content": ""}, {"title": "C.1 First Visit Scenario", "content": "In first visit scenarios, the action descriptions of reception nurse simulator and patient simulator is defined in Table3 and Table 4."}, {"title": "C.2 Follow-up Scenario", "content": "In follow-up visit scenarios, we refine the action description of reception nurse and patient in Table5 and Table6."}, {"title": "D Personality simulation", "content": ""}, {"title": "E Experiment Setup Details", "content": ""}, {"title": "E.1 Outpatient Records Details", "content": "Each record consists of 17 fields, the field names and their definitions are as follows:\nOutpatient Number: The unique id of an outpatient medical record. Chief Complaint: The primary reason or main symptom for which a patient seeks medical care. History of Present Illness: A detailed account of the patient's current symptoms and medical condition. Past Medical History: A comprehensive summary of a patient's previous health conditions, medical treatments, surgeries, hospitalizations, chronic illnesses, allergies, and medications. It may also include significant family medical history and lifestyle factors like smoking or alcohol use. Department: The specific unit or division within the hospital where a patient is treated. Drug Allergy History: A patient's previous allergic reactions to medications. Age: The age of the patient. Gender: The gender of the patient. Name: The anonymized name of the patient. Visit Time: The registration time of the patient's current visit. Patient ID: The unique ID to identify the patient. Preliminary Diagnosis: The initial assessment or hypothesis made by doctors. Physical Examination: The systematic evaluation of a patient's body by the doctor. Auxiliary examination: Additional diagnostic tests or procedures that are used to support or confirm a diagnosis. Notes: Specially notation given by doctors. Physician signature: The official signature provided by the attending doctor who is responsible for the patient's care. This field has been anonymized. Treatment opinion: The professional recommendations or suggestions provided by a doctor for the patient."}, {"title": "E.2 Prompts for Baselines", "content": "In the automatic evaluation, models are prompted to role-play the reception nurse, with the system prompt in Figure8. The directly prompted baselines also share the same instruction."}, {"title": "F Evaluation Details", "content": ""}, {"title": "F.1 Prompts for Automatic Evaluation", "content": "Here we provide our prompts for automatic evaluation in Figure 10 and Figure 11. (All the prompts provided are translated from the original Chinese version.)"}, {"title": "F.2 Expert Evaluation Details", "content": "Fidelity Options\nExtremely High: Fully consistent with the behavior of real clinical patients. The speech and behavior logic are indistinguishable from real patients, aligning with the characteristics of real patient groups.\nHigh: Closely resemble the behavior and performance of real clinical patients, with only slight deviations. Overall, the simulation maintains the logical consistency and characteristics of real patient groups.\nModerate: The simulated patient's behavior differs noticeably from real clinical patients. The speech and behavior logic appear unnatural, making it difficult to reflect the characteristics of real patient groups.\nLow: The simulated patient's speech and behavior are significantly different from those of real clinical patients. The performance shows clear logical inconsistencies and behavioral issues, resulting in a lack of realism."}]}