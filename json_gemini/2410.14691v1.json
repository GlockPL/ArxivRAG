{"title": "Green vehicle routing problem that jointly optimizes delivery speed and routing based on the characteristics of electric vehicles", "authors": ["YY.Feng"], "abstract": "The abundance of materials and the development of the economy have led to the flourishing of the logistics industry, but have also caused certain pollution. The research on GVRP (Green vehicle routing problem) for planning vehicle routes during transportation to reduce pollution is also increasingly developing. Further exploration is needed on how to integrate these research findings with real vehicles. This paper establishes an energy consumption model using real electric vehicles, fully considering the physical characteristics of each component of the vehicle. To avoid the distortion of energy consumption models affecting the results of route planning. The energy consumption model also incorporates the effects of vehicle start/stop, speed, distance, and load on energy consumption. In addition, a load first speed optimization algorithm was proposed, which selects the most suitable speed between every two delivery points while planning the route. In order to further reduce energy consumption while meeting the time window. Finally, an improved Adaptive Genetic Algorithm is used to solve for the most energy-efficient route. The experiment shows that the results of using this speed optimization algorithm are generally more energy-efficient than those without using this algorithm. The average energy consumption of constant speed delivery at different speeds is 17.16% higher than that after speed optimization. Provided a method that is closer to reality and easier for logistics companies to use. It also enriches the GVRP model.", "sections": [{"title": "1. Introduction", "content": "In conventional green vehicle routing problems, the energy consumption of electric vehicles is mostly calculated using fixed formulas. And many conditions are idealized. First of all, the impact of the vehicle itself includes battery capacity, battery charging and discharging characteristics, motor efficiency and aerodynamic characteristics. For example, the discharge efficiency of the battery supplying energy is different at different discharge voltages. The mechanical efficiency of the motor is also different at different powers. External influencing factors include driving habits, ambient temperature, road conditions, driving speed and vehicle load. The development of electric vehicles is changing with each passing day, and various new technologies are emerging in an endless stream. The electrical performance of batteries and motors is also constantly improving. The energy consumption of vehicles of different models is very different under the same road conditions. When using a fixed energy consumption calculation formula to calculate the actual energy consumption of vehicles of different models, large errors may occur. The previous formula does not conform to the current car. As a result, the energy consumption of the vehicle calculated by the formula in actual application has a certain error with the actual one. The accumulated error will make the theoretical optimal route obtained not actually the optimal route. Therefore, modeling each model of vehicle separately can get more accurate results.\nThis paper first studies the use of simulation methods to model the energy consumption of a real model A electric vehicle. The simulation model can set detailed settings for vehicles and road conditions to obtain a more realistic model. The simulation results of the energy consumption model are compared with the results of actual tests to verify the feasibility of this method. Second, a load first speed optimization algorithm(LsA) is introduced into the GVRP model to actively change the delivery speed to reduce the vehicle's energy"}, {"title": "Electric vehicle energy consumption model", "content": "This chapter proposes a method for obtaining energy consumption formulas under set conditions. Firstly, Simulate and model industrial level energy consumption for real vehicles. Then verify the accuracy of the energy consumption model. The second step is to build simulation scenarios based on the set GVRP conditions. Simulate at different speeds and loads to obtain discrete data on energy consumption corresponding to driving distance. By performing multiple nonlinear regression on these data at different speeds, the specific energy consumption of the real vehicle Model A for any distance traveled with any load under the conditions set by GVRP can be obtained at the same speed. Without the need to be proficient in automotive engineering knowledge, more accurate vehicle energy consumption data can be obtained in actual distribution tasks in subsequent vehicle route planning, making the entire model more realistic and practical."}, {"title": "1.1. Build the vehicle energy consumption module", "content": ""}, {"title": "1.1.1. Motor", "content": "There are constant power and constant torque zones at different speeds. When outputting different torques at the same speed, the efficiency curve of the motor is also different. As shown in formula 2-1, $N_{E}$ is the efficiency of the motor, which depends on the characteristics of the motor itself. $P_{E-in}$ is the input power of the motor, and $P_{E-out}$ is the output power of the motor. In most VRP studies, the calculation of vehicle energy consumption is usually treated as a constant, which is inaccurate in practical applications. When vehicles require different speeds and torques, $n_{E}$ is not the same. To obtain a more accurate energy consumption model, fill in the corresponding $n_{E}$ in the motor module.\n$N_{E} = P_{E-in}/P_{E-out}$ (2-1)"}, {"title": "1.1.2. Battery", "content": "Batteries have a significant impact on vehicle endurance. As the battery discharges, internal chemical reactions will cause the voltage to gradually decrease. Therefore, the output voltage of the battery cannot be directly regarded as a constant and needs to be adjusted in real time according to different levels of power."}, {"title": "1.2. Model accuracy verification", "content": "In order to verify its accuracy, it is necessary to compare the simulation results with the actual results. This article uses the NEDC test results for comparison. The NEDC simulation test was conducted in avl cruise, and the test results are shown in Figure 2.1. The value of $R_{NEDC}$, which reflects the economy of the car, is 4.6253km/kWh. According to formula 2-2, the NEDC simulation test range of Model A, $L'_{NEDC}$, is 232.32km, and $C_{A}$ is the battery capacity of Model A. The difference $\u2206_{NEDC}$ between the simulation result and the measured result $L_{NEDC}$ is calculated by formula 2-3. The calculation results show that $\u2206_{NEDC}$=1%. The accuracy of the simulation process is proved, and the energy consumption model is reliable.\n$L'_{nedc} = R_{nedc}. C_{a}$ (2-2)\n$\u2206_{nedc} = (L_{nedc}-L'_{nedc})/L_{nedC}: 100%$ (2-3)"}, {"title": "1.3. GVRP simulation condition setting", "content": ""}, {"title": "1.3.1. Cycle run profile setting", "content": "Most of the vehicle energy consumption models used in VRP research do not take into account the process of vehicle starting and stopping. Because the start stop process involves the conversion of static friction and rolling friction, the calculation process is relatively complex. However, starting and stopping have a significant impact on the energy consumption of automobiles. This paper sets the car to start and stop at an acceleration of 2m/s2 every 5 kilometers, and cycles until the vehicle reaches its minimum battery capacity. In practice, the distribution roads can be surveyed and appropriate acceleration can be set according to the statistical results."}, {"title": "1.3.2. Speed setting", "content": "This paper sets the delivery speed to three levels: 40, 50, and 60 km/h. In actual driving, it is difficult for vehicles to maintain a unique speed, which represents the average speed between any two delivery points. Setting fewer speed gears can save solving time\u00b9. Excessive grading will only increase computational complexity and will not significantly improve the solution results."}, {"title": "1.4. Calculation and data processing", "content": "At each speed, the vehicle is simulated by adding equal loads until it is fully loaded. The data relationship between the driving distance and energy consumption at each speed and different loads is obtained. The results output by the software are shown in Figure 2.2, Figure 2.3. The lines in the figure represent the load reduction from left to right.\nUse multiple nonlinear regression to process these data. Obtain the accurate energy consumption calculation formula 2-4 for Model A at the same speed. $C_{v}$ is the energy consumption at speed $v$, $p$ is the coefficient of the formula, depending on different speeds, $L$ is the distance traveled by the vehicle, and $W$ is the load on the vehicle. Confidence interval of 95%. The comparison between the results calculated by the energy consumption calculation formula and the simulation data is shown in Figure 2.3. It can be seen from the figure that the result obtained by the energy consumption calculation formula has a high degree of"}, {"title": "GVRP model construction", "content": "This chapter mainly discusses the GVRPtw model based on vehicle characteristics. The minimum energy consumption is taken as the objective function of the GVRP model. Assuming there are n customers (including a starting point and an ending point), the number of vehicles is m, each customer i has a demand quantity $d_{i}$, and the capacity of each vehicle is W, $c_{iis}$ the electricity consumption from customer $i$ to customer $j$."}, {"title": "1.5. Problem description", "content": "(1) The vehicle starts from the distribution center and only carries out the transportation of goods, and no longer receives goods on the way.\n(2) A distribution center from which vehicles depart and eventually return to the distribution center.\n(3) All delivery vehicles are of the same model.\n(4) The location of the distribution center and the customer is determined.\n(5) The vehicle is fully charged before departure.\n(6) The demand of each customer point is also determined."}, {"title": "1.6. Decision variable", "content": "$x^{k}_{ij} = {\\begin{cases} 1, & \\text{If vehicle k is traveling directly from customer i to j} \\\\ 0, & \\text{others} \\end{cases}}$ (3-1)\n$y_{ij} = {\\begin{cases} 1, & \\text{If the vehicle chooses speed } v^{o} \\text{ on the route (i,j)} \\\\ 0, & \\text{others} \\end{cases}}$ (3-2)"}, {"title": "1.7. Mathematical model", "content": "min C = min $\\sum_{i,j\\ep,izj} \\sum_{k}c^{k}_{ij}$ (3-2)\ns. t.\n$\\sum_{i\\ECL,izj}x^{k}_{ij} = 1 \\forall j \\in CL, \\forall k \\in K$ (3-3)\n$\\sum_{j\\ECL,j\u22600}x^{k}_{oj} \u2264 n \\forall k \\in K$ (3-4)\n$0 \u2264 W_{oj} \u2264 W \\forall j \\in P$ (3-5)\n$\\sum_{jEP}W_{ji} - \\sum_{JEP}W_{ij} \u2264 d_{i} \\forall i \\in CL$ (3-6)\n$0CA \u2264 b_{i} \u2264 C_{a} \\forall i \\in P$ (3-7)\n$\\sum_{j=1}^{n}x^{k}_{oj} = 1 \\forall k = 1, ..., m$ (3-8)\n$\\sum_{i=1}^{n}60 = 1 \\forall k = 1, ..., m$ (3-9)\n$\\forall i, j \\in P$ (3-10)\n$\\forall i, j \\in P$ (3-11)\n$k_{i-1}+h_{i-1} \u2264 TW_{i} + T_{a} i\\in CL \\\\{1\\}$ (3-12)\nFormula 3-2 is the objective function, C represents the energy consumption, and the objective function is to minimize the energy consumption. Formula 3-3 indicates that each customer has only one visit. Formula (3-4) indicates that the number of vehicles for delivery cannot be more than the number of customers, and there cannot be empty vehicles. Formula 3-5 indicates that the vehicle does not exceed the vehicle load limit when it departs. Formula 3-6 controls whether the cargo demand of each distribution point is met. Formula 3-7 indicates the range of energy usage in vehicle distribution. Formulas 3-8 and 3-9 indicate that the route of"}, {"title": "Adaptive Genetic Algorithm embedded with LSA", "content": "This chapter proposes the load first speed optimization algorithm (LsA). Being able to save as much energy as possible while meeting the time window. This algorithm is embedded into Adaptive Genetic Algorithm(AGA) to solve the GVRP model in the previous chapter."}, {"title": "1.8. Algorithm Overview", "content": "The general Genetic Algorithm code\u00b2 is improved by introducing the nearest neighborhood and adaptive parameters, and the LsA is embedded in it. The process is shown in the Figure 4.1. In the Genetic Algorithm, the setting of parameters has a significant impact on the performance of the algorithm. Different parameters affect the efficiency of the search, the quality of the solution, and the speed of algorithm convergence."}, {"title": "1.9. Population Initialization", "content": "The quality of the initial solution has a great impact on the solution effect of the entire algorithm. A good initial solution can accelerate the convergence of the objective function in the early stage. But at the same time, it is also necessary to ensure the diversity of the entire population to avoid falling into the local optimal solution. Therefore, two methods are used to generate the initial population. The first is the Nearest Neighbor Heuristic, which is fast and effective. Each time, the nearest unvisited distribution point is selected as the next"}, {"title": "1.10. LsA", "content": "Once the population is obtained, speed optimization based on load first can be performed on each individual. This algorithm is embedded in the Genetic Algorithm, and the speed between any two points can be obtained after planning the route."}, {"title": "1.11. Fitness Function", "content": "The distance between every two points is fixed. By planning the route of each individual vehicle, the load of the vehicle from i toj can be obtained. And the speed plan that has already been obtained. Calculate the energy consumption between each two points according to formula 2-4. Based on the next delivery data, the equivalent distance will be obtained by reversing the energy consumption, and then the equivalent distance will be added to the new delivery distance to obtain the energy consumption of the next point. Then calculate the fitness value of each individual. In the subsequent iteration process, some individuals that do not meet the constraints will be generated. Screen out these individuals and increase their maladaptive values through a penalty function. Let it be eliminated in subsequent iterations."}, {"title": "1.12. Genetic Operators", "content": "Genetic operators imitate the evolutionary process of genes and carry out specific operations on individuals. In this paper, four operators of selection, crossover, mutation and reversal are used.\nWhen solving complex combinatorial optimization problems, Tournament Selection can usually obtain better optimization results quickly. Because the Tournament Selection selects the winner by comparing the fitness values of multiple individuals, it helps to quickly screen out the individuals with higher fitness, thus accelerating the evolution process of the population and improving the convergence speed of the algorithm. The Crossover operator pairs the chromosomes of two parent individuals. Then compare the crossover probability $P_{c}$ with the size of the randomly generated number. If the probability of Crossover is high, Partially Matched Crossover (PMX) is used to exchange some genes between them. Combine the excellent genes of different individuals to produce offspring that are better than their parents.\nThe reversal operator reverses some individuals to test whether the result is better."}, {"title": "Result and Discussion", "content": "In this experiment, the computer CPU used is Intel 12th i7, with 16GB of memory and operating system Windows 11. The dataset used is Solomon\u00b3, a classic dataset in VRP research. Each instance is run 10 times to take an average as a result. This chapter will include the following parts: speed strategy experiment, algorithm applicability verification, vehicle matching analysis."}, {"title": "1.13. Speed strategy experiment", "content": "The speed between every two delivery points will be planned using the LsA. The planned speed is selected between 40, 50, and 60km/h. The vehicle energy consumption is calculated according to formula 2-4. Second, the energy consumption of constant speed distribution is calculated. The constant delivery speeds are 40, 50, and 60km/h respectively. Select the rc200 series in the Solomon, 100 delivery points. The energy consumption of different speed strategies is shown in Table 5-1, which records the best results and average"}, {"title": "Conclusion", "content": "This paper mainly studies the GVRP of joint optimization route and speed. The energy consumption model of electric vehicles is derived from the simulation modeling of real vehicles. The energy consumption effects of vehicle start/stop, speed, distance and load are considered. The speed is planned using the load first speed optimization algorithm. Then the problem is solved using the Adaptive Genetic Algorithm. Experiments show that the results obtained by this method are better than those of constant speed delivery in most cases, and have good wide applicability.\nEnriched the theoretical model of VRP. It also provides a feasible solution for some enterprises or cities that have restrictions on carbon emissions. It is convenient for logistics companies to plan more suitable routes according to the energy consumption characteristics of their vehicles. More physical factors are taken into account to reduce the distortion of the energy consumption model and avoid misleading route planning due to incorrect energy consumption calculation. Setting the speed for each segment will also be easier to achieve in the increasingly popular autonomous driving trucks in the future."}]}