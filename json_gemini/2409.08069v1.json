{"title": "TravelAgent: An AI Assistant for Personalized Travel Planning", "authors": ["Aili Chen", "Xuyang Ge", "Ziquan Fu", "Yanghua Xiao", "Jiangjie Chen"], "abstract": "As global tourism expands and artificial intelligence technology advances, intelligent travel planning services have emerged as a significant research focus. Within dynamic real-world travel scenarios with multi-dimensional constraints, services that support users in automatically creating practical and customized travel itineraries must address three key objectives: Rationality, Comprehensiveness, and Personalization. However, existing systems with rule-based combinations or LLM-based planning methods struggle to fully satisfy these criteria. To overcome the challenges, we introduce TravelAgent\u00b9, a travel planning system powered by large language models (LLMs) designed to provide reasonable, comprehensive, and personalized travel itineraries grounded in dynamic scenarios. TravelAgent comprises four modules: Tool-usage, Recommendation, Planning, and Memory Module. We evaluate TravelAgent's performance with human and simulated users, demonstrating its overall effectiveness in three criteria and confirming the accuracy of personalized recommendations.", "sections": [{"title": "Introduction", "content": "With the growth of global tourism, the demand for automated travel itinerary generation services has surged. Concurrently, travelers seek diverse and personalized experiences more and more. Early platforms (Wikitravellers, 2024; FrommerMedia LLC, 2024) offer static guidance without recommendation or planning. Later systems (Roadtrippers, LLC, 2024; Expedia Group, 2024; Booking Holdings Inc., 2024) provide categorized recommendation and booking services but heavily rely on manual selection and rule-based combinations, unable to autonomously generate itineraries and adapt to dynamic scenarios.\nRecent advancements in artificial intelligence, particularly LLMs, have promoted the development of intelligent travel services. However, despite their effectiveness in traditional tasks, LLMs face challenges in dynamic, real-world applications such as personalized travel planning, which requires considering multiple constraints and real-time information. The TravelPlanner benchmark (Xie et al., 2024) assesses language agents' capabilities in managing these constraints using a dataset of travel scenarios. Results demonstrate that even state-of-the-art LLMs (OpenAI, 2022; Achiam et al., 2023; Team et al., 2023; Jiang et al., 2023, 2024) and planning strategies (Wei et al., 2022; Yao et al., 2022; Shinn et al., 2024) struggle to meet all constraints and produce viable plans.\nDespite rationality considerations, travel services designed for real-world scenarios require comprehensive itineraries incorporating dynamic updates, fine-grained details, and extensive contextual information. Additionally, personalization is also essential for enhancing the quality of services. In this study, we establish three evaluation criteria for itineraries generated by travel planning: Rationality, Comprehensiveness, and Personalization. Each category introduces implementation challenges that travel service systems must address:\n1. Rationalily - How to model constraints in travel scenarios and plan rational itineraries under these constraints?\n2. Comprehensiveness - How to provide comprehensive travel services, including recommendation and planning, make real-time, fine-grained, and interesting itineraries?\n3. Personalization - How to uncover and leverage implicit user personalization information to deliver personalized recommendations and planning services?\nIn this paper, we propose TravelAgent, a novel travel service system powered by LLMs and an"}, {"title": "Related Work", "content": "LLM-based Agent LLM-based agents have demonstrated significant capability in executing multi-step tasks (Wang et al., 2024b), showcasing their potential in fields such as education (Wang et al., 2024b; Swan et al., 2023), healthcare (Zhang et al., 2023), and emotional support (Hasan et al., 2023). To enhance their planning ability, some researchers propose task decomposition methods (Shen et al., 2024; Wang et al., 2023; Singh et al., 2023), while others focus on step-by-step reasoning policies for dynamic planning (Wei et al., 2022; Yao et al., 2024; Besta et al., 2024; Chen et al., 2022; Yao et al., 2022). Additionally, through memory construction (Zhong et al., 2024; Liu et al., 2023b; Hu et al., 2023; Zheng et al., 2023; Huang et al., 2023) and tool use (Schick et al., 2024; Qin et al., 2023; Lu et al., 2024; Wang et al., 2024a; Yuan et al., 2024), LLM-based agents can leverage historical and external resources to better adaptation, making it a promising tool for travel services.\nLLM as Recommendation System With the advent of LLMs, researchers endeavor to leverage LLMs for direct recommendations. Two main approaches have emerged: Direct Recommendation (Dai et al., 2023; Hou et al., 2024; Kang et al., 2023; Wang and Lim, 2023) and Decode and Encode (Zhou et al., 2024; Yang et al., 2023; Liu et al., 2023a). The former prompts LLMs with users' behavioral histories to recommend directly, while the latter decodes a one-time user profile from the last interaction for subsequent recommendations. However, both approaches have limitations in capturing long-term user preferences through multiple interactions, resulting in suboptimal effectiveness."}, {"title": "The TravelAgent System Design", "content": "TravelAgent system is architected into five key modules: (1) Tool-usage Module, which integrates various utilities drawing from real-time dynamic data sources or arithmetic algorithms; (2) Recommendation Module, which delivers personalized travel recommendations tailored to individual preferences; (3) Planning Module, which incorporates budget and route planning functionalities, leveraging budget plan result to guide detailed route plans sensitive to time and geographic constraints; (4) Memory Module, which help to con-"}, {"title": "Constraints Modeling", "content": "The core challenge in travel services lies in handling multi-dimensional constraints in complex real-world travel scenarios. In this work, we categorize these constraints into - (1) Personal Constraints, which are unique to individual users and include Hard Constraints and Soft Constraints; (2) Commonsense Constraints, which encompass general travel knowledge applicable across various scenarios and beneficial to all users. Figure 1 illustrates an initial constraints example.\n\u2022 Personal Constraints 1 - Hard Constraints are both user and scenario-specific, which must be strictly followed. These non-negotiable elements, such as the outbound-/return date, are directly provided by users in the current scenario and reflect their travel objectives, which are essential for Rationality and Personalization of TravelAgent.\n\u2022 Personal Constraints 2 - Soft Constraints are user-specific but cross-scenarios, initiated by historical insights from Memory Module. Instead of explicitly provided by users, they are uncovered gradually by TravelAgent across multiple scenarios and evolve with user interactions. These personalized elements are not mandatory but significantly affect Personalization and user satisfaction.\n\u2022 Commonsense Constraints are general knowledge applicable to users and scenarios, which are initiated by Memory Module and continually learned by TravelAgent. They are crucial for Rationality of itineraries and travel experiences, such as preventing the repetition of dining restaurants."}, {"title": "Tool-usage Module", "content": "TravelAgent integrates various real-time data sources to ensure up-to-date recommendations and plans. Tool-usage Module, which underpins Rationality and Personalization and serves as the core component for enhancing Comprehensiveness, is divided into two categories: real-time API tools and arithmetic algorithm tools. The first category, powered by SerpAPI\u00b2 and Google Maps API\u00b3, includes specialized utilities such as Attraction Tool, designed to fetch high-quality real-time data. The second category comprises tools like Distance and Time Tools, which employ arithmetic algorithms to ensure precise route planning.\nAs shown in Figure 2, after initial constraints modeling, Tool-usage Module extracts structured parameters from Hard Constraints, serving as the principal filter at the tool-call stage. Subsequently, it invokes specific tools according to the targeted recommendation or planning point. The filtered information is then transmitted to Recommenda-"}, {"title": "Recommendation Module", "content": "Recommendation Module serves as the primary component to achieve Personalization of TravelAgent. It diverges from traditional paradigms of recommendation systems by directly leveraging LLM-based agents to perform online recommendations. Inspired by some related work for online Personalization construction (Chidlovskii, 2015; Dalvi et al., 2022; Baek et al., 2024; Ma et al., 2024), we form a data-driven recommendation framework comprises Budget, City, Flight, Hotel, Restaurant, and Attraction Recommender, which continually learns implicit personalization information through multiple interactions.\nRecommendation Module capitalizes on four distinct data sources for recommendations:\n\u2022 In-context Travel Constraints, sourced from the user interface, refers to Hard Constraints provided by users, reflecting their specific needs for the current travel scenario.\n\u2022 Real-time Travel Information, derived from Tool-usage Module, encompasses up-to-date details on various travel options, each characterized by multi-dimensional attributes.\n\u2022 History Insights, retrieved from Memory Module, comprises learned commonsense knowledge, user personas, and past interactions records. These insights dynamically evolve through new interactions and finally re-storing in Memory Module for future use.\n\u2022 Generalized Knowledge, sourced from LLMS, incorporates a wide range of fundamental travel-related knowledge.\nTake attraction recommendation as an instance, the whole worflow is shown in Figure 3 - (A) In-context Constraints Extraction: At the start of a travel scenario, Hard Constraints are initialized based on the user's input from the user interface; (B) History Insights Retrieval: Concurrently, the system retrieves relevant historical insights from Memory Module, initializing implicit constraints, including both soft and commonsense constraints; (C) Real-time Information Gathering: At the attraction recommendation stage, Attraction Tool uses Hard Constraints to fetch up-to-date attraction information; (D) Data-driven Recommendation: Recommendation Module synthesizes all data and leverage LLMs to generate personalized attraction recommendations and visit suggestions; (E) User Behavioral Interactions: Recommendation list, accompanied by contextual information, are presented on the structured user interface for user feedback (like/pass); (F) Items Re-rank Based on user feedback, the Recommendation Module re-ranks the attractions, finalizing the selection for route planning; (G) Implicit Insight Learning: Post-interaction, the system draws new short-term insights relevant to users' persona and commonsense knowledge, updating long-term insights in Memory Module. With this pipeline, TravelAgent can continually learn implicit knowledge and dynamically retain a tailored insight of each user."}, {"title": "Planning Module", "content": "Planning Module comprises Budget Planner and Route Planner. We innovatively integrate budgetary elements into the planning process to enhance the itinerary's Rationality and Comprehensiveness, empowering planning with LLMs and a spatiotemporal-aware route algorithm.\nBudget Planner After initial constraint modeling, Budget Recommender engages LLMs to generate a preliminary budget estimate. Once users confirm their budget, Budget Planner re-evaluates users' financial situation and strategically distributes the budget across six categories: Accommodation, Attractions, Restaurants, Transportation, Other Expenses, and a Reserve Fund, primarily adheres to commonsense knowledge and dynamically adjusts according to other constraints to ensure that the travel plans are economically viable and tailored to the context.\nRoute Planner As shown in Figure 4, guided by the budget plan, multi-day itineraries are dynamically generated using an attraction set pro-"}, {"title": "Attraction Scores Calculation", "content": "For better assessment at (pcur,tcur), we devise Algorithm 1 to score available attractions. For each attraction Ai, firstly check the distance di from pcur to the attraction pi to compute three time-(1) the travel time tcost,i, including both the travel duration at speed v and the recommended visit duration Strec,i; (2) the arrival time Tarr,i (3) the leave time Tdep,i. The scoring mechanism involves three components:\n\u2022 Return Time Score Sret,i, which checks if the total travel time and duration at the A\u00bf fit within the remaining day time tleft.\n\u2022 Optimal Visit Time Score Sopt,i, which evaluates how well the visit aligns with the preferred visiting window Ti.\n\u2022 Reserve Time Score Sleft,i, which optimizes the use of the remaining time, prioritizing efficient day planning."}, {"title": "Memory Module", "content": "Memory Module is designed to promote Personalization and dynamic data processing and consists of two primary components: (1) Short-term Memory stores new user interactions and captures the immediate contextual travel data, constraints, and plans, adapting to the latest user preferences. (2) Long-term Memory retains user data over extended periods, accumulating a comprehensive persona based on historical interactions. It stores stable user preferences, such as a user's consistent interest in eco-friendly attractions or specific dietary requirements. Historical insights allow the system to provide recommendations that align with"}, {"title": "Evaluation", "content": "We conduct simulated and human user evaluations of TravelAgent to verify its performance against the three criteria: Rationality, Comprehensiveness, and Personalization."}, {"title": "Overall Evaluation", "content": "This section presents the results from case studies that evaluated TravelAgent using 20 distinct travel scenarios and user input forms (shown in Appendix D). To establish a baseline, these case studies were also conducted with a typical agent system, the GPT-4+ agent (Achiam et al., 2023), to showcase the performance of the proposed TravelAgent. In this section, human users interact with TravelAgent and the GPT-4+ agent online using these 20 input forms. Throughout the entire workflow and analysis of generated itineraries, human users evaluated three criteria on a scale from 1 to 10: Rationality, Comprehensiveness, and Personalization. Each criterion was assessed according to a predefined set of evaluation dimensions detailed in Appendix E. The average scores are presented in Table 1, and comparative case study examples are detailed in Appendices F and G."}, {"title": "Personalization Evaluation", "content": "To assess Personalization Module of TravelAgent and the performance of our agent-based online recommendation framework, we experiment with 100 simulated users based on GPT-3.5-turbo-0125 (OpenAI, 2022) and 10 travel scenarios and instruct Recommendation Module to suggest 20 attractions per city to each user. Simulated users rate items based on preferences, and TravelAgent predicts these ratings while continually learning over interactions. We compared our method with two popular LLM-based recommendation frameworks: (1) Direct Recommend and (2) Decode and Encode, both lacking memory and continual learning. Evaluation metrics included Mean Absolute Error (MAE) and Root Mean Squared Error (RMSE). Figure 5 shows the trend results over user interactions and our methods' high prediction accuracy, verifying TravelAgent's Personalization."}, {"title": "Conclusion", "content": "In this work, we introduced TravelAgent, a novel travel service system leveraging LLMs and real-time data for automated itinerary generation in real-world scenarios with multi-dimensional constraints. We establish three criteria for travel planning and model travel constraints. To address the challenges, we developed tailored spatiotemporal-aware algorithms and a novel agent-based personalized online recommendation framework enhanced by a real-time data processing mechanism and dynamic memory. We assess TravelAgent through simulated user rating prediction and real-world human case studies. The system delivers rational, comprehensive, and personalized travel services. We hope our work will inspire further exploration of travel services and LLM-based agent applications."}, {"title": "Limitations", "content": "While TravelAgent we proposed aims to address rational and personalized travel itinerary generation for real-world travel scenarios, it is essential to acknowledge certain limitations in our study. Firstly, the system heavily relies on the quality of dynamic real-time data sources; inaccuracies, such as outdated flight information, can result in suboptimal recommendations and impractical final plans. Future research should focus on enhancing the quality and reliability of these data sources to improve adaptability across different travel scenarios. Secondly, a deeper exploration of personalized activities in travel itineraries based on more detailed user personalization information is needed for further improvement."}]}