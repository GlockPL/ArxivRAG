{"title": "Large Language Models can Achieve Social Balance", "authors": ["Pedro Cisneros-Velarde"], "abstract": "Social balance is a concept in sociology which states that if every three individuals in a population achieve certain structures of positive or negative interactions, then the whole population ends up in one faction of positive interactions or divided between two or more antagonistic factions. In this paper, we consider a group of interacting large language models (LLMs) and study how, after continuous interactions, they can achieve social balance. Across three different LLM models, we found that social balance depends on (i) whether interactions are updated based on \"relationships\", \"appraisals\", or \"opinions\"; (ii) whether agents update their interactions based on homophily or influence from their peers; and (iii) the number of simultaneous interactions the LLMs consider. When social balance is achieved, its particular structure of positive or negative interactions depends on these three conditions and are different across LLM models and sizes. The stability of interactions and the justification for their update also vary across models. Thus, social balance is driven by the pre-training and alignment particular to each LLM model.", "sections": [{"title": "1 Introduction", "content": "The relevancy of Large Language Models (LLMs) has been outstanding not only because of their ability to understand natural language [Brown et al., 2020, Xi et al., 2023, Kojima et al., 2022, Wei et al., 2022a,b], but also because of their ability to systematically reason their responses [Wei et al., 2022c, Yao et al., 2023], learn from examples [Wan et al., 2023], express logical and common sense reasoning [Bang et al., 2023], and even behave as economic agents [Horton, 2023b]. Moreover, multi-agent systems or populations of LLMs have demonstrated the ability to express complex opinion dynamics [Chuang et al., 2024a,b, Cisneros-Velarde, 2024]. All these abilities are expressed by the LLM responses, which at the same time are influenced by biases [Liang et al., 2023] that may come from both their pre-training data [Albalak et al., 2024] and from alignment procedures [Christiano et al., 2017] that align the LLM responses to human expectations. The effect of such biases have been extensively analyzed at both individual [Liang et al., 2023, Horton, 2023a, Mo et al., 2024] and multi-agent [Cisneros-Velarde, 2024] levels. In a sociopsychological context, pre-training and alignment also influence how LLMs express [Serapio-Garcia et al., 2023] or assess [Rao et al., 2023] personality traits, as well as any expression of value or judgement [Wang et al., 2024, Sorensen et al., 2024], impacting any display of sociospsychological qualities [Zhou et al., 2024].\nContributing to this increasing literature on LLMs in multi-agent and sociologically relevant scenarios, we study how LLM agents understand positive and negative interactions among themselves in order to update their own interactions with their peers. By interaction, we broadly refer to any type of relationship, opinion, or appraisal that relates an agent with another. To the best of our knowledge, this problem has not been widely studied in the multi-agent setting.\nTo study this problem, we take from the sociological literature the well-established framework of social balance. Consider a group of three or more individuals. Social balance dictates the positive and negative interactions that must be held within every group of three individuals-also known as a triad-in order for the whole group to express sociologically relevant structures. In particular, the concept of structural balance [Heider, 1946] characterizes the sign structures that can lead to the emergence of all individuals having positive interactions with each other, i.e., one faction, or two factions of individuals where individuals have positive interactions within the same faction but negative ones across factions. Within a triad, structural balance is dictated by the so-called \"Heider's rules\u201d: (i) the enemy of an enemy is a friend; (ii) the friend of an enemy is an enemy; (iii) the enemy of a friend is an enemy; (iv) the friend of a friend is a friend. It is argued that when a rule is violated, it generates incoherence in the agent's cognitive system and social"}, {"title": "2 Related Work", "content": "Dynamics of LLM interactions in multi-agent settings. To the best of our knowledge, no prior work has focused on how LLMs update different types of positive or negative interactions (i) without taking a specific persona; (ii) by only observing the current state of such interactions; and (iii) under the framework of social balance. The works [Chuang et al., 2024a,b] focus on how opinions spread and change among LLMs role-playing different persona, and the effect caused by injecting external biases and by the degree of impersonation. The work [Zhou et al., 2024] studies the display of social intelligence in role-playing LLMs, and, among different variables, explicitly considers the effect of family, friend, romantic, acquaintance, and stranger relationships among the agents. The work [Cisneros-Velarde, 2024] takes the LLM as is, and studies the conflict among biases present during opinion exchange. Such work considers opinions that can have a positive, neutral, or negative connotation; however, connotations are not assigned to how agents relate to each other.\nDynamic modeling of signed interactions. Various works in the mathematical sociological modeling literature study how agents process positive and negative interactions. A first line of research studies how established positive and negative ties among agents affect the diffusion of opinions; e.g., social balance is known to lead to polarization of opinions [Shi et al., 2019, Cisneros-Velarde et al., 2021a]. A second line studies models that evolve positive and negative interactions among agents towards structural balance [Marvel et al., 2011, Traag et al., 2013, Mei et al., 2019, Cisneros-Velarde et al., 2021b] and clustering balance [Van de Rijt, 2011, Cisneros-Velarde and Bullo, 2020]. Generally, these works assume that the mathematical equations for the update of interactions are tractable and sociologically plausible, which is difficult to do in non-linear models with billions of parameters such as transformer-based LLMs [Vaswani et al., 2017]."}, {"title": "3 Problem Setting", "content": "We consider a population of m LLM agents of the same model. Consider a triad of (different) Agents i, j, and k (this is the only triad in the population when m = 3). Let $s_{ij}(t) \\in \\{-1, +1\\}$ represent the interaction of Agent i towards Agent j at time t: in the case of relationships, it indicates whether Agent i has a positive or negative relationship with (respect to) Agent j at time t; in the case of appraisals or opinions, it indicates whether Agent i has a positive or negative appraisal or opinion of Agent j. Notice that interactions are directional, thus, it is possible that $s_{ij}(t) \\neq s_{ji}(t)$.\nIt is known that the population achieves structural balance at time t when (i) $s_{ij}(t) = s_{ji}(t)$ for every i, j \u2208 $\\{1,...,m\\}$ := [m], i \u2260 j; and (ii) $s_{ij}(t) \\times s_{jk}(t) \\times s_{ki}(t) = +1$ for every i, j, k \u2208 [m], i \u2260 j \u2260 k [Harary, 1953]. In other words, (i) means that all interactions are symmetrical, and (ii) that every triad must have a positive product of interaction signs along a cycle. In the case of clustering balance, both conditions (i) and (ii) must hold with the additional relaxation of allowing triads such that $s_{ij}(t) + s_{jk}(t) + s_{ki}(t) = -3$ for every i, j, k \u2208 [m], i \u2260 j \u2260 k; i.e., we allow all negative interactions within a triad (see Figure 1).\nLet us consider m = 3, i.e., the population is a single triad. Initially at t = 0, we consider every possible combination of values for $s_{ij}(0) \\in \\{-1, +1\\}$, i, j\u2208 [3], i \u2260 j, which gives us $2^6 = 64$ different sign distributions over the triad. Then, for every iteration t = 1, . . ., 10, we pick every Agent i \u2208 [3] whose interactions towards the other two agents j \u2260 k \u2208 [3] will be updated. Assume Agent i will update its interaction towards Agent j. We first show Agent i the interactions $s_{ik}(t - 1)$ and $s_{kj}(t - 1)$, i.e., how Agent i is currently linked to Agent j through Agent k. Then, in the case of homophily, we show the interaction $s_{ij}(t - 1)$, while in the case of influence, we show the interaction $s_{ji}(t - 1)$. Finally, we ask Agent i what its new interaction towards Agent j will be. We remark that at each of the ten iterations, every agent updates its interactions with every other agent. We run ten simulations per sign distribution over the triad.\nNow let us consider m > 3. Initially at t = 0, we generate n random values for $s_{ij}(0) \\in \\{-1,+1\\}$ for every i,j \u2208 [m]\u00b9, i \u2260 j; i.e., there are n different simulations or sign distributions over the whole population. Then, for every iteration t = 1, . . ., 10, we pick every Agent i \u2208 [m] whose interactions with respect to the other agents $j_{1},..., j_{m-1} \\in [m]$ will be updated. Assume Agent i will update its interaction towards Agent $j_{1}$. Then, we show Agent i the interactions $s_{ij_{k}}(t - 1)$ and $s_{j_{k}j_{1}}(t - 1)$ for every k \u2208 $\\{2, ..., m - 1\\}$, i.e., how Agent i is currently linked to Agent j through every other agent. Then, we show either $s_{ij_{1}}(t - 1)$ or $s_{j_{1}i}(t - 1)$ depending on whether the mechanism is homophily or influence, respectively. Finally, we ask Agent i what its new interaction towards $j_{1}$ will be. We consider two experiments: m = 6 with n = 10, and m = 10 with n = 10.\nPrompt and experimental details are deferred to Appendix A. We point out that every agent was asked to provide a justification for the update of its interactions."}, {"title": "4 Analysis of a Population of a Single Triad", "content": "We first study the case of a population of three LLM agents interacting with each other.\n4.1 Achieving social balance\nOur first main contribution is to show that all three LLM models can achieve social balance, as evidenced in Tables 1 and 2. However, the frequency at which social balance is attained and the sign configurations of the balanced triad (see Figure 1) differ among the models, indicating a possible difference in their pre-training and/or alignment. We note that we could not obtain appropriate updates from Mistral in the case of relationships with homophily. Indeed, Mistral refused to provide an answer to our request, e.g., by stating that the new relationship would be \u201cuncertain\" or impossible to determine given the information provided to it.\nRegarding the type of achieved social balance, we notably find that Llama 3 70B only achieves structural balance (there are no triads with all negative interactions), Llama 3 8B achieves both types of social balance, and Mistral only achieves clustering balance. It is remarkable that only the largest model is able to enforce the stronger concept of social balance.\nRegarding the frequency at which social balance is achieved, the models in the Llama 3 family have settings of interactions and update mechanisms where they achieve social balance in the majority of simulations, whereas the majority of simulations do not achieve social balance for Mistral. Indeed, Llama 3 70B achieves social balance more often than Mistral for every setting. Surprisingly, Llama 3 8B achieves social balance more often than the larger 70B"}, {"title": "4.2 Stability of interactions", "content": "Now that the possibility of achieving social balance is established, we focus on understanding how stable the interactions in a balanced triad are (in any of the five configurations in Figure 1) after repeated interaction updates. To investigate this, we analyze how often an initially balanced triad does not change any of its interactions after ten iterations. For Llama 3 70B, we find that in 46.67% of cases, i.e., 140 out of 300 simulations, the balanced triad stays in the same balanced state. For Llama 3 8B, this is the case in 16.67%, i.e., 50 out of 300 simulations. For Mistral, this is the case in 84.00%, i.e., 210 out of 250 simulations. Although Mistral has a lower number of cases achieving social balance"}, {"title": "4.3 Keyword analysis", "content": "The fact that LLMs can achieve social balance comes, ultimately, from the information encoded in their large number of parameters. However, for the sake of interpretability, we now focus on finding evidence that could indicate LLM"}, {"title": "5 Analysis of Populations of Multiple Triads", "content": "Thus far, we show that social balance can be achieved when a population is composed of a single triad. We now investigate whether LLMs can achieve social balance when there are more triads in a population. In particular, we consider populations of 20 and 120 triads, or, equivalently, of six and ten agents, respectively. We show, indeed, that all three LLM models can achieve social balance for these larger populations in Tables 4 and 5.\nWe observe three notable differences with respect to the single triad case. Firstly, Llama 3 8B achieves social balance more often than Llama 3 70B under relationships by a considerable margin-e.g., with homophily, all simulations achieve balance for the 6B model, but none do for the 70B model. Secondly, Llama 3 8B does not achieve structural balance with all relationships being positive. Thirdly, Llama 3 70B is found to achieve clustering balance. Although it is difficult to know the reason for these three differences and to draw definite conclusions from the restricted number of"}, {"title": "6 Conclusion", "content": "We show that LLMs are able to achieve social balance after the continuous update of their social interactions. In the fundamental case of a triad of LLM agents, we find that the frequency, diversity, and stability of balanced structures vary across models and sizes. In the case of multiple triads in a population, LLMs seem to display different dynamics when updating their social interactions. As future work, we propose studying how achieving social balance is affected by LLMs having memory of past social interactions."}, {"title": "Limitations", "content": "All experiments have the temperature hyperparameter set to zero, which is a legitimate setting for applications where consistency on LLMs' outputs are desired; nonetheless, achieving social balance could be sensitive to this hyperparameter. As mentioned in the paper, it was not possible to obtain useful responses for Mistral in some settings, despite our best efforts on prompt engineering. We also point out that running our experiments was time consuming because of the time spent to run the models' inference and the number of agent interactions. This is the reason why we performed less simulations for the populations of 20 and 120 triads (i.e., six and ten agents, respectively) compared to the population of a single triad. Finally, as in any application where we need to prompt an LLM, we had to make particular choices on how to textually describe (i) the social interactions that involve an LLM agent, and (ii) the question to elicit the update of its interactions."}, {"title": "A Experimental Details", "content": "A.1 Hardware platform\nThe Llama 3 70B, Llama 3 80B, and Mistral are hosted on two, one, and one NVIDIA H100 80GB GPU, respectively, on a PowerEdge R760xa Server, which has two Intel Xeon Gold 6442Y processors, and twelve 64GB RDIMM memory.\nA.2 Hyperparameters\nIn all of our experiments we set the temperature hyperparameter of the LLM models to be zero.\nA.3 Prompt details for the Llama 3 family (both 70B and 8B)\nAssume we are in the case of a single triad, i.e., three agents. Let i, j and k be the numbers associated to specific agents. Assume that at time t > 0, Agent i will update its relationship with j and k. Assuming that it will update it with j under the homophily mechanism, the prompt template is as follows: \"Your current relationship with Individual {j} is {sign of relationship of i with j at time t 1}. Individual {j} has a {sign of relationship of j with k at time t 1} relationship with Individual {k}. Your current relationship with Individual {k} is {sign of relationship of i with k at time t 1}.\\nWill your new relationship with respect to Individual {j} be negative or positive? State the relationship first, and then provide an explanation.\" The sign of a relationship is described by the text values of \u201cpositive\u201d or \u201cnegative\" to the LLM agent. When the update mechanism is influence, the sentence right before the question is replaced by \"Individual {k} has a {sign of relationship of k with i at time t 1} relationship with you.\" The response of the LLM Agent i will be the new sign of its relationship with (respect to) Agent j at time t.\nNow, assume that, instead, Agent i will update its appraisal or opinion of Agent j. Under the homophily mechanism, the prompt template is as follows: \"You have a {sign of appraisal/opinion that i has of j at time t-1} {appraisal/opinion} of Individual {j}. Individual {j} has a {sign of appraisal/opinion that j has of k at time t \u2013 1} {appraisal/opinion} of Individual {k}. You have a {sign of appraisal/opinion that i has of k at time t \u2013 1} {appraisal/opinion} of Individual {k}. \\nWill your new {appraisal/opinion} of Individual {j} be negative or positive? State the appraisal first, and then provide an explanation.\" When the update mechanism is influence, the sentence right before the question is replaced by \"Individual {k} has a {sign of appraisal/opinion that k has of i at time t \u2013 1} {appraisal/opinion} of you.\" The response of the LLM Agent i will be the new sign of its appraisal or opinion of Agent j at time t.\nWe now consider the case of more than three agents. Assume that Agent i will update its interaction towards Agent j1, and that the rest of agents in the population are j2,..., \u0130m\u22121. The main difference in the prompt with respect to the previous case of three agents is that now we have to include the interactions of every single triad Agent i belongs to. Thus, at time t > 0, assuming that Agent i will update its relationship with (respect to) Agent j\u2081 under the homophily mechanism, the prompt template is as follows: \"Your current relationship with Individual {j1} is {sign of relationship of i with j\u2081 at time t 1}.\\nIndividual {j1} has a {sign of relationship of j1 with j2 at time t 1} relationship with Individual {j2}. Your current relationship with Individual {j2} is {sign of relationship of i with j2 at time t 1}.\\nIndividual {j1} has a {sign of relationship of j1 with j3 at time t \u2013 1} relationship with Individual {j3}. Your current relationship with Individual {j3} is {sign of relationship of i with j3 at time t \u2013 1}. (. . .) \\nIndividual {j1} has a {sign of relationship of j\u2081 with jm\u22121 at time t \u2013 1} relationship with Individual {jm\u22121}. Your current relationship with Individual {jm-1} is {sign of relationship of i with jm\u22121 at time t \u2212 1}.\\n\\nWill your new relationship with respect to Individual {j1} be negative or positive? State the relationship first, and then provide an explanation.\" The prompts for the rest of interactions and update mechanisms follow a similar pattern.\nWe point out that in all prompts we use the word \u201cindividual\" instead of \"agent\u201d. The reason for this is that the word \"individual\" is frequently used in the social balance theory literature. Since we are interested in how LLMs process social interactions, the term \u201cindividual", "agent": "o refer to them in our paper. We can find a similar differentiation between terms in the mathematical modeling literature: the term \u201cindividual", "agent\" when referring to the equations that abstracts the \"individual\" into a mathematical variable (see, for example, [Cisneros-Velarde et al., 2021b]).\"\n    },\n    {\n      \"title\": \"A.4 Prompt details for Mistral\",\n      \"content\": \"The prompts for Mistral are almost identical to the ones for the Llama 3 family, except that the last sentence is replaced by another text. In the case of an agent that will update its relationship with (respect to) Agent j, this text becomes: \\\"Your must always choose either a \\\"positive\\\" or \\\"negative\\\" relationship, even if you are uncertain or do not have enough information. Your response must be in the following format:\\n\\\"New relationship: [write here \\\"positive\\\" or \\\"negative\\\"].\\\" and then \\\"Justification for answer: [write here the justification for the new relationship].\\\"\\\" Now, in the case of an agent that will update its appraisal or opinion of Agent j, this text becomes: \\\"Your must always choose either a \\\"positive\\\" or \\\"negative\\\" {appraisal/opinion}, even if you are uncertain or do not have enough information. A \\\"neutral\\\" {appraisal/opinion} is not allowed. Your response must be in the following format:\\n\\\"New {appraisal/opinion}: [write here \\\"positive\\\" or \\\"negative\\\"].\\\" and then \\\"Justification for answer: [write here the justification for the new {appraisal/opinion}].\\\"\\\" These prompt modifications are done for conveniently formatting the output of Mistral, as well as to encourage the LLM to provide useful interaction updates.\"\n    },\n    {\n      \"title\": \"A.5 An additional experimental consideration on Mistral\",\n      \"content\": \"We found that Mistral, despite being asked to update its interactions as either \u201cpositive": "r \u201cnegative\u201d, in some cases, defined \"neutral\u201d interactions for t > 0. Thus, for the particular case of Mistral, we expanded the interactions to consider neutral values represented by the numerical value 0, i.e., $s_{ij}(t) \\in \\{-1, +1,0\\}$ for the interaction of Agent i towards Agent j at time t > 0 (using the notation from Section 3). This does not change our analysis and results at all, because we are interested in the population of agents achieving social balance, which only occurs when interactions are exclusively +1 or -1 (i.e., if an interaction is \"neutral\" at the end of the iterations, there cannot be social balance)."}, {"title": "B Keyword Analysis for Multiple Triads", "content": "B.1 Six agents\nThe occurrence of relevant keywords (see Section 4.3) is shown in Table 6. No LLM model mentions the keyword \u201cstructural\u201d across their responses, and none of them mention \u201cclustering\u201d except by Llama 3 70B minimally (0.03%) in the particular case of relationship with homophily. No LLM model mentions \u201ccognitive\u201d, and only Llama 3 70B mentions \u201cdissonance\u201d minimally (0.17%) in the particular case of appraisal with influence-all in stark contrast to the case of a single triad.\nB.2 Ten agents\nThe occurrence of relevant keywords (see Section 4.3) is shown in Table 7. No LLM model mentions the keywords \u201cstructural", "clustering\u201d or \u201ccognitive": "cross their responses, and only Llama 3 70B mentions \u201cdissonance\u201d minimally (no more than 0.09%) in whatever setting it appears."}]}