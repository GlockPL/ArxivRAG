{"title": "FROM MIDI TO RICH TABLATURES: AN AUTOMATIC GENERATIVE SYSTEM INCORPORATING LEAD GUITARISTS' FINGERING AND STYLISTIC CHOICES", "authors": ["Pierluigi BONTEMPI", "Daniele MANERBA", "Alexandre D'HOOGE", "Sergio CANAZZA"], "abstract": "Although the automatic identification of the optimal fingering for the performance of melodies on fretted string instruments has already been addressed (at least partially) in the literature, the specific case regarding lead electric guitar requires a dedicated approach. We propose a system that can generate, from simple MIDI melodies, tablatures enriched by fingerings, articulations, and expressive techniques. The basic fingering is derived by solving a constrained and multi-attribute optimization problem, which derives the best position of the fretting hand, not just the finger used at each moment. Then, by analyzing statistical data from the mySongBook corpus, the most common clich\u00e9s and biomechanical feasibility, articulations, and expressive techniques are introduced. Finally, the obtained output is converted into MusicXML format, which allows for easy visualization and use. The quality of the tablatures derived and the high configurability of the proposed approach can have several impacts, in particular in the fields of instrumental teaching, assisted composition and arranging, and computational expressive music performance models.", "sections": [{"title": "1. INTRODUCTION", "content": "Fretted string instruments (which include guitar, banjo, ukulele, and bass guitar, among others) allow the musician to play most of the notes on at least two different strings, at different frets. In addition, distinct fingers (usually index, middle, ring, or little finger) of the fretting hand can be used to produce the same note, on the same string and at the same fret. In some cases the notes can also be played on the open strings. In music, the term fingering is used to indicate which fingers and, consequently, hand positions should be used to perform a part [1]. Opting for well-reasoned fingerings is crucial, either for expressive reasons or to enable the musician to minimize performance effort.\nThe performer can then make choices, in addition to fingering, regarding articulations and expressive techniques from a range of options generally associated with the specific instrument being played. The term articulation refers to how a single note is sounded. Each articulation corresponds to a specific performance technique and generates sounds endowed with distinctive sonic characteristics. The parameters involved may be attack, decay, timbre, dynamics, and in some cases even pitch. The term expressive technique instead refers to all those techniques used to imprint variations in sound parameters for specifically expressive purposes. Clearly, there may be at least partial overlap between the two categorizations. Since we specifically address lead electric guitar parts, in this context the most common articulations are those of the plucked string (usually with the use of a plectrum) and the legato obtained through hammer-on (a finger of the fretting hand strikes the string from above, causing it to resonate) or pull-off (a finger of the fretting hand \"plucks/pulls\" the string, when it is already vibrating, reaching a note lower than the preceding one). In terms of expressive techniques, we consider vibrato (the pitch of the note is made to oscillate with the use of the finger(s) of the fretting hand or the whammy bar), slide legato (or glissando), and bending (pushing the fingered string upward or pulling it downward, perpendicular to the neck, the pitch of the note is raised) [2].\nIn this paper, we propose an automatic system able to generate, from monophonic MIDI melodies (including note-on and note-off messages only) [3], electric guitar tablatures enriched by fingering, articulations, and expressive techniques. The basic fingering is derived by solving an optimization problem that considers the possibility of playing the same notes on different string-fret combinations or on open strings as well as biomechanical constraints, and that tries to minimize the time needed for the hand movements and the performer's discomfort, while also accounting for timbre characteristics associated with the generated tablature. The system also keeps track of the position of the fretting hand, not just of the finger used at each moment. Then, taking into account the most common clich\u00e9s and biomechanical feasibility, articulations, and expressive techniques are introduced. The usage frequencies of such features are derived by analyzing statistical data from the mySongBook corpus, an impressive proprietary collection of guitar-oriented transcriptions, already used in the past in other publications [4,5]. Finally, for ease of visualization"}, {"title": "2. FROM A MIDI MELODY TO THE BASIC FINGERING", "content": "The automatic search for valid or optimal fingerings in relation to specific musical instruments has a scientific literature of significant size that cannot be entirely reviewed here. Hence, we first report the main existing approaches related to plucked string instruments, highlighting the gaps we are trying to fill. Then, we describe our novel and comprehensive methodology."}, {"title": "2.1 Existing approaches for fingering optimization", "content": "Sayegh (1989) [9] tackles the fingering procedure by solving a Shortest Path Problem (SPP) on a weighted and layered directed graph (a so-called Viterbi network) in which each layer corresponds to each note of the sequence and contains nodes corresponding to admissible fingerings of such a note. Since only position and string changes between a note and the consecutive one affect the fingering attributes, the weights of such attributes can be directly associated with arcs between two consecutive layers. Concerning the considered attributes, two broad classes of rules may be identified. The first one relates to ease of execution and the second to the homogeneity of the sound generated.\nA similar approach, albeit slightly more refined, is proposed in Radicioni et al. (2004) [10]. Here, not only movements along and across the fretboard are taken into consideration, but also finger span, and minimum/maximum spans between each pair of fingers are used to evaluate the level of difficulty of the transitions between notes and identify when hand repositioning is needed. The sequence is segmented into musical phrases at the preprocessing phase and the optimization takes place first of all within the individual phrases, then a valid connection between phrases is created. The approach of Miura et al. (2004) [11] is also based on the segmentation of the melody while the objective is to minimize the number of movements of the fretting hand wrist (along the neck) within each section. The trade-off emerges between the increase of finger span and the hand position changes, where the latter is however considered less uncomfortable for a beginner. Interestingly enough, techniques such as hammer-on, pull-off, and slide are considered.\nOther published works focus more on algorithmic aspects of the fingering. In particular, Tuohy and Potter (2005) [12] propose a Genetic Algorithm for creating polyphonic guitar tablatures. Their fitness function is based on hand movements along and across the neck, and fretting hand configurations. However, the system does not include information about which finger should be used to play each note. A Hidden Markov Model (HMM) is used in Hori et al. (2013) [13] to derive the basic fingering of monophonic and polyphonic guitar parts. The fretboard hand arrangements are considered as the hidden states, and the note sequence as the observed one. In a subsequent work by Hori and Sagayama (2016) [14], the authors try to simplify the most difficult movements required to play a part, instead of aiming at minimizing the difficulty of the overall execution. The paper introduces a variant of the basic algorithm for multi-layered networks, called the minimax Viterbi algorithm, to solve the problem. When applied to an HMM-based fingering decision network, the algorithm looks for the sequence of the hidden states that maximizes the minimum transition probability on the sequence (transition probabilities are large for easy moves and small for difficult ones). The reader is referred"}, {"title": "2.2 A new comprehensive optimization framework", "content": "Our approach for generating the basic fingering consists in the formalization, development, and resolution of an optimization problem, which generalizes all those already presented in the literature that appeared under the simplified form of an optimal path search through a multi-layered network (see, e.g., Sayegh 1989 [9]). In particular, we enrich the quality of the fingering by introducing i) additional requirements, that affect the available feasible fingerings for each note of the melody, and ii) simultaneous attributes to optimize, that affect the cost of the transition from the fingering of a note to that of the following one.\nConcerning the attributes of the fingering to be optimized, we identified three macro-categories:\n\u2022 time-related attributes: relate to movements of the fretting hand along (position change, PC) and across (string change, SC) the neck. Their weights depend on the time needed to physically reach the fingering by the hand and the fingers.\n\u2022 discomfort-related attributes: relate to finger span (hand spread, HS) and to playing notes on specific parts of the fretboard (e.g., very near or very far from the headstock). Their weights depend on the physical discomfort generated by the fingering in the player.\n\u2022 timbre-related attributes: relate to attributes that affect the type of sound output produced. Their weights depend on the sound quality generated by the fingering, according to the player's intent and taste. In this regard, we consider here the frequency of use of open strings.\nWe remark that, differently from most of the existing approaches, the system keeps track of the fretting hand position (i.e., the fret at which the index finger is located at each moment) to estimate the spreads between fingers and the longitudinal hand movements.\nMoreover, our optimization setting provides the user with great flexibility, allowing the customization of several aspects and preferences. In particular, the system can be finely configured about:\n\u2022 the intrinsic characteristics of the instrument (number of strings and frets, and notes generated by each open string or string/fret combination);\n\u2022 the fretboard area on which it is more comfortable to play. Typically the preferred area is the middle of the neck, between the fifth and twelfth positions, as"}, {"title": "2.3 Implementation details", "content": "In the following, we briefly describe the system implementation from a purely technical point of view.\nGiven a monophonic melody in MIDI format, a dataframe is generated in Python language using the Mido library (https://github.com/mido/mido, last accessed: 2024/03/07). For each note, the dataframe contains pitch, start and end positions in time, duration, IOI, and all the data needed later to generate the final MusicXML file. Data on the structure of the instrument (number of strings and frets, and notes generated by each open string and string/key combination) and the configuration parameters of our optimization problem are also generated.\nThe obtained dataframe is then processed through the IBM ILOG CPLEX Optimization Studio software, v20.1.0 (https://www.ibm.com/products/ last ilog-cplex-optimization-studio, accessed: 2024/03/07), in which we implemented our optimal fingering problem as a static and compact Mathematical Programming formulation. The problem is described via the CPLEX's dedicated Optimization Programming Language. The software returns the string/fret combination (and the associated finger to be used to press the string) or the open string on which to play each note implying the best achievement in terms of time-, discomfort-, and timbre-related attributes."}, {"title": "3. FROM THE BASIC FINGERING TOWARD A RICH TABLATURE", "content": "In this Section, we describe how the dataframe is enriched with articulations and expressive techniques. First, we extracted the distributions of the main techniques from the mySongBook dataset to use them as statistical references. Then, we use a rule-based system for the actual insertion of the techniques, allowing wide freedom of configuration to the user."}, {"title": "3.1 Statistical data extraction", "content": "The mySongBook corpus comprises more than 2000 scores/tablatures transcribed by professional musicians (https://www.guitar-pro.com/ c/18-music-scores-tabs, last accessed: 2024/03/07), of different genres. The transcriptions are made with Guitar Pro software, produced by Arobas Music, and are geared first and foremost to an audience of guitarists. However, they usually also contain vocal parts or parts of other instruments, such as bass guitar or drums. Given the object of investigation of this paper, the statistical data described below were extracted from the sections labeled as lead electric guitar parts. These parts are extracted after eliminating rhythmic guitar sections, identified using the procedure described in R\u00e9gnier et al. (2021) [18]. Then, the quantity of playing techniques on each string is determined and divided by the total number of notes per string to obtain the proportion of notes with each technique."}, {"title": "3.2 Inclusion of articulations and expressive techniques", "content": "The dataframe generated from the MIDI melody, combined with the fingering solution obtained from the optimization procedure, is further processed in Python to insert articulations and expressive techniques. Those considered are listed below, along with a summary of the rules for evaluating the possibility or opportunity of their execution:\n\u2022 hammer-on: only the parameter of biomechanical feasibility is evaluated. If the note is preceded by another lower-pitched note on an open string or played with a lower finger on the same string, the articulation is possible;\n\u2022 pull-off: only the parameter of biomechanical feasibility is evaluated. If the note is preceded by another higher-pitched note played with a higher finger on the same string, the articulation is possible. The pull-off is always possible between fretted and open strings;\n\u2022 vibrato: two user-customizable duration values are set; if the note duration reaches the first, the expressive technique is considered possible; if it reaches the second it is estimated highly likely. Vibrato is not allowed on open strings;\n\u2022 slide legato: only the parameter of biomechanical feasibility is evaluated. If a note is followed by another note on the same string and at a different fret, played with the same fretting hand finger, the articulation is possible;\n\u2022 bending: the field of bending is highly articulated and complex to model [5]. For this first implementation of the software, only basic upward bends (and possibly the releases associated with them, if the following note is played with the same finger and at the same string/fret combination) were considered. The user is first asked to set the maximum amplitude in semitones of the bends that can be performed by each finger of the fretting hand. Setting this parameter to 0 excludes fingers (typically the little finger) from the possibility of doing bends. Bending is considered possible if the hypothetical application note has a duration equal to or greater than a user-settable value. Biomechanical compatibility between the execution of the bending and the fingering of the previous and next notes is also taken into consideration. The procedure tries to include bends by recreating where possible the clich\u00e9 situations described in Section 3.1.\nThe actual distribution of articulations or expressive techniques depends on the user's choices and the reference statistics described in Section 3.1. The user can let such statistics be taken as targets to be achieved, consistent with the biomechanical possibility of the execution. In other words, the procedure tries to include, where possible according to the conditions described above, the techniques to respect the proportions between technique use and the total number of notes for each string. If the points of possible insertion of the techniques are insufficient in number to reach the targets, the procedure will simply insert the techniques wherever possible, without forcing their insertion into unnatural contexts. If, on the other hand, the potential insertion points are more numerous than the target, the use of the different techniques is chosen on a random basis, to get as close as possible in the overall part to the target values. In the case of vibrato, priority is given to the longest notes."}, {"title": "4. MUSICXML CONVERSION AND GRAPHICAL RENDERING", "content": "Once the dataframe is completed, including all useful information concerning pitch, timing, use of open or fingered strings, articulations, and expressive techniques, a file in MusicXML format is generated via a dedicated Python script. The MusicXML format is considered a standard for the interchange and distribution of musical scores, provides for tablature encoding, and is supported by many music notation programs [22, 23]. We opted for Guitar Pro 8, to obtain a graphical rendering of the processed parts."}, {"title": "5. CONCLUSIONS", "content": "We presented an innovative automatic system for generating (starting from simple MIDI melodies) lead guitar tablatures, enriched with fingering as well as articulation and expressive techniques. For the basic fingering, we used an optimization approach significantly richer than the ones already existing in the literature, that allowed us to embed more complex requirements. Moreover, we also developed a procedure that provides a very high level of customization for the user, both in terms of biomechanical preferences/requirements and stylistic intents. Starting from the basic fingering, a user-customizable rule-based system, which evaluates note by note the biomechanical feasibility and probability of use of specific articulations and expressive techniques, introduces such techniques whenever appropriate. Finally, the generated dataframe is converted into MusicXML format, compatible with numerous music notation software. The code is available upon request to the authors.\nThe computational generation of optimal or alternative rich fingerings for a given melodic part can be of interest, beyond the support of the performer in the study phase, in multiple areas such as teaching [24], automatic music generation [25, 26], computational performative expressiveness [27, 28], stylistic analysis, evaluation of existing tablatures [29], and testing of audio-to-tablature models. Both the Centro di Sonologia Computazionale of the University of Padua [30] and the TABASCO project team (http://algomus.fr/tabasco/, last accessed: 2024/05/16), to which part of the authors belong, share previous relevant work and scientific interest in relation to these issues. We believe that in each of the fields mentioned above the verification of performative plausibility and the possible generation of alternative rich fingerings can prove valuable (if not indispensable) aids.\nThe future improvements of the system's functionalities may comprise the management of lead parts including multiple simultaneous notes, the possibility of inserting decisions concerning articulations and expressive techniques within the optimization procedure, as well as the application of the system in different fields such as teaching (even self-taught) and computational musical expressiveness. Moreover, the much-needed integration of a system such as the one proposed here into the workflow of contemporary music production, often based on the use of virtual instruments, would allow even those who are not expert guitarists to obtain more realistic and convincing parts. Finally, it should be noted how a system such as the one proposed cannot be easily validated, as a given starting melody may correspond to many divergent solutions, equally valid but responding to different expressive intentions and personal preferences. In other words, it would not be correct to compare the output of the system to specific actual performances or existing transcriptions to sanction or not its validity. Although the results obtained so far have been evaluated by the authors as fully satisfactory and realistic, it would therefore be desirable in the future to subject them to the judgment of a wider audience of experienced guitarists."}]}