{"title": "Towards Auto-Building of Embedded FPGA-based Soft Sensors for Wastewater Flow Estimation", "authors": ["Tianheng Ling", "Chao Qian", "Gregor Schiele"], "abstract": "Executing flow estimation using Deep Learning (DL)-based soft sensors on resource-limited IoT devices has demonstrated promise in terms of reliability and energy efficiency. However, its application in the field of wastewater flow estimation remains underexplored due to: (1) a lack of available datasets, (2) inconvenient toolchains for on-device AI model development and deployment, and (3) hardware platforms designed for general DL purposes rather than being optimized for energy-efficient soft sensor applications. This study addresses these gaps by proposing an automated, end-to-end solution for wastewater flow estimation using a prototype IoT device.", "sections": [{"title": "I. INTRODUCTION AND RELATED WORK", "content": "Combined sewer systems (CSS) are widely used worldwide but face increasing challenges from extreme weather exacerbated by pollution and climate change. These conditions often lead to urban overflow events, significantly impacting public health and environmental sustainability [1]. Real-time control systems offer a promising alternative by preventing CSS overflow through dynamic flow monitoring. However, these systems are hindered by high operational costs and challenges in achieving continuous, accurate monitoring and real-time data processing [2]. Current flow monitoring techniques mainly rely on hydrological formulas, which, while cost-effective, lack the precision necessary for effective management. Advanced sensor technologies, such as Coriolis and Magnetic Induction devices, offer higher accuracy but are cost-prohibitive for widespread adoption in economically constrained regions [3]. Previous research has demonstrated the promising potential of soft sensors for flow estimation based on fluid level [1], [3]. Specifically, Noori et al. [3] simulated drilling conditions using a flow circulation system with a Venturi structure, utilizing three level sensors for input data, while a Coriolis mass flow meter provided target data. A simple Multi-Layer Perceptron (MLP) model was then used to efficiently estimate non-Newtonian fluid flow.\nBuilding on these datasets, our prior work [4] implemented a quantized MLP model on a low-power MCU (Cortex-MO RP2040) and an embedded FPGA (Xilinx Spartan-7 XC7S15) using TensorFlow Lite and our customized Elasti-CAI.Creator toolchains [5], respectively. The FPGA-deployed models demonstrated up to 28.44\u00d7 faster inference speed"}, {"title": "II. EXPECTED CONTRIBUTION", "content": "The expected contributions of this research include collecting wastewater flow data with customized test bench, automating model deployment on embedded FPGAs, and optimizing hardware design to enhance energy efficiency for on-device flow estimation. These contributions are detailed as follows:"}, {"title": "A. Application Scenarios-based Data Collection", "content": "Given the inherent differences between wastewater and drilling fluid, we aim to collect relevant data specifically for wastewater flow estimation. The primary experimental setups include open channel flumes, such as those found at the inlet and outlet of wastewater treatment plants (WWTP), as illustrated in Figure 1."}, {"title": "B. Automated Model Implementation", "content": "Our open-source ElasticAI.Creator2 toolchain is expected to be advanced to automate the generation of accelerators for soft sensors. To achieve this, we first integrate integer-only quantized MLP models into ElasticAI.Creator. Using this toolchain, we develop and train the MLP models with the collected wastewater datasets and subsequently generate the corresponding accelerators. Our objective is to enable users to simply prepare a dataset and, with a single command, produce an executable accelerator suitable for deployment on our supported IoT devices. This streamlined process aims to facilitate the deployment of DL models on embedded FPGAs, making it accessible to those without FPGA expertise."}, {"title": "C. Optimized Hardware System Design", "content": "In this study, we also propose an optimized hardware design targeting energy-efficient soft sensor applications. The modification involves replacing the XC7S15 FPGA with a smaller FPGA, the ICE40UP5K. This decision is based on our previous work [6], which indicated low resource utilization of our MLP accelerator on the XC7S15 FPGA (6.47% LUTs, 7.5% BRAMs, and 10% DSPs). This low utilization suggests that the design can be shifted to a smaller FPGA without performance loss. Additionally, the XC7S15 FPGA has significant static power consumption (approximately 30 mW), whereas the ICE40UP5K's static power consumption is at the microwatt level. Thus, this replacement could markedly improve the system's energy efficiency. To address the challenges posed by resource constraints, we plan to implement advanced hardware optimizations in the accelerator design. These optimizations will ensure that the design remains efficient and effective despite the reduced resources available on the ICE40UP5K."}, {"title": "III. CONCLUSION", "content": "This study explores the application of DL-based soft sensors for real-time, precise wastewater flow estimation with embedded FPGA and radar sensors. Our research focuses on optimizing the entire process, from sensor integration to model deployment, automating accelerator generation, and enhancing hardware design for better energy efficiency and performance. By addressing these aspects, we aim to improve the adaptability and effectiveness of flow monitoring systems in urban environments."}]}