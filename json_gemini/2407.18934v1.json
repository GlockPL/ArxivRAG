{"title": "The Design of a 3D Character Animation System for Digital Twins in the Metaverse", "authors": ["Senem Tanberk", "Dilek Bilgin Tukel", "Kadir Acar"], "abstract": "In the context of Industry 4.0, digital twin technology has emerged with rapid advancements as a powerful tool for visualizing and analyzing industrial assets. This technology has attracted considerable interest from researchers across diverse domains such as manufacturing, security, transportation, and gaming. The metaverse has emerged as a significant enabler in these domains, facilitating the integration of various technologies to create virtual replicas of physical assets. The utilization of 3D character animation, often referred to as avatars, is crucial for implementing the metaverse. Traditionally, costly motion capture technologies are employed for creating a realistic avatar system. To meet the needs of this evolving landscape, we have developed a modular framework tailored for asset digital twins as a more affordable alternative. This framework offers flexibility for the independent customization of individual system components. To validate our approach, we employ the English peg solitaire game as a use case, generating a solution tree using the breadth-first search algorithm. The results encompass both qualitative and quantitative findings of a data-driven 3D animation system utilizing motion primitives. The presented methodologies and infrastructure are adaptable and modular, making them applicable to asset digital twins across diverse business contexts. This case study lays the groundwork for pilot applications and can be tailored for education, health, or Industry 4.0 material development.", "sections": [{"title": "I. INTRODUCTION", "content": "The metaverse represents a new era characterized by an immersive digital realm, social connectivity, and three- dimensional (3D) experiences, breaking the boundaries between the physical and virtual worlds. As this digital domain continues to evolve, the need for robust infrastructure likened to Web 3.0 necessitates the integration of various technologies such as artificial intelligence (AI), augmented reality (AR), virtual reality (VR), the fifth generation (5G) and sixth generation (6G) of wireless technology, cloud computing, edge computing, mobile applications, and blockchain [13, 18, 24, 25, 41]. One key aspect of this infrastructure is the creation of asset digital twins that are virtual replicas of real-world objects, environments, or entities, seamlessly integrated with dynamic three- dimensional (3D) animations. These digital twins serve as the building blocks of the metaverse, facilitating immersive experiences across a wide range of use cases including manufacturing, education, entertainment, collaboration, and commerce [3, 4, 10, 11]. The concept of asset digital twins offers unparalleled levels of immersion and interactivity with digital content by combining 3D models with realistic animations within the metaverse. Asset digital twins enable users to engage with virtual environments in ways that closely mimic real-world experiences, whether it involves exploring a virtual museum, participating in a multiplayer game, analyzing industrial automation, or attending a virtual conference. The development of asset digital twin infrastructure for the metaverse presents both technical and creative challenges. On the technical front, considerations such as data storage, retrieval, and streaming bandwidth must be addressed to run a system entailing 3D content smoothly across different platforms and devices. Concurrently, in the"}, {"title": "II. RELATED WORK", "content": "This section presents previous studies by researchers utilizing various algorithms and methodologies for the development of digital twin and character animation systems.\nA. METAVERSE APPLICATIONS\nIn recent years, the concept of the metaverse has acquired significant importance, presenting novel opportunities for the virtual prototyping of physical assets by offering immersive virtual environments. In [13], the authors designed a virtual reality system for metaverse scenarios involving human- computer interactions. The research presented in [18] contributes to the creation of realistic avatars with optimized animation. Immersive applications have also been applied to educational fields, as presented in [24, 25], by implementing multilayer or theoretical frameworks for an educational metaverse. The prototype of a new dance training system was implemented in the research presented in [26].\nThe new focus of researchers in more recent years has been the application of metaverse opportunities to real-life scenarios in various industries. In [43], the topic of smart manufacturing is addressed. In [45], a metaverse-based evacuation system for an educational building is explored. Other use cases of metaverse applications in education are discussed in [51, 56], while smart-city applications are addressed in [52], potential healthcare applications in [46, 27], industrial use cases in [57], and intelligent driving cases in [58]. In [44, 48, 49, 50, 53, 54, 55], the concept of the metaverse is defined in general, wide-ranging industrial usage scenarios are discussed, and metaverse architectures are presented.\nB. ASSET DIGITAL TWINS\nDigital twins are digital models that represent virtual replicas of physical objects, processes, or systems to reproduce their physical behaviors by integrating sensor data, historical data, and simulation models. They are widely used for their advantages in predictive maintenance, performance optimization, prototype development, and decision support in various industries.\nAsset digital twins are special types of digital twins focusing on replicating individual assets within a larger system. Asset digital twins are applicable in diverse sectors including manufacturing, transportation, education, and healthcare.\nIn [3], the authors aimed to present a showcase of the use of digital twins in the manufacturing industry with various technologies including the Unity engine. The research presented in [4] produced a social app as an attempt at a metaverse application in the context of digital twins using the Unity 3D engine and Microsoft Structured Query Language (SQL) Server. In [5], research was conducted for a motion capture system to allow the concept of digital twins to be used in Industry 4.0 scenarios. The research in [6] produced a prototype of human operators in line with the concept of digital twins. In [10], a sample architecture was demonstrated for connected vehicles and pedestrians as a digital twin application. In [11], the fundamentals of XR technologies in Industry 4.0 were presented and digital twins were explained as a replica of physical objects in the digital environment. In [12], involving research related to digital twins, the authors established an end-to-end pipeline from two-dimensional (2D) to 3D reconstruction based on deep learning techniques. Digital twin applications also provide significant benefits in robotics with the potential advantage of supporting the development of Automation Studio and Unity technologies [14]. Researchers proposed a digital twin diesel generator system to be used for educational purposes in [15]. The research described in [16] aimed to identify key technologies for developing digital twins in the construction domain. The concept of human digital twins was proposed for use in smart manufacturing systems in [17]. On the other hand, researchers explained the challenges and opportunities of digital twin technology in the setting of sports events in [19]. In [29], the authors introduced a digital twin-based framework in the Unity environment for additive manufacturing in the domain of smart factories. Researchers aimed to demonstrate digital twin technologies with educational case studies in [30]. Many digital twin examples for use in Industry 4.0 have been implemented in various studies, such as [31, 32, 33, 34].\nC. DOMAIN-SPECIFIC SIMULATION and ANIMATION with the UNITY ENGINE\nThe Unity engine provides multiplatform and cross-platform tools and realistic virtual environments for implementing domain-specific simulations and animations [35, 36, 37, 41]. A simulation in the robotic domain was developed with the Unity engine to visualize the real working environment of robots in [7]. Researchers proposed a novel simulation environment allowing physics simulations for multiphysics interactions, namely the RFUniverse, with Unity while enabling Python for robot manipulation in [8]. Simulation software was developed using the Unity platform to visualize autonomous mobile robots in logistic scenarios in [27]. Additionally, a sign language reproduction system with avatars was established using the Unity engine in [36].\nD. 3D CHARACTER ANIMATION DEVELOPMENT\n3D character animation development is a quick and practical approach for obtaining realism and engagement in virtual environments, providing effective simulations of real-world scenarios. Researchers proposed a generative model for character animation by formulating the motion style transfer of tasks and motion generation in [9]. In [20], a virtual patient avatar was proposed to perform care and nursing training tasks in the health domain. The authors of [28] applied a novel method of virtual character animations using Unreal Engine 4 for human pose reconstruction by retargeting RGB video streams as a lower-cost solution.\nE. BREADTH-FIRST SEARCH (BFS) ALGORITHM\nThe BFS algorithm is a fundamental algorithm for data structures, facilitating applications of asset digital twins for tasks such as pathfinding in animations or generating game solutions in board games. In [1], the authors proposed an effective algorithm for mining top-k high average-utility items by employing the BFS strategy with pruning techniques. The authors of [2] discussed finding a path for the Labyrinth game by employing the BFS algorithm.\nFrom the literature specifically addressing digital twins, it appears to be possible to control a real production system or robotic system in industry by using its digital twin. The primary goal of the present study is to establish a practical framework encompassing the intelligence component with a computational layer and animation for the creation of asset digital twins that are both simple and complex. To achieve this, we designed an easy-to-follow board game use case that utilizes readily available tools and lower-cost techniques. We intend to apply this use case as a starting"}, {"title": "III. DIGITAL TWIN FRAMEWORK", "content": "Digital twin technology is the backbone of the industrial metaverse, connecting the real world to the virtual environment by creating both digital and visual copies of an entity. A digital twin is not merely a simple replica of a system or product; it is also applicable to various stages of industrial processes such as manufacturing, smart automation, and predictive analytics. There are four main digital twin types including component twins, asset digital twins (or product digital twins), system twins, and process digital twins. In this study, a novel asset digital twin framework for animating an avatar based on a specific scenario is proposed. Usually, an asset digital twin consists of several components for modeling complex assets like engines or production systems. It ensures the analysis of the integration and interaction of each part in a whole solution. Thus, it detects potential improvement cases and the performance and efficiency of the system.\nA. MOTION PRIMITIVES AS ATOMIC ACTIONS\nMotion primitives are essential building blocks for automating motions in motion planning and control algorithms, particularly in robotics, autonomous driving, industrial automation, video games, and film. They correspond to straightforward and basic movements as a set of discrete precomputed motions that an actor (e.g., a robot, a vehicle, or an avatar) will perform to accomplish a certain movement or sophisticated tasks requiring sequences of actions [22-23, 38- 39-40]. For example, in a scenario that involves kung-fu fighting, each motion sequence corresponds to a motion primitive, such as a kick or punch [21]. These primitives are frequently made to be modular, reusable, and easily joined to create more complicated motions. The four key features and attributes of motion primitives can be listed as follows: composition (i.e., the sequences of actions), reusability, parameterization (i.e., parameters such as speed, direction, duration, or joint angles), and simplicity (i.e., elementary motions such as moving forward, turning, or gripping an object).\nAn atomic action is an essential unit of motion or activity that is a single, distinct, indivisible activity or occurrence within a video sequence in the context of computer vision and video processing. When analyzing, examining, or annotating movies, this concept is frequently applied, particularly for activity recognition, motion tracking, or action detection. Basic building pieces known as atomic actions are used to depict specific motions, gestures, or events that take place inside video frames. Based on the video's context, atomic actions can encompass a wide range of motions and activities. Some instances of atomic actions include walking, running, sitting, standing, lying down, falling, picking up an object, dropping an object, and moving an object.\nMotion primitives serve as foundational components of 3D animation and simulation. They are employed in specific domains as atomic actions to streamline the animation process, improve productivity, and offer flexibility for creative experimentation and refinement. Motion primitives are basic precalculated patterns of motions such as walking, running, jumping, gesturing, or any other fundamental movement. These primitives are usually generated by animators or motion capture systems and are kept in libraries or databases to be used again in other simulations and animations. In simulation environments, motion primitives can be used to mimic the motion and behavior of various entities such as cars, robots, animals, humans, or particles.\nB. ARCHITECTURE\nThe proposed asset digital twin framework architecture is shown in Fig. 1 and Fig. 2. The framework illustrated in Fig. 1 consists of three main parts, with a smart computing part, a digital 3D animation part, and a data transmission file between those two modules. The user interface is represented by the yellow rectangle on the left, entailing a textbox to enter the score selected by the user and an animated video as output. The elements inside the gray rectangle on the top are the digital replica of the animator and other simulation objects such as boards and pegs inside the Unity engine. The virtual environment contains a motion primitive database (DB), a coding layer to control animation via C#, and the generated animation. Motion primitive parameters in Unity to generate an action sequence for an avatar are Speed, Throw, and Dance. The yellow rectangle at the bottom of Figure 1 represents the transition file containing motion attributes from the DB, which were previously calculated and saved. As shown in Figure 2, the data generation pipeline is formalized following a schema that specifies a batch function to generate the game search tree in Java, a DB module holding solution vectors, and a .csv file for movement."}, {"title": "IV. CASE STUDY: ASSET DIGITAL TWIN WITH AVATAR", "content": "In this section, a case study on an asset digital twin is presented using the proposed architecture. This case study aims to investigate how efficiently the system components work together and interact after linking the intelligent logic in the evaluation application programming interface (API) with its digital version by 3D character animation. This process allows us to obtain some choices for users with the graphical user interface (GUI), ensuring that the 3D animation is automatically performed in the digital version after selection. Our software prototype for asset digital twins was optimized with an iterative design. Iterations are performed for various use cases to upgrade the software prototype. This ensures that different types of tasks are used for iterative animation and testing, allowing us to continuously update and improve the prototype to fit various use cases and environments.\nA graphical representation of interconnection in the asset digital twin system between the phases of 3D character animation development is presented in Fig. 3. Our discrete animation system functions as follows:\nEvaluation API for logic is implemented,\nIntegration to the digital line is ensured, and\nThe digital component interacts with users, i.e. a specific scenario is executed as 3D animation.\nIn our asset digital twin system, we apply a cost-effective solution with 3D animation. In today's world, to obtain realistic animation, motion capture (Mocap) systems are widely used, especially in gaming and for metaverse solutions. Mocap systems capture all details of real actors' movements by recording them. They require expensive pieces of equipment, a motion capture studio, and highly skilled actors. For our system, we created a small animation database consisting of predefined fixed movements and chose the 3D animation technique. We created an entire animation by integrating the smaller animations according to a scenario within a script that we had evaluated.\nA. INVESTIGATIONAL TASK DESCRIPTION\nThe task at hand focuses on establishing an asset digital twin infrastructure integrated with 3D animation capabilities to enhance various use cases, particularly in robotics and industrial automation, and also including board games. The primary objective is to establish a versatile framework that enables the utilization of virtual representations of assets with components ranging from digital data creation to 3D characters and environmental elements. This infrastructure for asset digital twins will serve as a foundation for implementing a wide range of applications across different industries, providing a robust platform for enriched visual and interactive experiences.\nThe task encompasses several key components, including data generation for the game search tree, a user interface for choosing a specific game score, a .csv file for the integration, and 3D animation creation for the stated scenario, namely the board game asset of peg solitaire. Additionally, it ensures development to facilitate the creation of asset digital twins with seamless integration into product pipelines. In this work, iterative prototyping, testing, and validation of the asset digital twin infrastructure are conducted to evaluate its scalability, performance, and compatibility with specific use cases such as board games.\nPeg solitaire is a classic single-player board game enjoyed by players of all ages that requires strategic thinking and puzzle-solving skills. The objective is to remove pegs from the game board by jumping them over adjacent pegs until only one peg remains. Initially, there are 33 empty holes on the game board, and 32 pegs are placed in the holes, leaving one hole empty in the center of the board. The empty hole on the game board is the starting point of the game. Pegs can be jumped left, right, down, and up, but not diagonally. A peg is moved to the empty hole immediately behind it by jumping it over another peg located to the right, left, down, or up, and the peg that has been jumped over is removed from the board. The goal of the game is to leave the fewest possible pegs at the point when no peg can be jumped over to the left, right, down, or up according to the game's rules. The score is evaluated according to the remaining number of pegs. The best score is 1, achieved when only one peg remains on the game board.\nB. ALGORITHM and DATA STRUCTURE\nBreadth-First Search (BFS or Level Order Traversal)\nThe BFS algorithm is used to traverse tree data structures in which all nodes at the same depth are explored before traversing to the next depth level. Generally, a queue is used to hold and track the kept tree nodes within one connected component. The traversal order of the BFS is illustrated in Fig. 4. This algorithm has many potential use cases for solving various problems in real-life scenarios, such as game search trees for chess, pathfinding with virtual maps, GPS navigation"}, {"title": "C. DESIGN AND IMPLEMENTATION WITH THE UNITY ECOSYSTEM", "content": "This section provides a brief overview of the design and implementation of 3D character animation with customizable 3D avatars in the Unity ecosystem. A short description of relevant Unity concepts is also provided to highlight the key advantages that led to their choice.\nUnity: Unity is a cross-platform graphic environment for the development of three-dimensional (3D) and two-dimensional (2D) animations and simulations. The engine is useful in various industries including the automotive industry, manufacturing, construction, film, video gaming, and engineering. In the present study, it is used as the main environment for avatar animation, connecting with intelligent logic outside of the platform via a .csv file.\nRigging: Rigging is one of the most important procedures in developing an avatar. It ensures the creation of a skeleton that consists of a bone hierarchy. Animation rigging also allows the user to create and organize various constraints based on a logic described in the C# animation API to implement requirements related to animation.\nInverse Kinematics (IK): IK is an essential process for computer animation and robotics. It entails the use of mathematical calculations to determine variable joint parameters of the motion of a character or a robot, or, in other words, the end effector, to reach a target position. In contrast, forward kinematics (FK) entails the use of mathematics to compute the position of a character or a robot from specific values for the joint parameters.\nMotion Interpolation: Motion interpolation is a very common method used in computer animation to fill in values between frames of two keyframes and smooth the appearance of a motion. Unity provides various functions for interpolation by estimating values between two data points, ensuring animations with smoother and more realistic movement.\nWith the Unity Editor, avatar construction is undertaken with a character model, skeleton, and bone mapping as shown in Fig. 5. Bone mapping in the Unity environment for the avatar's head, left hand, and right hand is shown in Fig. 6.\nUnity provides an animation tree as a layered system to simplify animation. Thus, it assists users in integrating animation clips. With a given set of parameters, transitions between states are provided. As shown in Fig. 7, the animation tree in this project has three parameters, Speed, Throw, and Dance, and they ensure control of the animation flow in a sequence within the control logic in C#. Table 1 lists the conditions for state transitions between four types of status: Idle, RunForward, MiningLoop, and Dance."}, {"title": "D. EXPERIMENTAL RESULTS", "content": "We implemented and tested our framework end-to-end to demonstrate the effectiveness of the pipeline for a board game as an illustrative example. We divide the experimental results into three subsections: data generation, the integration file, and avatar simulation via the reconstruction of the game in the virtual environment. As an execution and an exploratory attempt for various experimental trials, we define a GUI to choose a solution from the game search tree.\n1) DATA GENERATION FOR GAME SOLUTION TREE\nIn this study, the BFS algorithm was employed to optimally assist in generating a game search tree for peg solitaire. The algorithm uses a queue and DB to calculate and keep the solution space for the problem. The first step is creating a search space for the board game. The moves in the game solution tree were calculated with a procedure written in Java using the BFS algorithm and the queue data structure, and then the game tree was saved in the DB. An elimination strategy was developed to accelerate the search algorithm and the final scores were calculated within a reasonable time. With the procedure that creates the solution tree, 8585713 nodes were generated and held in the DB, and 37397 solutions with"}, {"title": "V. CONCLUSION", "content": "To demonstrate the potential of asset digital twins, we developed a data-driven avatar-based 3D animation system in Unity for a specific use case and presented all the work entailed for the completion of four conceptional stages: the generation of the game search tree, motion primitives, trajectory planning in coding logic, and animation generation. Within that framework, an asset digital twin approach incorporating programming logic and avatars was proposed and executed in the specific scenario of a selected board game. The framework consists of an algorithm, a digital world via Unity, and data transmission via a file between the intelligence logic and the digital spaces. A sample use case was established to validate the architecture of the framework and the asset digital twin system was further validated in a board game application, namely peg solitaire. This architecture combines three platforms: the BFS algorithm in Java, a solution tree saved to Access DB, and Unity for asset digital twinning with 3D characters and objects, respectively. The Java and DB platforms constitute the driving animator to animate the scenario, while the 3D character option of Unity is used to produce the animation environment for the board game. Data transmission between different platforms is provided by a file structure with attributes matching movements. To validate the effectiveness of the asset digital twin framework, a case study was conducted to animate a board game based on the proposed architecture. The case study demonstrated the benefits of the proposed data-driven 3D animation system by combining motion primitives and coding logic to drive animators within a modular structure. The presented asset digital twin framework is expected to serve as a powerful architecture for future research on digital twin technology to enhance software tools and applications in manufacturing, safety, education, health, and mobility. In future research, we will continue building on Al systems and expand our current framework to incorporate other use cases such as chess, human motion imitation, motion reconstruction with motion primitives for predefined scenarios, robotic simulations, sign language production, physiotherapy exercises, smart manufacturing, and more complex Industry 4.0 business scenarios. Furthermore, AI algorithms such as transformers, generative adversarial networks, 3D convolutional neural networks, and long short-term memory (LSTM) neural networks for the generation of motion data to drive avatars could be investigated using the proposed asset digital twin framework."}]}