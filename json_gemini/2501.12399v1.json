{"title": "FinSphere: A Conversational Stock Analysis Agent Equipped with Quantitative Tools based on Real-Time Database", "authors": ["Shijie Han", "Changhai Zhou", "Yiqing Shen", "Tianning Sun", "Yuhua Zhou", "Xiaoxia Wang", "Zhixiao Yang", "Jingshu Zhang", "Hongguang Li"], "abstract": "Current financial Large Language Models (LLMs) struggle with two critical limitations: a lack of depth in stock analysis, which impedes their ability to generate professional-grade insights, and the absence of objective evaluation metrics to assess the quality of stock analysis reports. To address these challenges, this paper introduces FinSphere, a conversational stock analysis agent, along with three major contributions: (1) Stocksis, a dataset curated by industry experts to enhance LLMs' stock analysis capabilities, (2) AnalyScore, a systematic evaluation framework for assessing stock analysis quality, and (3) FinSphere, an AI agent that can generate high-quality stock analysis reports in response to user queries. Experiments demonstrate that FinSphere achieves superior performance compared to both general and domain-specific LLMs, as well as existing agent-based systems, even when they are enhanced with real-time data access and few-shot guidance. The integrated framework, which combines real-time data feeds, quantitative tools, and an instruction-tuned LLM, yields substantial improvements in both analytical quality and practical applicability for real-world stock analysis.", "sections": [{"title": "Introduction", "content": "Large Language Models (LLMs) have demonstrated remarkable capabilities in comprehending and processing natural language, extending their influence across various domains, including finance (Li et al., 2023b). By leveraging their language comprehension capabilities, these models have exhibited exceptional performance in various financial applications, including sentiment analysis (Liu et al., 2024; Zhang et al., 2023a) and information extraction from unstructured financial texts (Li et al., 2024; Huang et al., 2023). The advent of finance-specific LLMs such as FinBERT (Yang et al., 2020; Liu et al., 2021b), BloombergGPT (Wu et al., 2023), and PIXIU (Xie et al., 2023) has further enhanced the capacity to process financial data effectively. These advancements have laid the foundation for developing more sophisticated financial analysis tools and shifted how investors interact with market data (Krause, 2023; Nie et al., 2024). These AI-powered systems have democratized access to professional-grade financial insights, enabling retail investors to obtain sophisticated financial analysis once exclusive to institutional investors.\nAs LLM technology continues to evolve, there is an increasing expectation for these models to handle more complex financial tasks, particularly in stock analysis (Yang et al., 2023b; Zhao et al., 2024). This progression has resulted in the emergence of tool-augmented agents that combine LLMs' language capabilities with specialized financial tools, representing a significant leap in automated financial analysis (Ding et al., 2024; Zhang et al., 2024). However, LLMs continue to encounter challenges in utilizing these tools' outputs to generate high-quality analytical results. Two major challenges are the lack of specialized datasets for fine-tuning LLMs' analytical capabilities, and the absence of systematic evaluation methods to quantify their performance in stock analysis. Furthermore, current research is constrained by LLMs' reliance on historical data, such as GPT-40's dependence on its training data for generating responses (Ni et al., 2024; Bhat and Jain, 2024). This limitation in accessing real-time financial data and domain-specific information restricts them from fully capturing the dynamic nature of financial markets.\nTo address these limitations, we present three key contributions:\n\u2022 Stocksis, a specialized dataset curated by industry experts to enhance LLMs' stock analysis capabilities."}, {"title": "Related Work", "content": "LLMs have emerged as powerful tools for stock analysis and trading (Zhao et al., 2024; Li et al., 2023b). Research demonstrates their effectiveness in predicting stock prices and conducting market analysis (Ni et al., 2024; Bhat and Jain, 2024). Domain-specific models like InvestLM (Yang et al., 2023b) and GPT-InvestAR (Gupta, 2023) have been developed for investment analysis. Recent studies have also explored LLMs' applications in financial anomaly detection (Park, 2024), portfolio evaluation (Wu, 2024), and financial statement analysis (Kim et al., 2024), highlighting their potential to transform financial analysis.\nInstruction Tuning and Tool Integration Financial LLMs have advanced through domain-specific instruction tuning, as demonstrated by InvestLM (Yang et al., 2023b) and BloombergGPT (Wu et al., 2023). Integration with specialized tools has also progressed, exemplified by FinGPT (Yang et al., 2023a) with financial APIs, XBRL-Agent (Han et al., 2024) with financial calculators, and the FinOps framework (Li et al., 2023a). While these academic developments have improved financial applications (Zhang et al., 2023b; Chen et al., 2023), they rely on historical data and fundamental tools. To address these limitations, we propose Fin-Sphere Agent, leveraging our real-time database and advanced quantitative tools, as detailed in Section 4."}, {"title": "Stocksis and AnalyScore", "content": "Stock market analysis is becoming increasingly complex, necessitating the integration of diverse data sources and sophisticated analytical approaches. While LLMs demonstrate potential in transforming financial analysis, there are two critical gaps in the current landscape: the lack of high-quality training data for developing LLMs' stock analysis capabilities, and the absence of standardized evaluation frameworks for assessing the quality of AI-generated stock analyses. This section introduces two significant contributions to address these gaps: Stocksis, a comprehensive dataset specifically designed to enhance LLMs' stock analysis capabilities and AnalyScore, a systematic evaluation framework for assessing stock analysis reports."}, {"title": "Stocksis: A High-Quality Dataset for Enhancing LLMs' Stock Analysis Capabilities", "content": "Stocksis comprises 5,000 meticulously curated training pairs, with 50 pairs \u00b9 available in the open-source release for research and development purposes. Each training sample consists of two key components:\n\u2022 Prompt with Background Information (input): A complete analytical prompt that includes aggregated outputs from multiple quantitative"}, {"title": "AnalyScore: A Comprehensive Evaluation Framework for Stock Analysis Reports", "content": "AnalyScore is an innovative evaluation framework designed to assess the quality of stock analysis reports, developed by industry experts combining traditional stock analysis evaluation principles with LLM-related knowledge. This framework implements a two-tier evaluation system to ensure both fundamental quality standards and detailed analytical excellence.\nFramework Structure The evaluation process consists of two main components:\n1. Priori Eligibility Check : A mandatory preliminary assessment comprising six essential criteria that must be met with 100% compliance prior to proceeding to detailed evaluation. These criteria ensure adherence to basic quality standards in (1) Conclusion Structure; (2) Logical Consistency; (3) Factual Support; (4) Data Timeliness; (5) Analytical Dimensions; (6) Neutral Language\n2. Detailed Evaluation A comprehensive scoring system across four key dimensions, totaling 100 points:\n\u2022 Conclusion (20 points): Evaluate the clarity and personalization of investment recommendations\n\u2022 Content (45 points): Assess professional analysis quality and logical consistency\n\u2022 Expression (15 points): Examine structural organization and language clarity\n\u2022 Data (20 points): Measure the breadth and depth of data utilization\nThis structured approach ensures a thorough and systematic evaluation of stock analysis reports, combining both qualitative standards and quantitative metrics to provide a comprehensive assessment of report quality. Currently, AnalyScore is employed solely by human experts in stock analysis, but we plan to design detailed prompts that enable LLMs to replace human experts in evaluating analysis reports using AnalyScore in the future."}, {"title": "FinSphere Agent", "content": "This section details the architecture and operational mechanisms of FinSphere Agent, our advanced stock analysis agent."}, {"title": "Powerful Quantitative Tools based on Real-Time Databases", "content": "A core strength of FinSphere lies in its seamless integration with our company's mature suite of quantitative analysis tools, which have been extensively deployed and validated in production environments. These tools access our comprehensive real-time financial database, which maintains extensive coverage of market stocks, including both structured data (price movements, trading volumes, financial metrics) and unstructured data (corporate announcements, analyst reports, market news).\nWhen FinSphere identifies the necessity for specific quantitative analysis, it triggers the corresponding tool from our production suite. These"}, {"title": "Instruction Tuning", "content": "We have conducted instruction fine-tuning on Qwen2-72B using our expert-curated Stocksis dataset to enhance the model's financial analysis capabilities. The Stocksis dataset, as introduced in Section 3.1 comprises 5,000 high-quality training pairs, each consisting of structured prompts with comprehensive quantitative tool outputs and corresponding expert-authored analyses. The fine-tuning process employs the LoRA (Low-Rank Adaptation) (Hu et al., 2021), which has enabled efficient parameter updates while maintaining the model's general capabilities. Through this approach, we have trained the model to interpret outputs from multiple quantitative tools, integrate diverse analytical perspectives, and generate well-structured reports following professional analytical patterns."}, {"title": "Overall Workflow", "content": "FinSphere operates through a systematic, multi-stage process to generate comprehensive financial analyses. Upon receiving a user query, FinSphere first employs chain-of-thought (CoT) reasoning to decompose the analytical request into structured subtasks and identifies the appropriate quantitative tools required for each component.\nFollowing task decomposition, the selected quantitative tools independently access our real-time financial database. Each tool retrieves the most current market data and information pertinent to its analytical domain, generating specialized analyses that reflect up-to-the-minute market conditions. These analyses range from technical indicators to fundamental metrics, providing a multi-dimensional view of the comprehensive analysis.\nThe final stage involves our Stocksis-tuned model, which serves as an expert analyst. The model receives all specialized analyses as input and synthesizes them into a cohesive, high-quality response. Through instruction fine-tuning on the Stocksis dataset, the model has developed sophisticated capabilities in interpreting quantitative outputs and generating professional-grade financial analyses. This integrated workflow ensures that FinSphere's responses combine the precision of quantitative analysis with the nuanced understanding of expert financial reasoning, all while maintaining real-time relevance."}, {"title": "Evaluation", "content": "Given FinSphere's integration with real-time financial databases and proprietary quantitative tools, it possesses analytical capabilities that extend beyond those of general-purpose LLMs. Traditional performance comparisons between FinSphere and general LLMs present inherent challenges, primarily due to the latter's inability to access real-time financial data and domain-specific information. For example, GPT-40 typically acknowledges its limitations with responses like \"As an AI language model with knowledge cut-off in October 2023, I don't have access to real-time stock information.\" To demonstrate FinSphere's enhanced capabilities while ensuring a fair comparison, we have implemented a comprehensive experimental design.\nBaseline. Our comparative analysis evaluates three categories of models: single LLM, Agent-based systems, and FinSphere. For LLM-based models, we test proprietary models (GPT-40, GPT3.5), open-source model (Qwen2-72B), and domain-specific models (InvestLM (Yang et al., 2023b), FinGPT (Yang et al., 2023a)), all using chain-of-thought prompting with few-shot examples and relevant background information (detailed in Appendix D). For Agent-based systems, we evaluate FinMem (Yu et al., 2024) and FinRobot (Yang et al., 2024), employing simplified prompts with few-shot examples and background information, like the input of Stocksis. Finally, we evaluate FinSphere through direct user queries, leveraging its integrated real-time database and quantitative tools (detailed in Appendix I)."}, {"title": "Generation Contrast", "content": "Comprehensive results in demonstrate FinSphere's superior performance across all assessment dimensions, achieving an overall score of"}, {"title": "Ablation Study", "content": "To investigate the impact of training data scale on FinSphere's performance, we conduct an ablation study using different proportions of the Stocksis dataset. We fine-tune Qwen2-72B using 20%, 50%, 80%, and 100% of the 5,000 data pairs while maintaining FinSphere's framework. The detailed evaluation results are provided in Appendix B."}, {"title": "Conclusion", "content": "This paper introduces FinSphere, an innovative stock analysis agent that addresses critical gaps in the capabilities of LLMs for stock analysis. By integrating real-time financial databases, quantitative tools, and an instruction-tuned LLM, FinSphere demonstrates superior performance in generating comprehensive stock analyses. The development and release of Stocksis, a high-quality dataset for enhancing LLMs' stock analysis capabilities, and AnalyScore, a systematic evaluation framework, provide valuable resources for advancing research in AI-powered financial analysis. Our experimental results indicate that FinSphere consistently outperforms general-purpose, domain-specific LLMs and Agent systems across multiple evaluation dimensions, highlighting the effectiveness of our integrated approach. This work represents a significant advancement toward democratizing access to professional-grade financial analysis tools while maintaining analytical rigor and practical utility."}]}