{"title": "CE-QArg: Counterfactual Explanations for Quantitative Bipolar Argumentation Frameworks", "authors": ["Xiang Yin", "Nico Potyka", "Francesca Toni"], "abstract": "There is a growing interest in understanding arguments' strength in Quantitative Bipolar Argumentation Frameworks (QBAFs). Most existing studies focus on attribution-based methods that explain an argument's strength by assigning importance scores to other arguments but fail to explain how to change the current strength to a desired one. To solve this issue, we introduce counterfactual explanations for QBAFs. We discuss problem variants and propose an iterative algorithm named Counterfactual Explanations for Quantitative bipolar Argumentation frameworks (CE-QArg). CE-QArg can identify valid and cost-effective counterfactual explanations based on two core modules, polarity and priority, which help determine the updating direction and magnitude for each argument, respectively. We discuss some formal properties of our counterfactual explanations and empirically evaluate CE-QArg on randomly generated QBAFs.", "sections": [{"title": "1 Introduction", "content": "Explainable AI (XAI) aims to enhance the transparency and trustworthiness of AI models by providing explanations for their decision-making process (Adadi and Berrada 2018), which is crucial in high-stakes decision-making domains such as healthcare, finance, and judiciary. Recently, explaining the reasoning process of Quantitative Bipolar Argumentation Frameworks (QBAFs) (Baroni et al. 2015) has received increasing attention (Kampik and \u010cyras 2022; Yin, Potyka, and Toni 2023; Kampik et al. 2024). QBAFS consist of arguments, binary relations (of support and attack), and a base score function that ascribes initial strengths to each argument. QBAFs semantics typically determine each argument's (final) strength based on the strength of its attackers and supporters (e.g. see (Leite and Martins 2011; Baroni et al. 2015; Amgoud and Ben-Naim 2018)), which allows quantitative reasoning among contradictory information (\u010cyras et al. 2021; Potyka 2021; Ayoobi, Potyka, and Toni 2023; Potyka, Yin, and Toni 2023). To explain arguments' final strength, often attribution-based methods are applied (e.g. see (Kampik and \u010cyras 2022; Kampik et al. 2024; Yin, Potyka, and Toni 2023)). These methods assign \"importance scores\" to arguments, showing how much they contribute to the final strength of arguments of interest.\nTo illustrate the idea, Figure 1 shows a QBAF to decide whether a person's loan application will be approved. This"}, {"title": "2 Related Work", "content": "The literature on QBAF explanations primarily focuses on attribution-based explanations. These methods aim to explain the reasoning outcome for (final strength of) a particular argument (referred to as the topic argument) in a QBAF by assigning importance scores to arguments. There are various ways to define these importance scores, including removal-based methods (Kampik et al. 2024) that measure the impact of removing an argument; gradient-based methods (Yin, Potyka, and Toni 2023) that measure sensitivity with respect to an argument's base score; and Shapley-based methods (Kampik et al. 2024) that distribute the overall impact among all arguments using tools from game theory. Shapley-based methods can also be used to attribute importance scores to edges (attacks and supports) rather than arguments in a QBAF to explain their impact (Amgoud, Ben-Naim, and Vesic 2017; Yin, Potyka, and Toni 2024). While attribution-based explanations are helpful and intuitive in explaining outcomes (final strength), they cannot guide improving them by altering the inputs (QBAFs). We focus instead on counterfactual explanations.\nCounterfactual explanations are typically used in XAI (Wachter, Mittelstadt, and Russell 2017) to indicate paths towards \u201calgorithmic recourse\u201d. Counterfactual explanations for QBAFs have not been well-studied. A recent study by (Kampik, \u010cyras, and Alarc\u00f3n 2024) focuses on explaining why the strengths' partial order of two topic arguments swap after updating QBAFs (e.g. by adding/removing arguments/edges or changing the base scores of arguments),\nseeing counterfactual explanations as argument sets whose elements, when updated, cause this swap. For example, suppose there are two topic arguments a and \u03b2 in a QBAF and the final strength of a is smaller than that of B. If a supporter \u03b3 for a were added, resulting in a's strength becoming larger than \u1e9e's, then the set {y} is a possible counter-factual explanation for the strength swap between a and \u03b2. Instead, we focus on explaining arguments' strength rather than partial orders between arguments' strengths. Additionally, we focus on counterfactuals as base score functions in structure-fixed QBAFs rather than as argument sets in structure-changeable QBAFs. Another work (Oren et al. 2022), implicitly relates to counterfactual explanations for QBAFs under gradual semantics, by studying the inverse problem of identifying base score functions that can lead to a desired ranking of strengths for all arguments. Differently, we focus on reaching a desired strength for topic arguments instead of a desired ranking of all arguments.\nIt is also worth mentioning (Sakama 2014), which initially introduced and investigated counterfactual problems in the argumentation area. This work studies what would happen if an initially accepted (rejected) argument were rejected (accepted) (e.g. by adding a new attacker or removing all the attackers towards an argument) and how to explain the corresponding acceptance change of arguments. Differently from our method, this work focuses on abstract argumentation under complete labellings (Dung 1995) and on the consequences of changes rather than their causes as we do."}, {"title": "3 Preliminaries", "content": "Formally, a QBAF can be defined as follows.\nDefinition 1. A Quantitative Bipolar Argumentation Frame-work (QBAF) is a quadruple Q = (A,R\u2212,R+,\u03c4) consisting of a finite set of arguments A, binary relations of attack\n$R^{-} \\subseteq A \\times A$ and support $R^{+} \\subseteq A \\times A$ ($R^{-} \\cap R^{+} = \\emptyset$) and a base score function $\u03c4 : A\\rightarrow [0, 1]$.\nThe base score function in QBAFs ascribes initial strengths (base scores) to arguments therein. QBAFs may be represented graphically (as in Figure 1) using nodes to represent arguments and their base scores and edges to show the relations among arguments. Then QBAFs are said to be (a)cyclic if the graphs representing them are (a)cyclic.\nDefinition 2. A gradual semantics \u03c3 is a function that evaluates a QBAF Q = <A,R\u2212,R+,\u03c4) by ascribing values \u03c3(\u03b1) \u2208 [0, 1] to every a \u2208 A as their strength.\nDifferent (gradual) semantics typically ascribe different strengths to arguments. Most semantics define the strength of an argument through an iterative procedure involving two functions: first, an aggregation function aggregates the strength of the argument's attackers and supporters; then, an influence function combines the aggregation values with the argument's base score to determine its strength. Gradual semantics guarantee convergence for acyclic QBAFs (Potyka 2019). For cyclic QBAFs, the strength values may not converge (Mossakowski and Neuhaus 2018), but when they do, they converge quickly in practice (Potyka 2018). Our focus in this paper is on cases where convergence occurs, as we"}, {"title": "4 Counterfactuals for QBAFS", "content": "We define three counterfactual problems (see Figure 2) and explore the existence of solutions thereto (i.e. counterfactuals) and their relationships. Intuitively, given a QBAF, a topic argument and a desired strength therefor, we see counterfactuals as changes to the base score function to obtain the desired strength for the topic argument."}, {"title": "4.1 Strong Counterfactual Problem", "content": "Definition 4. Given a topic argument a\u2217 \u2208 A and a desired strength s\u2217 for a\u2217 such that \u03c3(\u03b1\u2217) \u2260 s\u2217 in Q, the strong counterfactual problem amounts to identifying a base score function \u03c4' \u2260 \u03c4 such that \u03c3\u03c4\u2032(\u03b1\u2217) = s\u2217 (in Q\u03c4\u2032).\nIn Figure 2 (left), \u03c4 is in the (undesired) red part and \u03c41, \u03c42, \u03c43 in the green part are possible counterfactuals (base score functions) as they exactly hit the desired strength.\nA trivial solution to the strong counterfactual problem might be just setting the base score of the topic argument to the desired strength and the base score of all others to 0.\nDefinition 5. Given a topic argument a\u2217 \u2208 A and a desired strength s\u2217 for a\u2217, the trivial counterfactual is the base score function \u03c4' \u2260 \u03c4 such that \u03c4'(a\u2217) = s\u2217 and \u03c4'(a) = 0 for all a \u2208 A \\ {a\u2217}.\nThe trivial counterfactual is a solution to the strong counterfactual problem if the semantics satisfies the following stability property (Amgoud and Ben-Naim 2018)."}, {"title": "Definition 6.", "content": "A gradual semantics \u03c3 satisfies s-stability iff for any a \u2208 A, whenever \u03c3(\u03b2) = 0 for all (\u03b2,\u03b1) \u2208 R\u2212U R+, then \u03c3(\u03b1) = \u03c4(\u03b1).\nProposition 1 (Solution Existence). If o satisfies s-stability and Q is acyclic, then the trivial counterfactual is a solution to the strong counterfactual problem.\nProposition 2. QE, REB, and DF-QuAD satisfy s-stability."}, {"title": "4.2 \u03b4-Approximate Counterfactual Problem", "content": "Ensuring that the final strength of a topic argument analytically equals the desired strength may be challenging due to the complexity of the definition of gradual semantics that may involve various linear and nonlinear transformations (e.g., QE, REB and DF-QuAD). Thus, we consider the following relaxation of the strong counterfactual problem.\nDefinition 7. Given a constant \u03b4 > 0, a topic argument a\u2217 \u2208 A and a desired strength s\u2217 for a\u2217 such that \u03c3(\u03b1\u2217) \u2260 s\u2217 in Q, the d-approximate counterfactual problem amounts to identifying a base score function \u03c4' \u2260 \u03c4 such that\n\u2022 if \u03c3(\u03b1\u2217)<s\u2217 in Q, then s\u2217 \u2264\u03c3\u03c4\u2032(\u03b1\u2217)\u2264s\u2217+d in Q\u03c4\u2032 and\n\u2022 if \u03c3(\u03b1\u2217)> s\u2217 in Q, then s\u2217 \u2212\u03b4<\u03c3\u03c4\u2032(\u03b1\u2217)\u2264s\u2217 in Q\u03c4\u2032.\nAs an illustration, in Figure 2 (middle), \u03c41, \u03c42 and \u03c43 are all solutions to the 8-approximate counterfactual problem as they all lie in the 8-interval region of the desired strength."}, {"title": "4.3 Weak Counterfactual Problem", "content": "For practical applications, it is also worth further relaxing the 8-approximate counterfactual problem, e.g. when QBAFs are used to solve binary classification problems (Cocarascu, Rago, and Toni 2019; Kotonya and Toni 2019), the topic argument's final strength does not necessarily need to equal or approximate the desired strength. Concretely, in an argumentative movie recommender system of (Cocarascu, Rago, and Toni 2019), as long as a movie's rating (final strength) is higher than some threshold, the movie is considered of good quality. Thus, we next propose the following further relaxation of the strong counterfactual problem.\nDefinition 8. Given a topic argument a\u2217 \u2208 A in Q and a desired strength s\u2217 for a\u2217 such that \u03c3(\u03b1\u2217) \u2260 s\u2217 in Q, the weak counterfactual problem amounts to identifying a base score function \u03c4'\u2260\u03c4 such that\n\u2022 if \u03c3(\u03b1\u2217) < s\u2217 in Q, then \u03c3\u03c4\u2032(\u03b1\u2217) \u2265 s\u2217 in Q\u03c4\u2032 and\n\u2022 if \u03c3(\u03b1\u2217) > s\u2217 in Q, then \u03c3\u03c4\u2032(\u03b1\u2217) < s\u2217 in Q\u03c4\u2032.\nAs an illustration, in Figure 2 (right), \u03c41, \u03c42 and \u03c43 are all solution to the weak counterfactual problem as they all cross the threshold (red diagonal line)."}, {"title": "4.4 Validity and Problem Relationships", "content": "We define notions of validity for counterfactuals and then explore the relationships among these notions.\nTo be consistent with the literature of counterfactuals in XAI, if a base score function is a solution to a counterfactual problem, we say that this solution is a valid counterfactual.\nDefinition 9. A valid counterfactual for the strong/8-approximate/weak counterfactual problem is a base score function T' which is a solution to the strong/8-approximate/weak counterfactual problem, respectively.\nTo illustrate, in Figure 2, all \u03c41, \u03c42 and \u03c43 are valid counterfactuals as they are solutions to the (respective) problems.\nNext, we study relationships among valid counterfactuals.\nProposition 3 (Problem Relationships).\n1. If a counterfactual is valid for the strong counterfactual problem, then it is also valid for the 8-approximate and weak counterfactual problems.\n2. If a counterfactual is valid for the 8-approximate counterfactual problem, then it is also valid for the weak counterfactual problem.\nCorollary 1. If \u03c3 satisfies s-stability and Q is acyclic, then the trivial counterfactual is valid for the strong/d-approximate/weak counterfactual problem.\nHowever, non-trivial valid counterfactuals do not always exist when not allowing directly setting the base score of the topic argument to the desired strength. For instance, when a topic argument is not connected with any other arguments in the QBAF, then there is no non-trivial counterfactual.\nProposition 4 (Uniqueness). There is a unique valid counterfactual (for the strong/d-approximate/weak counterfactual problem) iff the trivial counterfactual is the only valid counterfactual (for the respective problem).\nWe leave to future study the identification of special classes of QBAFs for which non-trivial counterfactual explanations can be always guaranteed to exist."}, {"title": "5 Cost-Effective Counterfactuals", "content": "In this section we turn to computational challenges: we aim to design an algorithm that can return not only valid but also cost-effective counterfactuals for the 8-approximate counterfactual problem. We focus on this problem because, as discussed in Section 4.2, it may be unrealistic to aim at exactly matching the desired strength and solve the strong counterfactual problem and, by Proposition 3, once a valid 8-approximate counterfactual is returned, it is also valid for the weak counterfactual problem. We interpret cost as distance: the shorter the distance, the lower the cost of a counterfactual. This is in line with literature on counterfactual explanations in XAI (Wachter, Mittelstadt, and Russell 2017). To illustrate, in Figure 2 (middle), while \u03c41, \u03c42 and \u03c43 are all valid \u03b4-approximate, their distance to the original base score varies, using the following notion of distance.\nDefinition 10. The Lp-Norm Distance between \u03c4 and \u03c4' is:\n$d_{p}(\u03c4, \u03c4') = \\sqrt[p]{\\sum_{\\alpha \\in A} |\u03c4(\\alpha) - \u03c4'(\\alpha)|^{p}}$"}, {"title": "5.1 Algorithm Design Properties", "content": "We will design an iterative algorithm that incrementally adapts the weight to find a close counterfactual. To do so, we need to determine an updating direction and magnitude, which means deciding how much each argument's base score should be increased or decreased. To determine the former, we partition arguments based on their polarity. We first define paths and connectivity between arguments.\nDefinition 11. For any \u03b1, \u03b2\u2208 A, we let $p_{\\alpha \\leftrightarrow \\beta} = ((\\gamma_{0}, \\gamma_{1}), (\\gamma_{1}, \\gamma_{2}),......, (\\gamma_{n-1}, \\gamma_{n}))$(n \u2265 1) denote a path from \u03b1 to \u03b2, where \u03b1=\u03b30, \u03b2 = \u03b3n, \u03b3i \u2208 A(1 \u2264 i \u2264 n) and (\u03b3i\u22121, \u03b3i) \u2208 R\u2212UR+.\nNotation 2. We let $P_{\\alpha \\leftrightarrow \\beta}$ denote the length of path $p_{\\alpha \\leftrightarrow \\beta}$. and $|P_{\\alpha \\leftrightarrow \\beta}|$ denote the set of all paths from \u03b1 to B, and the number of paths in $P_{\\alpha \\leftrightarrow \\beta}$, respectively.\nWe next distinguish three types of connectivity based on the number of paths from one argument to another.\nDefinition 12. For any \u03b1, \u03b2\u2208A:\n\u2022 \u03b2 is disconnected from \u03b1 iff $P_{\\beta \\leftrightarrow \\alpha}$ = 0;\n\u2022 \u03b2 is single-path connected to \u03b1 iff $|P_{\\beta \\leftrightarrow \\alpha}|$ = 1;\n\u2022 \u03b2 is multi-path connected to \u03b1 iff $|P_{\\beta \\leftrightarrow \\alpha}|$ > 1.\nExample 1. Consider the QBAF in Figure 3. \u03b3 is disconnected from \u03b2 because there is no path from \u03b3 to \u03b2; \u03b3 is single-path connected to \u03b4 via path $p_{\\gamma \\leftrightarrow \\delta} = ((\\gamma, \\delta))$; \u03b1 is multi-path connected to \u03b2, because there are infinitely many paths from \u03b1 to \u03b2, namely $p_{\\alpha \\leftrightarrow \\beta} = ((\\alpha, \\beta))$, $P_{\\alpha \\leftrightarrow \\beta} = ((\\alpha, \\beta), (\\beta,\\alpha), (\\alpha, \\beta))$ and so on.\nInspired by (Rago, Li, and Toni 2023; Yin, Potyka, and Toni 2023), we define polarity to characterize the influence between arguments according to their connectivity and the number of attacks on paths between them.\nDefinition 13. The polarity from \u03b2 to \u03b1 (\u03b1,\u03b2\u2208A, \u03b1\u2260\u03b2) is:\n\u2022 neutral (\u03b2 is neutral to \u03b1) iff \u03b2 is disconnected from \u03b1;\n\u2022 positive (\u03b2 is positive to \u03b1) iff $P_{\\alpha \\leftrightarrow \\beta} \u2260 \\emptyset$ and for every path $p_{\\alpha \\leftrightarrow \\beta} \u2208 P_{\\beta \\leftrightarrow \\alpha}, |p_{\\beta \\leftrightarrow \\alpha}\u2229R^{-}|$ is even;\n\u2022 negative (\u03b2 is negative to \u03b1) iff $P_{\\beta \\leftrightarrow \\alpha} \u2260 \\emptyset$ and for every path $p_{\\beta \\leftrightarrow \\alpha} \u2208 P_{\\beta \\leftrightarrow \\alpha}, |p_{\\beta \\leftrightarrow \\alpha} \u2229R^{-}|$ is odd;\n\u2022 unknown (\u03b2 is unknown to \u03b1) iff $\u2203p'_{\\beta \\leftrightarrow \\alpha} \u2208 P_{\\beta \\leftrightarrow \\alpha}$ such that $|p'_{\\beta \\leftrightarrow \\alpha} \u2229R^{-}|$ is even and $\u2203p''_{\\beta \\leftrightarrow \\alpha} \u2208 P_{\\beta \\leftrightarrow \\alpha}$ such that $|p''_{\\beta \\leftrightarrow \\alpha} \u2229R^{-}|$ is odd."}, {"title": "So,", "content": "if \u03b2 is single-path connected to a, then it is positive or negative to a; if \u03b2 is multi-path connected to a, unless it is positive or negative to a on every path, it is unknown to a.\nExample 2. In Figure 3, y is neutral to \u03b2; \u03b3 is positive to \u03b4 as there is only one path py\u21928 with 0 (even number) attacks; a is negative to \u1e9e since, although there are infinitely many paths from a to \u03b2, each path has an odd number of attacks; B is unknown to d as for one path $p'_{\\beta \\leftrightarrow \\delta} = ((\\beta, \\delta))$, it has 1 attack, while for another path $p''_{\\beta \\leftrightarrow \\delta} = ((\\beta, \\gamma), (\\gamma, \\delta))$, it has 0 attacks. Hence, \u1e9e is unknown to \u03b4.\nWe can restrict the update direction of arguments based on their polarity assuming that o respects directionality and monotonicity. Directionality (Amgoud and Ben-Naim 2016) states that an argument can affect only arguments that can be reached from a directed path.\nDefinition 14. A semantics \u03c3 satisfies directionality iff, for any Q and Q'=(A',R\u2212',R+', \u03c4') such that A = A', $R^{-} \\subseteq R^{-'}$, and $R^{+} \\subseteq R^{+'}$, the following holds: for any \u03b1, \u03b2, \u03b3\u2208 A, let \u03c3Q\u2032(\u03b3) denote the strength of \u03b3 in Q', if R\u2212'UR+' = R\u2212UR+ \u222a {(a, \u03b2)} and $P_{\\beta \\leftrightarrow \\gamma}$ = \u00d8, then \u03c3(\u03b3) = \u03c3Q\u2032(\u03b3).\nProposition 5. If a semantics o satisfies directionality, then for any \u03b1, \u03b2\u2208 A such that \u1e9e is neutral to a and for any \u03c4' such that \u03c4' (\u03b2) is an arbitrary value from [0, 1] and \u03c4' (\u03b3) = \u03c4(\u03b3) for all \u03b3\u2208 A\\ {\u03b2}, \u03c3Q\u2032(\u03b1) = \u03c3(\u03b1) always holds.\nProposition 6. QE, REB, DF-QuAD satisfy directionality.\nFor semantics satisfying directionality, by Proposition 5, we could just maintain the base scores of neutral arguments (wrt. the topic argument) when identifying counterfactuals.\nMonotonicity states that increasing (decreasing) the base score of a single-path connected supporter (attacker) will not decrease (increase) the final strength of the topic argument.\nDefinition 15. A semantics o satisfies monotonicity iff for any a, \u03b2\u2208 A such that \u03b2 is single-path connected to a, for any \u03c41,\u03c42 with \u03c41(\u03b2) \u2264 \u03c42(\u03b2) and \u03c41(y)=\u03c42(\u03b3) for all y\u2208 A\\{\u03b2}:\n\u2022 if (\u03b2, \u03b1) \u2208 R\u2212, then \u03c3\u03c4\u2081 (\u03b1) \u2265 \u03c3\u03c4\u03bf (\u03b1);\n\u2022 if (\u03b2, \u03b1) \u2208 R+, then \u03c3\u03c4\u2081 (\u03b1) \u2264 \u03c3\u03c4\u03bf (\u03b1).\nProposition 7. If a semantics o satisfies monotonicity, then for any \u03c41, \u03c42 such that \u03c41(\u03b2) < \u03c42(\u03b2) and \u03c41(\u03b3) = \u03c42(\u03b3) for all y \u2208 A \\ {\u03b2}:\n\u2022 if \u1e9e is negative to a, then \u03c3\u03c4\u2081 (\u03b1) \u2265 \u03c3\u03c4\u03bf (\u03b1);\n\u2022 if \u1e9e is positive to a, then \u03c3\u03c4\u2081 (\u03b1) \u2264 \u03c3\u03c4\u03bf (\u03b1).\nProposition 8. QE, REB, DF-QuAD satisfy monotonicity.\nFor semantics satisfying monotonicity, by Prop. 7, we can increase a topic argument's the strength by increasing (decreasing) the base scores of positive (negative) arguments.\nWe now consider unknown arguments. Since their base scores may not be globally monotonic to the strength of a topic argument, we cannot simply decide an invariant updating direction for their base scores. For example, in Figure 4 where the base scores of all arguments are 0, with the increase of \u1e9e's base score from 0 to 1 while all others remain the same, the final strength of a displays a non-monotonic effect, increasing initially and then decreasing. To overcome"}, {"title": "Definition 16.", "content": "For any \u03b1", "is": "n$\\Delta_{\\beta \\rightarrow \\alpha"}, {"\u03b2": "n\u2022 if \u1e9e is disconnected from a"}, {"title": "5.2 Algorithms", "content": "Algorithm 1 computes the polarity from a to \u03b2 (a \u2260 \u03b2) in three steps. Firstly, we compute all the non-cyclic paths from a to \u1e9e with Depth-First Search (DFS) and store them in a set of paths called Pa\u2194\u03b2. If there is no path, then the polarity is neutral. Secondly, all the nodes in all the paths are checked for cycles with the function find_cycles. If any of the node is part of a cycle, then we check whether each cycle contains an odd number of attacks. If this is the case, then the polarity from a to \u03b2 is unknown because the cycle will contain both odd and even numbers of attacks by going through the cycle an odd or even number of times. For instance, suppose a QBAF consists of two arguments a and \u03b2, where a attacks \u03b2, and \u1e9e supports a. In this case, path ((\u03b1, \u03b2)) is negative while ((\u03b1, \u03b2), (\u03b2, \u03b1), (\u03b1, \u03b2)) is positive, thus a is unknown to B. Finally, we check the number of attacks on every path: if all the paths contain an odd (even) number of attacks, a is negative (positive) to \u1e9e, and it is unknown otherwise.\nAlgorithm 2 computes the priority from a to B. We define the self-priority of an argument as a constant greater than 1. Thus an argument has the highest priority to itself than any others. Next, we perform a DFS to compute all the non-cyclic paths from a to \u1e9e and return the reciprocal of the shortest path length.\nFinally, Algorithm 3 (which we call CE-QArg for Counterfactual Explanations for Quantitative bipolar Argumentation frameworks) is an iterative updating algorithm for identifying valid and cost-effective d-approximate counterfactuals. CE-QArg essentially involves determining the direction and magnitude of arguments. For brevity, we assume the current strength of the topic argument is less than the desired one. Firstly, we compute the polarity and priority for each argument with the function func polarity and func priority from Algorithm 1 and 2, respectively. Secondly, the key part of this algorithm is to determine the updating direction in every updating iteration. For this, we need an update list to record the updating direction in each iteration. For positive, negative and neutral arguments (lines 5-10), we only need to identify the updating direction once since they remain invariant, whereas, for unknown arguments (lines 13-20), we need to compute their updating direction in every iteration by difference quotient using the function func_dquo, which can be intuitively implemented by Definition 16 (so we omit the details). Once the updating direction of every argument is determined in an iteration, we update the base scores of all arguments all in one go by a small step multiplied by their priority (line 22) and make sure they are within the bounds. We assume the step is small enough that the interactions among arguments can be neglected. We repeat this procedure iteratively until the current strength reaches the desired strength, after which we return a possible counterfactual (lines 11-24)."}, {"title": "6 Formal Properties for Explanations", "content": "We study the properties for counterfactuals, with a focus on the neutral, negative, and positive arguments. Here, we assume the gradual semantics considered satisfy both directionality and monotonicity. Note that the properties of explanations are distinct from those of semantics, despite the satisfaction of the former being dependent on the latter.\nExistence (\u010cyras, Kampik, and Weng 2022; Kampik et al. 2024) is a commonly considered property for explanations. It says that if the strength of an argument differs from its base score, then there must exist an argument that caused the change. Alteration Existence states that if a valid counterfactual increases the strength of the topic argument, then there must exist a positive (negative) argument whose base score is also increased (decreased) in the counterfactual whenever the QBAF does not have any unknown arguments.\nProposition 10 (Alteration Existence). Given a valid counterfactual T\u2217 (for the strong/d-approximate/weak counterfactual problem), a topic argument a\u2217 \u2208 A such that"}, {"title": "\u03c4\u2217(\u03b1\u2217) = \u03c4(\u03b1\u2217), and \u2260\u03b2 \u2208 A (\u03b2 \u2260 x\u2217) such that B is unknown to a\u2217", "content": "1. If \u03c3(\u03b1\u2217)\u2260\u03c3\u03c4\u2217 (\u03b1\u2217), then \u2203\u03b3\u2208 A such that \u315c(\u03b3)\u2260t\u2217(y);\n2. If \u03c3(\u03b1\u2217) < \u03c3\u03c4\u2217(\u03b1\u2217), then either \u2203\u04af \u2208 A such that y is positive to a\u2217 and \u03c4(\u03b3) \u2264 \u03c4\u2217(\u03b3) or \u2203\u04af \u2208 A such that y is negative to a\u2217 and \u03c4(\u03b3) \u2265 \u03c4\u2217(\u03b3);\n3. If \u03c3(\u03b1\u2217) > \u03c3\u03c4\u2217(\u03b1\u2217), then either \u2203y \u2208 A such that y is positive to a\u2217 and \u03c4(\u03b3) \u2265 \u03c4*(y) or \u2203\u04af \u2208 A such that y is negative to a\u2217 and \u03c4(\u03b3) \u2264 \u03c4*(\u03b3).\nGiven that validity is fundamental for counterfactuals, we introduce two properties associated with validity.\nFor attribution-based explanations for QBAFs, it is interesting to explore the effects of removing or nullifying an argument (by setting its base score to 0 \u2013 e.g. see removal-based contribution functions in (Kampik et al. 2024) and agreement in (Yin, Potyka, and Toni 2023)). For counterfactual explanations, it is essential to consider the validity of a counterfactual if it is perturbed. Combining both ideas, we propose a novel property called nullified-validity, which examines whether a valid counterfactual remains valid even after nullifying an argument. For example, nullifying a positive argument in a valid counterfactual could still result in a valid counterfactual if a smaller strength is expected for the topic argument in the weak counterfactual problem.\nProposition 11 (Nullified-Validity). Given a valid coun-"}, {"title": "terfactual T\u2217 (for the strong/d-approximate/weak counterfactual problem), a topic argument a\u2217 \u2208 A and a desired strength s\u2217 for a\u2217, and another base score function T\u00ba such that for some \u03b2\u2208 A (\u03b2 \u2260 \u03b1\u2217), \u03c4\u00ba (\u03b2) = 0 and \u03c4\u00ba(\u03b3) = \u03c4\u2217 (\u03b3) for all y \u2208 A \\ {\u03b2}", "content": "1. If \u1e9e is neutral to a\u2217, then t\u00ba is still valid for the strong/d-approximate/weak counterfactual problem;\n2. If \u1e9e is negative to a\u2217 and \u03c3\u03c4\u2217 (\u03b1\u2217) \u2265 s\u2217, then t\u00ba is still valid for the weak counterfactual problem;\n3. If \u1e9e is positive to a\u2217 and \u03c3\u03c4*(a*) < s*, then r\u00ba is still valid for the weak counterfactual problem.\nIn attribution-based explanations for QBAFs, it is also interesting to compare two related explanations and study their properties (e.g., see monotonicity in (Yin, Potyka, and Toni 2023) and dominance in (Amgoud, Ben-Naim, and Vesic 2017; Yin, Potyka, and Toni 2024)). We extend this idea to counterfactuals by focusing on the validity property. Related-validity identifies a valid counterfactual by comparing it with another already valid counterfactual without re-computing the strengths of arguments. To illustrate, suppose we have a valid counterfactual for the weak counterfactual problem, where the strength of the topic argument is as small as desirable. Then we can compare it with another counterfactual: if the latter counterfactual has a smaller base score in a positive argument while keeping all other base scores the same, it is still considered valid.\nProposition 12 (Related-Validity). Given a valid counterfactual explanation T* (for the weak counterfactual problem), a topic argument a* \u2208 A and a desired strength s* for a* such that \u03c3\u03c4*(a*) \u2265 s*, for every other base score function \u03c4' in Q\u2081', and all \u03b2 \u2208 A (\u03b2 \u2260 a*):"}, {"title": "1. If \u03b2\u2208 A is neutral to a\u2217", "content": "\u03c4'(\u03b2) \u2265 \u03c4*(\u03b2) and \u03c4'(\u03b3) = \u03c4*(\u03b3) for all y \u2208 A \\ {3}, then \u03c4' is also valid (for the weak counterfactual problem);\n2. If \u03b2\u2208 A is negative to a*, \u03c4'(\u03b2) \u2264 \u03c4*(\u03b2) and \u03c4' (\u03b3) = \u03c4*(\u03b3) for all y \u2208 A \\ {\u03b2}, then \u03c4' is also a valid counterfactual (for the weak counterfactual problem);\n3. If \u03b2\u2208 A is positive to a*, \u03c4' (\u03b2) \u2265 \u03c4*(\u03b2) and \u03c4' (\u03b3) = \u03c4*(\u03b3) for all y \u2208 A \\ {\u03b2}, then \u03c4' is also a valid counterfactual (for the weak counterfactual problem).\nProof. 1. If \u1e9e is neutral to a*, then increasing \u03c4(\u03b2) will not impact the final strength of a*, thus, \u03c4' is still valid for the weak counterfactual problems.\n2. If the current strength is valid and greater or equal to the desired strength, then \u03c4' is still valid if it does not decrease the current strength. Since \u1e9e is negative to a*, decreasing the base score of \u1e9e will not decrease the final strength of a*. Thus, \u03c4' is still valid for the weak counterfactual problem.\n3. Analogously to the proof in 2."}, {"title": "7 Evaluations", "content": "We show effectiveness (Experiment 1), scalability (Experiment 2) and robustness (Experiment 3) of CE-QArg. In this section, we focus on the 8-approximate counterfactual problem and valid explanations therefor with d = 0.1.\nSettings We conducted experiments separately using acyclic and cyclic QBAFs. For acyclic QBAFs, we generated tree-like QBAFs as they occur in many"}]}