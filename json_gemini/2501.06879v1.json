{"title": "Defect Detection Network In PCB Circuit Devices Based on\nGAN Enhanced YOLOv11", "authors": ["Jiayi Huang", "Feiyun Zhao", "Lieyang Chen"], "abstract": "This study proposes an advanced method for surface defect detection in printed circuit\nboards (PCBs) using an improved YOLOv11 model enhanced with a generative adversarial\nnetwork (GAN). The approach focuses on identifying six common defect types: missing hole,\nrat bite, open circuit, short circuit, burr, and virtual welding. By employing GAN to generate\nsynthetic defect images, the dataset is augmented with diverse and realistic patterns, improving\nthe model's ability to generalize, particularly for complex and infrequent defects like burrs. The\nenhanced YOLOv11 model is evaluated on a PCB defect dataset, demonstrating significant\nimprovements in accuracy, recall, and robustness, especially when dealing with defects in\ncomplex environments or small targets. This research contributes to the broader field of\nelectronic design automation (EDA), where efficient defect detection is a crucial step in ensuring\nhigh-quality PCB manufacturing. By integrating advanced deep learning techniques, this\napproach enhances the automation and precision of defect detection, reducing reliance on manual\ninspection and accelerating design-to-production workflows. The findings underscore the\nimportance of incorporating GAN-based data augmentation and optimized detection\narchitectures in EDA processes, providing valuable insights for improving reliability and\nefficiency in PCB defect detection within industrial applications.", "sections": [{"title": "1.Introduction", "content": "The quality of printed circuit boards (PCBs) is pivotal to the reliability and stability of electronic devices,\nas defects in PCBs can lead to electrical malfunctions, ultimately compromising the performance of the\nassociated equipment. To address the growing demand for higher quality standards in PCB\nmanufacturing, traditional manual inspection methods are increasingly being replaced by automated\nintelligent inspection technologies. In the domain of Electronic Design Automation (EDA), PCB defect\ndetection plays a vital role in ensuring the quality of both design and production processes. Advanced\ninspection techniques significantly enhance production efficiency, reduce human error, and streamline\nworkflows from design to manufacturing."}, {"title": "2. Literature Review", "content": "In recent years, deep learning has emerged as a transformative technology for defect detection, with\nsignificant success in tasks such as image classification and object detection. The YOLO (You Only\nLook Once) algorithm, renowned for its high efficiency and real-time detection capabilities, has gained\nprominence in PCB defect detection. YOLO simplifies object detection by converting it into a single-\nstage regression task, achieving a remarkable balance between speed and accuracy. This makes it highly\neffective for PCB scenarios involving challenges such as intricate backgrounds, small-scale defects, and\ncoexisting multiple defect types. Furthermore, the evolution of YOLO into advanced versions like\nYOLOv4, YOLOv5, and YOLOv11 has enhanced its ability to extract features and generalize to\ncomplex patterns, making it an indispensable tool in PCB defect detection.\nThis study builds on the PCB defect dataset provided by the Peking University Open Laboratory of\nHuman-Computer Interaction to propose a novel defect detection method. By integrating a generative\nadversarial network (GAN) into the YOLOv11 framework, the model benefits from the GAN's ability\nto generate synthetic defect images, effectively augmenting the dataset. This augmentation enhances the\nmodel's capacity to learn diverse and intricate defect patterns, particularly excelling in detecting rare\nand complex defects such as burrs and virtual welds.\nIn the context of EDA, the proposed method not only improves the precision and robustness of PCB\ndefect detection but also supports the automation and intelligentization of the PCB design-to-\nmanufacturing process. This research demonstrates the efficacy of GAN-enhanced YOLOv11 and\nprovides valuable insights for advancing EDA technologies in industrial applications."}, {"title": "3. Data and Model", "content": "This study utilizes the PCB defect dataset from Peking University, containing 1,386 labeled images\nacross six defect types: missing hole, mouse bite, open circuit, short circuit, burr, and virtual welding.\nTo improve model generalization, the dataset is augmented using a GAN, which generates realistic\ndefect images with diverse shapes, sizes, and positions. The GAN's generator simulates defects based\non real PCB features, while the discriminator refines the quality. This augmentation expands defect\ndiversity, particularly for complex defects like burrs, while preserving the original distribution. The\nenhanced dataset improves the model's learning, boosting detection accuracy and robustness."}, {"title": "3.2 Improved YOLOv11 Model for PCB Defect Detection", "content": "This study utilizes the YOLOv11 model for PCB defect detection. As the latest version of the YOLO\nseries, YOLOv11 maintains its fast, end-to-end detection characteristics while introducing several\nimprovements to balance speed and accuracy. Its \"one-shot\" design allows predictions for multiple\ntargets and categories through a single forward pass of the network, making it highly efficient and well-\nsuited for detecting complex PCB defects.YOLOv11 employs a dynamic anchor box allocation strategy,\ndynamically assigning anchor boxes during training to adaptively learn target shapes and sizes. This\nstrategy addresses anchor mismatch issues and improves detection accuracy, particularly for complex\ndefects such as burrs and virtual welding. This capability enhances the model's performance in\nrecognizing small and intricate targets on PCBs [8].\nThe model features a new backbone network combining the strengths of lightweight networks (e.g.,\nMobileNet) and deep convolutional networks (e.g., ResNet). This hybrid architecture balances\ncomputational efficiency with enhanced feature extraction, enabling precise detection of small defects\nand distinguishing them from background noise. YOLOv11 adapts well to diverse PCB defect types,\nensuring flexibility across different scenarios.YOLOv11 also optimizes multi-scale prediction,\nleveraging detection at various feature layers to improve performance on targets of different sizes. This\ncapability ensures robust detection across complex circuit layouts, addressing both large-scale defects\nlike short circuits and small-scale ones like mouse bites.Finally, YOLOv11 introduces a loss function\ncombining Focal Loss and IoU Loss, improving robustness against class imbalance and enhancing\nbounding box prediction accuracy. This loss function effectively reduces background noise interference,\nfurther boosting detection reliability."}, {"title": "3.3 Method Steps", "content": "To detect PCB defects, this study adopts YOLOv11 as the foundational model, specifically optimized\nfor the task of PCB defect detection. YOLOv11, known for its high detection accuracy and fast\nprocessing speed, has undergone customization and enhancements to better suit the requirements of\nPCB defect detection. The training and evaluation process consists of the following key steps:\nData Preprocessing: The augmented dataset (comprising the original dataset and GAN-generated\ndefect images) was normalized and enhanced with transformations such as rotation, scaling, and contrast\nadjustment. By integrating simulated defect images generated by GAN, the model's robustness to\ndiverse PCB image variations was improved. The dataset was randomly divided into training and\nvalidation sets to ensure the model's ability to generalize to unseen samples.\nModel Architecture Modifications: Custom anchor boxes tailored to the size distribution of PCB\ndefects (including GAN-generated defects) were introduced to enhance YOLOv1l's detection\ncapabilities. The feature extraction layers were modified by adding convolutional layers and adjusting\nkernel parameters to better capture fine-grained PCB defect features. These modifications were\nparticularly effective for detecting diverse and complex defects such as those simulated by GAN.\nAdditionally, activation functions and layer configurations were refined to increase sensitivity to subtle\nanomalies.\nModel Training: The model was trained using an innovative optimizer, Nadam (Nesterov-accelerated\nAdaptive Moment Estimation). Nadam combines the strengths of Adam and Nesterov-accelerated\ngradient, providing faster convergence and better performance, especially in complex backgrounds and\nsmall-target detection tasks [9].A dynamic learning rate mechanism was employed, with an initial\nlearning rate of 0.001 adjusted using the Cosine Annealing strategy. This approach starts with a higher\nlearning rate for global exploration, gradually reducing it to fine-tune local optimization. This strategy\nimproves convergence speed and avoids local minima.During training, three loss functions were\nmonitored: box loss, class loss, and distribution focal loss. The distribution focal loss was adjusted to\nfocus more on learning complex defect samples, particularly from GAN-generated data, effectively\nbalancing defect distribution.\nPost-Processing and Threshold Adjustment: Non-Maximum Suppression (NMS) thresholds were\nfined-tuned to minimize false positives. An adaptive confidence thresholding mechanism was\nimplemented, dynamically adjusting thresholds based on the characteristics of different defect\ncategories, including GAN-generated defects, for better distinction between defect and non-defect areas.\nModel Evaluation: The model was evaluated using metrics such as mean Average Precision (mAP),\nprecision, and recall. mAP was calculated over thresholds from 0.5 to 0.95 to comprehensively assess\ndetection accuracy across varying levels of overlap, with special attention to the improvement in\ndetecting complex GAN-simulated defects.\nBy integrating an advanced optimizer and dynamic learning rate mechanism, YOLOv11 achieved\nsignificant performance improvements in PCB defect detection. The model demonstrated enhanced\naccuracy and robustness in handling complex defect scenarios and diverse defect distributions,\nproviding strong support for automated quality control and PCB production workflows."}, {"title": "4. MODEL RESULT ANALYSIS", "content": "Figure 2 illustrates the changes in Box Loss and Class Loss for the training and validation sets. Box\nLoss measures the accuracy of bounding box predictions in locating defects. As training progresses, the\ntraining set loss decreases sharply between the 0th and 25th epoch, indicating rapid learning of\npreliminary features. It stabilizes around 1.0, suggesting the model is maturing in positioning. However,\nvalidation set loss fluctuates significantly, especially after the 50th epoch (1.5\u20132.0), indicating limited\ngeneralization and potential overfitting on some samples."}, {"title": "5.Conclusions", "content": "This study explores PCB defect detection using a GAN-enhanced YOLOv11 model, achieving notable\nsuccess. By leveraging GAN to generate diverse defect data, the model effectively handles complex\ndefect types like burrs, significantly improving generalization. Across six defect categories (missing\nhole, mouse bite, open circuit, short circuit, burr, and spurious copper), it demonstrates strong\nperformance with an average precision (P) of 0.95 and recall (R) of 0.87, reflecting high accuracy and\nstability. Analysis of loss curves highlights discrepancies between training and validation sets,\nindicating areas for improvement in generalization. Future enhancements could include more diverse\ntraining data, advanced augmentation techniques, and parameter optimization.\nAs a deep learning-based object detection algorithm, YOLOv11 exhibits substantial potential in PCB\ndefect detection, excelling in identifying multiple defects within complex backgrounds and small targets.\nThe integration of GAN-generated data enhances its ability to capture fine-grained features, making it\na valuable tool in electronic design automation (EDA). In this context, intelligent PCB defect detection\nboosts circuit design reliability, reduces manufacturing losses, and accelerates design iterations. This\nstudy provides an efficient detection solution for EDA, advancing intelligent electronic design and\nautomated technologies. The GAN-enhanced YOLOv11 model serves as a robust reference for\noptimizing EDA workflows, with future work focusing on improving performance for diverse defects\nand integration with other EDA tools."}]}