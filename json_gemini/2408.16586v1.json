{"title": "Enhancing Dialogue Generation in Werewolf Game Through Situation Analysis and Persuasion Strategies", "authors": ["Zhiyang Qi", "Michimasa Inaba"], "abstract": "Recent advancements in natural language processing, particularly with large language models (LLMs) like GPT-4, have significantly enhanced dialogue systems, enabling them to generate more natural and fluent conversations. Despite these improvements, challenges persist, such as managing continuous dialogues, memory retention, and minimizing hallucinations. The AIWolfDial2024 addresses these challenges by employing the Werewolf Game, an incomplete information game, to test the capabilities of LLMs in complex interactive environments. This paper introduces a LLM-based Werewolf Game AI, where each role is supported by situation analysis to aid response generation. Additionally, for the werewolf role, various persuasion strategies, including logical appeal, credibility appeal, and emotional appeal, are employed to effectively persuade other players to align with its actions.", "sections": [{"title": "Introduction", "content": "In recent years, the rapid development of natural language processing (NLP) technology has brought dialogue systems, one of its core applications, into the spotlight of both academia and industry (Santhanam and Shaikh, 2019; Ni et al., 2021; Treviso et al., 2023). The advent of large language models (LLMs) like GPT-4 (OpenAI, 2023) has significantly improved the ability of dialogue systems to produce natural and fluent conversations. However, despite their impressive text generation capabilities, these models still encounter significant challenges. For instance, they struggle with managing continuous dialogue, retaining memory, and minimizing the generation of hallucinations (irrelevant or incorrect information) (Minaee et al., 2024). These issues limit the effectiveness of dialogue systems in more complex interactive scenarios.\nIn this context, the \"AIWolfDial\" international competition has emerged (Kano et al., 2023). This competition aims to explore and enhance the performance of LLMs in complex interactive environments by simulating the Werewolf Game, an incomplete information game. In such games, participants lack access to all critical information and must rely on reasoning, strategy, and communication to advance. The \"AIWolfDial\" places high demands on dialogue systems, requiring them to perform logical inference, persuasion, and even deception of other players, while also managing non-task-oriented dialogues in role-playing scenarios. This competition not only tests the systems' language generation capabilities but also evaluates their adaptability to complex interactions.\nThis paper introduces the system architecture of our Al for various roles in the Werewolf Game, developed by the sUper_IL team, where each role aids dialogue generation through game situation analysis. We have specifically enhanced the persuasion skills for the werewolf role, recognizing that persuasive techniques are crucial in the game, particularly for the werewolf, as it must influence other players' voting behavior to align with its own. In our system, the werewolf role achieves persuasion through multiple rounds of persuasive dialogue. Specifically, we first employ a persuasion strategy based on logic and facts, presenting clear and compelling arguments to convince other players. Next, we utilize a trust-based persuasion strategy to build trust and credibility with other players, thereby enhancing the effectiveness of persuasion. Finally, we employ an emotion-driven persuasion strategy, using emotionally resonant language to deepen influence. This multi-dimensional persuasion strategy makes the werewolf role more convincing in the game.\nThe contributions of this study are outlined below.\n\u2022 We introduce a LLM-based Werewolf Game AI, providing a robust baseline for the AIWolfDial20241.\n\u2022 We enhance the persuasion skills for the werewolf role, utilizing a variety of strategies for persuasive dialogue."}, {"title": "Related Work", "content": "Since the rise of AI research, the focus on Al in gaming has garnered significant attention, particularly with breakthrough projects like AlphaGo (Silver et al., 2016). Among these studies, incomplete information games, such as the Werewolf Game and poker, stand out due to their unique challenges (Sonawane and Chheda, 2024). The Werewolf Game requires participants to make inferences and judgments based on limited information provided by other players, which increases the game's complexity and strategic depth. As a result, AI research on the Werewolf Game has flourished.\nNakamura et al. (2016) proposed a multi-perspective psychological model to simulate human player behavior. By constructing a \"self model\" and an \"others model,\" researchers can better infer and evaluate other players' intentions and perspectives, thereby improving AI agents' performance in the game. In terms of achieving more natural language generation, Nakamura et al. (2017) employed Werewolf Game BBS logs to paraphrase and interpret the AIWolf protocol, making AI agent dialogues more closely resemble natural human language. Kano et al. (2023), through the \"AIWolfDial2023\" competition, provided valuable insights: while AI agents based on LLMs have made significant progress in natural dialogue and long-context processing, improvements are still needed in logical reasoning and role-playing, especially in simulating deception and complex strategies.\nShibata et al. (2023) fine-tuned Transformer models to build a value network capable of predicting game win rates, guiding the next actions of the agents. Wu et al. (2024) proposed a new framework combining LLMs with external reasoning modules to enhance the reasoning abilities of LLM-based agents. Additionally, Xu et al. (2023b) introduced a framework that does not require parameter finetuning; it uses frozen LLM models to play the game by reflecting on past dialogues and experiences, demonstrating the significant potential of LLMs in communicative games. Our study, although also based on LLMs, differs from previous studies by enhancing dialogue generation through situational reasoning and strengthening persuasive skills for the Werewolf role, a crucial skill in the game."}, {"title": "Persuasive Dialogue", "content": "Persuasive dialogue has long been a focal point for dialogue researchers, revealing significant potential and complexity across various applications (Shi et al., 2020; Tran et al., 2022). Hiraoka et al. (2016) constructed a persuasive dialogue corpus by collecting and analyzing conversations between professional salespeople and customers, finding that information exchange was the most common dialogue behavior, with about 30% of persuader utterances framed as arguments. Wang et al. (2019) designed an online donation persuasion task, collecting and annotating a large dataset of dialogues, and analyzed the relationship between individual backgrounds (e.g., personality, moral values) and donation willingness. In the e-commerce sector, Adaji et al. (2021) conducted a game-based study comparing the responses of high and low-engagement shoppers to persuasive strategies, revealing that engagement levels significantly influenced responses, making it a potential factor in adjusting persuasive strategies. In education, Orji et al. (2019) investigated the effects of social comparison and rewards on competitive behavior, finding both to be effective strategies for educational persuasion systems. Additionally, Herder and Herden (2023) studied persuasive voice assistants for lifestyle advice, and Fatahi et al. (2023) examined persuasive dialogue in music recommendations, both highlighting the impact of individual differences in personality on the effectiveness of persuasion.\nRecently, LLMs have demonstrated impressive capabilities in text generation. Xu et al. (2023a) conducted an in-depth study on LLMs' sensitivity to persuasive dialogue, generating misinformation on factually answerable questions and employing various persuasive strategies in multi-turn dialogues. By tracking belief changes in LLMs during persuasive dialogues, the study found that LLMs' correct beliefs about factual knowledge could be easily manipulated by different persuasive strategies. This study references the persuasive strategies of Xu et al. (2023a), but differs by conducting persuasion in multi-party dialogues and aiming to base persuasion as much as possible on factual information through situational analysis."}, {"title": "Werewolf Game Settings", "content": "This study is set in the context of the Werewolf Game, as specified in AIWolfDial2024. Each game involves five players: one seer, one werewolf, one possessed, and two villagers. The seer and villagers comprise the human team, while the possessed and werewolf make up the werewolf team. Players are unaware of each other's roles. The game initiates on Day 0 and continues until either the human team or the werewolf team is the sole survivor, with the game lasting no more than two days.\nDay 0 involves only initial greetings among players. The seer's role activates on the night of Day 0, allowing them to inspect one player's identity each night. All players, except for the werewolf, are identified as human. Although the possessed belongs to the werewolf team, their identity will appear as \"human\" when inspected by the seer. From Day 1 onwards, players engage in multiple dialogue rounds, with the order of speaking randomized in each round. After the daytime discussion phase ends, night falls. During the night, players first collectively vote to exile one player, followed by the werewolf attacking, and then the seer conducting their divination. If the werewolf is voted out on the first night, the game concludes immediately."}, {"title": "The Proposed System Architecture", "content": "This section details the specific system architecture of our LLM-based Werewolf Game AI, with the key components depicted in Figure 1. The primary parts include the situation analysis module, the response generation module, the persuasive response generation module for the werewolf, and the voting module (not shown in the Figure 1).\nDue to the interactive and incomplete information nature of the Werewolf Game, players need to continuously exchange information to update their understanding of the game's dynamics. This makes the information constantly change. To navigate this complexity, we introduced a Situation Analysis module to more effectively guide dialogue generation, improving the timeliness and relevance of responses. Specifically, this module is configured to take the Task Description, Werewolf Game Rules, and Dialogue History as inputs, processing these through a LLM. This approach allows the LLM to integrate the information and perform a comprehensive analysis of the current game situation. To further enhance the accuracy and depth of the analysis, we employed Zero-shot Chain-of-Thought Prompting (Kojima et al., 2022). The specific prompt is shown in Figure 2, and an example of the generated situation analysis is demonstrated in Figure 3. For the seer role, we incorporated \"Divination Result\" in the prompt, such as \"On the night of Day 0, I divined Agent[01], and the result was human.\" For the possessed role, in an effort to mislead villagers and protect the werewolf, we included similar \"Divination Result\" information in the prompt, but with the Agent ID and result randomly generated."}, {"title": "Response Generation Module", "content": "When developing an AI for the Werewolf Game using LLMs, a primary challenge lies in ensuring that the generated responses are both contextually coherent and capable of logical analysis capabilities to facilitate smooth gameplay. To address this, we devised a method that leverages the task description, the rules of the Werewolf Game, the current game's dialogue history, and the situation analysis. This combination provides the LLM with the comprehensive background information necessary to produce high-quality responses.\nAs illustrated in Figure 3, the response generation process begins with inputting the situation analysis generated in the previous stage into the LLM. This step is crucial, as it furnishes the LLM with a deep understanding of the current game context, including potential strategies and behavioral motivations of the players. Additionally, as depicted in Figure 1, the task description, game rules, and dialogue history are also utilized at this stage to ensure the responses are both semantically coherent and logically sound.\nTo further optimize the relevance and effectiveness of the responses, we designed customized prompts for specific roles. For instance, Figure 4 shows the prompt used for the seer role. In this case, the seer role needs to utilize nighttime divination results to shape its daytime dialogue strategy. Accordingly, we meticulously crafted the prompt to incorporate relevant divination results, enabling the seer to effectively utilize its unique role information during interactions with other players. Moreover, in generating responses for the villager role, we exclude the \"Divination Result on Night 0\" part from the prompt, as villagers lack the special ability to access this information. By employing a strategy that integrates multiple information sources and customized prompts, our system is able to generate responses that are contextually coherent and logically rigorous, thereby adapting effectively to the complex and dynamic environment of the Werewolf Game."}, {"title": "Persuasive Response Generation", "content": "Due to the inherent incomplete information characteristic of the Werewolf Game, players must rely on interactions with others to gather intelligence. This not only requires players to analyze the collected information but also to persuade those with differing opinions to align their thoughts and voting behaviors with their own. Given this, a significant challenge for an AI playing the werewolf role lies in not only hiding its true identity but also effectively influencing and controlling the game's progress.\nIn this study, we have particularly enhanced the persuasive skills of the werewolf role, as their success largely depends on effectively masquerading as villagers and strategically influencing other players through dialogue. Drawing from a comprehensive review of prior studies (Xu et al., 2023a; Rapp, 2023), we identified three core persuasive strategies:\n\u2022 Logical Appeal: Persuasion through logic, facts, and evidence, aiming to convince other players with rational and clear arguments.\n\u2022 Credibility Appeal: Building the speaker's credibility and authority to increase the influence of their speech, encouraging others to trust and support their views.\n\u2022 Emotional Appeal: Influencing decisions by eliciting emotions such as fear, sympathy, or anger.\nTo effectively implement these strategies, we designed three specific \"persuasive response examples\" for each strategy, with examples of logical appeal depicted in the prompt in Figure 5. The response examples for the other two strategies are detailed in Table 1.\nTo select a voting target and persuade other players to vote for them, we included the instruction \"Finally, choose the player that threatens you the most and should vote for, and provide their number\" in the task description within the prompt shown in Figure 2. This addition enables the LLM to thoroughly analyze the current game situation and identify a critical voting target.\nDuring actual gameplay, our system does not predict the most likely dialogue strategy but instead adheres to a predetermined sequence of these three strategies. Specifically, beginning in turn 3, we use the aforementioned prompt to analyze the current game situation and identify a critical voting target. From turns 3 to 5, persuasive responses are generated for the chosen target following the sequence of strategies to attract the votes of three other players. This approach, combining situational analysis with various persuasion strategies, significantly enhances the survival and competitiveness of the werewolf role."}, {"title": "Voting Module", "content": "In the Werewolf Game, the nighttime voting phase following the daytime discussion is pivotal, especially for non-werewolf roles, as making the correct voting decision can significantly influence the game's outcome. To assist in this decision-making, we employ the prompt shown in Figure 6 to guide the LLM in selecting a player to vote for from the current survivors. We also utilize Zero-shot Chain-of-Thought Prompting, which facilitates a step-by-step logical reasoning process, enabling the model to more deeply analyze the game situation and player behaviors.\nFurthermore, we emphasize having the LLM consider the content of its statements during the daytime discussion phase to maintain consistency between the same agent's speech and voting behavior. For the werewolf role, we use the player chosen during the speech phase (e.g., Agent[01] as shown on the right side of Figure 1) as target for voting in the nighttime phase. During the attack phase, we select the same target, but if that target has already been voted out during the voting phase, we will randomly choose another surviving player to attack."}, {"title": "Case Study of Self-Play", "content": "Figure 7 displays the complete game log from a self-play session using the system developed in this study, which incorporated the gpt-4o-2024-05-13 model during the situation analysis, response generation, and voting phases. Analysis of the game log revealed that during the talk phase on Day 1, all agents adeptly recognized the dynamic changes in the game situation through situation analysis and responded appropriately. The persuasive language employed by the werewolf role proved highly effective; by the end of the first night, all players except Agent[01] had aligned their voting actions with the werewolf role. This outcome underscores the effectiveness of both the situation analysis module and the persuasive responses of the werewolf role.\nHowever, on Day 2, the werewolf failed to persuade the remaining players, indicating that the LLM demonstrated sufficient robustness to accurately recognize the current situation without being swayed by persuasive strategies. Despite an adequate number of dialogue rounds being set, we observed that the discussions on Day 1 were not as in-depth as expected, with agents repeating a lot of content. This issue might be attributed to the relatively simple setup of the five-player werewolf game and the fact that in our AI, roles other than the werewolf are based on similar methods, leading to a lack of diversity in performance during self-play. It also highlights the limitations of the LLM in conducting more complex analyses and generating diverse responses.\nUltimately, even though the werewolf team theoretically could have secured an easy victory on Day 2 with only one villager remaining, the game outcome did not reflect this. This underscores the inadequacies of our system in terms of adaptability and strategy execution for roles other than the werewolf, particularly the possessed. Based on these observations, our goal is to further enhance the adaptability and decision-making abilities of other roles in future research."}, {"title": "Win Rate Against Other Teams", "content": "In the formal competition of \"AIWolfDial,\" AI agents from different teams were assigned specific roles to participate in the Werewolf Game. The competition featured two tracks: a Japanese track\u00b2 and an English track\u00b3, with the game logs publicly available. Table 2 presents the results of both the Japanese and English tracks. As shown in the results, our team, sUper_IL, achieved the highest win rate when playing the werewolf role in both languages. This outcome confirms that our AI can successfully persuade other participants to align with its voting behavior, thereby increasing its survival rate as the werewolf. Furthermore, we also secured first place in overall win rate, demonstrating the effectiveness of our context-based dialogue generation method in games with incomplete information."}, {"title": "Conclusion", "content": "We present a LLM-based Werewolf Game AI, developed by the sUper_IL team, which participated in AIWolfDial2024. Our proposed system architecture utilizes situation analysis to guide response generation and specifically enhances persuasive capabilities of the werewolf role through various persuasive strategies. The effectiveness of our architecture was validated through the analysis of game logs and formal competition win rates."}]}