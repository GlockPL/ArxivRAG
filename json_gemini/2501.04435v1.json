{"title": "A Digital Shadow for Modeling, Studying and Preventing Urban Crime", "authors": ["Juan Palma-Borda", "Eduardo Guzm\u00e1n", "Mar\u00eda-Victoria Belmonte"], "abstract": "Crime is one of the greatest threats to urban security. Around 80% of the world's population lives in countries with high levels of criminality. Most of the crimes committed in the cities take place in their urban environments. This paper presents the development and validation of a digital shadow platform for modeling and simulating urban crime. This digital shadow has been constructed using data-driven agent-based modeling and Simulation techniques, which are suitable for capturing dynamic interactions among individuals and with their environment. Our approach transforms and integrates well-known criminological theories and the expert knowledge of law enforcement agencies (LEA), policy makers, and other stakeholders under a theoretical model, which is in turn combined with real crime, spatial (cartographic) and socio-economic data into an urban model characterizing the daily behavior of citizens. The digital shadow has also been instantiated for the city of M\u00e1laga, for which we had over 300,000 complaints available. This instance has been calibrated with those complaints and other geographic and socio-economic information of the city. To the best of our knowledge, our digital shadow is the first for large urban areas that has been calibrated with a large dataset of real crime reports and with an accurate representation of the urban environment. The performance indicators of the model after being calibrated, in terms of the metrics widely used in predictive policing, suggest that our simulated crime generation matches the general pattern of crime in the city according to historical data. Our digital shadow platform could be an interesting tool for modeling and predicting criminal behavior in an urban environment on a daily basis and, thus, a useful tool for policy makers, criminologists, sociologists, LEAs, etc. to study and prevent urban crime.", "sections": [{"title": "I. INTRODUCTION", "content": "Crime is one of the main problems in most urban environments, having a direct impact on citizens' quality of life. For this reason, governmental authorities try to deploy strategies to prevent, minimize, and palliate crimes. Predictive policing can be defined as the collection and analysis of data about previous crimes for identification and statistical prediction of individuals or geospatial areas with an increased probability of criminal activity, to help developing policing intervention and prevention strategies and tactics [1]. The most widespread approaches for predictive policing are based on what is called macro-emulation, which uses aggregated crime rates, demographic data, and other related factors through (mainly) statistical regression models and aims to discover crime spatial patterns. In urban environments, crimes are not evenly distributed but tend to concentrate around what are called hotspots [2]. Hotspots tend to persist over time, so their identification can be a fundamental element in the application of police methodologies and prevention strategies [3]. Consequently, one of the current lines for crime prevention is the identification of such hotspots with the help of techniques such as data analysis, data science, or even artificial intelligence (AI). As outlined in the routine activity theory (RAT) [4], criminal opportunities arise from routine activities of offenders, victims, and guardians. Crimes can only take place when an offender, a victim, and the absence of a \u201ccapable\u201d guardian come together. For this reason, it is essential to be able to construct realistic urban crime models that can accurately represent the behavior of people in an urban environment in order to understand why and when crime occurs and to develop strategies to prevent it.\nIn recent years, the rapid advancement of emerging information sources like IoT, the enhancement of computing capabilities through cloud computing, and the evolution of analytical techniques such as Al and data science have progressively transitioned us from conventional static simulation models to the digital twin concept [5], enriching our comprehension of the environment. The term digital twin (DT) describes a virtual representation, i.e., the virtual entity (VE), of a physical system, that is, the physical entity (PE). Initially, this term was merely descriptive, but as soon as computational and information technologies evolved, it was possible to establish a bidirectional coupling between the PE and the VE. At present, there is no uniformity in the definition of a DT or in the understanding of the components that comprise a DT [6]. Despite this disparity, there is some agreement on what should be the elements that characterize a DT, i.e., a model, the data, and the synchronization between the PE and the VE. The essence of DTs lies mainly in the exchange of data between the PE and the VE through bidirectional data connections. Additionally, a DT system should also include a set of services that enable the exploitation of data exchanged by the two twins in various ways. Examples of such services include, among others, dashboards for visualizing and displaying data in different formats and machine learning (ML) components to provide decision support and alerts to users. More specifically, the five-dimensional model of a DT [7] indicates that its main elements are the PE, the VE, the data, the connections, and the services that allow the exploitation of the data exchanged between the two twins. In addition, the term digital shadow (DS) is often used as a synonym for DT [8]. Kritzinger et al. [9], however, differentiate between the two terms based on the level of data integration. In DSs the data exchange between the digital and physical twin takes place through unidirectional data connections, which only map data from physical entities to digital objects, i.e., a change of state of the physical object leads to a change in the digital object, but not vice versa [9]. The DT would be at the highest level of connectivity, connecting both spaces automatically. Since 2003, when the term DT was first mentioned in the context of product lifecycle management [10], this concept quickly jumped to smart manufacturing and is now closely linked to the Industry 4.0 domain. However, specific DTs and DSs are now emerging in various areas such as smart cities, agriculture, or healthcare [11] [12]. A particular case of these digital artifacts is the urban digital twins (UDTs) or digital twin cities [13]. A UDT is a virtual representation of a city's physical assets, which uses data, data analytics, and ML to aid simulation models that can be updated and modified in real time as their physical counterparts change. In recent studies [14] [15], we can find works using DT and DS in the field of smart cities, such as urban planning, traffic, mobility and fleet management, healthcare, pollution control, sustainability, or energy. However, we have not found any DT or DS for police prediction or crime modeling.\nHaving appropriate technologies to model DTs or DSs is a challenge. In this regard, agent-based modeling and simulation (ABMS) is a useful approach to represent and study complex systems. Since the 90s, it has been one of the most prominent fields of social sciences research, and it is used as a technique to simulate and understand a great diversity of social phenomena. In general, an agent-based model is composed of individual entities that have autonomous behaviors and are different from one another, having diverse characteristics and behaviors over a population [16]. Such a model typically consists of a set of autonomous agents, characterized by a set of attributes and a collection of specified behaviors, connected to other agents and their environments by certain relationships [17]. These agents, their environment, and their relationships, therefore, conform a system with clearly defined boundaries, inputs, and outputs. ABMS, in contrast to other simulation methods, is a bottom-up approach [18].Therefore, it helps to understand both agents' and aggregate behavior and explains how these behaviors lead to large-scale outcomes and emergent phenomena [19]. From this perspective, researchers can model how macro-phenomena emerge from behavior at the micro-level among a heterogeneous set of interactive agents [20].\nCommunication technologies have become ubiquitous, allowing the collection of data from a wide variety of sources. When made available for ABMS, a large volume of data can beneficially reveal hidden insights and behavioral patterns of humans. Consequently, some of the current challenges and problems in ABMSs are often related to an increase in used and produced data. Through the combination of ABMS with techniques coming from fields such as Data Science or ML, it may be possible to explore spaces and design options with a new focus called data-driven ABMS (DABMS) [21]. This approach makes agents' behavior more realistic incorporating more assumptions on agents' routines, based on empirical data, and calibrating and validating them against real-world data [16]. DABMS also allows modeling environments fed (continuously) with real-time data, which facilitates the study of optimal resource deployment strategies for real environments. This use of DABMS fits with the current concept of DT or DS [6] [7] [22] and enables professionals from other fields to optimize their decisions on real-world problems. So, the use of DABMS would allow exploring different crime theories [23] and their consequences on the urban environment, where it is generally unfeasible to conduct real-world experiments. Until relatively recently, software simulators that emulated real environments used limited datasets, obtained from the real world or generated synthetically, and provided their results off-line (or asynchronously), which had to be interpreted by stakeholders who in turn translated those interpretations into policies or measures to be applied in the real world. However, with recent advances provided by DTs or DSs, now the simulator and model can essentially be a digital shadow that continuously evolves as it is fed with new real-world data [5].\nIn this paper, we present a DABMS-based DS platform to predict the daily criminal behavior in an urban environment that also works as a workbench environment for policy makers, criminologists, sociologists, etc. In our DS, the agent decision- making strategies rest on a large amount of real data, which allows a realistic model of the agents' behavior, combined with several well-founded criminological theories, which will be specified in the paper. Regarding the importance of using a realistic spatial environment, our approach models crime at grid cell level, which is an aggregation of several streets. Gridded cells are the most popular way of representing simulated environments [22] [24] [25] [26]. The DS has been instantiated, calibrated, and validated for the city of M\u00e1laga (Spain), using the full crime database of the city provided by the national police force and collected between 2010 and 2018. The results suggest that our modeling proposal is suitable for the characteristics of this city. According to the performance results and to the metrics commonly used in the field of predictive policing, the generation of simulated crimes through our model of the city of M\u00e1laga is aligned with its real crime data.\nNext, the contributions of this paper are summarized below:\n\u2022\tWe first propose a systematic approach and a soundness methodology, based on DABMS, to build urban crime simulation environments. Our proposal uses crime data combined with spatiotemporal and socio-economic characteristics of the citizen population. Accordingly, agents' decision-making strategies are based on real data and sound criminological theories. This allows for a more realistic modeling of the agents' behavior and their likelihood of committing a crime.\n\u2022\tThe low granularity of our approach for spatial representation (we use a grid cell size lesser than 200 m\u00b2) is suitable for analyzing crime in urban environments, having enough precision to identify hotspots within neighborhoods or urban districts.\n\u2022\tOur DS platform has been tested for modeling the daily criminal behavior in the city of M\u00e1laga (Spain), for which we had the full crime database of the city between 2010 and 2018 and socio-economic and geographic information of the city at our disposal. The calibration and validation have been supported by the full database of real crime data, with over 300,000 reports.\n\u2022\tTo validate the performance of the model of M\u00e1laga, a large number of well-specified metrics were used to facilitate easy comparison of this work with others in the field and to differentiate it from a significant proportion of existing state-of-the-art papers. Our proposal achieves good predictive values, according to the metrics used in predictive policing. The results reveal that the model can provide realistic crime prediction.\n\u2022\tThe model can easily be scaled up to serve as a test bed for field practitioners (LEAs, criminologists...) to perform different tasks, including crime rate prediction, hotspot detection, patrol strategy optimization, crime network analysis, etc.\nThe paper is structured as follows: The next section summarizes the background on simulation modeling techniques for predictive policing, specially focusing on ABMS. Section III provides a snapshot of the DS platform architecture and shows the process that must be followed in the instantiation, calibration, and validation of the DS for a particular urban environment. Section IV is devoted to data collection and in particular to explaining the data on the city of M\u00e1laga we have used in this work, that is, the reports on crime, the cartographic information of the urban environment, and the socio-economic data of its population. Section V mainly describes how the design of our DS has been performed, highlighting the construction of the urban environment, their agents, the global parameters, and the algorithms behind the simulation. The theoretical fundamentals and behavior of the model during the simulation are approached in Section VI. For instance, this section defines concepts such as the criminal power of an urban area or the likelihood of a citizen committing a crime, which are relevant to describing the dynamics of crime in the city. Section VII explains how some not directly observable model parameters were calibrated and how the calibration process was validated. Section VIII analyzes and discusses the model's contributions and outlines some limitations, and, finally, section 9 draws some final conclusions and future works."}, {"title": "II. BACKGROUND", "content": "Simulation modeling provides a strategy for capturing dynamic interactions among individuals taking place at the micro-level and their relationship to macro-level patterns. It involves the creation of a simplified representation of social phenomena [27], and it is suitable for representing non-linear relationships present in dynamic and complex interactions. In addition, simulating crime patterns contributes to the understanding of urban crime in a spatial environment [28]. In this sense, agent-based models are especially useful as computational approaches for modeling human beings to study social phenomena [29]. ABMS techniques have been applied to the study of crime in a wide variety of setups, including theory testing [30], testing of prevention strategies [24], and predicting crime patterns [31]. Brantingham & Brantingham [32] inspired much of this interest with a seminal article in which they described how ABMS could explain opportunity. Later, in their review, Groff et al. [23] identified 45 ABMSs of urban crime. One advantage of simulation techniques is that they make it easier to perform experiments that would be unfeasible in real life since field experiments are expensive and hard to develop. An ABMS-based experiment allows us to examine the same units under different experimental conditions. Also, it has the added rigor of exploring potential outcomes across a series of trials. For instance, ABMSs can be used by LEAs to test the effect of patrolling strategies on crime [24] [25] or by urban planners to assess how changes in urban design may affect the development of crime.\nThe first ABMS-based approaches studied the dynamics of crime without including spatiotemporal characteristics [22] [33], and only 33% of crime simulation proposals were spatially explicit [11]. For example, Winoto et al. [34] developed an agent-based model that applies a choice-theoretic approach in which agents decide whether or not to commit a crime only according to their perception of the costs and benefits. Nowadays, there is a growing trend that sets up the relevance of using realistic spatial environments for modeling [35] [36]. For large areas, grid cells are the most popular choice for modeling urban environments [22] [24] [25] [37]. Grid cells divide the general space into equal size units, so that each cell may contain different types of information, e.g., number of people and crimes, geographical information (residential, transportation-related, commercial), etc. However, the size of these units is sometimes arbitrary, which can call into question the validity of the results. Additionally, placing crime where it actually occurs may be an important issue in crime prediction, but [38] reveals that the results for prediction at street segment level are comparable to models in literature based on larger units of analysis such as grid cells. Other approaches for modeling spatial environments are the transportation networks in the forms of nodes and edges. These are also a popular election due to their efficient implementation and accurate routing [28] [39]. Nevertheless, the interactions and movements of agents are constrained by the nodes and edges and also introduce too many crime opportunities when people congregate at the same points rather than being distributed in a random space [40]."}, {"title": "III. MODEL OVERVIEW", "content": "Fig. 1 illustrates the architecture of our DS, which consists of four different modules. The first two modules perform the input data management in order to prepare the information required by the DS to operate as a data-driven architecture. The first one, responsible for the data collection, combines and converts all the input data sources into a unified and normalized data model. The main data source is the information on crimes, containing the reports received and collected by LEAs or available through open data repositories. This information is also combined with the available socio-economic data on the urban environment selected to be modeled, such as the population per district or area, the rate of unemployment, etc. All these data are processed through a stage of knowledge engineering where they are fixed, categorized, imputed, etc. to be normalized and inserted into a data model. Parallelly, cartographic information of the urban environment is also processed to transform the environment into a bidimensional space of cells, each one mapping a small urban sector. If available, the information of districts or areas in which the urban environment is structured has been included in the grid. Posteriorly, cartographic information and normalized data model are merged into a single representation where the data model is enriched with the geographical information, and also the attributes of the cells"}, {"title": "IV. DATA COLLECTION", "content": "The main input data used by the DS platform is the information related to the crimes that take place in the urban environment. The platform requires at least data related to the typology and the spatial and time location of the crimes, that is also the information that can be found in most open data crime repositories. In the case of M\u00e1laga, in principle, we had access to reports ranging from lost property reports, such as loss of legal documentation (e.g., ID card, passport, etc.), to minor offenses, such as wallet thefts, or serious crimes such as sexual abuses. These reports are filed by citizens, and concerning this work, each qualified report is thoroughly considered. This significantly reduces the potential risk of bias that may exist on the part of the police. The original datasets were taken directly from the police database in CSV format and separated into different files per year. The same report was often found in one or more rows of each dataset; thus, a first pre-processing stage of information identification and grouping was necessary to give them a proper semantic meaning. As a result, we obtained a set of reports, structured into the following 5 major information blocks:\n\u2022\tEvent: event triggering the report and the place and date where it was committed.\n\u2022\tResponsible Parties: people who carried out the event.\n\u2022\tImplicants: victims or witnesses of the event.\n\u2022\tObjects: elements that were used to commit the crime or that were part of stolen goods.\n\u2022\tActing Patrol: police unit in charge of collecting the report.\nThe initial total number of reports was around 800,000, but only 549,336 belonged to the city of M\u00e1laga. Note also that information regarding responsible parties, implicants, and/or objects was often missing (> 90% of null values), and data on the police units who reported the crime were removed since they did not contain useful information for our studies. For this reason, only the event block and the place and date where it was committed"}, {"title": "A. Crime Data", "content": "In order to simulate the daily behavior of an urban environment and its inhabitants, the main socio-economic information used is its total current population and the percentage of population per district, since it helps to distribute citizen agents in a realistic way. Other relevant data useful for simulation are the percentage of unemployed or employed people. If some of this information is not available, it can be included as an input parameter of the model simulation. In the case of M\u00e1laga, we obtained the census information of the city by districts, shown in \u00a1Error! No se encuentra el origen de la referencia., and the average unemployment rate of the city, around 30.86%. Ideally, it would have been preferable to obtain the unemployment percentage by city district, but unfortunately such information was not available. This information has been obtained from the Spanish National Institute of Statistics. It should be mentioned that the choice of unemployment value is the average unemployment rate for years 2010\u20132017 in the province of M\u00e1laga and the actual value for the year 2014."}, {"title": "B. Cartographic information", "content": "Our DS platform requires information on the street map corresponding to the urban environment that wants to be modeled. In the case of M\u00e1laga, we first retrieved the full list of the roads and then the cartographic information of the street map provided by the open data of the city (https://datosabiertos.malaga.eu/). All this information was merged, but previously, a processing stage was required due to the errors found in the city street map. The final structure of the cartographic information used in this work is shown in Table II, which consists of four fields: 1) the road typology abbreviation using the shortening of the actual terms in Spanish, i.e., square (PL, PZLA), street (CL), avenue (AV), etc.; 2) the full name of the road; 3) the district field that refers to the council district number; 4) the street buildings (the geolocated point list is in EPSG:32630\u00b9 format)."}, {"title": "C. Socio-economic information", "content": "In order to simulate the daily behavior of an urban environment and its inhabitants, the main socio-economic information used is its total current population and the percentage of population per district, since it helps to distribute citizen agents in a realistic way. Other relevant data useful for simulation are the percentage of unemployed or employed people. If some of this information is not available, it can be included as an input parameter of the model simulation. In the case of M\u00e1laga, we obtained the census information of the city by districts, shown in Table III, and the average unemployment rate of the city, around 30.86%. Ideally, it would have been preferable to obtain the unemployment percentage by city district, but unfortunately such information was not available. This information has been obtained from the Spanish National Institute of Statistics. It should be mentioned that the choice of unemployment value is the average unemployment rate for years 2010-2017 in the province of M\u00e1laga and the actual value for the year 2014."}, {"title": "V. THE URBAN MODEL", "content": "Our urban model can be expressed as a tuple (E, C, P, T) composed of a set of cells representing the urban geographical environment (E), a set of citizen agents (C), a set of police units (P), and a time dimension (T). The first subsection shows how the urban geographical environment, where simulations take place, has been modeled. In this sense, two dimensions have been considered for this purpose: the spatial dimension, by constructing a simplification of the urban environment where crimes are committed, and the time dimension, representing the daily dynamic behavior of the city. This second dimension is described in the second subsection. The roles of citizen agents and the police units that take part in the simulations are outlined in the third subsection. The fourth subsection enumerates the model input parameters and how we characterize the probability of an offense taking place in certain location of the urban environment."}, {"title": "A. The urban environment model", "content": "The first dimension of our model consists in the construction of a spatial model of the city. Probably the most widespread and widely used mechanism to generate an urban geographical environment for simulation is a two-dimensional grid defined as a set, $E = \\{e_{1,1}, e_{1,2}, ..., e_{n,m}\\}$, where each $e_{x,y}$ represents a cell of the grid placed at coordinates (x, y). This type of scenario exhibits two main characteristics: 1) Even though most available crime datasets provide the approximate area where the crimes took place, this information does not tend to be very precise, as it only consists of the name of the road but not the exact point where the crime was committed. Therefore, building fine-grained environments would only introduce much noise in simulations. Dealing with larger areas greatly reduces the error in terms of the precision of the areas where crime occurs. 2) The hotspots identification for crime study and analysis purposes does not require a high degree of specificity, i.e., a corner or a part of a street. Identifying slightly larger areas, such a set of streets, a small part of a neighborhood, etc., is enough. However, it can be used for slightly larger areas, such as a set of streets, a small part of a city neighborhood, etc. For this purpose, to generate the city grid and, therefore, an environment for the simulation, the urban area to be gridded needs to be first chosen. In our DS platform, the dimensions of the square cells are recommended to be around 200 m\u00b2, i.e., a space small enough that could be crossed on foot from one end of a cell to another in around 5 minutes, so that this area and another adjoining places could be covered by a police unit. In the case of M\u00e1laga, the area was gridded on a map of 40 to -40 from north to south and of 64 to -64 from east to west. Figs. 6 and 7 shows how this gridding process was performed. Each square has dimensions of approximately 195 m on a side, comprising around 38,000 m\u00b2, i.e., approximately 3.8 hectares. Regarding the shape of the grid, note that M\u00e1laga is a seaside town, which is also located right on a corner of the coast. It leaves the city with the shape of the upper left corner of a square. As a consequence, if a square (or even a rectangle) were used to represent each cell of the city, it would include a larger number of inaccessible places (e.g., sea, untraveled natural places, and areas belonging to other municipalities). The areas of interest for the urban environment modeling were contained in the polygon surface, but, at the same time, the areas not belonging to the habitable area of the city were minimized."}, {"title": "B. The time dimension", "content": "Once the environment is described at the spatial level, it is necessary to define how time will be represented in the simulations. The simulations are divided into days $T = (t_1, t_2, ..., t_n)$. To simplify the model, each day ($t_i$) is divided in turn into three consecutive time periods of 8 hours each: morning ($t_i^m$), afternoon ($t_i^a$), and night ($t_i^n$). This division corresponds with the time periods used by police officers to distribute their patrol shifts. It also allows us to simplify the model by avoiding the need to include a pathfinding algorithm to move the officers from one cell to another, since we assume that they have enough time to move from one point to another in the city in eight hours. Thus, each simulation changes their state from one time period to the next (e.g., morning to afternoon)."}, {"title": "C. The agents", "content": "In the model, the citizen agents, described by the subset $C = \\{c_1, c_2, ..., c_n\\}$, represent the conventional actions performed by the persons who live in a city. Incorporating the basis of the RAT, these agents follow a pre-established daily routine throughout. There are four actions these agents will be able to perform throughout each day, which are listed next:\n\u2022\tRest (R): the citizen moves to the cell assigned as home, which has been designated randomly in terms of the actual population of the districts.\n\u2022\tWork (W): the citizen will go to the cell designated as work, randomly assigned among the habitable cells. Also note that the agent in this state could lose the job.\n\u2022\tLeisure (L): the citizen will go to a cell chosen with the purpose of entertainment.\n\u2022\tLooking for a job (J): the citizen will go to the cell assigned as home, that has been designated randomly following the actual population of the districts, and will have a probability of finding a job.\nThree different roles of citizen agents can be identified in terms of their daily habits: A morning citizen, $c^m$, represents a person who either works, studies, is looking for job, or does not work for being a child or a retired person. The sequence of actions usually performed by this agent in a day is: $A(c^m) = (W \\cup J, L, R)$. An afternoon citizen, $c^a$, who works in the afternoons and has a set of daily actions of $A(c^a) = (L, W, R)$; and a night citizen, $c^n$, who works at night, with the set of actions $A(c^n) = (R, L, W)$. The police unit agent ($p_i$) represents the human resources of the LEAs deployed in the model, which could be police patrols, couple of officers, etc. According to deterrence theory [52], police units have a very high deterrent effect when they are present in an area. Therefore, each police unit in the model will act as a crime reducer in the areas where it is deployed, thus representing changes in crime risk in terms of police presence in the area."}, {"title": "D. Model global parameters", "content": "Our crime model requires some global parameters whose values need to be defined before running any simulation. These parameters provide the model with the necessary flexibility to represent different urban environments. The values of some parameters could be obtained directly from statistics on, for instance, population density, rates of unemployment, etc. Also, there are other input parameters, such as the number of virtual citizens and police units to be modeled in the simulation, which are computed from these input values but in terms of equivalences with real data. The citizen_agent_rate parameter, for example, computes the equivalence between an agent and a real citizen, giving us a measure of how many citizens each agent represents. Finally, the rest of parameters need to be calibrated from historical data on crime."}, {"title": "VI. THE MODEL SIMULATION", "content": "Once the simulation environment has been described by a grid of cells, the set of agents that will participate in the simulations has been defined, and the global parameters that characterize the simulations have been established, this section is devoted to explaining the behavior of the crime simulation model. Firstly, and to contribute to a better understanding of the behavioral algorithm, we explain the theoretical model of our agent-based approach by introducing some concepts related to the criminal behavior, such as the criminal power of a cell or the probability of a criminal offense being committed by a citizen. Other relevant simulation issue is how citizens organize their leisure time. Finally, the main simulation algorithm is described, which basically expresses how we have modeled the daily behavior of the citizens in the urban environments. For all these purposes, we have incorporated in our model the expert knowledge and experience of fields practitioners and criminological theories."}, {"title": "A. The criminal power indicator", "content": "To make a realistic representation of the crimes in an urban environment, we need to measure somehow the degree of crime incidence in each part of that environment. Crime simulation strongly depends on the number of offenses committed in each part of the city. Accordingly, for each cell of the urban environment, we first grouped and summed the crimes committed per year and cell of the simulation grid. Then, the number of crimes in the last year available in the input crime dataset (2018 in the case of M\u00e1laga) was predicted through a polynomial regression per cell, approximated with data from the rest of the years (2010 to 2017 in the case of M\u00e1laga). Once this estimation was obtained, this value was converted into a \"multiplier\", called criminal power of the cell, that was used in the simulation. The criminal power \u2208 (0, \u221e) makes it possible to calculate how frequent it was to commit a crime in that cell with respect to the rest of the grid. Equation (1 shows how the criminal power value of a cell $e_{x,y}$, placed at coordinates x and y, can be computed:\n$\\textit{criminal\\_power}(e_{x,y}) = \\frac{\\textit{max}[\\textit{prediction}(e_{x,y}) + a(e_{x,y}) * |\\textit{prediction\\_error}(e_{x,y})|,1]}{\\sum_{20 \\leq i < m \\atop 0 <j<n} \\textit{prediction}(e_{i,j}) + a(e_{i,j}) * |\\textit{prediction\\_error}(e_{i,j})|}$ \nwhere $\\textit{prediction} (e_{x,y})$ is the number of crimes estimated for the simulation year in the corresponding cell, $\\textit{prediction\\_error} (e_{x,y})$ the error made in the polynomial regression approximation of that cell, and $a(e_{xy})$ a pseudorandom number generation function that takes values between \u20131 and 1, generated for the cell $e_{xy}$. Finally, m and n are the width and height of the grid. In order to provide each cell with a minimum probability for crimes to occur and to avoid negative numbers, the number of crimes in the cell was calculated as the maximum between one and the result of the prediction of crimes in the corresponding cell for the year to be predicted in the simulation, plus a random value computed from the possible error made multiplied by a random coefficient generated from the function a and, finally, divided by the mean of all predictions plus the random value for that prediction."}, {"title": "B. The probability of committing a crime", "content": "The factors that could lead a person to commit a crime are based on his/her employment status (unemployed attribute)", "1-u(c_i,t_j))": ""}, {"z": "C \u00d7 T \u2192 R is a function relating each cell with the number of citizens placed there", "where": {"u": "C \u00d7 T \u2192 {0", "\u025b": "C \u00d7 T \u2192 R calculates the effect of the presence (or absence) of police units in the corresponding cell", "parameters": "increase_no_police (\u03c8) and police_reduction (p), where the\n$\\epsilon(e_{x,y}, t_j) = \\begin{cases} 1, & \\forall p_i \\in P, \\textit{where}(p_i, t_j) = \\emptyset \\\n\\frac{\\textit{police}(e_{x,y}, t_j)}{30} \\cdot (\\psi + \\rho) - \\rho, & \\exists p_i \\in P, \\textit{where}(p_i, t_j) = e_{x,y} \\\n1 - \\rho, & otherwise \\end{cases}$\n$\\textit{police}(e_{xy}, t_j) = \\sum_{k=0}^{30} \\textit{is\\_in}(p_i,e_{xy}, t_j - k)$\n$\\textit{is\\_in}(p_i, e_{x,y}, t_j) = \\begin{cases} 1, & \\textit{where}(p_i, t_j) = e_{x,y} \\\n0, & otherwise \\end{cases}$\nfirst parameter determines the maximum increase in crime in a cell when no police unit is visiting (reaching its maximum value after 30 days of no visits), and the second parameter determines the crime reduction effect of a police unit when it is deployed in a cell. As shown in Equation 3, the function returns 1 if there are no police agents deployed in the simulation. The police function (Equation 4) measures the number of police units deployed in a cell over the last 30 days and is in (Equation 5)"}}]}