{"title": "AICircuit: A Multi-Level Dataset and Benchmark for AI-Driven Analog Integrated Circuit Design", "authors": ["Asal Mehradfar", "Xuzhe Zhao", "Yue Niu", "Sara Babakniya", "Mahdi Alesheikh", "Hamidreza Aghasi", "Salman Avestimehr"], "abstract": "Analog and radio-frequency circuit design requires extensive exploration of both circuit topology and parameters to meet specific design criteria like power consumption and bandwidth. Designers must review state-of-the-art topology configurations in the literature and sweep various circuit parameters within each configuration. This design process is highly specialized and time-intensive, particularly as the number of circuit parameters increases and the circuit becomes more complex. Prior research has explored the potential of machine learning to enhance circuit design procedures. However, these studies primarily focus on simple circuits, overlooking the more practical and complex analog and radio-frequency systems. A major obstacle for bearing the power of machine learning in circuit design is the availability of a generic and diverse dataset, along with robust metrics, which are essential for thoroughly evaluating and improving machine learning algorithms in the analog and radio-frequency circuit domain. We present AICircuit, a comprehensive multi-level dataset and benchmark for developing and evaluating ML algorithms in analog and radio-frequency circuit design. AICircuit comprises seven commonly used basic circuits and two complex wireless transceiver systems composed of multiple circuit blocks, encompassing a wide array of design scenarios encountered in real-world applications. We extensively evaluate various ML algorithms on the dataset, revealing the potential of ML algorithms in learning the mapping from the design specifications to the desired circuit parameters. The data and codebase are open-sourced to advance the development of machine learning in the analog and radio-frequency circuit design domain in the following link: https://github.com/AvestimehrResearchGroup/AICircuit.", "sections": [{"title": "1 Introduction", "content": "By reaching the limits of Moore's Law [21] in early 2020 (Figure 1a), the exponential scaling of transistors, the core elements in circuit design, has become increasingly difficult, thereby slowing down the pace of advancements in semiconductor technologies. Unlike digital circuits, where scaling can often lead to straightforward performance improvements, analog and radio-frequency circuits should be custom-designed for emerging applications, e.g., mm-wave cellular communications, radar systems, and antenna systems, making their design both time-consuming and resource-intensive [17, 4, 9, 16, 1]. Moreover, the volume of the market for analog integrated circuits is surpassing all other sectors and readily it is the major driving force for the development of semiconductors. By transitioning into the analog domain, two major types of circuits are envisioned: i) homogeneous circuits with constituent sub-circuits with similar functions; and ii) heterogeneous circuits where the constituent elements behave differently and have non-identical performance metrics. Most mm-wave systems of interest are heterogeneous, and their constituent circuit blocks of various functionalities should be combined to achieve system level performance metrics that meet the thresholds. It is challenging to obtain the optimal design points due to two fundamental reasons: 1) the performance of a circuit block, when operated individually, is different from when it is inside a system due to interaction among the circuit blocks; 2) various system-level metrics rely on the metrics of individual circuits in different ways, causing trade-off among the metrics.\nConventional analog circuit design typically requires considerable effort and human involvement when searching the design space, including circuit topology and each circuit's parameters. Given a set of design specifications (e.g., power consumption, bandwidth, etc.), designers usually need first to decide the circuit topology and then conduct circuit sizing (i.e., parameter sweeping on each individual component), as shown in Figure 2. The process is extremely time-consuming when the circuit comprises a large number of components. Among all the phases within the design of analog circuits, the complete schematic-level design is the most time-consuming part which is currently handled by human experts in industry and academia in a temporally inefficient manner.\nA few prior works investigate machine learning algorithms to automate analog circuit design [22, 11, 5, 15, 25, 6, 7]. In general, these methods train an ML model to learn the mapping between design specifications and actual circuit parameters. [11] shows that a standard neural network trained with carefully filtered design parameters can effectively predict the circuit parameters given design specifications. Methods such as AutoCkt [22] and L2DC [26] further adopt reinforcement learning framework to train neural networks for effective circuit sizing given design specifications. Furthermore, GNN-based methods [25, 27] propose to use a graph neural network to better capture the circuit topology and improve the accuracy of circuit sizing. Methods such as AnGeL [5] try to use neural networks on a homogeneous combination of circuits with identical functions by breaking them down into stages of sub-circuits, thereby shrinking the design space and reducing the training complexity.\nDespite progress in the prior works, the current ML-driven design is still in its early stages. In particular, current methods mainly show a proof of concept on homogeneous circuits and systems such as two-stage voltage amplifiers. It still remains unclear how to scale current NN-based solutions on real-world analog systems with different components. In particular, a real-world system usually consists of heterogeneous components that perform different functions, such as a transmitter with an oscillator followed by a power amplifier. Such systems introduce more complex mapping from inputs to outputs and exhibit high non-linearity. Furthermore, a high-quality dataset, that includes various complex circuits, is indispensable as a pivotal element in the ML-assisted circuit design. However, such a dataset is still not developed and accessible in the current ML-assisted circuit design field. Additionally, given the nascent state of ML-assisted circuit design, effective and universal metrics are highly anticipated to assess different ML-assisted solutions.\nIn this work, we first introduce AICircuit, a multi-level circuit dataset and benchmark for training ML algorithms to assist various types of analog circuit design. In particular, the dataset consists of seven pivotal analog and radio-frequency circuits: common-source voltage amplifier, two-stage voltage amplifier, cascode voltage amplifier, low-noise amplifier, power amplifier, voltage-controlled oscillator, and mixer. In addition, the dataset also consists of complex heterogeneous systems with multiple cascaded circuit components, which has not been investigated in prior works. AICircuit is a comprehensive collection of circuit parameters and simulated performance metrics from an accurate commercial simulator, including advanced metrics not seen in any prior works. Hence, it can serve as a foundation for developing robust ML models for analog and radio-frequency circuit design. In addition to the dataset, we also conduct comprehensive evaluations on the benchmark dataset using"}, {"title": "2 Problem Statement", "content": "In this work, we investigate the capabilities of machine learning algorithms in automating analog and radio-frequency circuit design. In particular, we evaluate machine learning algorithms on homogeneous and heterogeneous circuits. We define homogeneous circuits that compromise multiple circuits with identical functions. For instance, a two-stage voltage amplifier can be seen as a homogeneous circuit with two cascaded single-stage voltage amplifiers (Fig 15). On the other hand, we define heterogeneous circuits that compromise multiple circuit blocks with different functions, such as a transmitter with a voltage-controlled oscillator and a power amplifier (Fig 4a).\nMachine Learning-Assisted Design. ML-assisted design usually adopts a reversed design flow compared to conventional circuit design. In particular, ML-assisted design takes a performance metric vector, y, as inputs and uses a machine learning model $M$ to predict a set of circuit parameters x as\n$x = M(y),$\n(1)\nThe performance vector, y, may contain DC power consumption, bandwidth, voltage gain, etc, which varies with circuit types. On the other hand, the circuit parameter vector, \u00e6, describes the quantitative values of every component within the circuit, including resistances, capacitances, transistor widths, etc. Compared to conventional circuit design, ML-assisted methods directly learn the mapping from design specifications to circuit parameters, eliminating the need for parameter sweeping on \u00e6 to find the solutions that meet the design specification in y. Therefore, the whole design process can be significantly simplified.\nVarious ML models such as multilayer perceptrons (MLPs), transformers, and conventional methods such as decision trees can be used to model the mapping from inputs to outputs. Simple circuits, such as a common-source voltage amplifier, can be modeled with small models. However, large circuit systems with high non-linearity require more complex models. As a key contribution in this work, we investigate the performance of different models on diverse circuits, ranging from a basic common-source amplifier to complex systems such as a transmitter with multiple heterogeneous circuit blocks."}, {"title": "3 Dataset", "content": "In this section, we present our dataset collection procedure. AICircuit consists of two types of circuits: homogeneous circuits and heterogeneous circuits. A homogeneous circuit only consists of one type of circuit, such as a common-source voltage amplifier. Heterongenous circuits may consist of two or more types of circuit blocks with different functions, such as a transmitter with a voltage-controlled oscillator (VCO) and a power amplifier (PA).\nFor all circuits, we adopt the procedure as in Figure 3 to generate data. For a circuit, we first design a schematic using Cadence tools [14]. We defer details of circuit schematics in Appendix A. We then identify all key circuit parameters in the schematic that can affect the circuit performance. For each parameter, we set a value range, [beg, end], and sweep the value with a small step size. For each"}, {"title": "3.1 Datasets for Homogeneous Circuit Blocks", "content": "We collect seven commonly used analog and radio-frequency circuits: common-source voltage amplifier (CSVA), cascode voltage amplifier (CVA), two-stage voltage amplifier (TSVA), low-noise amplifier (LNA), mixer, voltage-controlled oscillator (VCO), and power amplifier (PA). Schematics of these circuits are provided in Appendix A. These homogeneous circuits are the building units that are seen in real-world complex heterogeneous systems.\nAmong these circuits, the analog voltage amplifiers, including the common-source voltage amplifier (CSVA), cascode voltage amplifier (CVA), and two-stage voltage amplifier (TSVA), are essential for voltage amplification, a critical function in most analog circuits and feedback systems [20]. CSVA is a versatile and widely used component in analog and radio-frequency circuit design. It receives input at the gate terminal and generates amplified output at the drain terminal (See Figure 13). By combining the common-source (CS) and common-gate (CG) stages, CVA can provide enhanced gain and improved bandwidth over CSVA, which is suitable for high-frequency applications (Figure 14). TSVA further improves the output swings in the cascode configuration and obtains high gains (Figure 15).\nIn addition to voltage amplifiers, the dataset also covers other types of circuits in radio-frequency applications, including the low-noise amplifier (LNA), mixer, voltage-controlled oscillator (VCO), and power amplifier (PA). In particular, the cascode LNA in a radio-frequency receiver front-end provides substantial power gain while maintaining low noise across a wide bandwidth range (Figure 16). An active mixer is used for frequency modulation with conversion gain in radio-frequency transmitters and receivers. VCO generates a periodic signal with frequency tuned across a wide range controlled by a voltage signal. Owing to the low phase noise and power consumption, the cross-coupled VCO has become a prevalent configuration to provide sustainable oscillation (Figure 18). The two-stage differential PA, the most power-intensive building block in the radio-frequency transmitter, plays a crucial role in delivering significant power to the transmitting antenna without compromising efficiency (Figure 19).\nFor each circuit, we select several circuit parameters that can greatly affect the design performance, as listed in Table 2. Based on the complexity of each circuit, a different number of parameters are considered in the simulation. The channel length of each transistor is fixed at 45 nm to simplify the design space and mitigate short-channel effects. These parameters are also the targets that an ML algorithm needs to predict given design specifications."}, {"title": "3.2 Datasets for Complex Heterogeneous Systems", "content": "In addition to basic homogeneous circuits, the work further investigates complex real-world millimeter-wave (mm-wave) circuit systems that contain multiple circuit blocks with different func-"}, {"title": "4 Evaluations", "content": "With the dataset collected from diverse circuits and complex radio-frequency systems, in this section, we train and evaluate multiple ML algorithms on the dataset and investigate their strengths and weaknesses.\nModels. We test five different models: multi-layer perceptrons (MLPs), Transformers, support vector regression (SVRs), random forest (RF), and K-nearest neighbors (KNNs). For all models, we feed the model with performance metrics and let the model predict the design parameters. In particular, MLPs/Transformers/SVRs act as a mapping function from input metrics to output design parameters, while KNNs locate the design parameters with performance close to input metrics. In addition, RF regressors [2] combine the predictions from multiple decision trees and output the mean of their predictions to create a more accurate and stable prediction. The transformer model [23] with the implementation based on [3], consists of one embedding layer, several encoder layers, and one fully connected layer for predicting a vector of circuit parameters. The multi-layer perception (MLP) model consists of seven fully connected layers, each intermediate layer having a rectified linear unit (ReLU) activation function. For support vector regressor (SVR), considering that SVR is a single-output regressor, we create multiple SVRs to predict all the circuit parameters. In particular, we fit one SVR per target parameter. To enhance non-linearity, we adopt the rbf kernel [24] for each SVR model. Details of each model are provided in Appendix B.\nMetrics. In model training, we use l\u2081 loss as the objective function that measures the distance between the predicted parameters and the desired parameters. In model evaluation, we further run a"}, {"title": "ith metric", "content": ": err\u2081 = ||Yi - Yi ||/Yi\n(2)\nEnd-to-End Training and Evaluation. Our codebase provides an end-to-end model training and evaluation pipeline, as shown in Figure 5. It enables a smooth interaction between the ML workflow and the analog circuit workflow. During the training stage, we simply follow the standard ML workflow to load data and train the model. During the evaluation phase, we first obtain the predicted parameters via the ML workflow and then call Cadence simulator to compute the actual performance and the relative error compared to the desired value. Importantly, by including a Cadence simulator in the evaluation pipeline, we can accurately obtain metrics with inherent randomness based on advanced analyses, such as the noise figure in a low-noise amplifier and the phase noise in a voltage-controlled oscillator, which were not seen in prior works. More details are provided in Table 2 and 1."}, {"title": "4.1 Homogeneous Circuit Blocks", "content": "We first evaluate ML algorithms on homogeneous circuits. In particular, we show the results of MLP, Transformer, SVR, and RF on a two-stage voltage amplifier (TSVA), Mixer, voltage-controlled oscillator (VCO), and a power amplifier (PA) in the main paper, and defer other results of other circuits in Appendix D.\nTo better present the results, we plot the distribution of relative errors (See Eq(2)) of all metrics. We can directly evaluate different ML algorithms by comparing their error distributions in the same plot. We'll begin by presenting the results of each individual circuit, followed by a discussion of some common observations across all circuits.\nTwo-Stage Voltage Amplifier (TSVA). We can observe that all four algorithms can give a design with small errors on the DC power consumption. The reason is that the mapping from circuit parameters to power consumption is easy to predict. However for other metrics, some models fail. For instance, SVR models always generate circuits with large errors on the bandwidth. For the voltage gain, circuits predicted by all four models have large relative errors compared to the desired specifications.\nMixer. First we observe similar performance on the DC power consumption. All models generate circuits with very small errors on power consumption. However, advanced models such as MLPs and Transformers perform better on complex metrics. In particular, for the conversion gain, circuits predicted by MLPs and transformers result in < 10% error, which is significantly lower than SVR and RF.\nVoltage-Controlled Oscillator (VCO). We observe that all four models generate circuits with small errors on all metrics except phase noise. Even MLPs, that perform well on other circuits, result in a long error tail on the phase noise. The reason is that the mapping from circuit parameters to phase noise is highly non-linear, which makes it difficult for all models to learn the relationship."}, {"title": "Summary", "content": "Across all circuits examined in this section, we observe that ML models perform well in learning the relationship between circuit parameters and simple performance metrics such as the DC power consumption. Importantly, the observation holds regardless of the complexity of the circuits. The reason is that the simple performance metrics usually exhibit a linear relation with circuit parameters, which makes it easy to predict. However, as the relationship becomes more non-linear, learning the relationships tends to be more challenging, even for MLPs and Transformers. For instance, voltage gain in a two-stage voltage amplifier, conversion gain in a mixer, phase noise in VCO, and performance metrics in PA are highly non-linear in relation to the circuit parameters. As a result, circuits predicted by ML models do not result in performance very close to the desired specifications."}, {"title": "4.2 Heterogeneous Radio-Frequency Systems", "content": "Moving from homogenous circuits to heterogenous ones, the number of performance metrics and circuit parameters increases. Furthermore, as heterogeneous circuits comprise multiple circuits,"}, {"title": "Summary", "content": "Throughout the evaluations on a transmitter and a receiver system, we can observe how the performance of ML algorithms is affected by the complexity of circuits. From a receiver to a transmitter, the relationship between circuit parameters and the performance becomes more non-linear. As a result, it is more challenging to predict a circuit that meets design specifications."}, {"title": "4.3 Learning from Homogeneous to Heterogeneous Circuits", "content": "Some prior works argue that models trained on small circuits can be extended to large complex circuits [5]. However, we want to point out that it does not apply to heterogeneous circuits. As we revealed in Figure 12, training an ML model on an individual circuit that is a part of a complex system"}, {"title": "5 Conclusion", "content": "In this work, we propose a multi-level benchmark dataset for analog and radio-frequency circuit design. The proposed dataset, AICircuit, covers homogeneous and heterogeneous circuits. Homogeneous circuits comprise one or multiple circuits with identical functions, while heterogeneous circuits comprise circuits with different functions. We evaluate various machine learning algorithms on the benchmark datasets, including multi-layer perceptrons (MLPs), transformers, and support vector regression (SVRs). The evaluations provide a comprehensive overview of the strengths and weaknesses of each method. In a word, MLPs and Transformers usually give better designs compared to other methods, especially for complex circuits. We also reveal that for complex circuits, further optimization of model design and training are still needed to improve the design.\nHeterogeneous circuits investigated in the paper only cover typical radio-frequency transmitter and receiver systems. However, we will consider extending our research to other complex systems."}, {"title": "A Circuits", "content": "In this section, we provide details on the examined homogeneous and heterogeneous circuits in Section 3 and 4. As mentioned in the body of the paper, time-consuming parametric sweeps are necessary for designing analog and radio frequency circuits. Often, a small subset of design parameters can satisfy the thresholds for design metrics. From a circuit design perspective, the limited number of parameter combinations that satisfy the metrics happens due to: 1) complexity of transistor models and the sensitivity of their operation to surrounding circuit elements, circuit configuration, bias conditions, size of the transistor, etc. 2) inherent trade-offs among various design metrics in each circuit. In what follows, for each circuit, in addition to the schematics and set of design parameters and metrics, multiple important design trade-offs are listed within colored boxes adjacent to the schematics. The same color is reserved for a trade-off if it is present in more than one circuit."}, {"title": "B Model Details", "content": ""}, {"title": "C Specifications of Each Circuit", "content": "In this section, we review the definitions of various performance metrics that are simulated for the homogeneous and heterogeneous circuits in this work.\nVoltage gain of an amplifier, denoted commonly as $A_v$, is the ratio of the output amplified voltage $V_{out}$ to the input voltage $V_{in}$ in an amplifier circuit.\n$A_v = \\frac{V_{out}}{V_{in}}$\n(3)\nBandwidth is the range of frequencies over which an amplifier can operate effectively, defined by the difference between the upper and lower cutoff frequencies.\n$BW = f_{high} - f_{low}$\n(4)\nFor amplifiers with low-pass profile, the bandwidth is defined as the frequency at which the dB amount of voltage gain drops from the low-frequency gain by 3 dB.\nThe total power that the circuit draws from the power supply is known as power consumption, and it is calculated as the product of supply voltage and supply current.\n$P = V_{supply} \\times I_{supply}$\n(5)\nConversion gain is the measure of the signal amplification in a mixer, expressed in decibels, comparing the output signal to the input signal.\n$CG = 20 log (\\frac{V_{out}}{V_{in}}) \\, \\, dB$\n(6)\nNoise figure is the ratio of the input signal-to-noise ratio to the output signal-to-noise ratio, expressed in decibels, indicating the noise performance of a low-noise amplifier, mixer, or receiver chain.\n$NF = 10 log (\\frac{SNR_{in}}{SNR_{out}}) \\, \\, dB$\n(7)\nIntermediate frequency (IF) voltage swing refers to the peak-to-peak voltage of the mixer's interme-diate frequency signal."}, {"title": "transducer gain", "content": "The oscillation frequency is the frequency at which the oscillator produces its periodic signal, which is normally controlled by the circuit's inductance and capacitance in an LC-based oscillator.\n$f_{osc} = \\frac{1}{2\\pi \\sqrt{LC}}$\n(8)\nThe power that the oscillator provides to a given load is known as output power, and it is computed by dividing the root-mean-square (RMS) output voltage squared by the load resistance.\n$P_{out} = \\frac{V^{2}_{out,RMS}}{R_{load}}$\n(9)\nPhase noise is a measure of the oscillator's frequency stability, representing the noise power in a 1 Hz bandwidth at a specific offset frequency from the carrier, relative to the carrier power, where $S_{\\phi}(f)$ is the phase noise power spectral density.\n$\\mathcal{L}(f) = 10 log \\Big(\\frac{S_{\\phi}(f)}{2P_{carrier}}\\Big) \\, \\, dBc/Hz$\n(10)\nThe oscillator's tuning range is the range of frequencies that it can be adjusted over, measured from maximum to minimum.\n$TR = f_{max} - f_{min}$\n(11)\n$S_{11}$ represents the ratio of the reflected voltage wave to the incident voltage wave at the power amplifier's input, which shows how much of the input signal is reflected.\n$S_{11} = \\frac{V_{reflected,1}}{V_{incident,1}}$\n(12)\n$S_{22}$ represents the ratio of the reflected voltage wave to the incident voltage wave at the power amplifier's output, which shows how much of the output signal is reflected.\n$S_{22} = \\frac{V_{reflected,2}}{V_{incident,2}}$\n(13)\nLarge signal gain is the ratio of the output power to the input power of the amplifier under large signal conditions.\n$G_{LS} = 20 log (\\frac{P_{out}}{P_{in}}) \\, dB$\n(14)\nPower added efficiency is the amplifier's efficiency in converting DC power into radio frequency output power while taking input power into account.\n$PAE = \\frac{P_{out} - P_{in}}{P_{DC}} \\times 100\\%$\n(15)\nDrain efficiency is defined as the ratio of radio frequency output power to total DC power consumed by the amplifier.\n$DE = \\frac{P_{out}}{P_{DC}} \\times 100\\%$\n(16)\nSaturated power or $P_{sat}$ denotes the highest possible output power level that a power amplifier can produce upon reaching saturation. Up until this point, increasing the input power further does not significantly increase the output power.\n$P_{sat}(dBm) = 10 log_{10} \\Big( \\frac{P_{sat}(mW)}{1mW} \\Big)$\n(17)\nPower gain is a measure of how much a circuit increases the power of a signal from its input to its output.\n$G_{P} = \\frac{P_{out}}{P_{in}}$\n(18)\nVoltage-controlled oscillator's (VCO) output power is the amount of electrical power delivered at"}, {"title": "transducer Gain", "content": "its output terminal. The output power $P_{out}$ is proportional to the square of the RMS voltage $V_{rms}$ and the load resistance $R_{load}$.\n$P_{out} = \\frac{1}{2} V^{2}_{rms} R_{load}$\n(19)\nTransmitter output power is the amount of electrical power delivered by the transmitter to the antenna for transmission as electromagnetic waves.\n$P_{out} = P_{in} G_{t}$\n(20)\nwhere, $P_{out}$ is the transmitter output power. $P_{in}$ is the input power to the transmitter, and $G_{t}$ is the gain of the transmitter.\nTransducer Gain ( $G_{T}$ ) of Low Noise Amplifier (LNA) refers to the ratio of the output signal power to the available input signal power which includes the matching effect as well.\n$G_{T} = \\frac{P_{out}}{P_{in}}$\n(21)"}, {"title": "D Results on More Circuits", "content": "Results on Common-Source Voltage Amplifier (CSVA).\nResults on Cascode Voltage Amplifier (Cascode).\nResults on Low-Noise Amplifier (LNA)."}]}