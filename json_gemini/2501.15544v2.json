{"title": "Advancing Generative Artificial Intelligence and Large Language Models for Demand Side Management with Internet of Electric Vehicles", "authors": ["Hanwen Zhang", "Ruichen Zhang", "Wei Zhang", "Dusit Niyato", "Yonggang Wen"], "abstract": "Generative artificial intelligence, particularly through large language models (LLMs), is poised to transform energy optimization and demand side management (DSM) within microgrids. This paper explores the integration of LLMs into energy management, emphasizing their roles in automating the optimization of DSM strategies with Internet of electric vehicles. We investigate challenges and solutions associated with DSM and explore the new opportunities presented by leveraging LLMs. Then, we propose an innovative solution that enhances LLMs with retrieval-augmented generation for automatic problem formulation, code generation, and customizing optimization. We present a case study to demonstrate the effectiveness of our proposed solution in charging scheduling and optimization for electric vehicles, highlighting our solution's significant advancements in energy efficiency and user adaptability. This work underscores the potential of LLMs for energy optimization and fosters a new era of intelligent DSM solutions.", "sections": [{"title": "I. INTRODUCTION", "content": "Demand side management (DSM), a set of strategies aimed at optimizing energy consumption by aligning energy demand with supply, plays an important role in optimizing energy usage within microgrids. Its importance has grown with the ever-increasing integration of renewable energy sources, electric vehicles (EVs), distributed energy storage system (ESS), etc. Implementing DSM strategies is often facilitated by energy management system (EMS), a platform for managing and optimizing energy resources. To achieve the optimal DSM, an EMS must provide accurate forecasting of energy demand and supply and allow optimal resource scheduling. This is typically modeled as an optimization problem where advanced algorithms are of great importance to achieve efficient energy optimization and grid reliability.\nDSM optimization has been an established research topic. Early-stage efforts are based on traditional methodologies, such as deterministic approaches, heuristics, and stochastic methods [1]. Representative deterministic approaches include mixed integer linear programming (MILP) and dynamic programming (DP). The former proves to be particularly suitable when the system dynamics are well-defined and linear, owing to its efficient computational capabilities and user-friendly implemen- tation. However, it may become slow for very large systems with many variables. The latter is effective for optimizing DSM problems with multistage decision-making and complex dependencies. However, its scalability and computational efficiency can be challenging for large systems. Genetic algorithms (GA) and particle swarm optimization (PSO) are commonly used heuristics. They are efficient for solving non- linear optimization problems in complex systems, such as considering the degradation costs of ESS and EVs. While they may provide near-optimal solutions more quickly, they lack guarantees of optimality. Stochastic methods are suitable for highly uncertain systems, e.g., photovoltaic (PV) and load forecasting. However, the methods face scalability challenges in large-scale systems with numerous components and the optimization can be computationally intensive.\nRecent research advancements for DSM are mostly machine learning (ML) based, especially discriminative artificial intelli- gence (DAI). As optimization in the end corresponds to energy- related control actions, reinforcement learning (RL), as a type of ML specialized for system control, has been well studied for DSM [2]. RL-based approaches can optimize policies by interacting with uncertain environments over time, and can scale well to larger systems over time as it does not require solving the entire system at once. However, they face challenges such as high computational costs and limited robustness in handling unseen scenarios [2]. Another issue is the long convergence time, as RL-based approaches often require many interactions with the environment to learn effective policies, which can be time-consuming, especially in large or complex systems.\nA prominent challenge of existing methods is the lack of automation. The DSM optimization cycle involves problem formulation, code generation, and customized optimization, all of which remain largely manual and error-prone. As such, EMS developers need to build up domain-specific expertise and evaluate DSM scenarios case by case to improve their decision- making. However, decision imperfections and errors do exist due to the problem's complexity, and DSM optimization can be suboptimal, time-consuming, and, in some cases, introduce system damage and safety violations. Generative artificial intelligence (GenAI) and large language model (LLM) represent the most advanced ML technologies and offer promising solutions for DSM. Existing works show that EMS can be significantly enhanced by LLM and GenAI. However, the current focus is mostly on specific aspects such as prediction [3] and anomaly detection [4] and DSM optimization remains highly expertise-based and non-automatic.\nIn this paper, we bridge the gap by discussing GenAI and LLM's usage in DSM. We also demonstrate the strength of GenAI and LLM in automating DSM optimization by proposing a solution based on LLM and retrieval-augmented generation (RAG). In our solution, we first introduce an Automatic Optimization Formulation module to automate the problem formulation process, making the selection and application of methods systematic and error-free. Subsequently, we propose the Automatic Code Generation module that translates mathematical models into executable code with minimal human intervention, ensuring accurate and efficient implementation. Finally, the end users can further validate and customize this code through an Automatic Customizing Optimization module, adapting the solution to specific needs without deep programming expertise. Our solution is designed to be user-friendly and enables both EMS developers and end users to solve optimization problems effectively with minimized errors. The main contributions of this paper are as follows.\n\u2022\n\u2022 We reviewed the applications of DAI in energy optimiza- tion and DSM, highlighted its limitations, and introduced the use of GenAI and LLM to advance optimization and management.\n\u2022 We presented a case study on DSM in a smart home scenario and developed an LLM and RAG based solution to enable automatic problem formulation, code generation, and customizing optimization.\n\u2022 We evaluated our proposed solution and demonstrated the solution's effectiveness in optimizing electric vehicle (EV) charging to meet user's demand while adapting to dynamic energy conditions automatically.\nThe structure of this paper is as follows. Section II intro- duces the fundamental concepts of DSM and its applications using DAI. Section III reviews existing studies utilizing GenAI and LLM. In Section IV, we present a case study along with our proposed LLM and RAG-based solution. Future research directions are discussed in Section V, followed by the conclusion in Section VI."}, {"title": "II. DEMAND SIDE MANAGEMENT AND DISCRIMINATIVE ARTIFICIAL INTELLIGENCE", "content": "We present the basics of energy optimization and DSM as well as related DAI technologies in this section."}, {"title": "A. Energy Optimization and Demand Side Management", "content": "Many countries have introduced energy optimization and DSM programs to motivate consumers to adjust their electricity usage patterns and levels, e.g., Singapore\u00b9 and U.S.2. In general, the programs involve two main components: energy efficiency and demand response (DR)3. The former refers to the long-term reduction in energy consumption. This is achieved by adopting advanced techniques or processes that provide the same level of performance or service quality as before but with lower energy use. For example, this could involve installing energy- efficient appliances, upgrading the air conditioning system, or improving optimization algorithms for energy management. The latter is a strategy used in energy systems to adjust electricity demand by consumers in response to supply conditions for a short-term adaptation. It involves, for instance, encouraging consumers to reduce or shift their energy usage during peak periods. There are two types of DR programs\u2074. One type is the price-based DR where the consumers adjust their energy use based on dynamic pricing. The incentive-based DR represents another type, wherein consumers receive financial incentives for adjusting or shifting their energy usage when requested by utility operators or energy service providers. This can involve participation in programs such as capacity or ancillary services, demand bidding or buyback, emergency protection, interruptible, and direct control programs. As illustrated in Fig. 1, the DSM is realized through the EMS platform, which is generally integrated with a forecasting module, renewable energy sources, ESS, EVs, as well as both dispatchable and non-dispatchable loads."}, {"title": "B. Issues and Discriminative AI Solutions", "content": "To implement large-scale energy optimization and DSM strategies that support diverse loads and resources, a series of mechanisms and algorithms should be carefully designed and developed. In this section, we review major technical issues, along with the solutions based on DAI models.\n1) Load and Supply Prediction: Load and resource pre- diction are the process of forecasting the electricity demand and renewable energy production in the grid or microgrid over a future time. These predictions play a critical role in guaranteeing the availability of adequate power during peak demand periods, while also preventing both energy waste and supply shortages. By implementing DAI as illustrated in Fig. 1, the users/aggregators can forecast the electricity demand and renewable energy production, enabling them to dynamically adjust and optimize their energy usage. For example, the study [5] forecasts the air conditioning energy for the following day. The predictions are conveyed to the aggregator, which subsequently performs day-ahead optimization.\n2) Anomaly Detection: Electricity suppliers strive to satisfy the demand for electricity while managing both technical and non-technical losses. The technical losses stem from the inherent limitations of the power system, including power dissipation and internal electrical resistance. On the other hand, the non-technical losses are associated with activities such as electricity theft, leakage, and other forms of fraud, which not only increase costs but also pose significant security risks while charging EVs. Therefore, mitigating non-technical losses is critical. For instance, [6] proposed a load forecasting model, the prediction results of which are compared to historical load to identify anomalies based on load variations.\n3) Benefit vs. Cost: DR program can lower demand in the energy system and provide profit or reduce the consumer's energy bill as a benefit. However, it comes with a cost, e.g., increasing discomfort for building occupants. Maximizing the benefits while minimizing the cost associated with DR is a challenging optimization problem, particularly in the system of multi-energy coupling on the demand side. In such systems, reducing the consumption of one type of energy through integrated energy consumers may impact the consumption of other energy types, leading to other costs. For decision-making as shown in Fig. 1, RL-based models play a crucial role in transforming the approach to solving optimization problems by effectively balancing the benefits and costs associated with the DR program [7]."}, {"title": "C. Existing Challenges", "content": "Although the aforementioned advancements have been made, there remain several challenges where DAI is insufficient.\n1) Data Scarcity: Training a learning-based model for forecasting requires a substantial amount of data, which is often lacking in newly constructed buildings or EV charging stations. As a result, load prediction in these areas can be challenging, as the accuracy of the predictions heavily relies on a large volume of real-world data.\n2) Model Generalizability: DAI models are often designed to handle specific problems within a narrowly defined scope. These models may struggle to generalize across diverse energy consumption patterns, different types of energy systems, or varying consumer behaviors. When applied to integrated energy systems, discriminative models may fail to adapt to the complexity introduced by demand-side coupling [7].\n3) System Adaptability: Many DAI approaches, such as deep learning, are static and do not dynamically adapt to real-time changes in the environment or consumer behavior. This limitation prevents models from responding effectively to unpredictable events, such as sudden peaks in energy demand or changes in renewable energy generation.\nOverall, DSM is essential and DAI has been used for DSM in several aspects. However, challenges exist for DAI and call for improved DSM solutions, potentially with the latest ML advancements to be described below."}, {"title": "III. GENERATIVE AI AND LARGE LANGUAGE MODELS FOR ENERGY OPTIMIZATION AND DEMAND SIDE MANAGEMENT", "content": "This section provides a review of prior studies that apply GenAI and LLM to improve DSM, offering several illustrative examples. Fig. 1 shows the utilization of GenAI and LLM spans classification, prediction, decision-making, and generation."}, {"title": "A. Technologies", "content": "GenAIs are designed to model the probability distribution of data, enabling them to generate new samples that are abundant and consistent with this distribution. The generated samples exhibit statistical properties similar to the original data, making them valuable for a wide range of applications, including data augmentation, simulation, and creative tasks. The foundation GenAIs include the Transformer, variational autoencoder (VAE), generative adversarial network (GAN), and generative diffusion model (GDM) [8]. LLMs are ex- pansive deep learning architectures that undergo pre-training on substantial datasets. At the core of these models lies the Transformer architecture, which is composed of neural networks each includes an encoder and a decoder, both of which are equipped with self-attention mechanisms. These components enable the encoder and decoder to interpret the semantic content of text sequences and capture the intricate relationships among words and phrases within them. The Transformer-based LLMs are able to undergo unsupervised training. However, it is more accurate to describe this process as self-directed learning. This mechanism enables Transformers to acquire an understanding of languages, general knowledge, etc., thereby making them effective for tasks such as summarization, translation, and question answering. LLM's popularity is significantly ignited by OpenAI's generative pre-trained Transformer (GPT) model, with subsequent developments giving rise to other LLMs, e.g., LLaMA6, Gemini7, and BLOOM8."}, {"title": "B. Applications", "content": "GenAI and LLMs own great potential to transform existing DSM research and several aspects are mentioned below.\n1) Data Augmentation: Data augmentation, a key genera- tive task, can be effectively facilitated by GenAI. For example, a VAE-GAN model [9] generates synthetic time-series energy profiles, which are utilized to optimize energy usage. The results indicated that the VAE-GAN outperformed the existing solutions significantly, particularly for generating EV load data. The traditional forecasting models often require large volumes of training data to mitigate risks of overfitting and underfitting. However, DSM entities such as EVs face significant limitations in acquiring sufficient data, particularly in the initial phases of data collection. GenAI emerges as a promising solution.\n2) Forecasting and Scenario Generation: The development of a robust optimization algorithm for energy optimization and DSM aimed at maximizing the overall benefit for consumers or aggregators presents a complex challenge. This task involves addressing the various uncertainties associated with the demand side, specifically the loads. Moreover, the forecasting of EV charging loads in DSM necessitates an understanding of EV charging behaviors. To address this, an LLM-based agent framework was introduced in [3] to simulate the charging behaviors of EVs. The road map of Shanghai, China has a similar goal, where the results demonstrate that LLMs can efficiently create personalized user profiles, plan daily activities, and enable informed, adaptive decision-making [3]. An overview of the applications of GenAI in DSM, outlining the advantages and limitations, is presented in Table I.\nPerspectives: GenAI and LLM are capable of au- tonomously performing tasks related to DSM, including load forecasting, scenario generation, and anomaly detection. They have significantly improved current DAI techniques with the potential to augment training data for DAI, aiding in extracting relevant information from intricate environments, among other functions [10]. Nevertheless, these models require further investigation and development."}, {"title": "IV. CASE STUDY", "content": "In this section, we present a case study of automating energy optimization and DSM with LLM."}, {"title": "A. Demand Side Management Lifecycle and Optimization", "content": "The lifecycle of DSM from the microgrid operator's perspective can be divided into three key phases: prediction, optimization, and management. Initially, prediction involves forecasting variables such as renewable energy generation, elec- tricity prices [11], and load demand [12]. Next, the optimization phase aims to enhance EMS strategies by determining optimal dispatch schedules for flexible loads, as well as optimizing the charging and discharging processes of ESS and EVs. The final phase, management, ensures that the DSM system operates as expected, with anomaly detection measures in place to protect the EMS from various attacks [4]. For these reasons, an ideal solution would be a full-lifecycle digital twin that enables seamless automation across all phases. In recent studies, e.g., [4] and [12], the role of GenAI in enhancing the prediction and management phases of DSM was demonstrated. However, the research gap remains in automating the optimization phase, which this case study seeks to address by exploring automated DSM optimization techniques."}, {"title": "B. Proposed Solution with Large Language Models", "content": "The DSM is implemented through the EMS, which enables microgrids to achieve cost-effective energy usage, reduced peak demand, and improved resource utilization. Our proposed solution is composed of three modules, designed to automate the optimization process in DSM for both the EMS developer and the end user using LLM.\n1) Automatic Optimization Formulation: The EMS devel- oper is responsible for developing optimization algorithms to manage energy usage in the microgrid efficiently. This process involves gathering various parameters and information such as energy consumption, dynamic pricing, and demand patterns, and then modeling their interactions through complex mathematical formulations. Traditionally, this task is highly time-consuming and heavily dependent on the developer's expertise, which takes years to build up and may not fully capture the ever-changing energy dynamics, such as fluctuations in demand and regulatory shifts. To address these challenges, we propose an Automatic Optimization Formulation module that leverages an LLM with RAG [13]. This module automates the formulation of optimization problems, adapting dynamically to the unique conditions of the microgrid. We showcase the capability of our method with a smart home DSM case study. The study considers factors such as the availability of renewable energy sources, ESS, EVs, and various loads, which can differ based on the appliances present in the individual microgrid. The automated formulation significantly reduces the reliance on manual work and domain expertise, streamlines the process, and delivers more precise and scalable solutions to ensure optimal microgrid operation, in an automatic way.\nFig. 2 shows our proposed LLM with RAG for energy optimization and DSM. In the module, the LLM is initially provided with documents related to DSM (such as academic papers, technical reports, and standards) and relevant code (e.g., Python scripts), which enhance LLM's proficiency in DSM optimizations, including peak shaving, load shifting, and energy storage optimization. More specifically, the textual content and code are transformed into vectorized text embeddings, divided into chunks, and stored in the RAG database, contributing to the database knowledge [14]. Additionally, the time-series data such as predicted energy prices and anticipated renewable energy generation along with facility parameters, are retrieved from the cloud and stored in the RAG database, forming another component of the knowledge repository [15]. The optimization problem can then be formulated in a conversational manner, which is highly user-friendly as shown in Fig. 2. More specifically, the developer's inputs, which include the task description, environmental information, optimization goals, and key factors, are converted into vectors and then provided to the LLM. Following this, the LLM with RAG that is specialized for DSM computes the semantic distances between the inputs and all stored chunks. The most relevant chunks are selected as external knowledge, which the LLM uses to generate responses that are accurate and coherent and effectively support the optimization problem formulation.\n2) Automatic Code Generation: Once the optimization problem is formulated, the next challenge is to translate the formulated problems with mathematical models into executable code. This step often requires custom programming to ensure that the optimization models are implemented correctly and efficiently. However, manual code generation is labor-intensive, costly, and error-prone, with even small mistakes potentially leading to inefficiencies or inaccuracies in microgrid man- agement. To automate this daunting process, we propose the Automatic Code Generation module. By employing an LLM with RAG, the system can automatically generate correct, high- quality, and executable code directly from the optimization models. This automation ensures that the code adheres to best practices, complies with regulatory constraints, and ac- commodates the specific needs of the microgrid. By reducing the dependency on manual programming, the EMS developer can accelerate the deployment of optimization solutions while minimizing errors, improving overall performance, and scaling efficiently to different customized needs.\nIn Fig. 2, the module is illustrated to solve the formu- lated optimization problem, enabling the EMS developer to submit code generation requests through prompts, such as requesting the writing of a script to solve the previously formulated optimization problem. Then, the LLM generates a Python script based on prior responses from the automatic optimization formulation module, taking into account the EMS developer's prompts and retrieving relevant knowledge from the RAG database. By executing the generated script, the default optimization results from the manufacturer can be obtained.\n3) Automatic Customizing Optimization: For the end user, the key requirement is the ability to adapt the optimization results to their specific needs in real time. While automatic optimization formulation and code generation streamline the EMS development process, they must also be flexible enough to respond to end-user requests. For instance, an end user may wish to prioritize the operation of specific appliances or adjust the scheduling of ESS, EVs, and consumption based on their unique operational goals or preferences. To meet this need, we propose Automatic Customizing Optimization. This module dynamically revises optimization results based on user inputs. Leveraging the LLM, the system interprets user requests, modifies the optimization models accordingly, and generates updated schedules or results in real time. This automation ensures that the EMS remains responsive, user-centric, and aligned with both individual preferences and overall system efficiency. By reducing the need for manual intervention, end users gain the ability to make timely, optimized, and informed decisions that improve performance and resource utilization.\nFor example in Fig. 2, the end user can request customiza- tion of optimal schedules for facilities such as an EV. The LLM then analyzes this request, retrieves the relevant RAG knowledge, and modifies the manufacturer's provided code to generate a new and customized optimization code automatically. The resulting customized optimal schedules can be achieved by executing this newly generated code."}, {"title": "C. Evaluation", "content": "To assess the effectiveness of the proposed LLM with RAG solution for DSM, we begin by using it to model a representative DSM optimization problem for EV charging, specifically the optimal scheduling problem. We present a microgrid scenario that includes a home EMS connected to an ESS, an EV, a PV, a cleaner, a dishwasher, and other non-dispatchable loads. We provide the same prompt, which outlines the objective of minimizing the operating cost of the microgrid, to both the baseline GPT-40 and our GPT-40 with RAG model. As illustrated in component A of Fig. 2, the output of the baseline GPT-40 is general and superficial. It successfully formulates the objective function to minimize the total operating cost associated with purchasing power from the grid, along with the power balance constraint. However, it overlooks several factors that could impact optimization performance. These include the absence of revenue from selling power to the grid in the objective function and the failure to incorporate the optimal dispatchable loads of the cleaner and dishwasher in the power balance equation. In contrast, our LLM with RAG as shown in component B uses a semantic router to direct queries to the most relevant documents. It then retrieves the essential expertise, integrates it with the pre- trained knowledge of LLM, and generates the final problem formulation accurately. Notably, both the revenue from selling power to the grid in the objective function and dispatchable loads in the power balance constraint are taken into account in our solution.\nWe then set up an experiment to test the optimization problem previously formulated by LLM. The datasets for the PV power generation and non-dispatchable residential loads as well as energy price10 are publicly available online. The parameters of facilities including ESS, EV, cleaner, and dishwasher are listed in Table II. The dispatchable loads could be categorized into two types. Type 1 loads are interruptible, meaning the devices can be temporarily interrupted while operating, e.g., cleaner. Type 2 loads are uninterruptible, mean- ing the devices cannot be interrupted during operation, e.g., dishwasher. Subsequently, the effectiveness of the Automatic Code Generation and Automatic Customizing Optimization modules are examined through the execution of the two Python scripts that were generated by EMS developer and the end user with our proposed solution respectively.\nFig. 3 presents a comparison between the default EMS method and our proposed solution. We assume a user request that the EV SoC must be at least 80% by 3 PM. Under the default method, the system is configured to interact with EV's battery management system to charge the EV to 100% SoC by early morning and ceases charging entirely afterward. Additionally, the method does not permit the EV to discharge, thus missing opportunities to reduce operational costs by selling energy when energy is expensive. In contrast, our customized method optimizes charging and discharging schedules based on user preferences. It charges when the energy is cheap, e.g., early morning and noon. Additionally, it enables the EV to discharge when energy is expensive, e.g., morning, effectively offsetting the house load during high-price periods and minimizing the energy bill. Our approach demonstrates a more cost-effective and user-tailored energy management strategy compared to the default method."}, {"title": "V. FUTURE RESEARCH DIRECTIONS", "content": "The following section presents three key future research directions aimed at advancing the interaction between GenAI and LLM technologies and DSM.\n\u2022\n\u2022 Upgraded Automation: The proposed LLM with RAG solution could be further improved by introducing an auto-selection mechanism. This mechanism would assist the end user in choosing the most suitable algorithms for ad- dressing tailored optimization scenarios, thereby aligning with various user-specific objectives. This is based on the fact there many existing algorithms have been developed and tested for DSM and the automation enhancement minimizes the overhead of technology re-development. Furthermore, implementing a self-debugging and self-verification framework would contribute to strengthening the automation process. It is often unrealistic to expect a perfect solution with just one cycle of technology development. Such new advancements would not only augment the optimization capabilities according to user preferences but also ensure the delivery of precise and optimized solutions.\nHallucination: Hallucination in LLMS\nhas been a common issue for many LLM-based solutions. This poses challenges in DSM as well, including suboptimal or even misleading optimization solutions and energy man- agement suggestions. These errors may lead to excessive resource use, high costs, and security risks. Future research should address hallucination by integrating robust RAG frameworks, external validation, and hybrid approaches combining LLM with deterministic models to regulate the process and reduce risks while preserving flexibility. Tackling these challenges is critical for adopting GenAI and LLM in dynamic energy management that can be highly sensitive in certain scenarios.\n\u2022 User Sentiment and Social Impact: The LLM with Automatic Customizing Optimization modules can adapt results to user preferences, but discrepancies may arise when optimization outcomes fail to satisfy users' nuanced expectations. These gaps often result from the LLM's limited ability to fully interpret complex preferences or balance priorities effectively. For example, while a solution may meet stated objectives, such as cost minimization, it may overlook subjective factors like convenience or trust. Future research should incorporate sentiment analysis and real-time feedback loops, enabling iterative refinement of solutions based on user reactions and comments. Devel- oping sentiment-aware LLMs that adapt to both explicit preferences and implicit emotional cues is essential for truly user-centric DSM optimization. User sentiment is related to the larger-scale social acceptance concern of using GenAI and LLM technologies and the discussions have been active. This demands multi-disciplinary research combining both technical and non-technical expertise to well explore the strengths of new technologies with minimal social disruption and maximal society well-being."}, {"title": "VI. CONCLUSIONS", "content": "This paper investigates the relationship between ML and DSM. It begins by reviewing the research efforts with DAI, GenAI, and LLM for energy optimization and DSM, along with discussions about different technologies' strengths and limitations. Then, we showcase the potential of GenAI and LLM for DSM with a case study, where the development of an RAG-enhanced LLM solution is designed and developed to automate DSM optimization. The results produced by our automated solution show that DSM can be significantly enhanced with automated optimization and intelligent DR with EV charging/discharging for energy supply-demand balancing and cost minimization. Our research in this paper offers valuable insights for advancing energy optimization and DSM with the latest ML advancements and inspires future studies."}]}