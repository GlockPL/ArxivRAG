{"title": "Predicting Solar Energy Generation with Machine Learning based on AQI and Weather Features", "authors": ["Arjun Shah", "Varun Viswanath", "Kashish Gandhi", "Nilesh Madhukar Patil"], "abstract": "This paper addresses the pressing need for an accurate solar energy prediction model, which is crucial for efficient grid integration. We explore the influence of the Air Quality Index and weather features on solar energy generation, employing advanced Machine Learning and Deep Learning techniques. Our methodology uses time series modeling and makes novel use of power transform normalization and zero-inflated modeling. Various Machine Learning algorithms and Conv2D Long Short-Term Memory model based Deep Learning models are applied to these transformations for precise predictions. Results underscore the effectiveness of our approach, demonstrating enhanced prediction accuracy with Air Quality Index and weather features. We achieved a 0.9691 R2 Score, 0.18 MAE, 0.10 RMSE with Conv2D Long Short-Term Memory model, showcasing the power transform technique's innovation in enhancing time series forecasting for solar energy generation. Such results help our research contribute valuable insights to the synergy between Air Quality Index, weather features, and Deep Learning techniques for solar energy prediction.", "sections": [{"title": "I. INTRODUCTION", "content": "In the modern world, it has become increasingly clear that eliminating fossil fuels is one of the huge requirements to achieve a carbon-neutral future. The Working Group III Special Report on Renewable Energy Sources and Climate Change Mitigation (SRREN) [19] suggests that consumption of fossil fuels accounts for the majority of anthropogenic GHG emissions worldwide. It states that CO2 consumption had risen to over 390 ppm, which was around 39% above pre- industrial levels by the end of 2010. In the race to an efficient energy ecosystem, solar energy is a promising renewable resource, but its intermittent nature poses challenges for integration into the grid. A recent study shows that India lost 29% of its utilizable global horizontal irradiance potential due to air pollution in the period between 2008 and 2018 [3]. Effective prediction of solar power generation is crucial for efficient planning and management of solar resources. Renewable energy like solar power is said to benefit human beings in a lot of different ways and the most important is in the health domain. Research by Galimova et al. [4] suggests that by 2050 if the world goes under a global transition and the energy sector emissions drop by 92% then we can reduce premature deaths by air pollution by 97%. This study reinforced the significance of considering environmental factors in our solar energy forecasting models. This study examines the use of machine learning algorithms that incorporate Air Quality Index (AQI) and meteorological features to improve forecast accuracy.\nIn order to shed some light on the inconsistent patterns of solar generation data, a number of regression models were initially utilised to predict the per-hour generation of solar power. We thus benchmarked a number of regression models, of which the chief ones were Linear Regression, Lasso, Ridge, ElasticNet, and ensemble models like RandomForest and XGBoost. These models utilize different methodologies which were compared to determine the model with optimal performance to provide valuable insights into the future of solar generation.[1] Additionally, this paper describes a few novel methods such as implementing a Zero Inflated Model and scaling the data using Power Transform, which can significantly improve solar power predictions irrespective of the irregularity in data. This study also incorporates the Convolutional Long Short-Term Memory 2D (ConvLSTM2D) network in the prediction process. ConvLSTM2D is a deep learning algorithm that combines the spatial processing capabilities of Convolutional Neural Networks (CNNs) with the sequential processing capabilities of Long Short-Term Memory (LSTMs)s. Using the spatiotemporal dependence of solar generation data, the ConvLSTM2D network improves the solar energy generation forecast accuracy by building upon historical data."}, {"title": "II. SURVEY OF LITERATURE", "content": "Various studies have used machine learning algorithms to increase the understanding and improvement of solar power forecasting models. Chuluunsaikhan et al. [1] discusses the importance of considering environmental factors such as climate and air pollution when predicting solar power generation. It states that solar panels work best when there is sunlight and no partial shade. However, factors such as weather conditions (e.g. clouds or rain) and air pollution (e.g. fine dust) can cause partial shading and reduce the power output of solar panels. The authors propose a method to regulate the power output of solar panels through machine learning. Machine learning models are developed with three components: weather components, air pollution components, and combined meteorological and air pollution components. The datasets used in the study were collected from 2017 to 2019 from the Seoul province of South Korea. The paper describes the methodology used, including data acquisition, feature extraction, model training, and power output prediction. The authors compare machine learning models, such as linear regression, k-Nearest Neighbors (kNN), Support Vector Regression (SVR), Multi-Level Perceptron (MLP), Random Forest Regressor (RFR), and Gradient-Boosting Regressor (GBR). Models are evaluated using quantitative error methods such as MAE, Coefficient of Determination (R2), and Root Mean Square Error (RMSE). Experimental results show that weather and air pollution parameters can be effective predictors. This paper has been the main premise of our research.\nZhou et al. [2] presents a different approach to forecasting short-term solar power output in smart cities by using deep learning techniques. They used a combination of clustering, CNN, LSTM, and attention mechanisms that obtained improved accuracy in predicting future energy generation. The authors proposed that for future work one could develop training models with time series-based data for further improvement and this is a proposal that we took under consideration. This study and research by Zhou et al. [9] motivated us to incorporate air quality index as a feature in our machine learning models since they [9] used community multiscale air quality in their research indicating how air pollutants can contribute to soiling of PV panels affecting the solar power generation which is also mentioned by Chiteka et al. [12]. Additionally, Jia et al.\nThe study in [5] presented models to predict solar radiation; even though our research is based on solar power generation this paper gave us important insights regarding the use of machine learning models in solar forecasting under various weather conditions. Along with this we also considered how machine learning models are computationally better than physical modeling methods since we can use historical data to train our model and predict new data which is difficult to do in the physical modeling approach. In addition, the study by Jebli, Liu, Sweerts et al. [6][7][8] helped us understand the importance of addressing topics like Pearson correlation, air pollutant deposition effects, and random forest optimization in our research. Incorporating this increased the accuracy of the prediction models clearly indicating how different factors and approaches combined can enhance solar power generation prediction.\nAlong with machine learning models, there were a lot of studies that suggested the use of deep learning methods for predicting solar power generation. Application of models like CNN's and Recurrent Neural Network (RNN)'s exhibits the effectiveness of these deep learning techniques in capturing complex patterns and dependencies in solar generation signified by Lee et al. [11]. The study by Zazoum et al. [10] also evaluates the accuracy and reliability of deep learning methods in forecasting solar PV power generation which is essential for effective grid integration and energy management. To address the unique characteristics of the dataset, which exhibited an excess of zero values, the researchers in the study proposed by Kim et al.\nResearchers in [13] explored alternative statistical models beyond the traditional Poisson regression. In addition to the Poisson model, the zero-inflated model was employed, acknowledging its ability to effectively handle datasets with an excessive proportion of observed zero values. By employing the zero-inflated model, the researchers sought to capture the dual processes contributing to the occurrence of zeros, distinguishing between structural zeros and excess zeros. Thomas et al.The work in [14] also emphasizes the need for a modeling framework for univariate and multivariate zero-inflated time series of counts. The basic modeling framework used is observation-driven Poisson regression with a Generalized Linear Model (GLM) structure.\nThe Zero-Inflated Poisson (ZIP) model is employed to capture the possibility of extra observed zeros relative to the Poisson distribution, a common feature in count data. Using these insights we also utilized zero-inflated models in our research. Yeom et al. [15] introduces a novel approach using deep learning models, specifically ConvLSTM networks, to predict short-term solar radiation by incorporating geostationary satellite images. The proposed"}, {"title": "III. METHODOLOGY", "content": "In order to accurately train our model on features that would\nhelp it effectively predict solar generation, we needed a dataset\nthat had high granularity, solar generation, irradiance, and\nmeteorological data. We thus utilized the UNISOLAR Solar\nGeneration Dataset which includes two years of Photovoltaic\nsolar energy generation data collected at an interval of 15\nminutes at La Trobe University Campus in Victoria, Australia.\nWeather data like apparent temperature, air temperature, dew\npoint temperature, wind speed, wind direction, and relative hu-\nmidity were also provided by the dataset. We curated the data\nby merging and selecting provided features such that a suitable\ndataset may be created for our model. We did this by merging\nthe data provided about the solar panels such as the number of\npanels and type of inverters, with the aforementioned weather\ndata features to obtain a comprehensive and feature rich data\nof potential factors affecting solar data. In order to improve\nthe input features of our model, we utilized AQI data sourced\nfrom the aqicn.org website, which was captured by a station\nlocated in Macleod, Victoria with the location showed in Fig\n1. This station was at a distance of 1.77 km from the University\nwhere the UNISOLAR dataset was collected (as shown in Fig.\n2).\nIt was noticed that the solar data generated for 15-minute\nintervals had a number of irregularities in the number of data\ncollections per day. Switching to one-hour intervals eliminated\nthis problem and made the data intervals regular. Another\nreason for the use of 1 hour intervals was to reduce the\nnoise caused due to various external factors like equipment\nsensitivity, cloud cover and other atmospheric factors.\nFor our study, we implemented 70:30 dataset split for training\nand testing respectively. This approach with 70% of the dataset\ndedicated to training, allows our model to effectively learn the\ncomplex temporal dependencies and relationships inherent in\nsolar data, thereby enhancing its predicting accuracy. The re-\nmaining 30% served as an independent testing set to determine\nthe efficacy of our proposed model on unseen data."}, {"title": "B. Time-Series Approach", "content": "Initially, a regression-based approach was utilized to predict\nthe solar power generation based on the factors present. How-\never, this did not provide adequate information regarding the\nrelationship between these factors and solar power generation.\nThis prompted us to try out a time series-based approach\nas we also had chronological data. This is because a time\nseries model is designed to capture patterns in sequential and\ndiscrete data points over a set period in time. We made use of\nsolar generation at a particular moment in time to predict the\ngeneration at some time in the future as this type of approach\nwould help us identify trends and seasonality to make more\naccurate predictions. We decided to shape our prediction by\ncreating a column that would predict solar generation values\n24, 48 and 72 hours out and compared the effectiveness of\nthese models.\nThe Machine Learning models used for generating and com-\nparing solar power generation for a Time Series approach\nwere:"}, {"title": "Linear Regression", "content": "It is a statistical model used to establish a linear\nrelationship between a dependent variable and one or\nmore independent variables. It allows for the prediction\nof coefficients that decide the strength of the established\nlinear relationship. It is used to predict the line of best\nfit which minimizes the distance between actual values\nand predicted values.\n$Y = \\beta_0 + \\beta_1X_1 + \\beta_2X_2 + ... + \\beta_pX_p + \\epsilon$ (1)"}, {"title": "Gradient Boosting Regression", "content": "It is an ensemble model which combines multiple weak\nprediction models like decision trees, and takes the\nstrongest combination of predictions to build a strong\npredictive model. Gradient Boosting works by repeatedly\ntraining weak models to fit the negative gradient of the\nongoing prediction's loss model, which helps improve\nits accuracy.\n$Y_i = \\sum_{k=1}^{K} f_k (x_i) = f_0(x_i) + \\sum_{k=1}^{K}\\gamma_k h_k(x_i)$ (2)"}, {"title": "Random Forest Regression", "content": "It is a supervised learning algorithm used for regression-\nbased tasks. It combines concepts of decision trees and\nensemble learning to make precise predictions. It also\nreduces overfitting due to an element of randomness\nwhich restricts individual trees from memorizing the\ntraining set data provided to it. The decision of the\nalgorithm is made by aggregating the decisions of\nindividual trees using majority voting.\n$Y_i = \\frac{1}{N}\\sum_{j=1}^{N} f_j (x_i)$ (3)"}, {"title": "XGBoost Regression", "content": "Extreme Gradient Boosting is an advanced gradient\nboosting algorithm that is widely used due to the high\naccuracy of predictions. It achieves this by iteratively\nadding weak models to the ensemble and ensuring they fit\naccording to the current prediction. It also uses features\nlike column and row subsampling to further improve its\nperformance.\n$Y_i = \\sum_{k=1}^{K} f_k (x_i) = f_0(x_i) + \\sum_{k=1}^{K}h_k(x_i)$ (4)"}, {"title": "Random Forest Regression + XGBoost Regression", "content": "Building upon the positive results displayed by Lokesh et\nal [20], we decided upon an ensemble model consisting\nof a Random Forest Regressor and a XGBoost Regressor,\nconsidering that their strengths are complementary in the\nsense that both are ensemble learners and use boosting\nand bagging respectively. RFR can handle non-linear re-\nlationships between data points and XGBoost can capture\nsubtle patterns and temporal dependencies."}, {"title": "ConvLSTM2D", "content": "In this subsection, we delve into the specifics of the\nConvLSTM2D model, a hybrid architecture that merges\nCNNs and LSTM networks. This unique architecture\nis designed specifically for analyzing spatio-temporal\ndata, where understanding both spatial relationships and\ntemporal dynamics is crucial for accurate predictions.\nThe architecture of the ConvLSTM2D model, illustrated\nin Figure 3, consists of layers that facilitate the processing\nof spatio-temporal data. At its core are ConvLSTM units,\nwhich extend the traditional LSTM cells by incorporating\nconvolutional operations within the recurrent structure.\nThis innovative design enables the model to effectively\ncapture both spatial and temporal dependencies within\nthe data. The utilization of ConvLSTM units makes the\nmodel adept at handling sequences of spatio-temporal\nobservations, a characteristic essential for tasks such as\nvideo analysis, weather forecasting, and motion predic-\ntion.\nThe training procedure of the ConvLSTM2D model fol-\nlows a systematic approach tailored to exploit its full po-\ntential. Initially, standard data preprocessing techniques,\nsimilar to those employed for other machine learning\nmodels, are applied. However, due to the unique architec-\nture of ConvLSTM2D, additional reshaping of the data\nis necessary to conform to its input shape requirements.\nThe input data is reshaped into a 5-dimensional tensor,\naccommodating batches of sequences, each comprising\n2D matrices over time. This reshaping operation enables\nthe model to interpret the input data as a spatio-temporal\nsequence, facilitating effective learning of complex pat-\nterns. Furthermore, to ensure robust training and prevent\nissues stemming from skewed distributions, a power"}, {"title": "C. Zero-Inflated Models", "content": "An analysis of the solar power data showed that the\ndistribution was such that an unusually high number of values\namounted to zero, this was likely due to negligible solar\ngeneration due to the intermittent nature of sunlight received\nby the solar panels. These zeros overshadowed the other\nvalues in the distribution by a fair amount.\nThe histogram shown in Figure 2 highlights this zero-inflated\ndata of our initial dataset. It also provides insights into the\nrange of values of solar energy generation and their respective\nfrequencies.\nThus, on noticing this skewness of the solar energy"}, {"title": "Tweedie Distribution", "content": "The Tweedie distribution(Figure 3) is characterized by the\nfollowing components:\nRandom Variable: Let y be the random variable repre-\nsenting the observed value.\nMean Parameter: \u00b5 is the mean parameter of the distri-\nbution, indicating the average value of y.\nPower Parameter: p is the power parameter of the dis-\ntribution, controlling the variance structure. It determines\nthe shape of the distribution and can take any positive\nvalue, excluding 1.\nNormalizing Constant: A(\u03bc,p) is the normalizing con-\nstant that ensures the Probability Density Function (PDF)\nintegrates to 1 over the support of y. It accounts for the\nspecific value of \u00b5 and p and is essential for properly\ndefining the distribution.\nThe probability density function of the Tweedie distribution is\nthus given by:\n$f(y; \\mu,p) =  \\frac{y^{p-1} \\cdot exp \\Big( \\frac{\\mu^{(1-p)}}{(1-p)} \\Big)}{A(\\mu, \\rho)} \\cdot exp \\Big( - \\frac{y^{P}}{A(\\mu, \\rho)},$\nThe Tweedie distribution encompasses various shapes,\nranging from heavy-tailed with excess zeros (for p < 1) to\nsymmetric and Gaussian-like (for 1 < p < 2 and p > 2). It\nincludes special cases such as the Poisson distribution (when\np = 1) and the gamma distribution (when p = 2). The choice\nof p determines the specific characteristics of the Tweedie\ndistribution, including its skewness, tail behavior, and overall\nshape. This was suitable for our zero-inflated distribution, by\nusing a modified version of the above called a Zero Inflated\nTweedie (ZIT) Model which accounts for the excess zeros\nusing a separate inflation component."}, {"title": "D. Power-Transform", "content": "It is a data transformation and scaling technique which\nis another way to tackle the skewness of the solar gener-\nation data; we found that using PowerTransformer was a\nsignificantly better fit for our dataset than the zero-inflated\nmodel. This scaling method is applied feature-wise to make\nthe data more Gaussian or Gaussian-like which is inherently\nassumed by regression-based prediction models. It is used\nwhen dealing with non-constant variance. There are 2 different\nmethods of performing the power transform, namely the Box-\nCox transform and the Yeo-Johnson transform.\nThe Yeo-Johnson power transform is given by the formula:\n$\\lambda(x + 1)^{\\lambda} - 1) /\\lambda,$ if $\\lambda \u2260 0, x \u2265 0 \\newline ln(x + 1),$ if $\\lambda = 0, x > 0 \\newline -((|x| +1)^{2-\\lambda} -1) /(2 - \\lambda), if $x \u2260 2, x < 0 \\newline -ln(|x| + 1),$ if $\\lambda = 2, x < 0$\nHere, x represents the original variable, and \\Lambda is a parameter\nthat determines the type of power transform applied. The\ntransformed variable $x^x$ is the result of applying the Yeo-\nJohnson power transform. The aforementioned Yeo-Johnson\npower transform was thus applied to the data, and the re-\nsulting distribution was notably found to resemble a Tweedie\ndistribution.\nThe solar energy generation data points are now normalized\nto make the distribution more Gaussian as shown in Figure 4."}, {"title": "IV. RESULTS", "content": "For the prediction of solar energy generation using multiple\nmethodologies, we have found that the Power Transformed\ndata led to the most accurate prediction in comparison to\nRegular Time Series and Zero-Inflated models. Power Trans-\nformation of data is a particular method that stands out in\ncomparison to the rest. This is due to solar energy generation\nbeing dependent on various factors like temperature, seasonal-\nity, time of day, and air quality of the region. These data points\nhave non-linear relationships with each other. ConvLSTM2D\nmodels outperform normal regression models as it combines\nconvolutional operations and LSTM memory cells, allowing\nfor the modeling of both spatial and temporal dependencies in\ndata. This makes ConvLSTM2D well-suited for tasks where\nboth spatial and sequential information are important, such as\nsolar power generation forecasting.\nFor evaluating the performance of the models on the gath-\nered data, various statistical metrics were considered, of which\nultimately R2, MAE, and RMSE were used. Our key metric\nwas R2, as the coefficient of determination R2 is generally\na better indicator of regression model performance when\ncompared to other metrics[18]. These metrics were tabulated\nand compared across the various models and for three different\ntime slots: 24 hours, 48 hours and 72 hours. There are\nthree such tables corresponding to the principal methodologies\nutilised: Regular time-series, Zero Inflated Model, and Power\nTransform."}, {"title": "V. CONCLUSION", "content": "This study investigates the use of various machine learning\nalgorithms to effectively determine the future solar generation\nin a region by utilizing a time series approach. The chief mod-\nels employed were Linear Regression, Lasso, Ridge, Elastic-\nNet, ensemble models like RandomForest and XGBoost, and\ndeep learning models like ConvLSTM2D. Later, on conferring,\nwe decided to switch to a time- series based approach due to\nthe seasonal fluctuation in the solar data. However, on noticing\nthe skewness of the solar energy generation data which had\na high number of zeros, we decided to switch to a zero-\ninflated model which helps ascertain the difference between\nthe true zero data points and the inflated zeros. This approach\nimmediately yielded a higher accuracy of solar prediction\nwith a lower mean standard error. Another way to tackle the\nskewness of the solar generation data was to try different\nscaling techniques; we found that using PowerTransformer\nwas a significantly better fit for our dataset than the zero-\ninflated model. This scaling method is applied feature-wise\nto make the data more Gaussian or Gaussian-like which is\ninherently assumed by regression-based prediction models. In\nconclusion, this study investigates the use of machine learning\nalgorithms incorporating AQI and climate factors to provide\nmore accurate solar generation forecasts. Considering seasonal\nvariations in the solar data, the time series-based method\nwas modified. In addition, a zero-inflated model and scaling\ntechniques were used to address the skewness of the solar\ngeneration data. The findings provide valuable insights for\nsolar stakeholders, contributing to the adoption and use of\nsustainable energy sources."}, {"title": "VI. FUTURE SCOPE", "content": "Solar energy generation forecasting is a dynamic field that\nwill always develop and demand exploration. There is a lot\nof scope in the future to improve the accuracy of solar\nforecasting. To make this forecasting scalable and generalized\nfor all geographical regions, the dataset can be collected\nfrom different regions and time periods since our research\nprimarily utilizes data from a specific region and time zone.\nAdditionally, data fusion and feature engineering can be done\nto enhance the power of forecasting. Data fusion is the practice\nof collecting data from multiple sources like satellite imagery\nand weather stations which can be combined together for better\nresults. There was a limitation on the dataset which we faced\nduring implementation which was the fact that the AQI data\nwe used wasn't from a data station at the exact geographical\nlocation of the data collection but rather another data station\naway from the solar site. Thus in order to increase accuracy\none can take AQI data from a data station at maximum\nproximity to the data collection center in order to eliminate\nmany geographical errors. Another possibility can be to collect\nour own data to create a localized dataset which would likely\nbe more accurate since we can customize it and remove\nany bottlenecks faced earlier by having utilised an external\ndataset. Moreover, feature engineering can be employed to\nextract more meaningful features from the data available,\nhence increasing the model performance. Features like cloud\ncover, dust, and further manners of seasonality can also be\ntaken into consideration for future research."}]}