{"title": "Towards Nation-wide Analytical Healthcare Infrastructures: A Privacy-Preserving Augmented Knee Rehabilitation Case Study", "authors": ["Boris Ba\u010di\u0107", "Claudiu Vasile", "Chengwei Feng", "Marian G. Ciuc\u0103"], "abstract": "The purpose of this paper is to contribute towards the near-future privacy-preserving big data analytical healthcare platforms, capable of processing streamed or uploaded timeseries data or videos from patients. The experimental work includes a real-life knee rehabilitation video dataset capturing a set of exercises from simple and personalised to more general and challenging movements aimed for returning to sport. To convert video from mobile into privacy-preserving diagnostic timeseries data, we employed Google MediaPipe pose estimation. The developed proof-of-concept algorithms can augment knee exercise videos by overlaying the patient with stick figure elements while updating generated timeseries plot with knee angle estimation streamed as CSV file format. For patients and physiotherapists, video with side-to-side timeseries visually indicating potential issues such as excessive knee flexion or unstable knee movements or stick figure overlay errors is possible by setting a-priori knee-angle parameters. To address adherence to rehabilitation programme and quantify exercise sets and repetitions, our adaptive algorithm can correctly identify (91.67%-100%) of all exercises from side- and front-view videos. Transparent algorithm design for adaptive visual analysis of various knee exercise patterns contributes towards the interpretable AI and will inform near-future privacy-preserving, non-vendor locking, open-source developments for both end-user computing devices and as on-premises non-proprietary cloud platforms that can be deployed within the national healthcare system.", "sections": [{"title": "1 Introduction", "content": "For a small country with just over 5 million people, New Zealand's \u201cPhysiotherapy services revenue is expected to rise at an annualised 2.7% over the five years through 2023-24, to total an estimated $519.2 million.\u201d [1]. As the steady increase in costs of medical and physiotherapy services is a global problem, the overarching question is: How can we use scientific and technological advancements to enhance rehabilitation and help to inform the design of next-generation nationwide analytical infrastructures that should not be relying on third-party offshore cloud services?\nEver since the concept of telerehabilitation in the 1990s [2] and Microsoft's Kinect exergames from 2010s, the ideas combining augmented video interaction to improve wellbeing through active movements, Internet videoconferencing and more recently popular exercise mirrors are not new. Hence, for this research the guiding question is: What related contexts, insights and artefacts from the presented case study on knee rehabilitation may contribute to the near-future technology advancements in adding value to rehabilitation processes and technology?\nConsidering the prospect of the next-generation big data analytical healthcare platforms able to capture and process video and data streams, the need for digital equality of end-users computing devices, the objectives of this research are aligned with the following research questions:\n1. How can we use near-obsolete end-user computing devices to capture and optionally process rehabilitation data for promoting patients' compliance and adherence factors [3,2]?\n2. To what extent Artificial Intelligence (AI) and Computer Vision (CV):\n\t- are needed for the reported knee rehabilitation case study?\n\t- could be applied to extended sets of knee exercises potentially transferrable to more general neuromotor rehabilitation for both end-user computing and healthcare platforms?"}, {"title": "2 Methods and Materials", "content": "Combining sport science and AI methodologies, the three-phase multidisciplinary approach involves analysis and recommendations: (1) Considering the nature of injury, rehabilitation process, movement goals, and recommended physical rehabilitation exercises [4]; (2) Bridging biomechanics and AI by: identifying common"}, {"title": "2.1 Dataset Collection and Analysis", "content": "The collected dataset represents a partial video log of real-life right knee rehabilitation programme, capturing a range of exercises with occasional incorrect movements that are known as common errors (Fig. 1).\nNature of injury. The right knee was diagnosed with an injury resulting in inflammation and knee instability, without major damage requiring surgery.\nCommon errors and properties of prescribed knee exercises. The incorrect rehabilitating exercise movements are subject to qualitative assessment criteria of an expert and varying during the progression within the prescribed programme."}, {"title": "Data collection protocol.", "content": "All videos were recorded in full HD 1080p at 30 fps, using an iPhone (SE, iOS v.15.8.3). The camera was positioned approx. at waist level. The patient's right leg was either perpendicular to the camera (to estimate the knee angles in sagittal plane) or in frontal view to capture lateral knee instability. The collected video dataset (Table 1) contains different types of exercises (i.e. output classes or output labels) combining squat technique with both legs (S), single leg (SL), and Bulgarian split squat (BSS) as depicted in Fig. 1. To assist (A) balance and safety, some exercises were performed while holding a chair or a stick. To evaluate robustness of data processing and exercise counting functionality, most videos (Table 1) contain multiple exercises, including redundant elements such as waking into the scene, leg shaking off and knee lifting, which could be trimmed in future applications."}, {"title": "Rehabilitation Process and Movement Goals.", "content": "During the rehabilitation, the exercises evolved from simple and personalised to more general and challenging movements aimed to returning-to-sport demands.\nFrom a sport science phasing analysis perspective [4], a common property of the movement for all prescribed right knee rehabilitation exercises is a spatiotemporal pattern starting with knee flexion and transitioning to knee extension.\nFrom an Al perspective and preliminary scope of this work, it was decided that all exercise categories are to be merged into a single output class. Analytical assessment was provided as batch-processed feedback after exercising sessions. To promote adherence to home exercising programmes, the generated feedback should also include a quantitative summary of exercises performed. Considering potential barriers to digital inclusion (including access to the latest technology), video processing stages could be completed at the end-user side or performed on a near-future healthcare analytical platform. Options for privacy-preserving data exchange with near-future healthcare analytical platform are: MP4 video files, which could be filtered to preserve diagnostic information and/or CSV timeseries data."}, {"title": "2.2 Video Data Processing, Visualisation and Analysis", "content": "For prototyping purposes, there were three video data processing stages (Fig. 2):\n1. Video recording, post-data collection, transfer and conversion. In view of broader end-user population, collected videos were transferred from iPhone SE (2016) into a MacBook Pro (2015) and PC computer (2012). All collected MOV video files were batch-converted into MP4 format using open-source ffmpeg command line utility (www.ffmpeg.org) as part of Linux bash shell script, achieving approx. compression ratio 1:5 or higher.\n2. Augmented video feedback, feature extraction and privacy-preserving numeric data generation. For augmented replay, generated stick-figure elements of human pose estimation overlayed video with side-to-side live-plot.\n3. Providing exercise summary. Generated CSV data table were pre-processed to filter rows containing NaN values. Knee angles were scaled and normalised for automated indexing, visualisation and exercise counting algorithm."}, {"title": "2.3 Algorithm Development and Visualisation", "content": "Augmented Video Feedback and Feature Extraction. Intended as a proof-of-concept and to enable further incremental development, we employed Google's MediaPipe for human pose estimation. From estimated 3D body landmarks, Feature Selection (FS) included hip, knee, ankle and foot index (tip of the shoe).\nThe key processing steps for augmented video replay include:\n1. Frame-by-Frame Analysis: Each video frame is processed to detect body landmarks. If landmarks are detected, their coordinates are extracted.\n2. Angle Calculation: The knee angles are computed using the coordinates of the hips, knees, and ankles. The script calculates the angle between the thigh and calf segments for both the left and right knees.\n3. Safety Alerting Data Generation: In addition to generated timeseries data containing human pose estimation, and angle calculation, as part of Feature Extraction Technique (FET), we generated binary data indicating possible exercising errors.\nFront View and Side View Calculations. The methodology presented distinguishes between frontal and side (sagittal) view calculations.\nFrontal view calculation insights:\n\u2022 For front view analysis (Fig. 3a), the algorithm incorporates the z-coordinates of the hips, knees, and ankles to calculate the angles in a 3D space. The hips"}, {"title": "Equation", "content": "The angle $\\theta = \\measuredangle ABC$ between the thigh and calf can be computed using the cosine rule (1) in a right-angled triangle:\n\n$\\measuredangle ABC = cos^{-1}(\\frac{BC^2 + AB^2 - AC^2}{2BC \\cdot AB})$"}, {"title": "Equation", "content": "The angles are adjusted based on the relative positions of the hips and ankles to account for any misalignment or oblique angles. The angle $\\measuredangle A1BC1$ between the thigh and calf (Fig. 3b) can be computed using the cosine rule (2) in a right-angled triangle or by applying the Law of Cosines (3):\n\n$\\measuredangle A1BC1 = \\pi - \\measuredangle A1 = \\pi - \\measuredangle A1BA0 - \\measuredangle C1BC0 = \\pi - cos^{-1}(\\frac{A0B}{A1B})$\n\n$\\measuredangle A1BC1 = cos^{-1}(\\frac{C1B^2 + A1B^2 - A1C^2}{2C1B \\cdot A1B})$"}, {"title": "Viewing Planes and Safety Alerting.", "content": "To highlight common errors, on video overlay and side-to-side timeseries plot (Fig. 2), we integrated customisable criteria for both front view and side view perspectives:\nSagittal View Safety Alerting Rule Description. The exercise is considered incorrect if the knee is positioned in front of the foot index."}, {"title": "Frontal View Safety Alerting Rule Description.", "content": "The exercise is considered incorrect if the knee is positioned inwards relative to the foot, as determined using the collinearity condition A(A,B,C).\nAugmented video replay and CSV data stream generation. The algorithm, depicted as a flowchart (Fig. 4) combines Computer Vision (CV) approaches such as Google MediaPipe for pose estimation and Feature Extraction Technique (FET) for augmented video replay and numeric timeseries data logging in CSV text files. Feature Extraction Technique (FET) included knee angle estimation and safety alerting binary data that may require expert's attention."}, {"title": "Exercise Summary: Counting and Indexing Visualisation Algorithm.", "content": "As the third stage of numeric data processing,\nAlgorithm 1 represents traditional computing approach, which the same as artificial neural networks (ANNs) would still require extracted features and initial knee exercise labelling information for its parameter tunning and validation. However, the algorithm did not require a larger labelled dataset for modelling numeric data timeseries."}, {"title": "2.4 Results Analysis", "content": "Visual results (Fig. 5) achieved on rehabilitation case study dataset (Table 1), show color-coding of video overlays and side-to-side generated timeseries of knee angle stored as CSV numeric data.\nSafety alerting data (highlighted in red for the injured knee on Fig. 5c and Fig. 5d) is to draw expert or patient's attention to possible common errors. Exercise counting results achieved on rehabilitation case study dataset (Table 1), were tested on extracted CSV timeseries numeric data from individual video files."}, {"title": "3 Discussion", "content": "Generated post session safety-alerting data that may require the attention of a physiotherapy expert are recorded, however we did not yet implement real-time safety alerting functionality and mobile video streaming.\nThe benefit of storing redundant data on 3D pose estimation with additional features. CSV-formatted text files for post-exercise analysis, allow rapid prototyping and code base reusability and processing platform independence.\nBig-data Analytical Healthcare Platforms Considerations. Aligned with the authors' views: (1) The experimental artefacts presented, transparent AI and algorithms are important for both end-users and healthcare cloud infrastructures; (2) national healthcare analytical platforms and infrastructure should operate within national systems and not rely on third-party cloud infrastructures based overseas, and; (3) the end-users should be in control of their privacy and choose what data they are willing to process and share."}, {"title": "4 Conclusion", "content": "In this research, we used real-life knee rehabilitation videos achieving a proof-of-concept of augmentation of video replay with extracted diagnostic information. The presented algorithms can be deployed on local near-obsolete computers or on near-future healthcare analytical platforms. Augmented video replay can show configurable overlay elements of stick figure, with generated side-to-side timeseries plot showing colour-coded safe and unsafe knee exercise positions. For local and cloud-based healthcare platform processing, privacy-preserving extracted numerical data (in CSV text format), contains human body pose estimation"}]}