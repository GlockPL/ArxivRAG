{"title": "FishBargain: An LLM-Empowered Bargaining Agent for Online Fleamarket Platform Sellers", "authors": ["Dexin Kong", "Xu Yan", "Ming Chen", "Shuguang Han", "Jufeng Chen", "Fei Huang"], "abstract": "Different from traditional Business-to-Consumer e-commerce platforms (e.g., Amazon), online fleamarket platforms (e.g., Craigslist) mainly focus on individual sellers who are lack of time investment and business proficiency. Individual sellers often struggle with the bargaining process and thus the deal is unaccomplished. Recent advancements in Large Language Models(LLMs) demonstrate huge potential in various dialogue tasks, but those tasks are mainly in the form of passively following user's instruction. Bargaining, as a form of proactive dialogue task, represents a distinct art of dialogue considering the dynamism of environment and uncertainty of adversary strategies. In this paper, we propose an LLM-empowered bargaining agent designed for online fleamarket platform sellers, named as FishBargain. Specifically, FishBargain understands the chat context and product information, chooses both action and language skill considering possible adversary actions and generates utterances. FishBargain has been tested by thousands of individual sellers on one of the largest online fleamarket platforms (Xianyu) in China. Both qualitative and quantitative experiments demonstrate that FishBargain can effectively help sellers make more deals.", "sections": [{"title": "1 INTRODUCTION", "content": "With the development of the economic society, online fleamarket platforms have grown rapidly around the world, allowing individual users to sell products online [3]. Products listed on online fleamarket platforms are in different conditions, ranging from brand-new to heavily-used, so there is no standard to guide how they should be priced. Due to that, during a typical fleamarket shopping process, bargaining is almost an unavoidable part, which is different from business-to-consumer e-commerce platforms (e.g., Amazon). Individual sellers often struggle with the bargaining process for two main reasons, as shown in Figure 1. First, the time they invest on the platforms is limited, so when an interested buyer reaches out, the seller is often not available. We named it buyer-seller availability gap. Second, even if the seller is online, their insufficiency in negotiation techniques often leads to an unsatisfactory outcome.\nTo address the issues mentioned above, it is important to introduce bargaining agent to help individual sellers. In recent years, LLM-driven agents have shown huge potential in various dialogue tasks, such as context understanding and response generation [6]. However, those tasks are mainly targeted at passively following users' intentions and fulfilling users' requests. Unlike those tasks, proactive dialogue tasks constitute a unique form of communication that takes into account environment and unpredictable opponent strategies [4]. Bargaining on fleamarket platforms is naturally one of the proactive dialogue tasks. In a typical fleamarket bargaining scenario, buyer and seller have conflict of interests (target price) and seek a mutual agreement through dialogues. Such dialogues consist of cooperative and adversarial elements, where both sides need to understand the state, choose actions according to certain strategies and generate utterances to interact with each other [2]. The whole process is both a strategic and a linguistic problem.\nTo this end, we propose an LLM-empowered bargaining agent named FishBargain, which consists of three modules: price extractor, policy planner and utterance generator, aiming to automate and improve the bargaining process on fleamarket platforms for individual sellers. Our contributions are threefold:\nFirst, directly applying LLMs to generate responses often results in degenerate solutions because it is challenging to control and interpret the strategies. Preliminary investigations have attempted to address this by decoupling strategy selection from utterance generation [5]. However, generated utterances tend to be repetitive if the same action is chosen. Therefore, we take a step forward to divide strategies into both actions and language skills and introduce a policy planner to choose strategies. This methodology allows for a more nuanced and enriched expression in the generated utterances. Second, rather than passively responding to the buyers, bargaining agents should have proactivity, defined as the capability to control the conversation considering the adversary actions and goals. So instead of choosing strategies only based on chat history, the policy planner is designed to conduct bi-directional thinking [7], by anticipating the adversary's strategies.\nThird, we define solid metrics and involve real sellers from Xianyu, to test our bargaining agent named FishBargain. Both qualitative and quantitative evaluations demonstrate that FishBargain can effectively help individual sellers make more deals."}, {"title": "2 OVERVIEW OF FISHBARGAIN SYSTEM", "content": "Our goal is to create an agent to help sellers sell products at the highest possible price. For a given dialogue history u<=t and the product information I, this agent is responsible for generating the response u sys. The agent is composed of the following three parts:\n\u2022 A price extractor, which is responsible for extracting the price from the dialogue history u<=t.\n\u2022 A policy planner that predicts the next dialogue action at and language skill st based on the dialogue history and product information.\n\u2022 A generator that converts dialogue strategies and prices into natural language response uys."}, {"title": "2.1 Price Extractor", "content": "Price is a fundamental element in the bargaining process, but it is challenging for LLMs to interpret this factor. So we introduce a price extractor to alleviate the problem and keep track of the dynamics of buyer's offers. In the bargaining process, price can be expressed through absolute ways (e.g., \"Is $200 OK?\") and relative ways (e.g., \"How about a 20% discount?\"). To address the problem, the price extractor is required to extract the price according to chat history and also provide a detailed computation chain of thought to ensure the precision.\nSpecifically, in a chat session concerning the product I, we denote each utterance as ut, and the price extractor recognizes the buyer's price pusr by f (I, u<=t). It is worth mentioning that the price extractor mainly focuses on the buyer side, because the seller's offer p\nbys is proposed by our system."}, {"title": "2.2 Policy Planner", "content": "Policy planner decides what action at the bargaining agent should take given the product I, utterance sequence u<=t, and both sides' offer p<=t. Below, we describe two key features of this module."}, {"title": "2.2.1 Strategy decoupling", "content": "LLMs have demonstrated excellent contextual understanding abilities across various dialogue tasks. However, most dialogues are still primarily human-led. In other words, it is challenging for LLMs to strategically guide conversations toward the desired objectives, such as closing a deal at a higher price. To enable LLMs to proactively guide dialogues towards certain goals, we reference previous work by defining and executing bargaining actions to steer the direction of the conversation, with specific bargaining actions detailed in Table 1. We also utilize an LLM as the strategy planner to select the next action to execute based on the context.\n$a_t = LLM(P_a; I; u^{usr}_1, u^{sys}_1, ..., u^{usr}_t, u^{sys}_t, u^{usr}_{t+1})$\nwhere Pa represents the action selection prompt, I represents the product information, such as product description, price, etc.; uusr and uys respectively represent the buyer's utterance and the agent's response.\nAfter selecting the action to execute, the LLM needs to gener-ate a corresponding response. However, LLMs are not naturally negotiation experts and tend to produce similar expressions when repeatedly executing the same bargaining actions. Therefore, in addition to defining relevant bargaining actions, we utilized large models to summarize a set of common bargaining language skills S from real negotiation data, as detailed in Table 2. For each turn, we use a random selection of language skills st ~ Random(S) to guide the LLM in generating persuasive language. Additionally, it is important to note that we focus on seller agents and we have omitted the definition of buyers' bargaining strategies."}, {"title": "2.2.2 Bi-directional thinking", "content": "In bargaining dialogues, the challenge lies not only in deciding the next action but also in the asymmetric and incomplete information game. Therefore, besides inferring one's actions based on the available information, it is also necessary to anticipate the actions the other party might take in the future to reflect on the rationality of one's own actions. We refer to this process as bi-directional thinking. We use bi-directional thinking to enable LLMs to better achieve bargaining objectives:\n$a_t = LLM(P_a; P_b; I; u_{<=t})$\nwhere P\u2081 is the bi-directional thinking prompt."}, {"title": "2.3 Utterance Generator", "content": "In order to positively influence the bargaining process, the utterances generated should comprehensively integrate the policy planner's decision on action and language skill. Specifically, if the action chosen is price-related such as COUNTER, we need to additionally generate a price based on the latest buyer's offer and seller's bottom price. To simplify this module, we propose a simple price sampler by truncated normalized distribution pys ~ N(lt, ht). For each turn of the offer action, we define the price lower bound lt and upper bound ht, and calculate the sampling centroid and delta. In conclusion, at generation stage, given action at and language skill st, an LLM model is adopted to generate natural language.\n$u^{sys} = LLM(P_u; I; u_{<=t}; a_t; S_t; p_{ys})$\nwhere Pu represents the response prompt."}, {"title": "3 EXPERIMENTS", "content": "We collect real bargaining dialogues from Xianyu. Unlike Craigslist-Bargain [5], which uses a limited number of annotators to simulate the bargaining environment, our dataset is sourced from actual buyer-seller conversations. We select the dialogues with bargaining behavior, and employ both GPT-400513 [1] and human annotators to process the data. After careful processing, we obtain 11,130 high-quality samples."}, {"title": "3.2 Metrics", "content": "In line with previous research on bargaining dialogue, we focus on dialogue-level interactive evaluation. To this end, we employ the Average Turn(AT) and the Success Rate (SR) for the automatic assessment of goal achievement, and we use the Sale-to-List Ratio (SL%) as a measure of goal achievement effectiveness in bargaining dialogues. Specifically, AT measures the efficiency of goal completion by calculating the average number of turns to achieve it, while SR assesses the effectiveness of goal completion by calculating the success rate within a predetermined maximum number of turns. SL% is formalized as:\n$SL\\% = max(0, min(1, \\frac{deal\\_price - seller\\_lowest\\_price}{seller\\_price - seller\\_lowest\\_price}))$\nwhere a higher SL% percentage indicates that the buyer gains more benefits from the transaction.\nWe conduct a human evaluation on 100 randomly sampled dialogues, where three annotators compare the baselines' generated responses with those from FishBargain."}, {"title": "4 CONCLUSION", "content": "This paper presents a meaningful dialogue task: bargaining, derived from real user scenarios observed from online fleamarket platforms.Directly applying LLMs to this task yields unsatisfactory results due to its proactive and quantitative nature. To address these issues, we propose a price extractor, policy planner, and utterance generator, forming the bargaining agent called FishBargain. FishBargain enhances the user experience for individual sellers on Xianyu, allowing those with limited time and bargaining skills to make more deals.\nFishBargain just started as a project, demonstrating significant potential for more development and refinement. In the future, we will focus on more domain knowledge, better planner, and other aspects to continue optimizing the system. In conclusion, FishBargain represents a substantial step forward in creating effective bargaining agents, and as we continue to improve the whole system, it will be more intelligent and provide better user experience."}, {"title": "5 ETHICAL USE OF DATA", "content": "The dataset for training and evaluating our agent was collected via human annotation. Participants in the labeling process were informed about the research and data usage. Data was anonymized to ensure privacy. During testing, user data was stored according to data protection regulations, with access restricted to authorized personnel for academic purposes."}]}