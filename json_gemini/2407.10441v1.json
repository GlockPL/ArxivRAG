{"title": "Enhancing Building Safety Design for Active Shooter Incidents:\nExploration of Building Exit Parameters using Reinforcement Learning-\nBased Simulations", "authors": ["Ruying Liu", "Wanjing Wu", "Burcin Becerik-Gerber", "Gale M. Lucas"], "abstract": "With the alarming rise in active shooter incidents (ASIs) in the United States, enhancing\npublic safety through building design has become a pressing need. This study proposes a\nreinforcement learning-based simulation approach addressing gaps in existing research that has\nneglected the dynamic behaviours of shooters. We developed an autonomous agent to simulate an\nactive shooter within a realistic office environment, aiming to offer insights into the interactions\nbetween building design parameters and ASI outcomes. A case study is conducted to quantitatively\ninvestigate the impact of building exit numbers (total count of accessible exits) and configuration\n(arrangement of which exits are available or not) on evacuation and harm rates. Findings\ndemonstrate that greater exit availability significantly improves evacuation outcomes and reduces\nharm. Exits nearer to the shooter's initial position hold greater importance for accessibility than\nthose farther away. By encompassing dynamic shooter behaviours, this study offers preliminary\ninsights into effective building safety design against evolving threats.", "sections": [{"title": "1. Introduction", "content": "The occurrence of active shooter incidents (ASIs) in the United States has alarmingly increased\nin recent years, posing a substantial risk to public safety and human lives. Consequently,\ndesigning buildings that offer a safer environment for occupants during emergencies is crucial\nfor reducing harm and facilitating safer evacuation. Empirical studies and computer simulations\nhave played a key role in identifying critical design factors for civilian evacuation, including\nthe positions and sizes of doors, exits, and obstacles (Gao et al., 2020).\nHowever, significant gaps remain in current understanding of building safety design, especially\nin the context of ASIs. There is a lack of research on how building design parameters affect\nASI outcomes. Few studies have investigated this challenge, and their findings primarily rely\non civilian simulations, without considering the perspective of the shooter's behavior (Arteaga\nand Park, 2020; Zhu et al., 2023). For example, design elements like curved hallways and wing\nwalls, hypothesized to limit a shooter's line of sight and reduce casualties, have not been\nadequately tested. These gaps underscore the critical need for a more realistic simulation of\nshooter's behaviors. While there have been studies in the domain of ASI simulations, a major\nlimitation has been their reliance on predefined shooter paths. Such an approach provides\nlimited insight and fails to capture the intricate behaviors of shooters under realistic and\ncomplex scenarios (Arteaga and Park, 2020).\nTo address these challenges, the present study introduces a novel approach based on\nReinforcement Learning (RL) to construct intelligent agents capable of simulating active\nshooters within complex built environments. The motivation behind this endeavor involves two\naspects: firstly, to assess safety design parameters in relation to shooter behavior in ASIs, thus,\nto discover hidden vulnerabilities within built environments; and secondly, to overcome the\nlimitations of existing simulation techniques by expanding the scope beyond pre-defined paths"}, {"title": "2. Methodology", "content": "2.1 Reinforcement Learning Network\nDifferent from studying building occupants' behavior through human-subject experiments, it is\nchallenging to collect real-world data on shooter behavior due to ethical concerns. While\nunderstanding the characteristics of active shooters is complex, certain objectives of active\nshooters have been identified through prior research and law enforcement reports. A shooter\nusually has an objective to punish the public by maximizing the number of casualties (Fox and\nDeLateur, 2014), which can be represented through RL. The goal of the agent is to select actions\nthat maximize the cumulative future reward, formulated as:\nVn(s) = E[Rt+1 + yRt+2 + y\u00b2Rt+3 + \u2026|St = S,\u03c0] \\\n(1)\nwhere Vr(s) is the expected cumulative reward when following policy \u03c0 from state s, Rt+n is\nthe reward at time step t+n, and y is the discount factor with a value between 0 and 1.\nTo model shooter's behavior, we have implemented a deep RL network based on the Proximal\nPolicy Optimization (PPO) algorithm, which facilitates the agent's learning for both navigation\nin complex environments and the achievement of its objective. Figure 1 illustrates the workflow\nof our model, presenting agent's operational dynamics from perceiving environmental cues to\nexecuting actions and receiving feedback. The Ray Perception Sensor 3D was utilized to\nprocess raw environmental data into a set of features, including velocity, position, obstacles,\nand targets through ray cast-based observations. These features constituted the observations\nthat inform the agent's decision-making process, executed by the brain using the PPO algorithm,\na highly efficient and popular algorithm proposed by OpenAl (Schulman et al., 2017). Agent\ninteracted with the environment based on actions determined by the brain, leading to changes\nwithin the environment that generate rewards. These rewards are fed back to the brain to fine-\ntune the policy, creating a closed-loop system that drives learning and adaptation.\nWe utilized the Unity ML-Agent toolkit (Juliani et al., 2020) as our reinforcement learning\nplatform. Decision-making processes were conducted using TensorFlow, with actions\ncontrolled through a Python API that interacts with the Unity environment via the external\ncommunicator. Table 1 outlines the configuration of our ML-Agent environment. The\nparameters were chosen through hyperparameter sweeps over the typical ranges of values for\ndifferent hyperparameter provided by Unity ML-Agents' documentation. The maximum\nnumber of steps was set to 5,000,000 to provide the agent sufficient opportunity to learn from\nthe environment through extensive interaction. A summary frequency of 50,000 steps provided\na balance between computational overhead and the granularity of performance tracking. The"}, {"title": "2.2 Reward Functions", "content": "Agent's behavior is dictated by reward signals through providing feedback on its actions. The\nreward system in this study is as\nR = rexterior wall + Yinterior wall + Ytarget + rtime \\\n(2)\nR represents the total reward that the agent can receive. It is a linear combination of three award\nterms: rtarget refers to the reward if the shooter reaches a target (i.e., a building occupant); rexterior\nwall is a penalty if the shooter collides with an exterior wall; rinterior wall refers to the penalty when\nthe agent collides with an interior wall.\nTarget reward. rtarget motivates the agent to move towards building occupant targets. We set\na linear function that correlates with number of targets the agent has reached so far. The agent\nreceives a reward of 10 points increased by an additional 5 points for each target it has found\nso far. The more targets the agent has reached so far, the larger reward it will receive for\nreaching a new target. The escalating reward is because there will be less unfound targets in the\nenvironment as the agent progresses, causing an increased challenge of locating remaining\ntargets over time. Therefore, this mechanism encourages continuation of the target-seeking\nbehavior. Furthermore, it mimics the escalating urgency an actual shooter might experience to\nmaximize target engagement before the imminent intervention of law enforcement authorities.\nYtarget\n=\n(10 + count \u00d7 5 if reaches a target\n{\n0 otherwise\nwhere count is number of reached targets so far\n(3)\nCollision penalties. To discourage the agent from colliding with walls, penalties are\nadministered: a higher linear penalty for collisions with exterior walls, and a lesser fixed penalty\nfor interior walls. Similar to the rtarget, the rexterior wallis linearly increased with number of\nreached targets so far to encourage better navigation or less mistakes as time goes and as the\nshooter go deeper into the building. The shooter will receive the smallest penalty for colliding\nwith the exterior wall at the beginning of the simulation to facilitate the movement. If the\npenalty is too large at the beginning, the shooter agent may not move or just circle at the starting\nlocation instead of searching for targets. For rinterior wall, given our complicated building\nlayout, we implemented a relatively small penalty for it to avoid the penalty holding the agent\nfrom exploring the whole building.\nrexterior wall\n=\n(-2\n{\ncount \u00d7 0.2 if colliding with an exterior wall\n0 otherwise\n(4)\nrinterior wall\n=\n(-0.5 if colliding with an interior wall\n{\n0 otherwise\n(5)\nrtime = -0.001 per step\n(6)\nTime penalty. Finally, a time penalty of -0.001 per step is applied to encourage the agent to\ncomplete its task efficiently, balancing exploration with the urgency of the mission."}, {"title": "2.3 Training Environment", "content": "The first floor of an office building model is utilized in this study (Figure 2). According to\nInternational Building Code (IBC) Table 1004.5 issued by International Code Council (ICC,\n2021), the minimum floor area required per person for business occupancies (e.g., offices) is\n150 ft\u00b2 (i.e., 13.94 m\u00b2). With our building's area being 2400 m\u00b2, the maximum occupancy is\ncalculated at approximately 172. To promote generalization of the trained model in varied and\nnew environments, we employed randomization and reward shaping strategies. Specifically, we\nrandomly altered agents' starting position to prevent overfitting to a specific path and to\nencourage exploration. In addition to varying the starting points, we respawned 60 occupants\nrandomly over the building footprint at each training episode, satisfying the occupancy limit.\nFor efficient training, we employed parallel computation by duplicating the training\nenvironment and setting multiple agents to a single brain to decide actions in a batch fashion.\nThe ray perception sensor was configured with a maximum ray degree of 70 on each side of the\ncenter line, resulting in a total field of view of 140 degrees. In addition to a single ray pointing\nstraightforward, three additional rays were emitted per side, leading to a total of seven rays.\nEach ray had a length of 20 meters, meaning that any objects beyond this distance would not\nbe detected. When any of these rays intersected with a target within the 20-meter range, the\nsensor perceived the target and processed the information to determine the next movement. The\nshooting action was simulated using a collision detection mechanism with a threshold radius of\n2.7 meters (equivalent to 3 yards). This indicates that any targets within the range would be\nconsidered harmed. This close range was selected to reflect the high shooting accuracy in\nconfined spaces. The choice of 3 yards was also informed by the FBI pistol qualification course,\nwhich included shooting at distances starting from 3 yards (Morrison and Vila, 1998), reflecting\na practical distance encountered in real shootings."}, {"title": "3. Case Study", "content": "Exits play a significant role in survival outcomes during building emergencies (Kobes et al.,\n2010). Upon the development of an autonomous shooter agent via RL, we conducted"}, {"title": "4. Results and Discussion", "content": "As shown in Figure 5, a significant effect of number of exits was found (F (2, 2197) = 27.796,\np < 0.001, \u03b7 = 0.025, d = 0.320), indicating that full access scenario (M = 35.600%, SD =\n10.852%) has the lowest harm rate compared to the scenarios with five available exits (M =\n38.190%, SD = 12.501%), which in turn have a lower harm rate than those with four available\nexits (M = 42.249%, SD = 13.846%). Conversely, another significant effect of the number of\nexits was found (F (2, 2197) = 177.466, p < 0.001, \u03b7\u00b2 = 0.139, d = 0.804), showing that the full\naccess scenario (M = 50.850%, SD = 7.651%) had the highest evacuation rate, followed by five\navailable exits (M = 46.058%, SD = 6.982%), and then by four available exits (M = 40.793%,\nSD = 7.385%). These findings suggest a correlation between exit availability and the potential\nfor harm reduction during ASIs. This result aligns with previous findings that a greater number\nof exits enhances evacuation outcomes particularly on lower floors (Kodur et al., 2020).\nFor the impact of each exit, significant differences were seen among the subcases in terms of\nboth evacuation rate (F (6, 693) = 13.233, p < 0.001, \u03b7\u00b2 = 0.103, d = 0.678) and harm rate (F\n(6, 693) = 2.308, p = 0.033, \u03b7 = 0.020, d = 0.286). As shown in Figure 6, which is sorted in\ndescending order by evacuation rate, blocking exits 1, 2, or 5 results in a higher increase in\nharm rate and a more significant reduction in evacuation rate compared to blocking exits 3, 4,\nor 6. Exits 1, 2 and 5 appear to be more critical related to their proximity to the shooter's initial\nlocation at the entrance. The closeness to the threat means these exits are vital for rapid\nevacuation. The result is consistent with fire safety research where the availability and location\nof exits are decisive for survival (Kobes et al., 2010). In the context of ASIs, the shooter's\nposition relative to exit locations influences the effectiveness of evacuation routes and\nemergency exits. Maintaining clear access to these crucial exits, particularly near areas where\nshooting is likely to occur, is crucial to reduce harm and facilitate evacuation.\nUpon examination of scenarios with four available exits, we found significant differences\namong exit configurations on both evacuation rate (F (14, 1485)= 31.694, p <0.001, \u03b7\u33a1 = 0.230,\nd = 1.093) and harm rate (F (14, 1485) = 3.622, p < 0.001, \u03b7 = 0.033, d = 0.370). Table 2\narranges them in descending order based on the evacuation rate. The results show that blocking\nboth Exit 5 and Exit 6 simultaneously is the most harmful configuration, leading to the highest\nharm rate and the lowest evacuation rate. Blocking exits 5 and 6 could disrupt the evacuation\nroutes for a significant portion of the occupants as these exits serve the larger bottom wing of\nthe building. Also, with these exits blocked, more building occupants may crowd into hiding\nplaces, causing overcrowding in those areas. The findings on exit configuration supports\nprevious research indicating that the spatial arrangement of exits significantly affects\nevacuation outcomes (Kurdi et al., 2018; Lei and Tai, 2019). Yet, these prior investigations\noften employed simplified building layouts with fewer exits. This study extends beyond\nestablishing generalized principles for exit availability, providing case-specific analyses to\nevaluate safety in more complex and realistic built environments.\nA limitation of this study is the simplified assumptions regarding occupants' behavior including\nfixed pre-evacuation time and constant speed. Future studies could incorporate more dynamic\ndecision-making that considers personal factors like training and exit familiarity, causing more\ndiverse evacuation behaviors in real-life scenarios."}, {"title": "5. Conclusion", "content": "This study quantitatively assessed building safety design for ASIs, focusing on the number and\nconfiguration of exits, through RL-based simulations that incorporate dynamic shooter\nbehaviors. Our case study findings demonstrate that the number and the configuration of exits\nsignificantly influence occupant safety, as evidenced by variations in harm and evacuation rates.\nSpecifically, we find that a greater number of exits correlates with enhanced evacuation\neffectiveness and reduced occupant harm, emphasizing the importance of architectural design\nin enhancing public safety during ASIs. Also, the analysis of exit configurations illustrates that\ncertain exit, especially those closer to the shooter's initial location, are more important for\nreducing harm and facilitating evacuation. This finding emphasizes the significance of strategic\nexit placement in building design.\nThis study extends previous studies by providing a case-specific examination of how various\nexit configurations can affect safety outcomes. The RL-based simulation method introduced in\nthis study offers a tool for evaluating the effectiveness of different design strategies in\nmitigating ASI impacts. Future research could incorporate different environmental factors,\nshooter objectives, and occupants' behaviors to further validate the robustness of this\nsimulation-based approach."}]}