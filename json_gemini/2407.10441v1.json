{"title": "Enhancing Building Safety Design for Active Shooter Incidents:\nExploration of Building Exit Parameters using Reinforcement Learning-\nBased Simulations", "authors": ["Ruying Liu", "Wanjing Wu", "Burcin Becerik-Gerber", "Gale M. Lucas"], "abstract": "With the alarming rise in active shooter incidents (ASIs) in the United States, enhancing\npublic safety through building design has become a pressing need. This study proposes a\nreinforcement learning-based simulation approach addressing gaps in existing research that has\nneglected the dynamic behaviours of shooters. We developed an autonomous agent to simulate an\nactive shooter within a realistic office environment, aiming to offer insights into the interactions\nbetween building design parameters and ASI outcomes. A case study is conducted to quantitatively\ninvestigate the impact of building exit numbers (total count of accessible exits) and configuration\n(arrangement of which exits are available or not) on evacuation and harm rates. Findings\ndemonstrate that greater exit availability significantly improves evacuation outcomes and reduces\nharm. Exits nearer to the shooter's initial position hold greater importance for accessibility than\nthose farther away. By encompassing dynamic shooter behaviours, this study offers preliminary\ninsights into effective building safety design against evolving threats.", "sections": [{"title": "Introduction", "content": "The occurrence of active shooter incidents (ASIs) in the United States has alarmingly increased\nin recent years, posing a substantial risk to public safety and human lives. Consequently,\ndesigning buildings that offer a safer environment for occupants during emergencies is crucial\nfor reducing harm and facilitating safer evacuation. Empirical studies and computer simulations\nhave played a key role in identifying critical design factors for civilian evacuation, including\nthe positions and sizes of doors, exits, and obstacles (Gao et al., 2020).\nHowever, significant gaps remain in current understanding of building safety design, especially\nin the context of ASIs. There is a lack of research on how building design parameters affect\nASI outcomes. Few studies have investigated this challenge, and their findings primarily rely\non civilian simulations, without considering the perspective of the shooter's behavior (Arteaga\nand Park, 2020; Zhu et al., 2023). For example, design elements like curved hallways and wing\nwalls, hypothesized to limit a shooter's line of sight and reduce casualties, have not been\nadequately tested. These gaps underscore the critical need for a more realistic simulation of\nshooter's behaviors. While there have been studies in the domain of ASI simulations, a major\nlimitation has been their reliance on predefined shooter paths. Such an approach provides\nlimited insight and fails to capture the intricate behaviors of shooters under realistic and\ncomplex scenarios (Arteaga and Park, 2020).\nTo address these challenges, the present study introduces a novel approach based on\nReinforcement Learning (RL) to construct intelligent agents capable of simulating active\nshooters within complex built environments. The motivation behind this endeavor involves two\naspects: firstly, to assess safety design parameters in relation to shooter behavior in ASIs, thus,\nto discover hidden vulnerabilities within built environments; and secondly, to overcome the\nlimitations of existing simulation techniques by expanding the scope beyond pre-defined paths"}, {"title": "Methodology", "content": "to include more realistic behaviors and dynamic contexts. By utilizing reinforcement learning,\nour method enables the creation of agents that autonomously perceive their environment and\nmake informed decisions based on a wide range of possible scenarios. The remainder of this\npaper is organized as follows. Section 2 explains the methodology on training the autonomous\nshooter agent, including the workflow of the RL model, configuration settings, reward functions,\nthe simulated office environment, and employed training strategies. Section 3 presents the case\nstudy, where simulations quantitatively assess the impacts of the number of exits (the total count\nof accessible exits) and configurations of exits (the arrangement of which exits are available or\nnot) on building safety measured by evacuation rate and harm rate. Section 4 reports the\nsimulation results and discusses the findings. Section 5 summarizes the findings."}, {"title": "Reinforcement Learning Network", "content": "Different from studying building occupants' behavior through human-subject experiments, it is\nchallenging to collect real-world data on shooter behavior due to ethical concerns. While\nunderstanding the characteristics of active shooters is complex, certain objectives of active\nshooters have been identified through prior research and law enforcement reports. A shooter\nusually has an objective to punish the public by maximizing the number of casualties (Fox and\nDeLateur, 2014), which can be represented through RL. The goal of the agent is to select actions\nthat maximize the cumulative future reward, formulated as:\n$V_n(s) = E[R_{t+1} + \\gamma R_{t+2} + \\gamma^2 R_{t+3} + \\dots|S_t = S,\\pi]$\nwhere Vr(s) is the expected cumulative reward when following policy \u03c0 from state s, Rt+n is\nthe reward at time step t+n, and y is the discount factor with a value between 0 and 1.\nTo model shooter's behavior, we have implemented a deep RL network based on the Proximal\nPolicy Optimization (PPO) algorithm, which facilitates the agent's learning for both navigation\nin complex environments and the achievement of its objective. Figure 1 illustrates the workflow\nof our model, presenting agent's operational dynamics from perceiving environmental cues to\nexecuting actions and receiving feedback. The Ray Perception Sensor 3D was utilized to\nprocess raw environmental data into a set of features, including velocity, position, obstacles,\nand targets through ray cast-based observations. These features constituted the observations\nthat inform the agent's decision-making process, executed by the brain using the PPO algorithm,\na highly efficient and popular algorithm proposed by OpenAl (Schulman et al., 2017). Agent\ninteracted with the environment based on actions determined by the brain, leading to changes\nwithin the environment that generate rewards. These rewards are fed back to the brain to fine-\ntune the policy, creating a closed-loop system that drives learning and adaptation.\nWe utilized the Unity ML-Agent toolkit (Juliani et al., 2020) as our reinforcement learning\nplatform. Decision-making processes were conducted using TensorFlow, with actions\ncontrolled through a Python API that interacts with the Unity environment via the external\ncommunicator. Table 1 outlines the configuration of our ML-Agent environment. The\nparameters were chosen through hyperparameter sweeps over the typical ranges of values for\ndifferent hyperparameter provided by Unity ML-Agents' documentation. The maximum\nnumber of steps was set to 5,000,000 to provide the agent sufficient opportunity to learn from\nthe environment through extensive interaction. A summary frequency of 50,000 steps provided\na balance between computational overhead and the granularity of performance tracking. The"}, {"title": "Training Environment", "content": "The first floor of an office building model is utilized in this study (Figure 2). According to\nInternational Building Code (IBC) Table 1004.5 issued by International Code Council (ICC,\n2021), the minimum floor area required per person for business occupancies (e.g., offices) is\n150 ft\u00b2 (i.e., 13.94 m\u00b2). With our building's area being 2400 m\u00b2, the maximum occupancy is\ncalculated at approximately 172. To promote generalization of the trained model in varied and\nnew environments, we employed randomization and reward shaping strategies. Specifically, we\nrandomly altered agents' starting position to prevent overfitting to a specific path and to\nencourage exploration. In addition to varying the starting points, we respawned 60 occupants\nrandomly over the building footprint at each training episode, satisfying the occupancy limit.\nFor efficient training, we employed parallel computation by duplicating the training\nenvironment and setting multiple agents to a single brain to decide actions in a batch fashion.\nThe ray perception sensor was configured with a maximum ray degree of 70 on each side of the\ncenter line, resulting in a total field of view of 140 degrees. In addition to a single ray pointing\nstraightforward, three additional rays were emitted per side, leading to a total of seven rays.\nEach ray had a length of 20 meters, meaning that any objects beyond this distance would not\nbe detected. When any of these rays intersected with a target within the 20-meter range, the\nsensor perceived the target and processed the information to determine the next movement. The\nshooting action was simulated using a collision detection mechanism with a threshold radius of\n2.7 meters (equivalent to 3 yards). This indicates that any targets within the range would be\nconsidered harmed. This close range was selected to reflect the high shooting accuracy in\nconfined spaces. The choice of 3 yards was also informed by the FBI pistol qualification course,\nwhich included shooting at distances starting from 3 yards (Morrison and Vila, 1998), reflecting\na practical distance encountered in real shootings."}, {"title": "Case Study", "content": "Exits play a significant role in survival outcomes during building emergencies (Kobes et al.,\n2010). Upon the development of an autonomous shooter agent via RL, we conducted"}, {"title": "Results and Discussion", "content": "simulations to assess how the number and configuration of exits affect building safety during\nASIs. The shooter's position, the total number of building occupants reaching the entrance and\nthe exits, and the number harmed by the shooter were recorded in real time. We analyzed two\nvariables: evacuation rate (the percentage of occupants who successfully exited the building\nbefore being reached by the shooter) and harm rate (the percentage of occupants reached by the\nshooter throughout a simulation run).\nOur experiment utilized the same multi-room building as the training environment with a main\nentrance and 6 exits (Figure 2). To understand the influence of exit availability and location on\nevacuation effectiveness and casualty rates, we implemented a series of configurations ranging\nfrom all exits available to progressively fewer exits available. We conducted 100 simulation\nruns for each exit configuration, defined by the number and specific locations of exits. Within\noccupancy limit, each simulation initialized with 100 building occupants uniformly distributed\nat random throughout the building to reflect the unpredictability of real-life incidents. The\nshooter agent was randomly positioned within a predefined square area (4 units \u00d7 4 units) near\nthe main entrance to reflect common entry points in real incidents and to introduce variability\nfor robust findings across various conditions.\nControlled by the trained brain, the shooter agent (red cube in Figure 3) immediately began\nsearching for visible targets as the simulation started. Building occupants, shown as green\nspheres in the same figure, delayed their response by 3 seconds to simulate the initial freeze\nresponse. Each occupant then navigated at a constant speed towards the closest hiding place,\navailable exit, or main entrance (labeled in Figure 2), following the shortest distance strategy\nwhere the exit decision is driven by distance (Ma et al., 2021). The four hiding places (shown\nin Figure 2) were selected based on findings from previous human-subject experiments (Liu et\nal., 2023a; Liu et al., 2023b; Zhu et al., 2022), representing typical hiding locations. If reached\nby the shooter, an occupant would change color to red (shown in Figure 3), ceasing movement\nto indicate harm. Each episode ended if the shooter agent collided with any exterior wall or\nfailed to locate a new target (i.e., a green sphere) within a 20-second window. This duration\nwas determined from trial simulations, where agents not finding a target within 20 seconds\ntypically engaged in aimless or repetitive actions, making further continuation inefficient."}, {"title": "Results and Discussion", "content": "In this case study, we examined three primary scenarios distinguished by the number of\naccessible exits. Full access is the baseline scenario with the entrance and all 6 exits available.\nFigure 4 shows the shooter agent's moving trajectories across 100 simulation runs in this\nscenario. The second scenario models the condition where one exit is unavailable, resulting in\n6 subcases corresponding to each exit's closure. The third scenario further constrains the\nevacuation options by making two exits unavailable, for which we analyzed all 15 possible\ncombinations of the remaining 4 available exits. All scenarios comply with the IBC (ICC, 2021),\nwhich requires at least two exits for buildings with fewer than 500 occupants. We conducted\n100 simulation runs per subcase, resulting in sample sizes of 100 for the full access scenario,\n600 for the scenario with one exit blocked, and 1500 for the scenario with two unavailable exits.\nWe used one-way ANOVAs to examine the effects of exit numbers (i.e., full access, five\navailable exits, and 4 available exits) and exit configurations within each exit number category\n(i.e., 1 case for full access, 6 cases for five available exits, and 15 for 4 available exits). The\nsensitivity analysis done through G*Power 3.1 (Faul et al., 2007) with an alpha of 0.5 indicates\nthat we have 80% power to detect small effects for ANOVA (f = 0.099).\nAs shown in Figure 5, a significant effect of number of exits was found (F (2, 2197) = 27.796,\np < 0.001, \u03b7 = 0.025, d = 0.320), indicating that full access scenario (M = 35.600%, SD =\n10.852%) has the lowest harm rate compared to the scenarios with five available exits (M =\n38.190%, SD = 12.501%), which in turn have a lower harm rate than those with four available\nexits (M = 42.249%, SD = 13.846%). Conversely, another significant effect of the number of\nexits was found (F (2, 2197) = 177.466, p < 0.001, \u03b7\u00b2 = 0.139, d = 0.804), showing that the full\naccess scenario (M = 50.850%, SD = 7.651%) had the highest evacuation rate, followed by five\navailable exits (M = 46.058%, SD = 6.982%), and then by four available exits (M = 40.793%,\nSD = 7.385%). These findings suggest a correlation between exit availability and the potential\nfor harm reduction during ASIs. This result aligns with previous findings that a greater number\nof exits enhances evacuation outcomes particularly on lower floors (Kodur et al., 2020).\nFor the impact of each exit, significant differences were seen among the subcases in terms of\nboth evacuation rate (F (6, 693) = 13.233, p < 0.001, \u03b7\u00b2 = 0.103, d = 0.678) and harm rate (F"}, {"title": "Results and Discussion", "content": "(6, 693) = 2.308, p = 0.033, \u03b7 = 0.020, d = 0.286). As shown in Figure 6, which is sorted in\ndescending order by evacuation rate, blocking exits 1, 2, or 5 results in a higher increase in\nharm rate and a more significant reduction in evacuation rate compared to blocking exits 3, 4,\nor 6. Exits 1, 2 and 5 appear to be more critical related to their proximity to the shooter's initial\nlocation at the entrance. The closeness to the threat means these exits are vital for rapid\nevacuation. The result is consistent with fire safety research where the availability and location\nof exits are decisive for survival (Kobes et al., 2010). In the context of ASIs, the shooter's\nposition relative to exit locations influences the effectiveness of evacuation routes and\nemergency exits. Maintaining clear access to these crucial exits, particularly near areas where\nshooting is likely to occur, is crucial to reduce harm and facilitate evacuation."}, {"title": "Conclusion", "content": "both Exit 5 and Exit 6 simultaneously is the most harmful configuration, leading to the highest\nharm rate and the lowest evacuation rate. Blocking exits 5 and 6 could disrupt the evacuation\nroutes for a significant portion of the occupants as these exits serve the larger bottom wing of\nthe building. Also, with these exits blocked, more building occupants may crowd into hiding\nplaces, causing overcrowding in those areas. The findings on exit configuration supports\nprevious research indicating that the spatial arrangement of exits significantly affects\nevacuation outcomes (Kurdi et al., 2018; Lei and Tai, 2019). Yet, these prior investigations\noften employed simplified building layouts with fewer exits. This study extends beyond\nestablishing generalized principles for exit availability, providing case-specific analyses to\nevaluate safety in more complex and realistic built environments.\nA limitation of this study is the simplified assumptions regarding occupants' behavior including\nfixed pre-evacuation time and constant speed. Future studies could incorporate more dynamic\ndecision-making that considers personal factors like training and exit familiarity, causing more\ndiverse evacuation behaviors in real-life scenarios."}, {"title": "Conclusion", "content": "This study quantitatively assessed building safety design for ASIs, focusing on the number and\nconfiguration of exits, through RL-based simulations that incorporate dynamic shooter\nbehaviors. Our case study findings demonstrate that the number and the configuration of exits\nsignificantly influence occupant safety, as evidenced by variations in harm and evacuation rates.\nSpecifically, we find that a greater number of exits correlates with enhanced evacuation\neffectiveness and reduced occupant harm, emphasizing the importance of architectural design\nin enhancing public safety during ASIs. Also, the analysis of exit configurations illustrates that"}, {"title": "Conclusion", "content": "certain exit, especially those closer to the shooter's initial location, are more important for\nreducing harm and facilitating evacuation. This finding emphasizes the significance of strategic\nexit placement in building design.\nThis study extends previous studies by providing a case-specific examination of how various\nexit configurations can affect safety outcomes. The RL-based simulation method introduced in\nthis study offers a tool for evaluating the effectiveness of different design strategies in\nmitigating ASI impacts. Future research could incorporate different environmental factors,\nshooter objectives, and occupants' behaviors to further validate the robustness of this\nsimulation-based approach."}]}