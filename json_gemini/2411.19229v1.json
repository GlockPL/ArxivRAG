{"title": "Habit Coach: Customising RAG-based chatbots to support\nbehavior change", "authors": ["Arian Fooroogh Mand Arabi", "Cansu Koyuturk", "Michael O'Mahony", "Raffaella Calati", "Dimitri Ognibene"], "abstract": "This paper presents the iterative development of Habit Coach, a GPT-based chatbot designed to support\nusers in habit change through personalized interaction. Employing a user-centered design approach, we\ndeveloped the chatbot using a Retrieval-Augmented Generation (RAG) system, which enables behavior\npersonalization without retraining the underlying language model (GPT-4). The system leverages\ndocument retrieval and specialized prompts to tailor interactions, drawing from Cognitive Behavioral\nTherapy (CBT) and narrative therapy techniques. A key challenge in the development process was the\ndifficulty of translating declarative knowledge into effective interaction behaviors. In the initial phase, the\nchatbot was provided with declarative knowledge about CBT via reference textbooks and high-level\nconversational goals. However, this approach resulted in imprecise and inefficient behavior, as the GPT\nmodel struggled to convert static information into dynamic and contextually appropriate interactions.\nThis highlighted the limitations of relying solely on declarative knowledge to guide chatbot behavior,\nparticularly in nuanced, therapeutic conversations. Over four iterations, we addressed this issue by\ngradually transitioning towards procedural knowledge, refining the chatbot's interaction strategies and\nimproving its overall effectiveness. In the final evaluation, 5 participants engaged with the chatbot over\nfive consecutive days, receiving individualized CBT interventions. The Self-Report Habit Index (SRHI) was\nused to measure habit strength before and after the intervention, revealing a reduction in habit strength\npost-intervention. These results underscore the importance of procedural knowledge in driving effective,\npersonalized behavior change support in RAG-based systems.", "sections": [{"title": "1. Introduction", "content": "Advanced capabilities of Large Language Models (LLMs) are gradually changing the landscape of\nconversational systems through their instruction-following abilities, learning from human\nfeedback, and adjusting the conversational experience to better meet user preferences and\nexpectations [1]. However, their limitations, such as their susceptibility to generate inaccurate\nItalian Workshop on Artificial Intelligence for Human Machine Interaction (AlxHMI 2024), November 26, 2024, Bolzano,\nItaly\n*Corresponding authors\na.foorooghmandara@campus.unimib.it (A. Fooroogh Mand Arabi); c.koyutuerk@campus.unimib.it (C. Koyuturk);\nmichael.omahony@tudublin.ie (M. O'Mahony); raffaella.calati@unimib.it (R. Calati); dimitri.ognibene@unimib.it (D.\nOgnibene)\nCEUR\nWorkshop\nProceedings\n0 2023 Copyright for this paper by its authors. Use permitted under Creative Commons License Attribution 4.0 International (CC BY 4.0).\nCEUR Workshop Proceedings (CEUR-WS.org)"}, {"title": "2. Literature Review", "content": "In the literature, CBT has been used to target and modify many maladaptive behaviors such as\nsubstance use, insomnia, unhealthy eating behaviors, and general stress [7]. CBT focuses on\nidentifying and reshaping thought patterns to influence behaviors, using techniques such as self-\nmonitoring, structured goal setting, and skill-building, which encourage individuals to integrate\nthese strategies into their daily lives for behavioral change [7][8]. CBT typically involves a\nsystematic approach to therapy, where sessions are organized around specific goals and\ntechniques aimed at addressing the people's specific issues [8]. This structured framework is\nparticularly suitable for digital adaptation, offering clear steps for the assessment and application\nof the techniques in a systematic manner.\nNarrative therapy, on the other hand, offers an alternative approach that emphasizes the role of\npersonal stories in shaping behavior. By externalizing problems and identifying unique outcomes,\nnarrative therapy enables individuals to see their behaviors as distinct from their identity,\npromoting the construction of empowering, alternative narratives that align with their desired\nselves [9][10]. Building on these insights, researchers have explored the potential of chatbots as\ntools for development of healthy lives, with many studies exploring their role in delivering\npersonalized habit formation and behavior change program [11]. These chatbots have shown\npromise in areas like increasing physical activity and enhancing user satisfaction, making them\nuseful tools for encouraging positive behavioral changes [12].\nFurthermore, Al-powered chatbots in healthcare have emerged as an area of growing interest,\noffering unique opportunities to influence patient behavior and lifestyle choices [13]. The ability of\nchatbots to provide accessible, personalized mental health interventions is particularly significant,\nas they can reduce stigma and offer flexible support that may be difficult to achieve in traditional\ntherapy settings [14]. Non-human counselors can also be considered \"free from judgement\" by"}, {"title": "3. Methodology", "content": "We developed and evaluated Habit Coach's effectiveness in supporting users through habit change\ninterventions within a user-centred design framework. A key challenge for the chatbot was to\nachieve proactive behavior that dynamically adjusts to different therapeutic phases and individual\nuser needs. To address this, we integrated a RAG system to enhance the chatbot's capacity for\nproactive and context-aware responses. However, our final approach employed an iterative\nprompt design to customize chatbot's behavior by encoding procedural knowledge in prompts\nthrough four main iterative phases. These iterations strengthened the chatbot's ability to deliver\npersonalized interactions in dynamic contexts by improving the system prompt."}, {"title": "3.1.\nParticipants", "content": "Five participants (Female: 3, Male: 2, Mage = 31.6, SD = 2.65, Range = 27 - 35 years) took part in\nthe study, interacting with the chatbot for a continuous period of 5 days. Full informed consent was\nobtained from all participants before the beginning of the study. Participants had different\nbackgrounds, the focus being on those who had problematic habits they wished to change; these\ninclude eating at night, productivity, and procrastination. The demographic characteristics were\ndiversified on age, professions, and type of problems on habits. Every participant chose a certain\nhabit that they liked to change before the intervention. Over the five-day intervention, participants\nwere directed to use the same chat session every day, enabling the chatbot to rely on the\ndiscussion history to ascertain the therapy day. Maintaining a single chat history, the chatbot was\nable to determine the intervention phase and modify its responses."}, {"title": "3.2.\nDesign of the Intervention", "content": "This pilot study was structured for participants to interact with the Habit Coach chatbot daily over\nfive consecutive days. While interactive dialogues keep users involved and motivated to implement\nchanges into their lives, explanations assist users comprehend the cognitive and behavioral\nelements of their habits by fostering self-awareness. Consequently, Habit Coach was designed to\ninclude a dynamic switching mechanism that enables it to alternate between interactive dialogues\nand educational explanations based on user input, need and progress throughout the intervention."}, {"title": "3.2.1\nPersonalization of chatbot behaviors through basic prompts", "content": "Initially, we employed a basic prompting approach to personalize the chatbot's behavior across\ndifferent therapeutic phases, such as encouraging self-reflection, goal setting, and progress\ntracking. A key challenge, however, was ensuring that the switching mechanism provided\neducational, context-appropriate guidance while maintaining a natural conversational flow\nthrough basic prompting strategy. The chatbot often failed to adjust its tone and content in\nresponse to specific user inquiries. Despite efforts to refine the prompts by setting specific rules\nand boundaries, the chatbot frequently produced lengthy, overwhelming responses that were\noften repetitive or overly simplistic."}, {"title": "3.2.2\nPersonalization of chatbot behaviors through RAG strategies", "content": "To address the issues encountered with the basic prompting approach, we employed a more\nadvanced method, the RAG system, to customize the GPT-based chatbot by leveraging the\ngenerative and retrieval capabilities of the RAG framework. The book The Psychology of Habit [25]\nwas uploaded as a source to the system to improve its ability to provide adaptive and relevant\ninteractions. However, additional issues arose. The system's ability to translate declarative\nknowledge from the book into effective interactive behaviors to modify habits was limited. The\nchatbot frequently generated complex and verbose responses, asking irrelevant or overly detailed\nquestions that deviated from the prompt's instructions and resulted in long, confusing content.\nTo create a more structured framework, we then attempted uploading prompt instructions as a\ndocument. This approach also proved ineffective, as the chatbot continued to deviate from the\nintended concise and engaging style. These attempts highlighted the challenges of achieving true\nadaptability and personalization. Therefore, we concluded that a direct iterative prompt-based\napproach was more efficient in achieving the desired chatbot behavior."}, {"title": "3.2.3\nPersonalization of chatbot behaviors through procedural knowledge\nencoded in prompt", "content": "We incorporated procedural knowledge directly into the prompt, allowing the chatbot to offer\nmore structured guidance that aligned with specific therapeutic techniques and user needs.\nProcedural knowledge encoding involved embedding detailed instructions within the system\nprompt to ensure that the chatbot could provide step-by-step guidance on activities like identifying\ntriggers, setting achievable goals, and practicing self-reflection. This approach allowed the chatbot\nto offer tailored responses that adapted based on the user's progress, making the interaction feel\nmore intuitive and supportive.\nAdditionally, encoding procedural knowledge into the prompt allowed the dynamic switching\nmechanism to work efficiently, enabling the chatbot to switch smoothly between instructing users\nsuccinctly and starting introspective dialogues. This design was aimed at helping users when they\nindicated confusion or struggled with activities. The chatbot was designed, for instance, to go into\nan explanatory mode when users appeared stuck or answered with \"I don't know,\" offering\nthorough direction and examples before going back to interactive inquiry. This rapid adaptation\nallowed chatbot's output to stay relevant, encouraging, and aligned with the user's progress."}, {"title": "3.3.\nProcedural knowledge Prompt Design Iterations", "content": "The refinement process of the prompt (see Table 2) provided to the system is outlined as follows.\nFirst Version: In the first version, the prompt was designed to engage users in reflective dialogue,\nemphasizing self-discovery. The chatbot aimed to encourage users to identify their own solutions,\nfostering a user-driven and open-ended process.\nExample of Interaction:\nChatbot: \"What triggers this habit?\"\nUser: \"I'm not sure. I just snack without thinking sometimes.\"\nChatbot: \"Can you think of a specific moment when this happens?\"\nUser: \"Not really. Maybe when I'm tired.\"\nChatbot: \"Okay, tell me more about that.\"\nHowever, in the initial iteration of the prompt, the chatbot often exhibited a passive role during\ninteractions, relying on users to pose detailed questions or independently lead conversation."}, {"title": "4. Results", "content": ""}, {"title": "4.1.\nHabit Strength", "content": "The strength of the targeted habit was assessed by adapting the 12-item Self-Report Habit Index\n(SRHI) to reflect the specific habit each user aimed to change [32]. Measurements were taken both\nbefore and after the intervention. Participants rated their responses on a 7-point scale, ranging\nfrom 'Strongly Disagree' (1) to 'Strongly Agree' (7). (e.g., \"Drinking coffee is something I would find\nhard not to do.\").\nWe used Jamovi (V 2.4.14.0) to analyze the data. A paired samples t-test was conducted to\ncompare self-reported habit strength before (M = 52.20, SD = 3.35) and after the intervention (M =\n29.20, SD = 2.77). The results of our pilot study showed that the intervention was effective in\nsignificantly reducing the strength of participants' habits; t(4) = 25.71, p < .001."}, {"title": "4.2.\nFeedback", "content": "Additionally, participants were asked to provide feedback on their experiences with the chatbot\nconsidering their target habits after the intervention (see Table 3). Their responses provided more\ninsights into how different aspects of the intervention, including the contribution of CBT and\nnarrative therapy techniques, influenced their behaviors. The following summarizes key themes\nand individual experiences reported by participants:\n\u2022\n\u2022\n\u2022\n\u2022\n\u2022\nParticipant 1: Reported reduced snacking at night and a more regulated evening eating\nroutine. The chatbot's CBT methods helped increase awareness of emotional triggers like\nboredom.\nParticipant 2: Experienced a significant reduction in procrastination and an increase in\nthe completion of assignments. Narrative therapy techniques assisted in reframing\nprocrastination as something that could be controlled.\nParticipant 3: Saw an increase in productivity, attributing this to visualization techniques\nand time management strategies suggested by the chatbot.\nParticipant 4: Reported an increase in energy levels and established a regular morning\nroutine.\nParticipant 5: Reduced coffee intake, which improved energy and sleep. The chatbot\nprovided personalized suggestions for healthier substitutes, like herbal teas.\nThe findings revealed a reduction in habit strength in negative habits following the use of Habit\nCoach, suggesting that integrating CBT and narrative therapy techniques within conversational\nagents is a promising approach for supporting behavioral change."}, {"title": "5. Conclusion", "content": "The findings of this study suggest that using a GPT-based chatbot to deliver habit change\ninterventions can be an effective and scalable approach. The chatbot successfully incorporated CBT\nand narrative therapy techniques to support participants in developing and strengthening healthy"}, {"title": "Appendix A", "content": "Your goal is to coach the user on how to change their bad habits into good ones. Interact with the\nuser by asking short questions, giving short feedback, and providing instructions in bulleted steps.\nUse evidence-based strategies explained specifically in each day. Switch to explaining whenever\nthe user doesn't have ideas, then switch back to the interaction after explaining. Never ask more\nthan one question in each response. Always give examples that are not in user's field of habit. For\nexample, if they talk about smoking, you give example about workout, let them write their own\nideas. Give them an exercise each day. Do a conclusion at the end of each day. Do exactly this way,\ndon't act creatively.\nDay 1: Introduction to Habit Formation: Identify the habit you want to change and the\nperceived underlying reason. Example: \"I smoke when stressed.\" Your Turn: (Write your habit\nhere). Step 2: Reframe the Habit: Reframe the habit to externalize it. Example: \"Stress is affecting\nme to smoke \" Your Turn: (Reframe your habit here). Step 3: Have a dialog with user, ask it if they\ncan control themselves. Conclusion: Great start! Reflect on what you've written today. Tomorrow,\nwe'll look at positive instances when you resisted this habit. See you then!\nDay 2: Recall Positive Instances Objective: Identify times when you resisted or overcame the\nhabit. Step 1: Recall Positive Instances: Think of times you resisted the habit. Example: \"I felt\nstressed but took a walk instead of smoking.\" Your Turn: (Write your instances here) Step 2:\nAnalyze: What Was Different Reflect on what made these times different. Example: \"I chose to walk\nbecause I enjoy fresh air.\" Your Turn: (Analyze what was different here) Conclusion: Well done!\nRecognizing these moments is crucial. Tomorrow, we'll visualize your success. See you then!\nDay 3: Visualization Objective: Use visualization to reinforce new habits. Step 1: Find a Quiet\nSpace: Choose a quiet place where you won't be disturbed. Your Turn: (Find your space) Step 2:\nVisualize Success: Visualize yourself successfully changing the habit. Example: Imagine choosing a\nhealthy behavior over the old habit. Your Turn: (Visualize your success) Conclusion: Excellent!\nVisualization helps reinforce new habits. Tomorrow, we'll write a new, empowering narrative. See\nyou then!\nDay 4: Write a New Narrative Objective: Create an empowering narrative about your new habit.\nStep 1: Write a New Narrative: Write a positive statement about your ability to change. Example: \"I\nmanage stress through healthy activities.\" Your Turn: (Write your narrative here) Conclusion:\nFantastic! Your new narrative will guide your behavior. Tomorrow, we'll implement \u201cIf-Then\u201d\nplans to solidify your habit change. See you then!\nDay 5: Implement \"If-Then\" Plans Objective: Form specific implementation intentions. Step 1:\nCreate an If-Then Plan: Link a trigger with new, healthier behavior. Example: \"If I feel stressed,\nthen I will take a walk.\" Your Turn: (Write your If-Then plan here) Conclusion: Great job! You've\nset a solid foundation for changing your habit. Keep practicing these steps, and remember, every\nsmall effort counts towards your overall success. Continue your journey and celebrate your\nprogress!"}]}