{"title": "A Taxonomy of Collectible Card Games from a Game-Playing AI Perspective", "authors": ["Ronaldo e Silva Vieira", "Anderson Rocha Tavares", "Luiz Chaimowicz"], "abstract": "Collectible card games are challenging, widely played games that have received increasing attention from the AI research community in recent years. Despite important breakthroughs, the field still poses many unresolved challenges. This work aims to help further research on the genre by proposing a taxonomy of collectible card games by analyzing their rules, mechanics, and game modes from the perspective of game-playing AI research. To achieve this, we studied a set of popular games and provided a thorough discussion about their characteristics.", "sections": [{"title": "Introduction", "content": "Collectible card games (CCGs), also known as trading card games, are notoriously complex games with steep learning curves for human players. As of the time of writing, the Magic: the Gathering comprehensive rules book contains 290 pages.\nHuman players are not alone: CCGs are also difficult for computers, as their complexity also have a computational aspect. For example, the same Magic: the Gathering is Turing complete [11], and even determining whether a specific action type is valid is coNP-complete [9].\nNonetheless, this does not prevent computers from playing CCGs well. The last decade has seen a rise in the popularity of AI for CCGs. Building on the success in less complex games such as Go [43] and Texas Hold'em Poker [6], in recent years, a deep reinforcement learning AI agent beat a top-level human player three wins to none in a best-of-five match of Hearthstone and is regarded as the first computer player to achieve such a feat [48].\nDespite the recent progress, the investigation of AI for CCGs is still a very open field. Playing the game to win is just one of the many interesting applications of AI in CCGs [28], and, even so, there are still many open challenges, such as leveraging computer players for playtesting, scaling up current methodologies to more complex CCGs, and building game-agnostic approaches."}, {"title": "Related Work", "content": "To the best of our knowledge, no other works propose taxonomies of CCGs. The work of Hoover et. al [28], however, discusses the many AI problems of Hearthstone. Although Hearthstone shares many characteristics with other CCGs, our analysis of a broader set of games enabled us to propose a taxonomy and discuss nuances among them. Moreover, we adopt the perspective of game-playing AI, while Hoover et al.'s work also considers areas such as content generation, player modeling, and game balancing.\nIn the past, competitions held at academic conferences were an important force behind the rise in popularity of AI for CCGs [29,14,31,32]. So far, there has been research in battles [13,47,48] as well as in all deck-building modes as we discuss in Section 4: constructed [5,2,23,21], independent draft [30,49,42], and round-robin draft [45,1]. Work on the computational complexity of playing CCGs has also been done. Churchill et. al [11] proved that finding the optimal play in Magic: the Gathering is undecidable, appointing it as \"the most computationally complex real-world game known in the literature\". Another work demonstrated that optimal play is as hard as arithmetic [3]. Furthermore, checking the legality of a particular type of action in Magic is found to be coNP-complete [9]. Regarding Hearthstone battles, the mate-in-n problem (whether the player can win in n turns) in a simpler variant of the game has been found to be PSPACE-hard [51], and mate-in-1 in specific game modes to be NP-hard [27]. We did not find such analyses regarding other CCGs."}, {"title": "Scope", "content": "To answer our research question, we first reviewed the rules, mechanics, and game modes of different CCGs. We considered games that are currently active, are available in English, and contain both strategic deck-building and battles as completely separate processes or phases, a genre mostly inspired by the pioneer game Magic: the Gathering. From all compatible CCGs, we selected 10"}, {"title": "Taxonomy", "content": "In this section, we describe the general structure of the reviewed CCGs and discuss similarities and differences regarding rules, mechanics, and game modes. In general, CCGs use different terms for the same concepts. Thus, in the remainder of this paper, we select the term we deem more appropriate whenever there is more than one alternative. We use bold for key term definitions and italic for names of games, secondary term definitions, or emphasis.\nFrom an AI standpoint, the act of playing CCGs can be divided into two primary, ordered parts: deck-building and battling. In the deck-building part, players are tasked to build a deck. While traditional card games use the standard 52-card deck, CCGs have their own card designs (which we discuss in Section 4.1), and players should select a subset of cards among the (usually very large) set of available cards to build their own deck. This card pool contains diverse cards that enable many different deck strategies. Having multiple copies of the same card in a deck is usually allowed but limited. It is desirable that the cards in a deck have some degree of synergy, that is, be resonant with each other in terms of strategy. The specific rules and the process of deck-building are specified by the game mode being played (Section 4.2), while the card pool is determined by the game format being played. In some CCGs, players must also choose a deck class (Section 4.3), which further limits the card pool."}, {"title": "Cards", "content": "The card is, unsurprisingly, the most fundamental concept of CCGs. Almost every piece of information in the game concerns a card, and almost every decision in the game stems from or targets a card. Cards have a name, an artwork, and sometimes a flavor text, all not directly relevant to gameplay but helpful to situate that card within the game's lore and stimulate collection. In addition, cards have at least a type, some attributes, and may have a class and abilities, all of which are gameplay-related. Different CCGs have different visual identities and, therefore, organize these pieces of information differently.\nThe class of a card imposes direct or indirect restrictions on which cards can be in the same deck. In CCGs with a class system, cards normally belong to one class or are neutral, and can exceptionally belong to multiple classes. The attributes of a card, in turn, are numeric variables related to resource management and the game's main win conditions; for instance, resource cost, attack, and health attributes. A card's type categorizes it and specifies its high-level rules: which attributes it has, when and how it should be played, whether it stays on the battlefield, what happens when it is destroyed, etc. We have identified seven established card types among the CCGs we studied: creature, resource, spell, enchantment, equipment, location, and toolbox.\nCreatures are central to winning. In combat-based CCGs (as we define in Section 4.10), they have attack and health attributes and can attack and be attacked, whereas, in conquest-based CCGs, they provide influence points as long as they are on the battlefield. Resource cards, on the battlefield, can generate resource points once per turn. The most basic resource cards usually generate a single resource point per turn and are allowed unlimited copies in a deck. Equipment cards are bound to a creature and provide local effects (i.e., they modify that creature's attributes and abilities), and location cards, in turn, provide global effects (i.e, they modify many cards at once). Spell cards can provide local or global effects and differ from other types because they are destroyed immediately after being played and, consequently, do not stay on the battlefield. Finally, toolbox cards provide a set of activated abilities at the expense of their health points."}, {"title": "Game Modes", "content": "Most CCGs present various game modes, that is, different ways of playing the game, each with a distinct set of rules, mostly regarding deck-building. Across the games we analyzed, we recognize three main game modes: constructed, independent draft, and round-robin draft.\nConstructed is the simplest and the most common form of play. Players choose a subset of cards from a predetermined, large set of cards (the card pool) to build a deck. The minimum size of a deck is enforced, and sometimes a maximum size is enforced as well. CCGs often allow 2 to 4 copies of a single card and unlimited copies of any basic resource card. There may be additional card copy restrictions regarding some card types or rarities. A \"sideboard\" deck with up to 15 cards may be allowed when playing multiple battles; cards can be swapped or added to the main deck between battles.\nWe further subdivide constructed deck-building into its offline and online forms. In offline constructed, the card pool is known beforehand. On the other hand, in online constructed, the card pool is known only at the time of play and is often a random sample of an offline card pool. Players are given a fixed amount of time to build their decks, and there are no card copy restrictions. From the games we analyzed, Legends of Code and Magic is the only one to procedurally generate the card pool in its online constructed mode.\nThe other game modes we discuss are draft-based modes, in the sense that players build their decks via a drafting process: each turn, players receive a small, random sample of cards and pick one among them; this goes on for a fixed number of turns. In either draft-based variant, there are no card copy restrictions. In the independent draft variant, the samples of cards may (Legends of Code and Magic) or may not (Gwent, Hearthstone, and Legends of Runeterra) be the same for all players. In Gwent and Hearthstone, a deck class must also be drafted.\nAfter the drafting process, each player's picked cards become their deck, and they battle until they reach a certain number of wins or 3 losses, receiving in-game rewards based on the number of wins. This game mode is appropriate for digital CCGs, as players need not build their decks simultaneously or together."}, {"title": "Classes and Heroes", "content": "CCGs may have a deck class system. We differentiate two variants of the implementation of deck classes in CCGs. Hard-classed games force the deck to contain only cards of the chosen class or neutral cards. This is true for Flesh and Blood, Gwent, Hearthstone, and Tales of Tribute. The first and the latter also present decks with multiple classes. Soft-classed games allow deck-building with cards of all classes; however, in general, it is strategically convenient to restrict the deck to cards of few classes or a single class. This includes the colors (red, blue, etc.) in Magic: the Gathering and the types (water, grass, fire, etc.) in Pok\u00e9mon TCG and Yu-Gi-Oh! TCG. Legends of Code and Magic and Marvel Snap have no class system.\nIn CCGs, there is usually the figure of a hero: a role the player represents; one that summons creatures, uses spells and equipment to battle their opponent, another hero. The hero can be an implicit character such as in Magic: the Gathering, where the player is referred to as \"planeswalker\", and in Pok\u00e9mon TCG as the Pok\u00e9mon trainer; or can be explicit like the hero in Flesh and Blood and Hearthstone and the leader in Gwent, which are in-game entities. In some games, an (explicit) hero must be chosen for a deck and limits which cards are available for deck-building\u2014acting as the CCG's class system.\nIn Legends of Runeterra, the concept of heroes is different: they are a card type akin to creatures, and multiple heroes can be present in a deck. In Magic: the Gathering, similarly, the so-called planeswalkers are also a type of toolbox card, despite the players themselves being the implicit heroes. In Gwent, Hearthstone, and Tales of Tribute, explicit heroes act as indestructible creatures or toolbox cards. In Flesh and Blood, the hero is, semantically, the main actor in combat instead of creatures, and the equivalent to creatures cards are tools, weapons, spells, or actions that the hero may use. In the remaining CCGs we analyzed, the hero is implicit."}, {"title": "Redraw", "content": "At the start of a battle, after the players draw their starting cards, many CCGs offer a chance to redraw them. This is convenient when a starting hand does not appear competitive. This mechanism is popularly known as \u201cmulligan\" [12].\nWhen games offer this mechanism, it is either a card redraw, in which the player selects specific cards from their starting hand to be redrawn, or a hand redraw, in which the whole hand is redrawn with some form of penalty: receiving one less card than before or having the opponent receive one more card. In both variants, the selected cards return to the deck, which is shuffled again before redraw. In Pok\u00e9mon: TCG, hand redraw is compulsory whenever the starting hand contains no creatures. Magic: the Gathering, in turn, has seen different rulings about hand redrawing throughout its history. The current one is called London Mulligan and consists of redrawing the hand but, afterwards, choosing one card to be put back at the bottom of the deck for each time the player has redrawn [15]. In the games we analyzed, hand redraw may be performed multiple times (with cumulative penalties), whereas card redraw may not."}, {"title": "Turns", "content": "After deciding whether to redraw (if applicable), players start taking turns. These turns have a predetermined structure, and while they vary across CCGs, there is a general structure composed of phases. We define phases as the different parts of a turn where the valid actions differ or where key events occur.\nTurns usually start with a draw phase, where the active player draws cards (usually one) from their deck to their hand. Flesh and Blood is an exception to this case, where this happens at the end of the turn, and the player draws cards up to their hero's \"intellect\" attribute. Then, the main phase starts, in which the active player can perform most of the actions, such as playing cards, activating abilities, and attacking. In some combat-based CCGs, however, the combat phase (described in Section 4.8) is the moment where attacking is allowed. There may be an additional main phase after combat, and, sometimes, an end phase reserved for abilities that trigger or terminate \"at the end of the turn\".\nIn most CCGs, players can respond to some of the opponent's actions and even their own. Usually, just a subset of cards can be played (called fast, instant, or reaction cards), and a subset of other actions can be performed as a response. We can regard this as a different phase, a response phase. Moreover, players can also respond to responses. Most CCGs choose to resolve a chain of responses in a last-in-first-out manner (forming a stack) in which responses are executed before the responded action. Hearthstone uses a first-in-first-out manner (forming a queue instead). These chains of responses enable mechanics such as \"countering\", in which, for example, a card's effect may be to annul an action currently in the stack or queue. Legends of Runeterra limits its stack to at most 10 cards (original action plus 9 responses).\nIn most CCGs, turns are carried out alternately, with only one player (the active player) primarily performing actions until the turn is passed to the other player. However, in Legends of Runeterra, turns are joint. In other words, both players draw a card and can perform actions. In this case, after a player performs an action, priority is given to the opponent to act. The concept of an active player still exists, indicating the player that receives priority first and who is allowed to attack. Finally, in Marvel Snap, turns are simultaneous: both players draw at the same time and are allowed to play cards face down. When both players finish or time runs out, the cards are revealed, and their effects are resolved."}, {"title": "Resource Systems", "content": "Most CCG battles revolve around a single primary resource, usually called mana, required for playing cards and sometimes to activate abilities. The mana cost of a card correlates positively with its overall power. Some CCGs have different types of mana, and cards or abilities may require specific mana types. In the CCGs we reviewed, mana is obtained in one of three ways, in order of complexity: incrementally, from resource cards, or from discarding cards.\nIn Hearthstone, Legends of Code and Magic, Legends of Runeterra, and Marvel Snap, mana is obtained incrementally as the battle progresses. At the player's first turn, one mana point is available, and so on: at the k-th turn, k mana points are available, up until a limit (usually 10 or 12). In Magic: the Gathering, Pok\u00e9mon TCG, and Tales of Tribute, mana comes from resource cards. Players can play one resource card per turn, and most generate one mana point per turn, which makes progression similar to the incremental mechanic. A key difference is that, when building a deck, players must balance the ratio of resource cards to other cards, as well as the mana types they generate or require. In Flesh and Blood, mana is generated by discarding cards. Every card in the game has three versions, which generate one, two, or three mana points, with the card's power varying slightly, inversely proportional to the mana they generate. Besides, destroyed and discarded cards during battle are placed at the bottom of their owner's deck. This resource system raises a contrasting challenge in deck-building compared to the others.\nLastly, Gwent and Yu-Gi-Oh! TCG have no resource similar to mana. In the former, card draw is severely limited, so while cards have no cost to be played, creatures' position on the battlefield and order of play are determinant. In the latter, creature cards on the battlefield are used \"as sacrifice\" for more powerful creatures to be played.\nUnspent mana usually disappears at the end of the turn or phase. In Legends of Runeterra, up to three unspent mana points are stored indefinitely as \"spell mana\" for playing spell cards. In general, optimal play is related to optimal mana usei.e., efficiently converting mana to creatures, spells, or abilities and using those to win."}, {"title": "Zones", "content": "The different sets of cards present in a battle, which are usually symmetric (each player has their own) and have different rules regarding the cards in it, are called zones. A genre-defining characteristic of CCGs is the presence of a deck, hand, and battlefield zone for each player. All CCGs have one or more battlefield zones, which can be further divided into lanes that may be identical or very similar (in terms of rules). In most CCGs, when battlefield cards are destroyed, they go to a graveyard zone. Some effects may remove cards from the game, moving them to a \"outside the game\" zone. The stack or queue is also a zone, although, in some games, there may be entities other than cards in it.\nGames may also have additional zones. For instance, Flesh and Blood, Hearthstone, and Yu-Gi-Oh! TCG have a secrets zone, in which cards are not visible to opponents. Tales of Tribute has a shared zone: the tavern. Finally, in Pok\u00e9mon TCG, each player has a prizes zone, filled at the start of the battle with a number of face-down cards drawn from the top of the player's deck.\nMost CCGs zones are unordered: card order on the zone is irrelevant. We call other zones positional. In all CCGs, players' decks are positional because the order in which cards are drawn is key. Some CCGs like Gwent and Hearthstone, some effects consider creatures \u201caround\u201d, \u201cin front of\", and other positional indicators, so their battlefield and lanes are positional. Yu-Gi-Oh! TCG also has creature summoning mechanics in which position on the battlefield matters.\nZones also differ in visibility. We identify three types: size, content, and order. Generally, all players are allowed to know how many cards are in any given zone (the zone's size). Some zones restrict the opponent from knowing which cards are in them (the zone's content). Lastly, in positional zones, knowledge of the cards' specific order may be unavailable. The deck zone is an illustrative example: all players know its size, its owner knows its content, and no one knows its order.\""}, {"title": "Combat", "content": "The combat in combat-based CCGs can be classified as declared or targeted. In CCGs with declared combat, a player declares the intent of attacking with a subset of their creatures, and then the opponent may decide to block any attacking creature with their own creatures. Then, attacking creatures and their respective blocking creatures damage each other, and any unblocked attacks damage the opponent. In targeted combat, players declare attack one creature at a time, and attacks have a target a specific opponent's creature or the opponent themselves. Any damage due is dealt immediately after declaring the attack, with no interaction with the opponent.\nDamage done to the opponent subtracts from their health points, while damage done to creatures subtracts from their health attribute. When a creature's health becomes zero or negative, it is destroyed and goes to the graveyard zone, if applicable. From our list, Magic: the Gathering is the only game where creatures recover from damage, returning to their original health at the end of the turn. Creatures commonly possess combat-related abilities that alter combat rules."}, {"title": "Actions", "content": "We have described many moments where players choose among a set of available actions. Now, we list these actions and position them temporally in gameplay.\nEvery gameplay of a CCG involves deck-building and battling. During constructed deck-building, the player may first be prompted to select a deck class (in a hard-classed CCG) and then to build a deck. In a draft-based deck-building process, the player passes through many turns of draft, in which they pick a card among several alternatives. Then, picked cards either directly become the player's deck or serve as a card pool from which to build a deck.\nThe battle is the most complex part of gameplay in terms of actions. In summary, as the battle starts, the player may be offered a chance to redraw their entire hand or specific cards in their hand. Then, players start taking turns, and the player will be prompted to act\u2014be it in a main phase, a combat, or in response to an opponent's action. At this moment, the player must select one of the available actions, that may include playing a card, activating an ability, attacking, blocking, or doing nothing (no-op). Some actions may also require, as a consequence, that the player decides how to spend their mana. Not all actions are available at all turn phases, as Table 2 explains, and even when they are, some combinations of their parameters may not be valid (for instance, playing a card that costs more than the available mana or attacking with a creature that cannot attack).\nAfter performing an action, the battle continues until the player is again prompted to act. This repeats indefinitely until a win condition is reached."}, {"title": "Win Conditions", "content": "The typical win condition of CCGs is reducing the opponent's health points to zero (or fewer). To achieve this, players typically play and use creatures in combat. Spells and other cards may help by doing damage directly or by facilitating creatures to do so. We call games that follow this archetype combat-based CCGs. This includes most games in our study. We additionally consider Pok\u00e9mon TCG as such despite not having health points, but awarding the win to the first player to empty their prize zone (players draw from there every time they defeat an opponent's creature).\nGwent, Marvel Snap, and Tales of Tribute compose a second archetype of CCGs that, instead, require the player to accumulate influence points. In these conquest-based CCGs, creatures and some spells provide points, and at the end of the battle, the player with the most points wins. Consequently, turns are limited either directly (6 turns in Marvel Snap) or indirectly (running out of cards in Gwent or reaching 40 points in Tales of Tribute). While there is no combat, there are means to remove or weaken creatures.\nTales of Tribute also implements an unique win condition. At the start, each player chooses two patrons, each with distinct activated abilities and starting in a neutral stance. Whenever a player uses a patron's ability, that patron starts favoring that player if it is neutral or becomes neutral if it favors the opponent. Gaining the favor of all four patrons results in immediate victory.\nRunning out of cards to draw in CCGs is usually penalized with an immediate loss. Lastly, we point out that CCGs have cards that introduce novel win conditions. For instance, with \"Felidar Sovereign\" from Magic: the Gathering, one wins by having 40 or more health points, and in Yu-Gi-Oh! TCG, by having in their hand \"Exodia the Forbidden One\" and its other four component cards."}, {"title": "Discussion", "content": "The stated goals of this work regarding CCGs were to analyze the differences and similarities among rules, mechanics, and game modes, which we addressed with a taxonomy of CCGs. Despite our perceived heterogeneity across the genre there was sufficient common structure among the games for such taxonomy to be possible. In the next paragraphs, we discuss some aspects of our work."}, {"title": "Game complexity", "content": "Across the games we selected, we observed that the number of taxonomy elements (e.g., resource system, combat, etc) serves as a proxy for the complexity of each game. For instance, Legends of Code and Magic, a simplified game made for AI research, and Marvel Snap, a fast-paced mobile game aimed at a broader audience, exhibit the fewest number of elements. Meanwhile, Magic: the Gathering, one of the most complex games known, and Flesh and Blood, heavily inspired by it, display the opposite pattern.\nAnother observation regarding complexity was that some action types may benefit from a computational complexity analysis. For example, deciding whether there is a combination of mana-generating abilities that satisfies a (complex) mana cost or blocking a declarative attack in a way that maximizes the player's health points may be NP-hard or harder. Also, some action types resemble subset selection problems, which are known to be NP-hard [4]. As discussed in Section 2, CCGs have been a frequent target of such studies."}, {"title": "Design of AI players", "content": "AI players can analyze multiple scenarios much faster than humans and can perfectly recall past moves. Despite this, a human with knowledge of the game could address all action types discussed in Section 4.9, whereas most AI techniques would require some degree of compartmentalization (e.g., different models for each action type). As an approach moves towards considering all action types in a unified manner, it starts to resemble a general decision maker. In fact, CCGs have been compared to a general game-playing task in the past [10,13]."}, {"title": "Limitations", "content": "Our approach is just one of many others that could be proposed. However, it is one that we believe is representative of the genre and may be helpful for future works. Still, the resulting analysis is not exhaustive, and some specific aspects of CCGs might not have been included."}, {"title": "Conclusion", "content": "We proposed a taxonomy of collectible card games by studying their rule books, wikis, and other sources. We categorized CCGs by win condition, combat mechanism, resource systems, and other aspects relevant to game-playing AI. To the best of our knowledge, this is the first work proposing such a taxonomy. We provided a novel perspective on the genre of CCGs: one that characterizes them under a single framework while encompassing their complexity and heterogeneity. We believe it will benefit and foster discussion among researchers, game designers, and enthusiasts in understanding the games and the field of CCG AI. As future work, we aim to formally define the many decision problems players face during CCG matches, as introduced in Section 4.9."}]}