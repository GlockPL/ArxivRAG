{"title": "Hierarchical Decoupling Capacitor Optimization for Power Distribution Network of 2.5D ICs with Co-Analysis of Frequency and Time Domains Based on Deep Reinforcement Learning", "authors": ["Yuanyuan Duan", "Haiyang Feng", "Zhiping Yu", "Hanming Wu", "Leilai Shao*", "Xiaolei Zhu*"], "abstract": "With the growing need for higher memory bandwidth and com-putation density, 2.5D design, which involves integrating multiple chiplets onto an interposer, emerges as a promising solution. However, this integration introduces significant challenges due to increasing data rates and a large number of I/Os, necessitating advanced optimization of the power distribution networks (PDNs) both on-chip and on-interposer to mitigate the small signal noise and simultaneous switching noise (SSN). Traditional PDN optimization strategies in 2.5D systems primarily focus on reducing impedance by integrating decoupling capacitors (decaps) to lessen small signal noises. Unfortunately, relying solely on frequency-domain analysis has been proven inadequate for addressing coupled SSN, as indicated by our experimental results. In this work, we introduce a novel two-phase optimization flow using deep reinforcement learning to tackle both the on-chip small signal noise and SSN. Initially, we optimize the impedance in the frequency domain to maintain the small signal noise within acceptable limits while avoiding over-design. Subsequently, in the time domain, we refine the PDN to minimize the voltage violation integral (VVI), a more accurate measure of SSN severity. To the best of our knowledge, this is the first dual-domain optimization strategy that simultaneously addresses both the small signal noise and SSN propagation through strategic decap place-ment in on-chip and on-interposer PDNs, offering a significant step forward in the design of robust PDNs for 2.5D integrated systems.", "sections": [{"title": "1 Introduction", "content": "To address the increasing cost of large Systems-on-Chip (SoCs) on advanced technology nodes, 2.5D integration has emerged as a solution. 2.5D integrated circuits (ICs) enables heterogeneous integration and partitions a monolithic SoC into smaller chiplets, which can be developed independently, reused across multiple products, and implemented using different process technologies [1, 2]. By leveraging the rapid development of 2.5D packaging technology, multiple chiplets can be mounted on a single interposer and connected through microbumps and redistribution layers (RDLs) to build high-performance computing and wafer-scale artificial intelligence (AI) systems.\nAs data rates continue to increase to hundreds of gigabits per second and the number of input/outputs (I/Os) surges, maintaining the power and signal integrity poses a significant challenge for power distribution network (PDN) design. The 2.5D PDN consists of various components, including on-chip PDNs, an on-interposer PDN, a through-silicon via (TSV) array connecting the interposer and the package, as well as bumps and decoupling capacitors (decaps) that are widely used to reduce voltage fluctuations and help compensate for transient current demands. The interposer PDN should supply power to the on-chip PDN, which is responsible for delivering voltages to each cell in the design. Therefore, the structure of 2.5D PDN necessitates a hierarchical decap strategy, incorporating both on-chiplet and on-interposer decaps.\nThe presence of various components in electronic systems, such as voltage regulator modules (VRMs), decap, and interconnects, introduces inductive and capacitive effects across different frequency ranges [3]. These effects can lead to dynamic voltage fluctuations, commonly known as small signal noise, which has significant impli-cations for system performance and functionality. Moreover, with the escalation in the number of I/Os and the data transmit frequency, simultaneous switching noise (SSN) generates additional voltage fluctuations that may interfere with the operation of other chiplets. The SSN, induced by the large switching currents of multiple I/Os during high-speed data transmission, can propagate through the hierarchical PDN, cause jitter [4] and even logic failure [5, 6], as depicted in Figure 1. Thus, effective strategies to co-optimize the small signal noise and SSN are highly demanded.\nPDN analysis is crucial for the design of 2.5D ICs. Frequency-domain impedance often serves as a pivotal criterion for evaluat-ing PDN reliability [7, 8]. Traditional PDN optimization strategies primarily focus on the impedance reduction by implementing addi-tional decaps to alleviate the small signal noise based on the anal-ysis of frequency domain. However, relying solely on meeting tar-get impedance, which guarantees that voltage fluctuation remains within allowable limits, may not sufficiently consider the impact of transient responses on the overall system. The coupled SSN from adjacent chiplets' PDNs, particularly noise propagation through su-per high bandwidth I/Os, can lead to excessive voltage fluctuation beyond permissible levels, leading to system failure. Additionally, the high integration and miniaturization of 2.5D systems often result in the routing region occupying a significant portion of the circuit layout, constraining decap placement. Therefore, a comprehensive approach that integrates hierarchical decap placement with consider-ations of both the small signal noise and SSN is crucial for effectively mitigating power supply noise and ensuring the reliability of PDN designs in 2.5D systems.\nIn this work, we propose a novel hierarchical decap optimization method for 2.5D systems, integrating both frequency and time do-main analyses. It leverages advanced deep reinforcement learning (DRL) techniques and models the load current of the overall system. The main contributions are summarized as follows:\n\u2022 We present an RL-based approach for the co-optimization of on-chip PDNs and on-interposer PDN decaps to tackle both small signal noise and SSN in 2.5D systems.\n\u2022 In the frequency domain, this approach optimizes decap place-ment to reduce the PDN impedance below the target impedance at multiple probing ports (power/ground ports), thus ensuring ef-fective power delivery while avoiding unnecessary over-design.\n\u2022 In the time domain, we conduct precise simulations of transient currents and introduce the concept of voltage violation inte-gral (VVI). Experiments reveal that despite frequency-domain optimization efforts, voltage violations still occur, indicating in-stances where voltage fluctuation surpasses acceptable levels. To address this issue, the PDN is refined aiming at minimizing the VVI by strategically implementing additional decaps.\n\u2022 Extensive validations demonstrate that compared to the frequency-domain optimization alone, the dual-domain optimization strat-egy can better mitigate the small signal noise and SSN, providing a more robust PDN design for 2.5D ICs."}, {"title": "2 Related Work", "content": "In the field of circuits and systems, various methods of decap design optimization have been proposed based on the conventional optimization algorithms, such as the genetic algorithm (GA) [9\u201311], particle swarm optimization (PSO) algorithm [12, 13] and simulated annealing (SA) algorithm [14\u201316]. GA-based methods can explore a large search space efficiently, but they may struggle to capture sequential combinational relationships between decap assignments and other meta-features, such as the position of probing ports. PSO algorithms, on the other hand, offer fast convergence speeds and simple coding structures. However, they are prone to fall into the local optima, which prevents them from reaching the global opti-mum solution. Although SA algorithms possess the ability to escape local optima due to their probabilistic acceptance of worse solutions, they have lower convergence rates compared to PSO algorithms and require a good initial solution to perform effectively. None of these optimization algorithms can guarantee finding the optimal solution, especially when dealing with a large number of decap locations. Besides, the optimization time can become problematic, particularly when considering a vast search space. The fusion of differential evolution (DE), which has a strong global search ability, with PSO algorithms enables the optimization of decap designs for 2.5D systems [17]. However, this approach specifically focuses solely on optimizing the on-interposer decap, assuming that chiplets are fully designed and plug-and-play.\nRL has indeed gained traction in addressing complex tasks, espe-cially decap optimization. Several methods utilizing RL for decap op-timization have been proposed in the literature [18\u201321]. Value-based RL methods using the Q-learning algorithm have been explored for decap placement optimization [18, 19]. However, they consider a single probing port and encounter limitations regarding solution space size and high computing costs. To increase the space size and generalization ability, a transformer network-based method for PDN decap optimization of high bandwidth memory (HBM) was proposed [20]. The method can optimize decap design to maximize the reduc-tion of both the self- and transfer impedances seen at multiple ports. Additionally, another RL-based approach [21] optimizes the loca-tions of decaps with different capacitance, considering the complex PDN structure with irregular shapes typical of printed circuit boards (PCBs). This method demonstrates greater scalability compared to the approaches [18\u201320] that support only one decap capacitance.\nMost of the previous decap optimization methods have primarily focused on maximizing the reduction of impedance in the frequency domain [9\u201321]. However, relying solely on frequency-domain analy-sis cannot capture the impact of transient responses on the circuit, making it challenging to predict whether the voltage noise meets design requirements. Su et al. [22] and Enami et al. [23] have inves-tigated the time-domain decap optimization methods for on-chip PDNs only, which are not designated for 2.5D systems."}, {"title": "3 Preliminary Work", "content": "Modeling the PDN in a 2.5D IC encompasses various components, such ad on-chip PDNs, on-interposer PDN, P/G TSVs, microbumps (\u00b5bumps), and decaps. Each component is modeled individually and subsequently cascaded together.\nThe on-chip PDN is a grid-type PDN, whereas the interposer PDN is configured with meshed P/G planes. The grid PDN is commonly used in high-speed and high-performance digital systems, consisting of two layers of interwoven P/G planes. In contrast, the meshed PDN comprises two layers, with power planes situated on the upper layer and ground planes on the lower layer. Both the on-chip and on-interposer PDNs can be broken down into a series of unit cells (UCs). Each UC can be represented by unit-length resistance (R), inductance (L), conductance (G), and capacitance (C) in transmission-line (TL) modeling [24, 25], as illustrated in Figure 2. In our experiments, the width and space of on-interposer P/G planes are set to 95 \u00b5m and 200 \u00b5m, while the width and space of on-chip P/G planes are set to 10 \u03bcm and 20 \u03bcm."}, {"title": "3.2 Non-Capacitor Zone and Decap Discretization", "content": "The small signal noise and SSN can be mitigated by strategically placing the decaps in the PDN. On-chip decaps are typically realized using MOS gate capacitors with small footprints and high capac-itance per unit area. For on-interposer PDN, MIM capacitors are often employed due to their cost-effectiveness and ease of fabrica-tion, achieved by incorporating a high-k dielectric medium between the P/G planes. As transistors continue to shrink in size, there is insuf-ficient space within on-chip PDNs to accommodate a large number of MOS capacitors. Consequently, decap distribution tends to con-centrate on the interposer. However, there are constraints on decap placement within the interposer. The interposer comprises multiple metal layers, including power, ground, and signal layers. The PDN and MIM capacitors are distributed in the power and ground layers, while chiplet interconnect nets are routed on the RDLs located in the signal layer. Nevertheless, limitations in metal layers may lead to the risk of short circuits if RDL routing intersects with the PDN in the same layer [17]. Moreover, in areas where multiple chiplets converge, signal wires for chiplet intercommunication need to be arranged, further restricting MIM capacitor placement. The area where MIM capacitors cannot be placed is commonly referred to as the non-capacitor zone.\nThe smallest cell in which a decap can be placed is referred to as a unit decap cell (UDC), and decaps are positioned within the available layout area of these UDCs. For simplicity and design space reduction, the size of the UDC is set to be 1mm\u00d71mm for both the chiplet and interposer. The allowable capacitance for on-interposer MIM capacitors ranges from 200 pF to 2000 pF, with increments of 200 pF. For on-chip MOS capacitors, capacitance values span from 50 pF to 500 pF, with increments of 50 pF."}, {"title": "3.3 Frequency-Domain Impedance Analysis", "content": "To ensure a stable voltage supply for the chiplet, the impedance of PDN should remain below the target impedance value within the working frequency range. The target impedance is typically defined as the ratio of the maximum allowable ripple voltage to the half of the maximum transient current \\(I_{max}\\) derived from peak power \\(P_{max}\\) [7], as follows:\n\\[Z_{target} = \\frac{V_{dd} * ripple}{I_{ref}} \\qquad I_{max} = \\frac{P_{max}}{V_{dd}} \\tag{1}\\]\nhere \\(I_{ref} = \\frac{I_{max}}{2}\\) is used to represent the typical workload and avoid over-design. With advancements in transistor manufacturing processes and chip integration, the transistor switching rate is in-creasing while the amplitude of the maximum transient current is decreasing. Consequently, achieving low impedance at high frequen-cies becomes unnecessary, as it can lead to over-design and increased costs. Therefore, the target impedance consists of a flat region and a slope region, as depicted in Figure 3. At low frequencies, the target impedance is flat, calculated by (Equation (1)). When the frequency exceeds the keen frequency \\(f_{knee} = \\frac{0.35}{T}\\), where T, is the transition time of the signal, the worst transient current decreases at a -20 dB/dec ratio, and likewise, the target impedance curve increases at a rate of 20 dB/dec [27]. In this paper, the ripple and \\(f_{knee}\\) are set as 5% and 3.4 GHz respectively."}, {"title": "3.4 Time-Domain VVI Analysis", "content": "In the 2.5D system, there are a large number of I/Os between chiplets for signal communication. SSN could propagate through these I/Os, affecting the normal operation of other chiplets. Due to the SSN, the change in transient current during the operating state of the chiplet may exceed the normal operating current, and the waveform and peak value of the current are unpredictable. There-fore, it is difficult to accurately predict whether the voltage noise meets the design requirements solely by frequency-domain analysis that inherently a steady-state analysis. To obtain a robust PDN, an evaluation method of PDNs in the time domain is required.\nTo model the switching current for time-domain evaluation, we employ piecewise linear (PWL) triangular waveform currents with varying peak values and excitation times to simulate the transient current resulting from transistor state switching [22]. The total cur-rent of a chiplet can be modeled by superposition of two parts: one is the internal current of the chiplet, and the other is the I/O current fluctuations distributed at the edge of the chiplet, as defined in Eq.(2):\n\\[\\begin{aligned} &\\left\\{\\begin{array}{l} 0 \\leq I_{sum}(t) + I_{I/Os}(t) \\leq I_{max} \\\\ I_{sum}(t) = \\sum_{i} I_{internal}(t) \\leq I_{ref}; \\\\ \\text { Current Model: } I_{I / O s}(t)=\\sum_{i} I_{I / O i}(t) \\leq I_{ref}; \\\\ \\qquad \\sum_{i} \\int I_{I / O i}(t) d t=0 \\end{array}\\right.\\end{aligned} \\tag{2}\\]\nThe reference current (\\(I_{ref} = I_{max}\\)) is used for transient analysis in consistency with frequency analysis. To maintain overall power consumption within \\(P_{max}\\) limits throughout the simulation, the sum (\\(I_{sum}\\)) of the internal currents are set below \\(I_{ref}\\) and I/O currents can fluctuate within a range of 5%\\(I_{ref}\\) with the peak value of the current summation below \\(I_{ref}\\). To represent different data trans-mission scenarios, \\(I_{I/Oi}\\) with different correlations can be specified. Figure 4(a)-(b) illustrate the waveform and the equivalent circuit of the chiplet PDN with transient currents.\nTo conduct the dynamic power integrity analysis, we introduce the concept of voltage violation integral (VVI), which serves as a measure of the cumulative effect of voltage deviations from specified voltage fluctuations. Figure 4(c) illustrates the voltage violation at a node in the voltage supply \\(V_{dd}\\) power grid. The VVI is represented by the shaded region and is calculated by\n\\[VVI = \\int_{0}^{T} [max(V_{min} - V(t), 0) + max(V(t) \u2013 V_{max}, 0)] dt \\tag{3}\\]\nwhere \\(V_{max}\\) and \\(V_{min}\\) represent the maximum and minimum allow-able voltages, set to 105% and 95% of the power supply voltage, re-spectively. As the duration of time during which the voltage exceeds the maximum allowable voltage fluctuation range increases, the like-lihood of circuit errors also rises. Considering both the magnitude and duration of voltage deviations, the VVI provides a comprehen-sive measure of PDN performance, especially in dynamic operating conditions characterized by transient events.\nCompared to the methods solely considering the worst-case volt-age drop over time [28], the VVI analysis can assess the overall severity of dynamic voltage violations and evaluate the effectiveness of PDN optimization strategies in mitigating SSNs. Thus, minimizing the VVI could ensure the reliability and performance of electronic systems, particularly in high-speed and high-density applications where voltage fluctuations can lead to system failure or performance degradation."}, {"title": "4 Proposed RL-based Decap Optimization Method", "content": "In this section, an RL-based method for the hierarchical decap optimization is proposed. The objective of this optimization problem is to minimize the total decap capacitance while ensuring that they meet the target impedance across the desired frequency band and minimize the VVI as much as possible. The proposed algorithm encompasses two steps. Initially, we adjust decap distribution of on-interposer and on-chip PDNs to meet target impedance and limit voltage fluctuation within the ripple range in the frequency domain. Subsequently, in the time domain, we optimize the VVI of on-chip PDN to address the voltage violations induced by SSN propagation.\nTo handle such a complex problem, we apply deep RL, a machine learning algorithm where an agent learns to make sequential de-cisions by interacting with an environment to learn a policy that maximizes cumulative rewards by mapping states to actions. This problem can be represented by three key parameters: state, action, and reward. The state captures the configuration of the environment observed by the agent, while the action signifies the decision made by the agent in response to the observed state. For each action, the agent will assign a reward to evaluate the quality of the action and guide the agent's training toward the maximization of reward. The reward reflects the feedback provided by the environment based on the actions taken by the agent. Through iterative interaction with the environment, the agent refines its parameters based on the feedback received."}, {"title": "4.1 Algorithm Process for Decap Optimization", "content": "The general algorithm process is described as follows.\n(1) Early-Stage Floorplanning: Derive an early-stage floorplan-ning solution, yielding complete designs for the interposer and chiplets, including placement, routing, and PDNs.\n(2) Hierarchical PDN Modeling: Generate hierarchical PDN mod-els in RLGC formats for the 2.5D system, as discussed in Sec-tion 3.1.\n(3) Impedance Analysis: Perform impedance analysis utilizing the circuit simulator NGSPICE. Optimize the on-chip and on-interposer decaps to meet the target impedance requirements.\n(4) VVI Optimization: Simulate the transient currents using the NGSPICE. Subsequently, refine the on-chip decap placement to minimize VVI in the time domain, thereby ensuring optimal performance."}, {"title": "4.2 Matrix Definition Based on Impedance Analysis", "content": "For a given hierarchical PDN, the placement of chiplets, the inter-poser space with non-capacitor zone, the locations and capacitances of MIM capacitors on the interposer PDN, and the locations and capacitances of MOS capacitors on the chiplet PDN, are taken into account for impedance analysis. The information can be encoded into four 2D matrices: Interposer Space Matrix, Chiplet Space Matrix, MIM Distribution Matrix and MOS Distribution Matrix. The dimen-sions of these matrices are determined by the number of UDCs. The space matrix delineates feasible decap locations on the interposer or chiplet layer and is a binary matrix with '1' indicating feasible positions and '0' denoting non-feasible locations. The capacitor dis-tribution matrix reflects the normalized capacitance values of decaps, with '0' indicating the absence of a unit decap and '1' indicating the presence of a unit decap at the maximum allowable capacitance.\nThe action is defined as the alteration in capacitance of unit decaps at each timestep. There are ten distinct and incrementally increasing capacitance for both MIM capacitors and MOS capacitors. The action space encompasses all potential combinations of these alterations across all unit decaps of the on-chip and on-interposer PDNs, which can be expressed as:\n\\[\\left\\{-\\frac{C_{M O S}}{C_{M I M}}, 0,+\\frac{C_{M O S}}{C_{M I M}}\\right\\}^{N_{chip}+N_{intp}} \\tag{4}\\]\nHere, \\(C_{MOS}\\) and \\(C_{MIM}\\) represent the capacitance step of the unit MOS capacitor and unit MIM capacitor, respectively. \\(N_{chip}\\) and \\(N_{intp}\\) denote the number of UDCs where the decap can be placed on the chiplet PDNs and interposer PDN, respectively. In this action space, each unit decap can either increase, decrease, or maintain its capacitance unchanged by a certain step size defined by the ratio of \\(C_{MOS}\\) and \\(C_{MIM}\\).\nFor the 2.5D system with multiple chiplets, probing ports P are strategically placed across different chiplets to monitor impedance variations. The optimization objective is to ensure that the impedance measured at all probing ports align with the target impedance across the frequency range of interest, while concurrently minimizing the manufacturing cost and the leakage current induced by excessive decaps. We aim for the agent to allocate more capacitance to mitigate impedance when the impedance surpasses the target impedance, and to learn a policy that employs lower capacitance when the impedance aligns with the target impedance. Therefore, the reward function is defined as:\n\\[\\begin{aligned} R F=& \\alpha\\left(1-\\frac{\\sum C_{M O S}}{\\sum C_{chipm}}\\right)+\\beta\\left(1-\\frac{\\sum C_{M I M}}{\\sum C_{intpm}}\\right), \\quad \\forall Z(f) \\leq Z_{target}(f) \\tag{5}\\\\ & \\sum_{f} \\max \\left(Z(f)-Z_{\\text {target }}(f)\\right), Z(f)>Z_{\\text {target }}(f) \\\\ \\text {where}\\left[\\begin{array}{l} \\text { Subj }: \\end{array}\\right.\\end{aligned}\\]\nwhere \\(Z - Z_{target}\\) is the difference between the actual impedance and the target impedance observed at P and f is sampled from 0.1 to 20 GHz, with 100 points per decade in following experiments. \\(\\sum C_{MOS}\\) and \\(\\sum C_{chipm}\\) denote the capacitance of the placed MOS capacitors and the maximum capacitance that can be placed on-chip UDCs, respectively. \\(\\sum C_{MIM}\\) and \\(\\sum C_{intpm}\\) denote the capacitance of the placed MIM capacitors and the maximum capacitance that can be placed on-interposer UDCs. The coefficients \u03b1 and \u03b2 are weights, satisfying \u03b1 + \u03b2 = 1. In this context, \u03b1 and \u03b2 are both set to 0.5."}, {"title": "4.3 Matrix Definition Based on VVI Analysis", "content": "Minimizing VVI is crucial for maintaining stable voltage levels and voltage violation effects, especially in high-performance elec-tronic systems. RL is utilized to adjust PDN decap parameters and minimize VVI, similar to the decap optimization based on impedance analysis. The RL agent learns to optimize the decap configuration of the on-chip PDNs to achieve lower VVI values, building upon impedance optimization. To accomplish this, the VVIs of all on-chip PDN UCs are monitored for optimization. In addition to the PDN information mentioned in Section 4.2, the VVI information of all UCS is also included in the input state matrices as a 2D matrix. This com-prehensive information equips the agent to make informed decisions during optimization.\nDue to the locality, on-chip decaps are closer to the noise sources, thus more effective in alleviating SSNs. Incorporating this locality insight, only the on-chip decaps are considered in the following experiments, which could also significantly improve the convergence speed without quality degradation of the final decap distribution.\nThe action space is represented as:\n\\[\\left\\{-C_{M O S}, 0,+C_{M O S}\\right\\}^{N_{chip}} \\tag{6}\\]\nBuilding upon impedance optimization, we incorporate additional capacitors into the on-chip PDNs to alleviate SSN. Our optimization objective is the VVIs of all nodes on the on-chip PDNs, and refining the reward function is necessary. Setting a target value for VVI simi-lar to target impedance is challenging due to the influence of chiplet power, size, and current source distribution. Therefore, we model the reward function to focus on the improvement between initial and optimized VVI. The reward function is expressed as follows:\n\\[R_{T}=1-\\frac{\\sum V}{\\sum V_{i n i t}} \\tag{7}\\]\nwhere \\(V_{init}\\) and V represent the VVIs at a node before and after opti-mization, respectively. This reward function calculates the difference between the ratio of the optimized VVI sum to the initial VVI sum. By employing this reward function, the RL agent aims to maximize the reduction in VVI from its initial state to the optimized state."}, {"title": "4.4 Architecture and RL Algorithm", "content": "The architecture of the proposed method, as illustrated in Fig-ure 6, consists of two networks: the policy network and the value network. The policy network determines actions and outputs the probability distribution over available actions based on the current state, while the value network estimates the expected cumulative reward from a given state following the current policy and provides critical feedback to the policy network. Both networks are imple-mented using an DNN structure. All state matrices are concatenated into a single matrix as the DNN input. The policy network and value network share the same feature extraction layers, which comprise three convolution layers with 12, 16, and 24 channels, followed by three fully-connected layers. In each convolution layer, the recti-fied linear unit (ReLU) function serves as the activation function. The extracted features then pass through a fully-connected layer to generate a probability distribution over actions, which serves as the output of the policy network. Meanwhile, the value network outputs one value representing the goodness of the policy, also through a fully-connected layer.\nWe employ the proximal policy optimization (PPO) [29] algorithm to train the policy and value networks. During training, the agent interacts with the environment, and collects experiences into a replay buffer. Batches of experiences are sampled from this buffer and used to update the policy and value networks. PPO utilizes a clipped surrogate objective function to ensure stable updates and prevent large policy changes. This function constrains the policy updates to be within a certain range, preventing overly aggressive updates that can destabilize training by limiting the extent of policy changes between successive updates. The clipped loss function is formulated as\n\\[V_{F} L_{t}(\\theta)=\\hat{E}_{t}\\left[L_{C L I P}(\\theta)-c_{1} L_{V F}(\\theta)+c_{2} S\\left[\\pi_{\\theta}\\right](s_{t})\\right] \\tag{8}\\]\n\\[\\begin{aligned} L_{C L I P}(\\theta) &=\\hat{E}_{t}\\left[\\min \\left(r_{t}(\\theta) \\hat{A}_{t}, \\operatorname{clip}\\left(r_{t}(\\theta), 1-\\epsilon, 1+\\epsilon\\right) \\hat{A}_{t}\\right]\\right] \\tag{9}\\\\ L_{V F}(\\theta) &=\\left(V(s_{t})-v_{t a r}\\right)^{2} \\tag{10} \\end{aligned}\\]\nwhere \\(r_{t}(\\theta)\\) is the ratio of the new policy and the old policy; e is the clip coefficient; \\(\\hat{A}_{t}\\) is an estimator of the advantage function that represents the difference between the observed rewards and the expected rewards predicted by the value network; \\(L_{VF}\\) is a squared-error loss of the value network output; S denotes the entropy of the output probability; c\u2081 and c2 are coefficients. In this paper, c\u2081 and c2 are both set as 0.5. The Adam optimizer is utilized for training, and the learning rate is established as 10-4."}, {"title": "5 Experiments", "content": "To validate our proposed method, we employ five test cases with different PDN configurations, which include ROCKET-64 [30] along with four other synthetic PDNs. The ROCKET-64 configuration com-prises six chiplets, including a Network-on-Chip (NoC), a memory controller, and four merged Rockets consisting of two Rocket cores and two L2 Cache units, as illustrated in Figure 7."}, {"title": "5.1 Frequency-Domain Impedance Optimization", "content": "To assess the performance of the proposed RL-based method in the frequency domain, the dual annealing (DA) optimization algo-rithm, which is an improved simulated annealing algorithm, and genetic algorithm (GA) were selected for comparison. For a fair comparison, the cost functions of the DA and GA were set to the same as the proposed method. Table 2 summarizes the comparison results of different methods on test cases. The reward of the opti-mal decap design obtained by the proposed method achieved the improvement of 13.01% and 20.29% than the solutions obtained by DA and GA. Moreover, the optimal decap design obtained by the proposed method required lower capacitance values compared to DA and GA. DA and GA took over 80 hours and 40 hours to deter-mine the optimal solutions, while the training time for the proposed method was about 10 hours, representing a significant reduction in training time compared to DA and GA.\nThe optimal decap distribution on ROCKET-64 is shown in Fig-ure 8. For the on-interposer PDN, the decap distribution obtained by DA occupied almost the entire interposer, while GA tended to place larger capacitance on the interposer PDN. Compared to DA and GA, the proposed method required less layout space to allocate on-interposer decaps, reducing the number of occupied UDCs by 10.18% and 7.41%, respectively, which is more practical for placement and routing. For the on-chip PDNs, the proposed method achieved less capacitance and space occupation than DA and GA. Noted that non-capacitor zone is leaving as blank in all decap distributions.\nFigure 9 displays the impedance curves at the four probing ports of the initial PDN, located in the center of each Rocket chiplet, and the optimized PDN obtained by different methods. The dashed line represents the target impedance, with a flat region of 35 m\u03a9 and a frequency-dependent increase rate of 20 dB/dec beyond 3.4 GHz. Although all the methods achieved the desired solutions, the opti-mized PDN obtained by the proposed method avoided over-design with less capacitance, layout space, and design time while satisfying the target impedance across the frequency range of 100 MHz to 20 GHz."}, {"title": "5.2 Time-Domain VVI Optimization", "content": "To investigate the voltage violations after frequency-domain opti-mization, we conducted a time-domain experiment on the ROCKET-64 design. The internal current sources are generated based on the PWL current model and the \\(I_{ref}\\) constrain as described in Equa-tion (2). Then each internal current source is attached to a UC of the PDN to model the normal working condition for Rocket chiplet.\nBeside internal current sources, thirteen lumped currents sources are distributed evenly at the inner-edges of each Rocket chiplet to model the current fluctuations under high-speed communications, as illustrated in Figure 10(b). Furthermore, the correlation coeffi-cient between I/O current sources is used as a proxy to represent different data transmit patterns of high-speed I/Os. A higher corre-lation among I/O currents indicates more simultaneous switching of TX/RX circuits, thus more severe the SSN.\nFor correlation coefficients ranging from 0 to 1.0, extensive in-vestigations are conducted with 50 generated current profiles for the post frequency-optimized PDN. The trend and variation of the total VVI of all nodes for 50 cases are summarized in Figure 10(a). Regardless of the correlation level, the total VVI in the 1 ns interval consistently remains above zero. Thus, we could conclude that even the target impedance has been met at all frequency range, there will still be voltage violations, which cannot be captured solely on frequency-domain analysis.\nAs the correlation among I/O currents increases, the total VVI also escalates. We selected a typical node of on-chip PDNs to moni-tor the voltage variation. Under conditions where no simultaneous switching outputs occur within the system, the voltage variation is represented by the orange line in Figure 10(b). Here, the minimum and maximum voltages measure 0.8556 V and 0.9361 V respectively, meeting the specified requirements. However, with an increasing number of signals being switched on and off simultaneously within the system, the voltage fluctuations surpass the 5% voltage ripple limitation of \\(V_{dd}\\). It is evident that as multiple I/Os switch simul-taneously, the voltage fluctuation exceeds permissible levels. This underscores how SSN can indeed impact the power stability of the PDN. Consequently, time-domain optimization becomes imperative to ensure the performance of the 2.5D PDN design.\nTo demonstrate the effectiveness of our time-domain optimization, the VVI results of ROCKET-64 with a I/O correlation of 0.9 was chosen to perform the following optimization. We define the node where the minimum or maximum voltage over time exceeds the allowable voltage ripple as the violation node. Building upon the frequency-domain optimization, we selected a total of 22500 nodes of ROCKET-64, with each rocket chiplet comprising 5,625 nodes, as additional inputs for the time-domain optimization and further refinement of on-chip decaps by setting the reduction of VVI as the RL optimization objective as in Equation (7). The before and after time-domain optimization results on ROCKET-64 are summarized in Table 3. All nodes that were only optimized in the frequency domain exhibited violations. With the addition of unit MOS capacitors during optimization, the total VVI and violation nodes reduced accordingly. When the total MOS capacitance exceeded 14.9 nF, there were no violation nodes. Figure 11 shows the VVI profile of one Rocket chiplet before and after time-domain optimization. Based on above case study, without losing generality, we have shown the effectiveness of the propose two-phase optimization method to obtain a robust PDN for 2.5D system. In practical design, designers can make a trade-off between the total allowable capacitance and the V"}]}