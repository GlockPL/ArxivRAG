{"title": "Hierarchical Decoupling Capacitor Optimization for Power Distribution Network of 2.5D ICs with Co-Analysis of Frequency and Time Domains Based on Deep Reinforcement Learning", "authors": ["Yuanyuan Duan", "Haiyang Feng", "Zhiping Yu", "Hanming Wu", "Leilai Shao*", "Xiaolei Zhu*"], "abstract": "With the growing need for higher memory bandwidth and com-putation density, 2.5D design, which involves integrating multiplechiplets onto an interposer, emerges as a promising solution. However, this integration introduces significant challenges due to increasing data rates and a large number of I/Os, necessitating advancedoptimization of the power distribution networks (PDNs) both on-chipand on-interposer to mitigate the small signal noise and simultane-ous switching noise (SSN). Traditional PDN optimization strategiesin 2.5D systems primarily focus on reducing impedance by inte-grating decoupling capacitors (decaps) to lessen small signal noises.Unfortunately, relying solely on frequency-domain analysis has beenproven inadequate for addressing coupled SSN, as indicated by ourexperimental results. In this work, we introduce a novel two-phaseoptimization flow using deep reinforcement learning to tackle boththe on-chip small signal noise and SSN. Initially, we optimize theimpedance in the frequency domain to maintain the small signalnoise within acceptable limits while avoiding over-design. Subse-quently, in the time domain, we refine the PDN to minimize thevoltage violation integral (VVI), a more accurate measure of SSNseverity. To the best of our knowledge, this is the first dual-domainoptimization strategy that simultaneously addresses both the smallsignal noise and SSN propagation through strategic decap place-ment in on-chip and on-interposer PDNs, offering a significant stepforward in the design of robust PDNs for 2.5D integrated systems.", "sections": [{"title": "1 Introduction", "content": "To address the increasing cost of large Systems-on-Chip (SoCs)on advanced technology nodes, 2.5D integration has emerged as asolution. 2.5D integrated circuits (ICs) enables heterogeneous inte-gration and partitions a monolithic SoC into smaller chiplets, whichcan be developed independently, reused across multiple products,and implemented using different process technologies [1, 2]. Byleveraging the rapid development of 2.5D packaging technology,multiple chiplets can be mounted on a single interposer and con-nected through microbumps and redistribution layers (RDLs) to buildhigh-performance computing and wafer-scale artificial intelligence(AI) systems.\nAs data rates continue to increase to hundreds of gigabits persecond and the number of input/outputs (I/Os) surges, maintainingthe power and signal integrity poses a significant challenge forpower distribution network (PDN) design. The 2.5D PDN consists ofvarious components, including on-chip PDNs, an on-interposer PDN,a through-silicon via (TSV) array connecting the interposer and thepackage, as well as bumps and decoupling capacitors (decaps) that arewidely used to reduce voltage fluctuations and help compensate fortransient current demands. The interposer PDN should supply powerto the on-chip PDN, which is responsible for delivering voltagesto each cell in the design. Therefore, the structure of 2.5D PDNnecessitates a hierarchical decap strategy, incorporating both on-chiplet and on-interposer decaps.\nThe presence of various components in electronic systems, suchas voltage regulator modules (VRMs), decap, and interconnects, in-troduces inductive and capacitive effects across different frequencyranges [3]. These effects can lead to dynamic voltage fluctuations,commonly known as small signal noise, which has significant impli-cations for system performance and functionality. Moreover, withthe escalation in the number of I/Os and the data transmit frequency,simultaneous switching noise (SSN) generates additional voltagefluctuations that may interfere with the operation of other chiplets.The SSN, induced by the large switching currents of multiple I/Os during high-speed data transmission, can propagate through thehierarchical PDN, cause jitter [4] and even logic failure [5, 6], asdepicted in Figure 1. Thus, effective strategies to co-optimize thesmall signal noise and SSN are highly demanded.\nPDN analysis is crucial for the design of 2.5D ICs. Frequency-domain impedance often serves as a pivotal criterion for evaluat-ing PDN reliability [7, 8]. Traditional PDN optimization strategiesprimarily focus on the impedance reduction by implementing addi-tional decaps to alleviate the small signal noise based on the anal-ysis of frequency domain. However, relying solely on meeting tar-get impedance, which guarantees that voltage fluctuation remainswithin allowable limits, may not sufficiently consider the impact oftransient responses on the overall system. The coupled SSN fromadjacent chiplets' PDNs, particularly noise propagation through su-per high bandwidth I/Os, can lead to excessive voltage fluctuationbeyond permissible levels, leading to system failure. Additionally,the high integration and miniaturization of 2.5D systems often resultin the routing region occupying a significant portion of the circuitlayout, constraining decap placement. Therefore, a comprehensiveapproach that integrates hierarchical decap placement with consider-ations of both the small signal noise and SSN is crucial for effectivelymitigating power supply noise and ensuring the reliability of PDNdesigns in 2.5D systems.\nIn this work, we propose a novel hierarchical decap optimizationmethod for 2.5D systems, integrating both frequency and time do-main analyses. It leverages advanced deep reinforcement learning(DRL) techniques and models the load current of the overall system.\nThe main contributions are summarized as follows:\n\u2022 We present an RL-based approach for the co-optimization of on-chip PDNs and on-interposer PDN decaps to tackle both smallsignal noise and SSN in 2.5D systems.\n\u2022 In the frequency domain, this approach optimizes decap place-ment to reduce the PDN impedance below the target impedanceat multiple probing ports (power/ground ports), thus ensuring ef-fective power delivery while avoiding unnecessary over-design.\n\u2022 In the time domain, we conduct precise simulations of transientcurrents and introduce the concept of voltage violation inte-gral (VVI). Experiments reveal that despite frequency-domainoptimization efforts, voltage violations still occur, indicating in-stances where voltage fluctuation surpasses acceptable levels.To address this issue, the PDN is refined aiming at minimizingthe VVI by strategically implementing additional decaps.\n\u2022 Extensive validations demonstrate that compared to the frequency-domain optimization alone, the dual-domain optimization strat-egy can better mitigate the small signal noise and SSN, providinga more robust PDN design for 2.5D ICs."}, {"title": "2 Related Work", "content": "In the field of circuits and systems, various methods of decapdesign optimization have been proposed based on the conventionaloptimization algorithms, such as the genetic algorithm (GA) [9-11],particle swarm optimization (PSO) algorithm [12, 13] and simulatedannealing (SA) algorithm [14-16]. GA-based methods can explorea large search space efficiently, but they may struggle to capturesequential combinational relationships between decap assignmentsand other meta-features, such as the position of probing ports. PSOalgorithms, on the other hand, offer fast convergence speeds andsimple coding structures. However, they are prone to fall into thelocal optima, which prevents them from reaching the global opti-mum solution. Although SA algorithms possess the ability to escapelocal optima due to their probabilistic acceptance of worse solutions,they have lower convergence rates compared to PSO algorithmsand require a good initial solution to perform effectively. None ofthese optimization algorithms can guarantee finding the optimalsolution, especially when dealing with a large number of decaplocations. Besides, the optimization time can become problematic,particularly when considering a vast search space. The fusion ofdifferential evolution (DE), which has a strong global search ability,with PSO algorithms enables the optimization of decap designs for2.5D systems [17]. However, this approach specifically focuses solelyon optimizing the on-interposer decap, assuming that chiplets arefully designed and plug-and-play.\nRL has indeed gained traction in addressing complex tasks, espe-cially decap optimization. Several methods utilizing RL for decap op-timization have been proposed in the literature [18-21]. Value-basedRL methods using the Q-learning algorithm have been explored fordecap placement optimization [18, 19]. However, they consider asingle probing port and encounter limitations regarding solutionspace size and high computing costs. To increase the space size andgeneralization ability, a transformer network-based method for PDNdecap optimization of high bandwidth memory (HBM) was proposed[20]. The method can optimize decap design to maximize the reduc-tion of both the self- and transfer impedances seen at multiple ports.Additionally, another RL-based approach [21] optimizes the loca-tions of decaps with different capacitance, considering the complexPDN structure with irregular shapes typical of printed circuit boards(PCBs). This method demonstrates greater scalability compared tothe approaches [18-20] that support only one decap capacitance.\nMost of the previous decap optimization methods have primarilyfocused on maximizing the reduction of impedance in the frequencydomain [9-21]. However, relying solely on frequency-domain analy-sis cannot capture the impact of transient responses on the circuit,making it challenging to predict whether the voltage noise meetsdesign requirements. Su et al. [22] and Enami et al. [23] have inves-tigated the time-domain decap optimization methods for on-chipPDNs only, which are not designated for 2.5D systems."}, {"title": "3 Preliminary Work", "content": "Modeling the PDN in a 2.5D IC encompasses various components,such ad on-chip PDNs, on-interposer PDN, P/G TSVs, microbumps(\u00b5bumps), and decaps. Each component is modeled individually andsubsequently cascaded together.\nThe on-chip PDN is a grid-type PDN, whereas the interposer PDNis configured with meshed P/G planes. The grid PDN is commonlyused in high-speed and high-performance digital systems, consistingof two layers of interwoven P/G planes. In contrast, the meshedPDN comprises two layers, with power planes situated on the upperlayer and ground planes on the lower layer. Both the on-chip and on-interposer PDNs can be broken down into a series of unit cells (UCs).Each UC can be represented by unit-length resistance (R), inductance(L), conductance (G), and capacitance (C) in transmission-line (TL)modeling [24, 25], as illustrated in Figure 2. In our experiments, thewidth and space of on-interposer P/G planes are set to 95 \u00b5m and200 \u00b5m, while the width and space of on-chip P/G planes are set to10 \u03bcm and 20 \u03bcm."}, {"title": "3.3 Frequency-Domain Impedance Analysis", "content": "To ensure a stable voltage supply for the chiplet, the impedanceof PDN should remain below the target impedance value within theworking frequency range. The target impedance is typically definedas the ratio of the maximum allowable ripple voltage to the half ofthe maximum transient current \\(I_{max}\\) derived from peak power \\(P_{max}\\)[7], as follows:\n\\(Z_{target} = \\frac{V_{dd} * ripple}{I_{ref}}\\),   \\(I_{ref} = \\frac{I_{max}}{2}\\),   \\(I_{max} = \\frac{P_{max}}{V_{dd}}\\)   (1)\nhere \\(I_{ref} = \\frac{I_{max}}{2}\\) is used to represent the typical workload andavoid over-design. With advancements in transistor manufacturingprocesses and chip integration, the transistor switching rate is in-creasing while the amplitude of the maximum transient current isdecreasing. Consequently, achieving low impedance at high frequen-cies becomes unnecessary, as it can lead to over-design and increasedcosts. Therefore, the target impedance consists of a flat region and aslope region, as depicted in Figure 3. At low frequencies, the targetimpedance is flat, calculated by (Equation (1)). When the frequencyexceeds the keen frequency \\(f_{knee} = \\frac{0.35}{T}\\), where T, is the transitiontime of the signal, the worst transient current decreases at a -20dB/dec ratio, and likewise, the target impedance curve increases at arate of 20 dB/dec [27]. In this paper, the ripple and \\(f_{knee}\\) are set as5% and 3.4 GHz respectively."}, {"title": "3.4 Time-Domain VVI Analysis", "content": "In the 2.5D system, there are a large number of I/Os betweenchiplets for signal communication. SSN could propagate throughthese I/Os, affecting the normal operation of other chiplets. Due tothe SSN, the change in transient current during the operating stateof the chiplet may exceed the normal operating current, and thewaveform and peak value of the current are unpredictable. Therefore, it is difficult to accurately predict whether the voltage noisemeets the design requirements solely by frequency-domain analysisthat inherently a steady-state analysis. To obtain a robust PDN, anevaluation method of PDNs in the time domain is required.\nTo model the switching current for time-domain evaluation, weemploy piecewise linear (PWL) triangular waveform currents withvarying peak values and excitation times to simulate the transientcurrent resulting from transistor state switching [22]. The total current of a chiplet can be modeled by superposition of two parts: oneis the internal current of the chiplet, and the other is the I/O currentfluctuations distributed at the edge of the chiplet, as defined in Eq.(2):\n(0 \u2264 \\(I_{sum}(t) + I_{I/Os}(t)\\) \u2264 \\(I_{max}\\)\n\\(I_{sum}(t) = \\sum I_{internal}(t)\\) \u2264 \\(I_{ref}\\);\nCurrent Model: \\(I_{I/Os}(t) = \\sum I_{I/Oi}(t)|\\) \u2264 \\(I_{ref}\\);\n\\(\\sum [ I_{I/Oi}(t)dt = 0\\)  (2)\nThe reference current (\\(I_{ref} = I_{max}\\)) is used for transient analysisin consistency with frequency analysis. To maintain overall powerconsumption within \\(P_{max}\\) limits throughout the simulation, the sum(\\(I_{sum}\\)) of the internal currents are set below \\(I_{ref}\\) and I/O currentscan fluctuate within a range of 5%\\(I_{ref}\\) with the peak value of thecurrent summation below \\(I_{ref}\\). To represent different data trans-mission scenarios, \\(I_{I/Oi}\\) with different correlations can be specified.Figure 4(a)-(b) illustrate the waveform and the equivalent circuit ofthe chiplet PDN with transient currents.\nTo conduct the dynamic power integrity analysis, we introducethe concept of voltage violation integral (VVI), which serves as ameasure of the cumulative effect of voltage deviations from specifiedvoltage fluctuations. Figure 4(c) illustrates the voltage violation at anode in the voltage supply \\(V_{dd}\\) power grid. The VVI is representedby the shaded region and is calculated by\n\\(VVI = \\int_{0}^{T} [max(V_{min} - V(t), 0) + max(V(t) \u2013 V_{max}, 0)] dt\\)  (3)\nwhere \\(V_{max}\\) and \\(V_{min}\\) represent the maximum and minimum allow-able voltages, set to 105% and 95% of the power supply voltage, re-spectively. As the duration of time during which the voltage exceedsthe maximum allowable voltage fluctuation range increases, the like-lihood of circuit errors also rises. Considering both the magnitudeand duration of voltage deviations, the VVI provides a comprehen-sive measure of PDN performance, especially in dynamic operatingconditions characterized by transient events.\nCompared to the methods solely considering the worst-case volt-age drop over time [28], the VVI analysis can assess the overallseverity of dynamic voltage violations and evaluate the effectivenessof PDN optimization strategies in mitigating SSNs. Thus, minimizingthe VVI could ensure the reliability and performance of electronicsystems, particularly in high-speed and high-density applicationswhere voltage fluctuations can lead to system failure or performancedegradation."}, {"title": "4 Proposed RL-based Decap Optimization Method", "content": "In this section, an RL-based method for the hierarchical decapoptimization is proposed. The objective of this optimization problemis to minimize the total decap capacitance while ensuring that theymeet the target impedance across the desired frequency band andminimize the VVI as much as possible. The proposed algorithmencompasses two steps. Initially, we adjust decap distribution ofon-interposer and on-chip PDNs to meet target impedance and limitvoltage fluctuation within the ripple range in the frequency domain.Subsequently, in the time domain, we optimize the VVI of on-chipPDN to address the voltage violations induced by SSN propagation.\nTo handle such a complex problem, we apply deep RL, a machinelearning algorithm where an agent learns to make sequential de-cisions by interacting with an environment to learn a policy thatmaximizes cumulative rewards by mapping states to actions. Thisproblem can be represented by three key parameters: state, action,and reward. The state captures the configuration of the environmentobserved by the agent, while the action signifies the decision madeby the agent in response to the observed state. For each action, theagent will assign a reward to evaluate the quality of the action andguide the agent's training toward the maximization of reward. Thereward reflects the feedback provided by the environment basedon the actions taken by the agent. Through iterative interactionwith the environment, the agent refines its parameters based on thefeedback received.\nFigure 5 shows the overall concept of the RL-based approach foroptimizing the PDN in chiplet-based 2.5D systems. The algorithmprocess for decap optimization is detailed in Section 4.1. Further-more, comprehensive definitions of parameters for impedance op-timization and VVI optimization are provided in Section 4.2 andSection 4.3, respectively. The policy network, which plays a pivotalrole in determining the actions of action, is represented by a deepneural network (DNN). The structure of the DNN and the specificRL algorithm utilized are expounded upon in Section 4.4."}, {"title": "4.1 Algorithm Process for Decap Optimization", "content": "The general algorithm process is described as follows.\n(1) Early-Stage Floorplanning: Derive an early-stage floorplan-ning solution, yielding complete designs for the interposer andchiplets, including placement, routing, and PDNs.\n(2) Hierarchical PDN Modeling: Generate hierarchical PDN mod-els in RLGC formats for the 2.5D system, as discussed in Sec-tion 3.1.\n(3) Impedance Analysis: Perform impedance analysis utilizingthe circuit simulator NGSPICE. Optimize the on-chip and on-interposer decaps to meet the target impedance requirements.\n(4) VVI Optimization: Simulate the transient currents using theNGSPICE. Subsequently, refine the on-chip decap placement tominimize VVI in the time domain, thereby ensuring optimalperformance."}, {"title": "4.2 Matrix Definition Based on Impedance Analysis", "content": "For a given hierarchical PDN, the placement of chiplets, the inter-poser space with non-capacitor zone, the locations and capacitancesof MIM capacitors on the interposer PDN, and the locations andcapacitances of MOS capacitors on the chiplet PDN, are taken intoaccount for impedance analysis. The information can be encodedinto four 2D matrices: Interposer Space Matrix, Chiplet Space Matrix,MIM Distribution Matrix and MOS Distribution Matrix. The dimen-sions of these matrices are determined by the number of UDCs. Thespace matrix delineates feasible decap locations on the interposeror chiplet layer and is a binary matrix with '1' indicating feasiblepositions and '0' denoting non-feasible locations. The capacitor dis-tribution matrix reflects the normalized capacitance values of decaps,with '0' indicating the absence of a unit decap and '1' indicating thepresence of a unit decap at the maximum allowable capacitance.\nThe action is defined as the alteration in capacitance of unit decapsat each timestep. There are ten distinct and incrementally increasingcapacitance for both MIM capacitors and MOS capacitors. The actionspace encompasses all potential combinations of these alterationsacross all unit decaps of the on-chip and on-interposer PDNs, whichcan be expressed as:\n{\\(-C_{MOS/CMIM}\\), 0, +\\(C_{MOS/CMIM}\\)\\)\\(^{Nchip+Nintp}\\)  (4)\nHere, \\(C_{MOS}\\) and \\(C_{MIM}\\) represent the capacitance step of the unitMOS capacitor and unit MIM capacitor, respectively. \\(N_{chip}\\) and \\(N_{intp}\\)denote the number of UDCs where the decap can be placed onthe chiplet PDNs and interposer PDN, respectively. In this actionspace, each unit decap can either increase, decrease, or maintain itscapacitance unchanged by a certain step size defined by the ratio of\\(C_{MOS}\\) and \\(C_{MIM}\\).\nFor the 2.5D system with multiple chiplets, probing ports P arestrategically placed across different chiplets to monitor impedancevariations. The optimization objective is to ensure that the impedancemeasured at all probing ports align with the target impedance acrossthe frequency range of interest, while concurrently minimizing themanufacturing cost and the leakage current induced by excessivedecaps. We aim for the agent to allocate more capacitance to mitigateimpedance when the impedance surpasses the target impedance, andto learn a policy that employs lower capacitance when the impedancealigns with the target impedance. Therefore, the reward function isdefined as:\n\\(RF = \\sum_{f}\\frac{max(Z(f) \u2013 Z_{target} (f)), Z(f) > Z_{target} (f))}{\u03b1(1 - \\frac{\\sum C_{mos}}{C_{chipm}}) + \u03b2(1 - \\frac{\\sum C_{mim}}{\\sum C_{intpm}})}, \u2200Z(f) \u2264 Z_{target}(f)\\)  (5)\nwhere \\(Z - Z_{target}\\) is the difference between the actual impedanceand the target impedance observed at P and f is sampled from 0.1to 20 GHz, with 100 points per decade in following experiments.\\(\\sum C_{mos}\\) and \\(\\sum C_{chipm}\\) denote the capacitance of the placed MOScapacitors and the maximum capacitance that can be placed on-chipUDCs, respectively. \\(\\sum C_{mim}\\) and \\(\\sum C_{intpm}\\) denote the capacitance ofthe placed MIM capacitors and the maximum capacitance that canbe placed on-interposer UDCs. The coefficients \u03b1 and \u03b2 are weights,satisfying \u03b1 + \u03b2 = 1. In this context, \u03b1 and \u03b2 are both set to 0.5."}, {"title": "4.3 Matrix Definition Based on VVI Analysis", "content": "Minimizing VVI is crucial for maintaining stable voltage levelsand voltage violation effects, especially in high-performance elec-tronic systems. RL is utilized to adjust PDN decap parameters andminimize VVI, similar to the decap optimization based on impedanceanalysis. The RL agent learns to optimize the decap configurationof the on-chip PDNs to achieve lower VVI values, building uponimpedance optimization. To accomplish this, the VVIs of all on-chipPDN UCs are monitored for optimization. In addition to the PDNinformation mentioned in Section 4.2, the VVI information of all UCsis also included in the input state matrices as a 2D matrix. This com-prehensive information equips the agent to make informed decisionsduring optimization.\nDue to the locality, on-chip decaps are closer to the noise sources,thus more effective in alleviating SSNs. Incorporating this localityinsight, only the on-chip decaps are considered in the followingexperiments, which could also significantly improve the convergencespeed without quality degradation of the final decap distribution.\nThe action space is represented as:\n{\\(-C_{MOS}\\), 0, +\\(C_{MOS}\\)\\)\\(^{Nchip}\\)  (6)\nBuilding upon impedance optimization, we incorporate additionalcapacitors into the on-chip PDNs to alleviate SSN. Our optimizationobjective is the VVIs of all nodes on the on-chip PDNs, and refiningthe reward function is necessary. Setting a target value for VVI simi-lar to target impedance is challenging due to the influence of chipletpower, size, and current source distribution. Therefore, we modelthe reward function to focus on the improvement between initialand optimized VVI. The reward function is expressed as follows:\n\\(RT = 1 - \\frac{\\sum V}{\\sum V_{init}}\\)  (7)\nwhere \\(V_{init}\\) and V represent the VVIs at a node before and after opti-mization, respectively. This reward function calculates the differencebetween the ratio of the optimized VVI sum to the initial VVI sum.By employing this reward function, the RL agent aims to maximizethe reduction in VVI from its initial state to the optimized state."}, {"title": "4.4 Architecture and RL Algorithm", "content": "The architecture of the proposed method, as illustrated in Fig-ure 6, consists of two networks: the policy network and the valuenetwork. The policy network determines actions and outputs theprobability distribution over available actions based on the currentstate, while the value network estimates the expected cumulativereward from a given state following the current policy and providescritical feedback to the policy network. Both networks are imple-mented using an DNN structure. All state matrices are concatenatedinto a single matrix as the DNN input. The policy network and valuenetwork share the same feature extraction layers, which comprisethree convolution layers with 12, 16, and 24 channels, followed bythree fully-connected layers. In each convolution layer, the recti-fied linear unit (ReLU) function serves as the activation function.The extracted features then pass through a fully-connected layer togenerate a probability distribution over actions, which serves as theoutput of the policy network. Meanwhile, the value network outputsone value representing the goodness of the policy, also through afully-connected layer.\nWe employ the proximal policy optimization (PPO) [29] algorithmto train the policy and value networks. During training, the agentinteracts with the environment, and collects experiences into a replaybuffer. Batches of experiences are sampled from this buffer and usedto update the policy and value networks. PPO utilizes a clippedsurrogate objective function to ensure stable updates and preventlarge policy changes. This function constrains the policy updatesto be within a certain range, preventing overly aggressive updatesthat can destabilize training by limiting the extent of policy changesbetween successive updates. The clipped loss function is formulatedas\n\\(VF L^{t}(\u03b8) = \u0116t [L^{CLIP} (\u03b8) \u2013 c_{1}L^{VF} (\u03b8) + c_{2}S[\u03c0_{\u03b8}](s_{t})])\\)  (8)\n\\(L^{CLIP} (\u03b8) = \u0116t[min(r_{t}(\u03b8)\u00c2_{t}, clip(r_{t}(\u03b8), 1 \u2212 \u03f5, 1 + \u03f5)\u00c2_{t}])\\) (9)\n\\(L^{VF} (\u03b8) = (V(s_{t}) \u2013 v^{targ})^{2}\\)  (10)\nwhere \\(r_{t} (\u03b8)\\) is the ratio of the new policy and the old policy; \u03f5 isthe clip coefficient; \\(\u00c2_{t}\\) is an estimator of the advantage functionthat represents the difference between the observed rewards and theexpected rewards predicted by the value network; \\(L^{VF}\\) is a squared-error loss of the value network output; S denotes the entropy of theoutput probability; c\u2081 and c2 are coefficients. In this paper, c\u2081 and c2are both set as 0.5. The Adam optimizer is utilized for training, andthe learning rate is established as 10-4."}, {"title": "5 Experiments", "content": "To validate our proposed method, we employ five test cases withdifferent PDN configurations, which include ROCKET-64 [30] alongwith four other synthetic PDNs. The ROCKET-64 configuration comprises six chiplets, including a Network-on-Chip (NoC), a memorycontroller, and four merged Rockets consisting of two Rocket coresand two L2 Cache units, as illustrated in Figure 7."}, {"title": "5.1 Frequency-Domain Impedance Optimization", "content": "To assess the performance of the proposed RL-based method inthe frequency domain, the dual annealing (DA) optimization algo-rithm, which is an improved simulated annealing algorithm, andgenetic algorithm (GA) were selected for comparison. For a faircomparison, the cost functions of the DA and GA were set to thesame as the proposed method. Table 2 summarizes the comparisonresults of different methods on test cases. The reward of the opti-mal decap design obtained by the proposed method achieved theimprovement of 13.01% and 20.29% than the solutions obtained byDA and GA. Moreover, the optimal decap design obtained by theproposed method required lower capacitance values compared toDA and GA. DA and GA took over 80 hours and 40 hours to deter-mine the optimal solutions, while the training time for the proposedmethod was about 10 hours, representing a significant reduction intraining time compared to DA and GA.\nThe optimal decap distribution on ROCKET-64 is shown in Fig-ure 8. For the on-interposer PDN, the decap distribution obtainedby DA occupied almost the entire interposer, while GA tended toplace larger capacitance on the interposer PDN. Compared to DAand GA, the proposed method required less layout space to allocateon-interposer decaps, reducing the number of occupied UDCs by10.18% and 7.41%, respectively, which is more practical for placementand routing. For the on-chip PDNs, the proposed method achievedless capacitance and space occupation than DA and GA. Noted thatnon-capacitor zone is leaving as blank in all decap distributions.\nFigure 9 displays the impedance curves at the four probing portsof the initial PDN, located in the center of each Rocket chiplet, andthe optimized PDN obtained by different methods. The dashed linerepresents the target impedance, with a flat region of 35 m\u03a9 anda frequency-dependent increase rate of 20 dB/dec beyond 3.4 GHz.Although all the methods achieved the desired solutions, the opti-mized PDN obtained by the proposed method avoided over-designwith less capacitance, layout space, and design time while satisfyingthe target impedance across the frequency range of 100 MHz to 20GHz."}, {"title": "5.2 Time-Domain VVI Optimization", "content": "To investigate the voltage violations after frequency-domain opti-mization, we conducted a time-domain experiment on the ROCKET-64 design. The internal current sources are generated based on thePWL current model and the \\(I_{ref}\\) constrain as described in Equa-tion (2). Then each internal current source is attached to a UC ofthe PDN to model the normal working condition for Rocket chiplet.\nBeside internal current sources, thirteen lumped currents sourcesare distributed evenly at the inner-edges of each Rocket chiplet tomodel the current fluctuations under high-speed communications,as illustrated in Figure 10(b). Furthermore, the correlation coeffi-cient between I/O current sources is used as a proxy to representdifferent data transmit patterns of high-speed I/Os. A higher corre-lation among I/O currents indicates more simultaneous switching ofTX/RX circuits, thus more severe the SSN.\nImpact of Simultaneous Switching\nFor correlation coefficients ranging from 0 to 1.0, extensive in-vestigations are conducted with 50 generated current profiles forthe post frequency-optimized PDN. The trend and variation of thetotal VVI of all nodes for 50 cases are summarized in Figure 10(a).Regardless of the correlation level, the total VVI in the 1 ns intervalconsistently remains above zero. Thus, we could conclude that eventhe target impedance has been met at all frequency range, therewill still be voltage violations, which cannot be captured solely onfrequency-domain analysis.\nAs the correlation among I/O currents increases, the total VVIalso escalates. We selected a typical node of on-chip PDNs to monitor the voltage variation. Under conditions where no simultaneousswitching outputs occur within the system, the voltage variation isrepresented by the orange line in Figure 10(b). Here, the minimumand maximum voltages measure 0.8556 V and 0.9361 V respectively,meeting the specified requirements. However, with an increasingnumber of signals being switched on and off simultaneously withinthe system, the voltage fluctuations surpass the 5% voltage ripplelimitation of Vdd. It is evident that as multiple I/Os switch simul-taneously, the voltage fluctuation exceeds permissible levels. Thisunderscores how SSN can indeed impact the power stability of thePDN. Consequently, time-domain optimization becomes imperativeto ensure the performance of the 2.5D PDN design.\nResults of VVI Optimization\nTo demonstrate the effectiveness of our time-domain optimization,the VVI results of ROCKET-64 with a I/O correlation of 0.9 waschosen to perform the following optimization. We define the nodewhere the minimum or maximum voltage over time exceeds theallowable voltage ripple as the violation node. Building upon thefrequency-domain optimization, we selected a total of 22500 nodesof ROCKET-64, with each rocket chiplet comprising 5,625 nodes,as additional inputs for the time-domain optimization and furtherrefinement of on-chip decaps by setting the reduction of VVI as theRL optimization objective as in Equation (7). The before and aftertime-domain optimization results on ROCKET-64 are summarized inTable 3. All nodes that were only optimized in the frequency domainexhibited violations. With the addition of unit MOS capacitors duringoptimization, the total VVI and violation nodes reduced accordingly.When the total MOS capacitance exceeded 14.9 nF, there were noviolation nodes. Figure 11 shows the VVI profile of one Rocket chipletbefore and after time-domain optimization. Based on above casestudy, without losing generality, we have shown the effectiveness ofthe propose two-phase optimization method to obtain a robust PDNfor 2.5D system. In practical design, designers can make a trade-offbetween the total allowable capacitance and the VVI tolerance toobtain the desired PDN design."}, {"title": "6 Future Work", "content": "Promising results have been demonstrated through comprehen-sive experimental evaluations of the proposed two-phase optimiza-tion method. However, there is potential for further improvementsthat could enhance its effectiveness and establish it as a significantarea of research. Firstly, the compact modeling approach of thehierarchical PDN could benefit from cross-verification with moreaccurate full microwave analyses. This would help determine theoptimal frequency range and limitations of the current modelingtechnique. Additionally, more realistic current models and corre-lation coefficients should be extracted from SPICE simulations oftransmitter/receiver circuits under various workloads. Although theDNN model employed in this study already surpasses traditional DAand GA approaches, exploring more advanced DNN architecturescould further improve performance and enhance transferability."}, {"title": "7 Conclusion", "content": "In this article, we propose an RL-based method to optimize the decap design of 2.5D hierarchical PDN, incorporating both frequency-and time-domain analyses. Our approach offers greater flexibilityin selecting decap types, and consider the constraint of the non-capacitor zone. Through frequency-domain optimization, we suc-cessfully meet the target impedance requirements. Subsequent op-timization using time-domain techniques notably mitigates SSN.\nBy leveraging a combination of frequency- and time-domain opti-mization strategies, we significantly enhance power integrity andachieve a robust PDN design. Our experimental results underscorethe importance of optimizing PDNs in 2.5D chiplet-based systems,demonstrating the efficacy of our proposed approach."}]}