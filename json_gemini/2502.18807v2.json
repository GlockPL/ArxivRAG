{"title": "BatteryLife: A Comprehensive Dataset and Benchmark for Battery Life Prediction", "authors": ["Ruifeng Tan", "Weixiang Hong", "Jiayue Tang", "Xibin Lu", "Ruijun Ma", "Xiang Zheng", "Jia Li", "Jiaqiang Huang", "Tong-Yi Zhang"], "abstract": "Battery Life Prediction (BLP), which relies on time series data pro-duced by battery degradation tests, is crucial for battery utilization,optimization, and production. Despite impressive advancements,this research area faces three key challenges. Firstly, the limited sizeof existing datasets impedes insights into modern battery life data.Secondly, most datasets are restricted to small-capacity lithium-ionbatteries tested under a narrow range of diversity in labs, raisingconcerns about the generalizability of findings. Thirdly, inconsistentand limited benchmarks across studies obscure the effectivenessof baselines and leave it unclear if models popular in other timeseries fields are effective for BLP. To address these challenges, wepropose BatteryLife, a comprehensive dataset and benchmark forBLP. BatteryLife integrates 16 datasets, offering a 2.4 times samplesize compared to the previous largest dataset, and provides the mostdiverse battery life resource with batteries from 8 formats, 80 chem-ical systems, 12 operating temperatures, and 646 charge/dischargeprotocols, including both laboratory and industrial tests. Notably,BatteryLife is the first to release battery life datasets of zinc-ionbatteries, sodium-ion batteries, and industry-tested large-capacitylithium-ion batteries. With the comprehensive dataset, we revisitthe effectiveness of baselines popular in this and other time seriesfields. Furthermore, we propose CyclePatch, a plug-in techniquethat can be employed in a series of neural networks. Extensivebenchmarking of 18 methods reveals that models popular in othertime series fields can be unsuitable for BLP, and CyclePatch consis-tently improves model performance establishing state-of-the-artbenchmarks. Moreover, BatteryLife evaluates model performanceacross aging conditions and domains. BatteryLife is available athttps://github.com/Ruifeng-Tan/BatteryLife.", "sections": [{"title": "1 INTRODUCTION", "content": "Rechargeable batteries are ubiquitous in modern industry, includingelectric vehicles, power grids, and portable devices [12, 24, 36, 38].Nevertheless, batteries inevitably degrade with cyclic operationdue to intrinsic electrochemical mechanisms [4, 7, 34]. The degra-dation causes shorter usable time and may lead to safety issuesin the applications [50, 52, 55]. Typically, batteries are deemed atend-of-life when their capacity falls to 80% of the initial, and end-of-life batteries are unsuitable for high-demanding applicationslike electric vehicles [2, 25, 31]. To ensure more sustainable andsafer battery operation, battery engineers/scientists need to con-duct degradation tests to measure the battery life during batteryoptimization and quality control [2, 20, 33]. However, degradationtests are time-consuming since non-linear capacity loss occurs overmonths to years before the end of life. Accurate early predictionof the battery life is thus vital for battery utilization, optimization,and production.\nMachine learning models have been developed as promisingapproaches for Battery Life Prediction (BLP) [8, 10, 11, 14, 25, 29, 31,32, 37, 44, 51, 54, 56]. In early works, battery experts generally madearduous efforts to extract features from the voltage as well as currenttime series of degradation tests [14, 31] and data of additional testssuch as temperature test [53] and acoustic test [19] based on domainknowledge. The extracted features are then fed into classic machine"}, {"title": "2 PRELIMINARIES", "content": "2.1 Degradation Test\nTraditionally, battery life is measured via degradation tests con-sisting of repeated cycles, where one cycle is composed of a charg-ing and discharging period. The degradation tests are performedfollowing pre-set charge and discharge protocols in temperature-controlled environmental chambers, whereas the protocols andoperation temperature are set according to specific interests. InFigure 2, we show partial cycling data of four batteries. It can beobserved that cycling data are time series, in which fundamental\nsignals are voltage (V) and current (I). It should be noted that, forany time step, either V or I is controlled by preset protocols, whilethe uncontrolled one (I or V) can respond to the battery internalstate. The capacity is computed as\n$$Q_i = \\int_{t_1}^{t_2} |I| dt.$$\nBy using this equation, we can compute the charge or dischargecapacity within a time region for a cycle. When \\( t_1 \\) and \\( t_2 \\) are thestart and end time of a charging or discharging period, the \\( Q_i \\) isthe charge or discharge capacity for the \\( i^{th} \\) cycle, respectively. Thestate of health (SOH) of a battery at \\( i^{th} \\) cycle is calculated by:\n$$SOH = \\frac{Q_i}{Q_o}$$\nwhere \\( Q_i \\) is the capacity of \\( i^{th} \\) cycle, and \\( Q_o \\) is the initial capacity.The literature [23, 25, 30, 31, 40, 50] typically takes discharge capacity as \\( Q_i \\). Regarding \\( Q_o \\), some works [25, 31, 40, 50] utilize nominalcapacity as \\( Q_o \\) while some [23, 30] set \\( Q_1 \\) as \\( Q_0 \\). Non-linear SOHdegradation can occur hundreds of cycles before batteries reachthe end of life (80% SOH) as shown in Figure 3.\nIt should be noted that the cycling data pattern is affected byaging conditions [51]. In this work, battery format, anode, cath-ode, electrolyte, charge protocols, discharge protocols, operationtemperature, nominal capacity, and manufacturer are consideredaging factors, and a difference in any aging factor generates a dif-ferent aging condition. To illustrate, vivid examples of the impactof charge protocols and discharge protocols as well as chemicalsystems are shown in Figure 2. Figure 2a plots a Li-ion example.The Li-ion example has two-stage constant-current charging (CCC),where different currents are employed in different stages, followedby a constant-voltage charging (CVC) during the charging period.Then the battery undergoes a constant-current discharge (CCD)and constant-voltage discharge (CVD). However, other examplescomply with one-stage CCC, and some have no CVC or CVD pe-riods. From Figure 2d, it is also observed that the industrial testapplies a current that is times larger than the current of laboratorytests (Figure 2a-c). Moreover, the battery data pattern is influencedby underlying chemical systems as witnessed in the different shapesof voltage curves in Figure 2a-c."}, {"title": "2.2 Task Definition", "content": "Let \\( X_{i:N} = [X_i, X_{i+1}, ..., X_N] \\in R^{3 \\times T} \\) represent the voltage, current and capacity variables across \\( T \\) time steps starting from the \\( i^{th} \\) cycle to the \\( N^{th} \\) cycle, where \\( X_i \\in R^{3 \\times T_i} \\) is the cycling data of the \\( i^{th} \\) cycle with \\( T_i \\) time steps. We consider the problem: Given the input \\( X_{1:S} \\) with \\( \\forall S \\leq 100 \\), where \\( S \\) is a positive integer, a modelneeds to predict the battery life denoted by \\( y \\in R^1 \\). Unless oth-erwise specified, we use nominal capacity as \\( Q_o \\) to compute SOHaccording to Equation 2, and consider the cycle number at whichthe SOH becomes no larger than 80% as the battery life followingthe seminal work of Severson et al. [31]."}, {"title": "3 BATTERYLIFE", "content": "3.1 Dataset Overview\nBatteryLife dataset is constructed via integration of 3 our datasetsand 13 previously available datasets [2, 5, 6, 16, 20, 21, 25, 26, 28,31, 40, 44, 47, 57]. The data statistics of BatteryLife and previousdatasets are concluded in Table 1. According to Table 1, the previouspublic datasets contain only Li-ion batteries collected from labo-ratory tests. We supply Zn-ion and Na-ion batteries by releasingbatteries tested in our lab and provide industry-tested large-capacityLi-ion batteries accessed from CALB Group Co., Ltd.. On this note,BatteryLife features as the largest and most diverse battery lifedataset. Note that statistics for all datasets are conducted afterdata preprocessing. We refer readers to Appendix A for the detailsof data preprocessing, simple introductions to each dataset, anddegradation test details of 3 our datasets. For convenient usage, westandardize all datasets in a pickle file format with unified namingrules following BatteryML [50], whereas the original data comefrom various naming rules and file formats."}, {"title": "3.2 Popular Benchmark Methods", "content": "We split BatteryLife into four parts: Li-ion (combination of 13public datasets), Zn-ion, Na-ion, and CALB, and summarize the datastatistics of each part in Table 2. Such a division is employed for tworeasons. On the one hand, different battery type exhibits differentcycling patterns due to intrinsic electrochemical mechanisms, andthus Li-ion, Zn-ion, and Na-ion batteries are categorized as differentparts. Likewise, CALB batteries are separated from others becausethey are large-capacity batteries actively used in electric vehiclesand are subject to industrial tests. Therefore, this division sepa-rates battery data according to domains and can examine modelperformance on different domains. On the other hand, the fourparts generally intrigue different end users (battery practitioners),and hence allow model advances to inform various users from thebattery community.\nCollectively, BatteryLife offers standardized data with unprece-dented public dataset size and diversity for BLP. This enables re-searchers to explore lots of neural network design and generateactionable insights by making advances on BatteryLife.\nWe set up a series of benchmark methods in BatteryLife. First, weselect methods that are widely adopted for BLP [8, 10, 25, 29, 32, 51],including Transformer encoder [39], Long short-term memory(LSTM), bidirectional long short-term memory (BiLSTM), gate re-current unit (GRU), bidirectional gate recurrent unit (BiGRU), convolutional neural network (CNN), and multilayer perceptron (MLP).Among these models, Transformer encoder, LSTM, BiLSTM, GRU,and BiGRU are directly applied to process input that has a variablelength, and then a linear projection is used to produce the predic-tion. For CNN, we pad the input to the same length using zerosand then reshape the input into an image-like matrix using voltage,current, and capacity as three channels. Specifically, the reshapedinput has a dimension of (3, 100, 300), where 100 is the largest inputcycle number, and 300 is the number of resampled points within a"}, {"title": "3.3 CyclePatch", "content": "In addition to the popular baselines presented in Section 3.2, wepropose CyclePatch, a simple yet effective plug-in technique, asshown in Figure 5. CyclePatch treats each cycle as a token:\n$$[X_1, X_2, X_3, ..., X_s] = Segment(X_{1:S}),$$\n$$X_i = W \\cdot flatten(X_i) + b,$$\nwhere \\( W \\in R^{D_1 \\times 900} \\), \\( b \\in R^{D_1} \\), and \\( flatten(X_i) \\in R^{900} \\). In thisframework, CyclePatch segments the cycling time series into basicunits that have recurring patterns throughout degradation tests.As information of cycle tokens might differentiate due to changesin battery internal state and varied aging conditions, we leveragedan intra-cycle encoder to model information within each cycle.Specifically, we stack L layers of feed-forward neural networksto deeply mine effective patterns within each cycle token. Thecomputation at the lth layer of the intra-cycle encoder is given by:\n$$z^l = W^l_2 \\sigma(W^l_1 z^{l-1} + b_1) + b_2,$$\n$$z^l = LN(z^l + z^{l-1}),$$\nwhere \\( W^l_2 \\in R^{D_2 \\times D_1} \\), \\( W^l_1 \\in R^{D_1 \\times D_2} \\), \\( b_1 \\in R^{D_1} \\), \\( b_2 \\in R^{D_2} \\), and \\( LN \\)\ndenotes layer normalization [3]. \\( z^{l-1} \\) is the input to the lth layer,"}, {"title": "4 EXPERIMENTS", "content": "In this section, we report extensive experimental results wishing toanswer the following research questions: RQ1: How do the benchmark methods perform on different domains? RQ2: How do themain components of CyclePatch framework affect the performance?RQ3: How adaptable are benchmark methods when applied acrossaging conditions in each domain? RQ4: How transferrable is themodel pretrained on the Li-ion domain for other domains?"}, {"title": "4.1 Experimental Setup", "content": "The raw cycling data vary in the number of time steps across cyclesand batteries. To ensure consistency, for each cycle, we use linearinterpolation to resample both charging and discharging data to150 points, each containing current, voltage, and capacity records.In this vein, each cycle comprises 300 data points. This results in upto 30,000 data points in samples when the first 100 cycles are used.Prior to model input, the resampled cycling data are normalized asdetailed in Appendix B.2.\nFor most batteries in BatteryLife, we use the measured end-of-life as the life label. However, a few batteries remain above 80%SOH at the end of cycling. While some prior works [25, 50] use thelast recorded cycle number as the life label, this can introduce largelabel noise. To mitigate this issue, we exclude batteries with a finalSOH greater than \\( \\lambda + 2.5% \\). For those with a SOH in \\( (\\lambda, \\lambda + 2.5%] \\),we apply linear extrapolation to estimate the life label at \\( \\lambda \\) SOH. Inthis work, \\( \\lambda = 80% \\) for all datasets except CALB, where \\( \\lambda = 90% \\) isused, as most of the collected CALB batteries do not reach 80% SOH.Additionally, for CALB batteries, we use \\( Q_1 \\) as \\( Q_o \\) in Equation 2 tocalculate SOH in accordance with CALB regulations."}, {"title": "4.2 Evaluation Metrics", "content": "We employ two metrics to evaluate model performance: mean abso-lute percentage error (MAPE) and \\( \\alpha \\)-accuracy [30]. MAPE is widelyadopted as the main evaluation metric for BLP [8, 25, 31, 35, 50],and computed as:\n$$MAPE = \\frac{1}{N} \\sum_{i=1}^N |\\frac{y_i - \\hat{y}_i}{y_i}|,$$\nwhere \\( y_i \\) and \\( \\hat{y}_i \\) are the ground truth and predicted battery lifeof the ith sample, respectively. \\( N \\) is the number of samples in thetesting set. As for \\( \\alpha \\)-accuracy, it has been employed to assess model"}, {"title": "4.3 Model Performance on Different Domains (RQ1)", "content": "In this subsection, we compare the performance of benchmarkmethods on different domains. The benchmark methods are catego-rized into four categories (MLPs, Transformers, CNNs, and RNNs)and their overall model performance is reported in Table 3. It isobserved that MLPs and Transformers generally outperform othercategories. This phenomenon matches the modern landscape inother time series tasks [13, 22, 27, 46, 49]. Remarkably, CyclePatchmethods achieve the best performance across all domains, under-scoring the effectiveness of the proposed plug-in technique. We alsoobserve that vanilla Transformer and RNNs are not suitable for BLPdue to memory limitations or slow training speeds when handlingsequences with 30,000 points. In contrast, CyclePatch enables thesemodels to become viable for this task, improving memory efficiencyand training speed. Additionally, the best MAPE are 0.179, 0.515,0.255, and 0.141 for the Li-ion, Zn-ion, Na-ion and CALB datasets,respectively. The poor performance on the Zn-ion dataset can beattributed to the challenge of learning diverse chemical systemswith limited data available for each system.\nWith respect to approaches popular for other time series data[22, 27, 41, 46, 49], they generally underperform for BLP. The possi-ble reasons are two-fold. On the one hand, the explicit architecturaldesigns used for decomposing trends and seasonal patterns are notsuitable for BLP. This is mainly supported by the evidence that mod-els with trend and seasonal decomposition (DLinear, Autoformer,and MICN) perform poorly on most datasets. This is further corrob-orated by the results that MLP generally outperforms DLinear withclear gaps, whereas MLP removes the decomposition design fromDLinear. The failure of trend and seasonal decomposition is rea-sonable, as the life-related information underlies the fine-grainedinteractions among variables (voltage, current, and capacity) rather"}, {"title": "4.4 Ablation Studies (RQ2)", "content": "We conduct ablation studies of the proposed CyclePatch to studythe effectiveness of its key components, and present the results inTable 4. Specifically, we study CPMLP and CPTransformer consid-ering their leading performance across datasets. \"w/o Intra\" refersto the removal of the intra-cycle encoder; \"w/o Inter\" indicates theabsence of the inter-cycle encoder; MLP and Transformer severs asnaive baselines without patching. From Table 4, it is evident that"}, {"title": "4.5 Model Performance on Seen and Unseen Aging Conditions (RQ3)", "content": "We further investigate the generalizability of the top-three modelsby evaluating their performance on aging conditions that are seenand unseen in the training set, and present results in Table 5. This iscrucial because a broad range of BLP applications demands modelsthat remain effective across aging conditions. The results indicatethat models generally perform worse on unseen aging conditionscompared to those seen ones. This discrepancy arises from domainshifts, which result from different data distributions across agingconditions, as discussed in Section 2.1. Additionally, we note thatmodels that excel in either seen or unseen aging conditions may notbe the best models concerning overall performance. This indicates"}, {"title": "4.6 Cross-domain Transferability (RQ4)", "content": "In real-world situations, batteries of new types are often fewer thanbatteries of old types so that it is important to develop a modelthat has cross-domain transferability. In this work, we evaluatethe cross-domain transferability of models by investigating if amodel pretrained on Li-ion dataset can be transferred to otherdomains, and report the results in Table 6. Specifically, we study thetransferability of CPMLP which is the best model in Li-ion domain.Three transferability evaluations are considered: (1) Frozen: Directlyapplying the pretrained CPMLP on target domains. (2) Fine-tuning(FT): Fine-tune all parameters of the pretrained CPMLP. (3) Domainadaptation (DA): we implement a domain adaptation technique byminimizing maximum mean discrepancy [9] between the target-domain and source-domain embeddings produced by the last hiddenlayer. By expectation, with transfer learning techniques, an effectivetransferrable model should outperform the best baseline that istrained using only target-domain training data.\nFrom Table 6, we observe that frozen pretrained models performpoorly on target domains due to significant domain shifts acrossdomains. Domain adaptation significantly improves model perfor-mance on Zn-ion and Na-ion datasets. Fine-tuned CPMLP slightlyoutperforms the baseline regarding the 15%-Acc on CALB dataset.However, there is still a distance to satisfactory BLP even if thetransfer learning is leveraged. We also note that both domain adap-tation and fine-tuning encounter challenges in certain cases, such asTransferring from Li-ion dataset to CALB dataset regarding MAPE.Given the results of the cross-domain evaluations, BatteryLife stillhas considerable room for developing more transferrable modelsfor BLP."}, {"title": "5 CONCLUSION AND FUTURE WORK", "content": "In this paper, we propose BatteryLife, which offers the largest andmost diverse battery life dataset created by integrating 16 datasets.The unprecedented dataset size and diversity enable advances inBatteryLife to produce actionable insights for the broad batteryand data mining communities. Moreover, BatteryLife provides acomprehensive benchmark, including baselines popular in this andother time series fields. Extensive experiments demonstrate thatBatteryLife contains research opportunities for developing tailoredtime series models for BLP. In future studies, we also focus on theresearch areas discovered in this work and plan to incorporate moredatasets into BatteryLife."}, {"title": "A FURTHER EXPERIMENTAL DETAILS", "content": "A.1 Dataset Preprocessing\nIn this section, we introduce the preprocessing details for all datasets.We obtained HNEI, MICH, MICH_EXP, SNL, and UL_PUR datasetsfrom BatteryArchive. Other datasets were sourced from the linksshared in the original papers.\nFor all public datasets, the present study filtered out the batter-ies whose SOH is not degraded to 82.5%, and conducted the datastatistics on the remained batteries. Note that BatteryArchive is anactive website, and the data statistics in this paper were conductedon the available data until September 2024. As for BatteryLife, wefurther excluded the batteries whose life labels are no larger than100. Additionally, we found that some batteries in the UL_PURdataset contain sudden significant SOH drops without recovery. Weconjecture that these drops are caused by certain equipment faultsand thus removed these batteries. The statistics of BatteryLifewereconducted on the remained batteries.\nFurthermore, some outliers might exist in the cycling data. For the 7 datasets standardized by BatteryML [50], we detected ab-normal cycles by running a median filtering method on dischargecapacity degradation trajectory following BatteryML [50] and re-moved the detected outliers. As for other datasets, we first removedthe rest performance tests (RPT) and formation cycles. The RPTcycles are removed because they comply with charge/dischargeprotocols that are different from the cycling protocols, and theRPT cycles are also generally detected as outliers by BatteryML[50]. Likewise, formation cycles are removed. Moreover, some cy-cles of sudden rise or drop in discharge capacities are manuallyremoved. After data cleaning, each battery was stored in a dataformat consistent with BatteryML [50]."}, {"title": "A.2 Degradation Test Details", "content": "The data for the zinc-ion batteries were collected using custom-made coin batteries fabricated in the laboratory. The coin batteriesutilized stainless steel CR2032, CR2025 and CR2016 battery cases sourced from Guangdong Canrd New Energy Technology Co., Ltd.,paired with stainless steel spring washers with a height of 0.6 mmand stainless steel gaskets of 0.5 mm thickness, all sealed under apressure of 75 kg/cm\u00b2. The cathode material of the zinc battery wascommercial manganese dioxide cathodes purchased from Guang-dong Canrd New Energy Technology Co., Ltd. The anode materialconsisted of 99.99% pure zinc foil produced by a local manufacturer.The separator used was Glass Fiber-D. The electrolyte employedwas an aqueous solution of 2 mol/L zinc sulfate and 0.1 mol/Lmanganese sulfate, with various additives of different types andconcentrations. The battery tests were conducted at a current den-sity of 400 mA/m\u00b2 and evaluated at temperatures of 25\u00b0C, 30\u00b0C, and40\u00b0C.\nThe high-rate sodium-ion 18650 cylindrical batteries utilizedin this study were sourced from Zhuhai Punashidai New EnergyCo., Ltd., and were employed without any additional processing."}, {"title": "A.3 Overview of The Integrated Datasets", "content": "We briefly introduce the integrated datasets below:\n\u2022 CALCE [47]: This dataset consists of 13 prismatic lithium-ionbatteries, with LiCoO2 as the positive electrode and graphite asthe negative electrode, while the electrolyte is unknown. Thenominal capacity is 1.1 Ah. The working temperature of all batter-ies is 25 degree Celsius. 2 different protocols are included totallyin this dataset.\n\u2022 HNEI [6]: In this dataset, there are fourteen 18650-format lithium-ion batteries (LG Chem, ICR18650 C2) whose cathode is a mixtureof LiCoO2 and LiNi0.4C00.4Mn0.2O2, and the anode is graphite.The electrolyte composition is not disclosed, and the nominalcapacity is 2.8 Ah for all batteries. There are 2 different protocolswith a working temperature of 25 degree Celsius.\n\u2022 MATR [2, 31]: This dataset consists of 169 commercial Li-ionbatteries in a format of 18650 cylindrical batteries whose posi-tive electrode is lithium iron phosphate (LiFePO4), the negativeelectrode is graphite, and the electrolyte is unknown. The nomi-nal capacity of all batteries is 1.1 Ah. All batteries were cycled"}, {"title": "B FURTHER EXPERIMENTAL DETAILS", "content": "B.1 Further Details on Hyperparameters\nIn this subsection, we introduce in detail how we conducted thehyperparameter search. First, we split the data into training set,validation set, and testing set with a ratio of 6:2:2. For the Li-iondataset, we used random seed 2021 to partition the dataset. ForZn-ion, Na-ion, and CALB datasets, considering the much smallerdataset size, we randomly generated three different splits using 42,2021 and 2024 as the random seeds, respectively. For each model, wetried more than 20 different sets of hyperparameters and selectedthe hyperparameters that led to the lowest MAPE on the validationsets. The search ranges of hyperparameters are described as follows:batch size was chosen from [16, 32, 64, 128], learning rate wasselected from [5*10^-4, 5*10^-3, 1*10^-3], dropout rate was chosenfrom [0, 0.05, 0.1], and embedding dimension was selected from [32,64, 128, 256]. Additionally, for CyclePatch models, both the numberof intra-cycle encoder layers and the number of inter-cycle encoderlayers were tuned from 0 to 12. The number of CNN layers is tunedfrom 1 to 8.\nB.2 Implementation Details of Baselines\nIn this subsection, we introduce how we implement the baselinesin detail. First, the cycling data are resampled into X \\in R^{3 \\times 30000}according to the process introduced in Section 4.1. After that, thethree variables in each cycle are normalized without destroying the"}]}