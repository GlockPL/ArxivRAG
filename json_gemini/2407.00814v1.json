{"title": "Privacy-Aware Spectrum Pricing and Power Control Optimization for LEO Satellite Internet-of-Things", "authors": ["Bowen Shen", "Kwok-Yan Lam", "Feng Li"], "abstract": "Low earth orbit (LEO) satellite systems play an important role in next generation communication networks due to their ability to provide extensive global coverage with guaranteed communications in remote areas and isolated areas where base stations cannot be cost-efficiently deployed. With the pervasive adoption of LEO satellite systems, especially in the LEO Internet-of-Things (IoT) scenarios, their spectrum resource management requirements have become more complex as a result of massive service requests and high bandwidth demand from terrestrial terminals. For instance, when leasing the spectrum to terrestrial users and controlling the uplink transmit power, satellites collect user data for machine learning purposes, which usually are sensitive information such as location, budget and quality of service (QoS) requirement. To facilitate model training in LEO IoT while preserving the privacy of data, blockchain-driven federated learning (FL) is widely used by leveraging on a fully decentralized architecture. In this paper, we propose a hybrid spectrum pricing and power control framework for LEO IoT by combining blockchain technology and FL. We first design a local deep reinforcement learning algorithm for LEO satellite systems to learn a revenue-maximizing pricing and power control scheme. Then the agents collaborate to form a FL system. We also propose a reputation-based blockchain which is used in the global model aggregation phase of FL. Based on the reputation mechanism, a node is selected for each global training round to perform model aggregation and block generation, which can further enhance the decentralization of the network and guarantee the trust. Simulation tests are conducted to evaluate the performances of the proposed scheme. Our results show the efficiency of finding the maximum revenue scheme for LEO satellite systems while preserving the privacy of each agent. Lastly, we also compare several FL aggregation algorithms to better illustrate the performances of the scheme.", "sections": [{"title": "I. INTRODUCTION", "content": "FOR many regions such as oceans and deserts, which account for most of the earth's surface, it is not easy to deploy massive base stations (BSs) to support continuously upgrading wireless demands and massive Internet-of-Things (IoT) terminals [1], [2]. As the extension of terrestrial BSs, satellite communications especially low earth orbit (LEO) satellite communications have attracted many researchers' and practitioners' interest due to the advantage of highly global coverage and guaranteed communications [3]. Many satellite operators such as Starlink, OneWeb, Amazon and Boeing have launched or are planning to launch LEO satellite networks to cover millions of potential terrestrial terminals [4]-[6]. The low orbital altitude of the satellite makes the transmission delay shorter and the path loss smaller compared to geo-stationary earth orbit (GEO) satellites, and the constellation composed of multiple satellites can achieve global coverage. Besides, cellular communication, multiple access, point beam, frequency multiplexing and other technologies also provide the technical guarantee for LEO satellite communications.Sixth generation (6G) communications, which are built on the base of LEO satellite networks, will be driven by the surging artificial intelligence (AI), big data, and Internet of Everything (IoE) technologies. In this context, the mobile networks of 6G and beyond are expected to not only enhance the key performance indicators and quality of service (QoS) of 5G continuously but also introduce numerous novel technologies and use cases [7].\nWith the blooming terrestrial IoT applications in recent years, existing wireless resources can not meet the require-ments in many fields including vehicular communications, industrial automation, sensor networks, and public safety [8]-[11]. As the demand for spectrum resources and the number of massive user access increases rapidly, how to manage spectrum resources efficiently has become a key challenge for LEO satellite communication networks [12]. Many techniques including dynamic spectrum access (DSA), non-orthogonal multiple access (NOMA), cognitive radio (CR) and multiple spot beams have been proposed to alleviate the pressure on spectrum resource usage [13]-[16]. In most scenarios when using DSA, deep learning is applied to train a model for resource allocation [17]. Hence, satellites need to guarantee computing power for the model training. In [18], the authors combined the NOMA and orthogonal frequency division mul-tiplexing to improve spectrum efficiency. In the utilization of cognitive radio (CR), wireless communication systems adaptively adjust their transmitting parameters by sensing the current communication environment. This adaptive approach enables efficient utilization of spectrum resources [16]. The multiple spot beams technique can transfer a wide beam into multiple beams to increase the coverage gain of a satellite antenna, wherein interference between beams will affect the performance of the system [19].\nIn recent years, self-learning-based methods, especially deep reinforcement learning (DRL) have become a focus in the field of DSA and spectrum sensing [20]-[22]. Each user has a model that is regarded as Agent that continually updates its parameters during training. The Agent interacts with the com-munication environment to find the optimal scheme. In order to"}, {"title": "II. RELATED WORK", "content": "Many mathematical tools including Stackelberg game model have been widely explored to optimize spectrum resource utilization in satellite networks [26]\u2013[28]. In [26], the authors designed a multi-leader multi-follower Stackelberg game to achieve spectrum pricing. Seller operators, who are regarded as leaders, determine the pricing strategies based on the buying strategies of buyer operators who are regarded as followers. The authors defined the seller operations' revenue function as the income by providing bandwidth to buyer operators minus the service cost and charge for the primary node. And the buyer operations' revenue was expressed as an increasing function of the bought bandwidth. Then a Stackelberg game was formulated based on the two functions. In [27], the author formulated the problem of bandwidth pricing and allo-cation by employing a Stackelberg game-theoretic approach to model the interactions between spectrum providers and customers. Subsequently, the study analyzed the Stackelberg game equilibrium under two pricing strategies: uniform pricing and differential pricing. In the case of differential pricing, adjustments are made to individual customer prices based on various heterogeneous factors. In [28], game theory was used to model the wireless users' competition over shared spectrum. The author assumed that users who adjust a transmission power level to maximize their own utilities are players. And the utility of a player was evaluated based on the transmission rate.\nWith the increasing computing power of mobile devices, the deployment of machine learning-based algorithms in satel-lite resource allocation attracts more attention [29], [30]. Satya Chan at al. [29] proposed a low complexity power and frequency resource allocation method to minimize inter-component interference while maximizing user throughput. This work first used a pre-trained perception to classify the condition of the traffic demand and then employed a projection tool to minimize the traffic demand reduction. Finally, a pre-trained linear regression model was introduced to allocate bandwidths. The scheme has excellent performance while keeping the low complexity of the algorithm. In [30], consid-ering terrestrial users' limited battery capacity and each LEO satellite's computation capability, the authors trained a deep neural network model to minimize the total execution delay of terrestrial users.\nIn most satellite resource allocation scenarios, the complete information and environment conditions are generally difficult to get due to the dynamic environments. Hence, DRL has been adopted to address optimization problems in IoT networks. In [31], [32], the authors introduced the DRL methods in multibeam satellite systems for dynamic resource allocation. And multi-agent DRL scheme was proposed in [32] to better address the cooperative game problems. Recently, there have been some studies about federated DRL (FDRL) for further collaborations between nodes in satellite IoT [33]-[35]. In [33], the authors designed an adaptive FDRL scheme to find efficient task offloading and energy-saving policy considering the scenario of space-air-ground integrated edge computing. Considering the high communication costs and aggregation execution time, an asynchronous FL framework combined with a multi-agent asynchronous advantage actor-critic (A3C)-based joint device selection algorithm was proposed in [34]. The scheme allows the users to update and aggregate the local model parameters asynchronously instead of waiting for devices with low computation powers. Besides, due to the A3C-based algorithm, the federated execution time and learning accuracy loss are effectively minimized."}, {"title": "III. SYSTEM MODEL", "content": "A. Satellite Network Architecture\nThe spectrum pricing and sharing scheme in this paper is based on the LEO satellite IoT whose architecture is illustrated in Fig 1. It is assumed that the satellite payload is equipped with necessary modules such as multi-port amplifiers, flexible traveling wave tube amplifiers, etc. The scenario considered is that IoT nodes of terrestrial users are connected to LEO satellites through terrestrial cluster heads or BS. The terrestrial users carry transceivers compatible with both cellular and satellite data transmissions so that the cluster heads can communicate with the cluster members. LEO satellites share or lease their idle spectrum to terrestrial users directly or with the assistance of the GEO satellites to improve the utilization of the spectrum and increase their revenues. Each satellite has a terrestrial server for data computing and machine learning. Be-sides, these terrestrial servers are responsible for participating in FL for model training collaboration and a reputation-based blockchain due to the privacy preservation concern. During the process, based on the needs of the cluster members, the cluster head responds as a transaction agent to the spectrum pricing and power control scheme given by the LEO satellite. It is noted that seamless coverage of the terrestrial server by LEO satellite is significant to ensure timely transmission of model parameters. Inter-satellite links are utilized to establish connections both within and between satellite constellations, enabling LEO satellites to relay data. Additionally, some of these satellites are equipped with onboard processing and storage capabilities, facilitating satellite-borne computing.\nB. Interference Model\nAccording to the satellite network architecture in this paper, the multi-beam antenna technique is applied. In this case, the Earth's surface is considered as a plane and the satellites project the beam onto the Earth's surface [26]. Unlike the propagation characteristics of high-orbiting satellites, there are more LEO satellites and more low earth orbits, thus LEO satellites fly faster and cover a highly variable area. This makes the situation where most of the LEO satellites' projection cells are not under the mode of orthographic projection even more prominent. Similar to the current existing work [36], this paper considers the effect of the angle between the position of the selected user and the central line of the corresponding beam on the interference intensity. Thus, the angle $\\alpha$ describing the deviation angle between user (M, n) and cell center o can be expressed as\n$\\alpha = arccos(((d_s)^2 + (d_{Mn})^2 - 2R^2(1 - cos(d_{Mn}/R)))\\*(2dd_{Mn})^{-1})$\nwhere $d_s$ denotes the distance between the satellite and cell center, $d_{Mn}$ denotes the distance between satellite and user (M,n), R denotes the earth radius, $d_{un}$ denotes the distance between cell center o and user (M,n) as shown in Fig. 2. It is assumed that the idle spectrum of an LEO satellite is first divided into multiple channels by orthogonal frequency-division multiple access (OFDMA). Then each channel is leased to multiple users on the ground by time division multiple access (TDMA). Inter-cell interference should be considered. For the uplink channel, the receiving power at the satellite at time slot t from user n at cell M can be expressed as\n$P_t = \\frac{P_{n,t}g_{n,t}(\\theta_n)G_{M,t}(a_m)}{(4\\pi d_{n.t})^2 f_{n,t}(\\theta_n)}$\nwhere $P_{n,t}$ denotes the transmit power of satellite terminal $\\theta_n$ denotes the elevation angle from user (M, n) to the satellite system, $g_{n,t}(\\theta_n)$ denotes the antenna gain of user (M,n) at the direction $\\theta_n$, $a_m$ is the derivation angle form user (M, n) to the central line of cell M, $G_{M,t}(a_m)$ is the satellite antenna gain of cell M at the direction $a_m$, $d_{n,t}$ is the straight-line distance between the user (M,n) and the satellite system, $\\lambda$ denotes the wavelength, $f_{n,t}(\\theta_n)$ denotes the channel fading of user (M, n) at the direction $\\theta_n$.\nThe interference among the terrestrial cells can be given as\n$I_t = \\sum_{H=1}^k \\frac{P_{a,t}g_{a,t}(\\theta_n)G_{H,t}(\\theta_M)}{(4\\pi d_{a,t}/\\lambda)^2 f_{a,t}(\\theta_n)}\\mu_a \\rho^H$\nwhere $\\mu_a$ denotes the active factor of user a at cell H which is related to the user's service type. $\\rho^H$ is the polarization isolation factor between cell M and H.\nHence, the uplink Signal to Interference plus Noise Ratio (SINR) can be expressed as\n$SINR_t = \\frac{P_{n,t}g_{n,t}(\\theta_n)G_{M,t}(\\theta_M)c^2}{f_{n,t}(\\theta_n)d_{n,t}^2 I_t + \\sigma^2}$\nwhere $\\sigma^2$ denotes the power of noise.\nC. Security Threats\nFL is introduced in this paper for machine learning collabo-rations among LEO satellite nodes. However, the system needs to rely on a trusted central server for global model aggregation. Besides, due to the potential misuse of spectrum by terrestrial users and malicious behaviors of the satellites in the FL, LEO satellite IoT is still facing system security and privacy preservation issues. The following threats are considered in the system.\n1) Privacy Leakage and Global Model Tamping: A central server is vulnerable to attack and may collude with other parties.\n2) Malicious Terrestrial Users: A malicious terrestrial user may increase the uplink transmit power for a better QoS after leasing the spectrum.\n3) Malicious Satellite Nodes: A malicious satellite node may be fraudulent when transmitting the transaction data to the terrestrial server and may advertise fraudulent spectrum leasing services when they can not provide enough available spectrum.\nIn this paper, we propose a reputation-based blockchain combining FL to address the threats.\nD. Problem Formulation\nIn LEO satellite IoT communication systems, satellites need to dynamically price spectrum based on the budgets of terrestrial users for spectrum resource leasing. This paper aims to maximize the benefits of LEO satellites while optimizing"}, {"title": "IV. FRAMEWORK OF PRIVACY-AWARE SPECTRUM PRICING AND POWER CONTROL", "content": "In this paper, we propose a privacy-aware spectrum pricing and power control scheme to facilitate spectrum resource management in the LEO satellite IoT. The scheme can be divided into three phases namely spectrum leasing and local training phase, blockchain-driven federated aggregation phase and global model release phase. The whole process is pre-sented in Sec. IV-A. The modelings of the utility function and reinforcement learning environment are introduced in Sec. IV-B and Sec. IV-C respectively. And we present the details of blockchain-driven federated aggregation in Sec. IV-D.\nA. Whole Process\nThe whole process of the scheme and the proposed frame-work is as follows.\nSpectrum Leasing and Local Training Phase: The opera-tions in a local training round are presented in Fig. 3. Satellites are ready to lease their idle spectrum and set an initial price and initial uplink transmit power limit at first. Then, the satel-lite broadcasts the price and power control information to the terrestrial users (Label 1 in Fig. 3). After that, terrestrial users communicate with the satellites and decide to lease a certain spectrum (Label 2 in Fig. 3). After each round of trading, satellites transmit the collected trading information to their terrestrial servers for local DRL (Label 3 in Fig. 3) and update their reputation records based on terrestrial users' behaviors. In addition, the servers record part of the trading information, verify the satellites' reputation records and send the local model to the Private Permissioned Blockchain network (Label 4 in Fig. 4) in preparation for the blockchain-driven federated aggregation in the next phase. After receiving the new global model (Label 5 in Fig. 3), servers transmit the new spectrum pricing and power control levels back to the satellite (Label 6 in Fig. 6).\nBlockchain-driven Federated Aggregation Phase: After sev-eral rounds of local training, each terrestrial server broadcasts the trading record in the Private Permissioned Blockchain network. The server with the highest reputation record aggre-gates the global model and performs the records package and block generation for the federated aggregation round. Then, the server gets a reward for the contribution and puts its reputation record to 0.\nGlobal Model Release Phase: The server broadcasts the global model and each server starts the next round of training based on the global model.\nB. Modeling of Utility Function\nThroughout the process of leasing spectrum between ter-restrial users and LEO satellites, LEO satellites price their idle spectrum and terrestrial users select spectrum to lease according to their required QoS. Specifically, to maximize their benefits, LEO satellites need to set the appropriate price for the spectrum. Whether a terrestrial user chooses to lease a certain spectrum and the amount of the satellite's revenue after leasing depends on the user's budget for spectrum leasing,"}, {"title": "C. Modeling of Reinforcement Learning Environment", "content": "In the process of spectrum leasing between LEO satellite IoT systems and terrestrial users, the price of spectrum is influenced by both the state of the satellites themselves and the conditions available to terrestrial users. Specifically, the idle spectrum's status and uplink transmit power control status of the satellite, the terrestrial users' budgets for the leased spectrum and the interference after leasing the spectrum are all significant factors affecting the pricing of the satellite spectrum. However, such transaction information shared in the LEO satellite system is extremely limited due to the concerns for privacy preservation, which leads to unsatisfactory benefits of idle spectrum leasing at the satellite side, and large devia-tions in the QoS obtained by users at the terrestrial user side. For example, all the users in a cell do not have information about the number of users and their locations at the final leasing stage of the LEO satellite idle spectrum. This means that the final interference is also uncertain, which leads to variations in the QoS. Also, due to the uncertainty of the interference, terrestrial users tend to be conservative in their bids, making the satellite pricing of the idle spectrum lower than the benefit-maximizing price. Therefore, we introduce the DDQN, a model-free algorithm to find the optimal solution, where each LEO satellite performs as an agent. The framework of DDQN is illustrated in Fig. 4.\nWe first formulate the process of LEO satellite spectrum pricing and power control as a Markov decision process (MDP) consisting of four parts: agent state space, action space, policy and reward function. Each agent continuously interacts with the environment while continuously changing its own policy to maximize reward. The specific details of the four elements are as follows.\n\u2022 State: The state of the agent at time slot t can be described as\n$S_t^m = [p_t^m, u_t^m, i_t^m,\\iota_t^m]$\nwhere $p_t^m$ denotes the pricing of idle spectrum by satellite"}, {"title": "D. Blockchain-driven Federated Aggregation", "content": "When satellites lease their idle spectrum to terrestrial users, the security of some users' information and satellites' infor-mation could be an important issue. To improve the model training efficiency while protecting sensitive information, FL is introduced to the satellite IoT in this paper. In the satellite IoT, the data owned by individual devices is limited due to the coverage area and time, and these data can not be shared among devices to better improve the efficiency of dynamic spectrum pricing and trading because of the sensitivity of the transaction information involved. Instead of obtaining the original sensitive data, FL aggregates the local training model parameters of each user to form a global model and sends it to each user, which is an effective improvement in the related issue. However, in traditional FL, centralized global model aggregation remains a threat to the privacy-preserving of local devices. If the server aggregating the global model is malicious or the server is attacked, the spectrum pricing and spectrum trading of the whole IoT system will be paralyzed. Thus, based on the feature of LEO satellite IoT communicating and transacting with terrestrial users, this paper proposes a reputation-based blockchain to provide decentralized global model aggregation and permission for users to join the IoT, instead of using a vulnerable central server.\nAs shown in Fig. 5, the network of Reputation-based Blockchain involves several components.\n\u2022 Satellite: Satellite provides the idle spectrum to terrestrial users and trains the local DDQN model to search the optimal spectrum price and power control.\n\u2022 Terrestrial users: Terrestrial users are the spectrum de-manders. They decide whether to lease the idle spectrum provided by a certain satellite based on their budget and requirements for spectrum quality.\n\u2022 Reputation token: Each satellite that is a member of a private permissioned blockchain network has a reputa-tion token record. The reputation token record of each satellite changes for each round of dynamic spectrum access by terrestrial users. If there are no users with malicious behavior in this access round, the number of reputation tokens for that satellite is the original number of reputation tokens plus the newly acquired reputation tokens. Instead, if there is a malicious user in this access round, the number of reputation tokens for the satellite is the original number of reputation tokens minus the penalty incurred for the malicious user. The reputation record of a satellite can be expressed as\n$Rep_t^m = \\begin{cases} Rep_{t-1}^m + V_{acc} & \\text{no malicious users} \\\\ Rep_{t-1}^m - v_{mal} & \\text{malicious users appear} \\end{cases}$\nwhere $Rep_t^m$ denotes the reputation token, $V_{acc}$ denotes the newly acquired reputation token based on the situation that no malicious users appear and $V_{mal}$ denotes the newly lost reputation token based on the situation that malicious users appear respectively. Then $V_{acc}$ and $V_{mal}$ can be expressed as\n$V_{acc} = p l_t^m N_{acc}^{pow,t}$\n$v_{mal} = p l_t^m N_{mal}^{pow,t}$\nwhere $\\rho$ denotes the reputation coefficient, $l_t^m$ denotes the power control level of the satellite, $N_{norm}^{pow,t}$ denotes the number of normal users whose transmit power is lower than $l_t^m$, $n_{malt}^{pow,t}$ denotes the number of malicious users. The malicious behavior of ground users is as follows. 1) The number of terrestrial users accessing the spectrum exceeds the limit. 2) Terrestrial users accessing the satel-lite's spectrum without meeting the required power level. 3) Terrestrial users access the spectrum for too long or too short a period of time based on the spectrum lease contract.\n\u2022 Edge node: Edge node is responsible for verifying trans-action users, conducting spectrum transactions and saving transaction records. Each terrestrial user pays money to the satellite through the edge node."}, {"title": "V. NUMERICAL RESULTS", "content": "In this section, simulations are conducted to present the performance of the scheme.\nA. Simulation Settings\nWe generated 1000 terrestrial users who were interested in purchasing the LEO satellite spectrum. Each user randomly generated its own spectrum trading budget within the budget scale and access power requirements. Each LEO satellite runs a DRL agent with a two-layer neural network locally. Besides, we set the learning rate l as 0.001, number of LEO satellite DRL agents as 4, probability e as 0.2, batch size as 16, number of terrestrial users as 1000, budget scale of terrestrial user as 30 and discount factor $\\gamma$ as 0.95. The parameter is shown in TABLE I.\nB. Case Study\nIn Fig. 6, Fig. 7 and Fig. 8, we simulated the pricing and power control for 4 agents in 1000 iterations. In this simulation, the global model aggregation algorithm is FedAvg. Fig. 5 shows the pricing and power control. Fig. 6 and Fig. 7 show the Rewards and Utility of the satellite. We can see that in the first iterations, the power control and pricing of the 4 agents are in the process of oscillation. At about 400 iterations, agent 1 and agent 2 first start to converge. Then, agent 3 and agent 4 start to converge after about 550 and 700 iterations, respectively. After about 800 iterations, all 4 agents can find the optimal pricing and power control scheme for the current situation. Note that the performance of agent 3 and agent 4 suddenly improves during the iterations. This is due to the collaborative training of these agents. Specifically, During"}, {"title": "VI. CONCLUSION", "content": "In this paper, we consider the effective spectrum pricing and uplink transmit power control scheme for LEO satellite IoT. We first formulate a reinforcement problem based on the satellite communications features to maximize the benefits of leasing spectrum and power control. Next, a locally trained DRL-based scheme is proposed for satellites to find the optimal policy. Then, we further introduce a blockchain-driven FL framework to enhance the training collaboration while keeping the system distributed throughout the whole process to guarantee the security of local private information. We also conduct simulations to present the pricing and power control performances of agents that participate in the FL and compare the performance of the learning-based scheme and the non-learning-based scheme. Numerical results show the efficiency of the spectrum pricing and power control strategy proposed in this paper. In the process of LEO satellite idle spectrum leasing, terrestrial users may move to another area while still leasing the previous spectrum or there may be a sudden surge or decrease of users in that area after leasing a certain spectrum. In this case, such problems may arise: 1) The QoS obtained by the LEO satellite at this time may vary, such as changes in interference and power attenuation due to different numbers of accesses and distance values. 2) The latest price of that spectrum may fluctuate. Therefore, in our future work, we will focus on the spectrum allocation in a receptive and timely manner while maintaining the pricing in an acceptable range."}]}