{"title": "MCPDial: A Minecraft Persona-driven Dialogue Dataset", "authors": ["Seyed Hossein Alavi", "Sudha Rao", "Ashutosh Adhikari", "Gabriel DesGarennes", "AkankshaMalhotra", "Chris Brockett", "Mahmoud Adada", "Raymond Ng", "Vered Shwartz", "Bill Dolan"], "abstract": "We propose a novel approach that uses large language models (LLMs) to generate persona-driven conversations between Players and Non-Player Characters (NPC) in games. Showcasing the application of our methodology, we introduce the Minecraft Persona-driven Dialogue dataset (MCPDial). Starting with a small seed of expert-written conversations, we employ our method to generate hundreds of additional conversations. Each conversation in the dataset includes rich character descriptions of the player and NPC. The conversations are long, allowing for in-depth and extensive interactions between the player and NPC. MCPDial extends beyond basic conversations by incorporating canonical function calls (e.g. \"Call find a resource on iron ore\") between the utterances. Finally, we conduct a qualitative analysis of the dataset to assess its quality and characteristics.", "sections": [{"title": "1 Introduction", "content": "Natural language generation vastly improved in recent years thanks to large language models (LLMs; Radford et al., 2019; Brown et al., 2020), benefiting NLP applications across the board, such as text summarization, machine translation, and dialogue systems. Trained on web texts, LLMs are proficient in generating generic texts about various topics, but they lack a consistent \u201cpersonality\". Many applications can benefit from tailoring the output to the user's intent (Dudy et al., 2021), cultural background (Hershcovich et al., 2022), gender (Rabinovich et al., 2017), and more.\nIn this paper, we focus on persona-driven dialogue generation, where the generated conversation is consistent with a given character description (Li et al., 2016; Zheng et al., 2020). Persona-driven dialogue generation is especially relevant for video games, where players interact with Non-Player Characters (NPCs) that have different roles, backgrounds, and motivations. Nevertheless, the availability of high-quality dialogue datasets with a persona-driven focus is currently limited, especially within the context of video games.\nWe propose a novel approach that uses LLMS to generate persona-driven conversations between Players and NPCs in games. Our approach leverages the power of LLMs to generate fluent and coherent conversations that follow the persona descriptions, while also incorporating game-specific function calls to increase interactivity.\nTo demonstrate the effectiveness and versatility of our approach, we apply it to Minecraft, a popular sandbox video game (Persson and Bergensten, 2011), and introduce the MCPDial dataset (Minecraft Persona-driven Dialogue). Human evaluation shows that MCPDial consists of high-quality conversations in terms of fluency, persona consistency, and function call accuracy."}, {"title": "2 Background", "content": ""}, {"title": "2.1 Persona-Driven Dialogue Generation", "content": "Previous work on persona-driven dialogue generation has mainly focused on two aspects: how to model the personas of the dialogue agents and how to generate responses that are consistent with the persona. For the first aspect, earlier work learned persona embeddings from the dialogue history (Li et al., 2016), while more recent work leverages explicit persona descriptions (Qian et al., 2018; Majumder et al., 2020; Huang et al., 2023). With respect to the second aspect, persona descriptions may be used to verify the consistency of the generated response (Song et al., 2021), or incorporated into the model and then conditioned on, with a neural memory (Xu et al., 2022a), or encoded using a separate encoder (Huang et al., 2023).\nThe recent success of LLMs in persona-driven dialogue generation is mostly on simple conversations, while in this work, we address the challenge of generating persona-driven dialogues in games. Games provide complex and interactive scenarios where the dialogue agents need to perform various tasks and functions besides chatting."}, {"title": "2.2 Persona Focused Datasets", "content": "Previous research efforts focused on datasets for open-ended persona-driven dialogues (\"chit chat\"). PersonaChat (Zhang et al., 2018) consists of chit chat conversations between 1k different personas. The dataset was the basis for the ConvAI2 NeurIPS competition (Dinan et al., 2019). Mazar\u00e9 et al. (2018) released a similar, larger-scale dataset extracted from Reddit, covering 5 million personas. MSC (Xu et al., 2022b) consists of multiple chat sessions between crowdsourcing workers, where participants learn about each other's interests and discuss knowledge acquired from past sessions. They showed that existing models trained on short conversations are limited in their performance in long conversations.\nOur dataset MCPDial similarly focuses on long conversations. In addition, differently from most prior work, the conversations in MCPDial are not open ended, but instead are grounded in a game environment."}, {"title": "3 MCPDial", "content": "We present the creation process of MCPDial. We first collected a small number of gold-standard persona descriptions and conversations (Section 3.1). Then, we augmented the data by generating additional instances using LLMs (Section 3.2)."}, {"title": "3.1 Gold Data Collection Process", "content": "Persona Descriptions. We collected 250 Minecraft NPC persona descriptions from trained annotators. These personas offer a more comprehensive description beyond mere attributes like politeness or helpfulness. In some cases, the personas include embedded tasks. For instance, an NPC might offer a reward upon completion of a specific task.\nWe then tasked the annotators with crafting player personas corresponding to the provided NPC personas. These personas offer a distinct perspective, representing a player interacting with the NPC without any prior knowledge of the NPC personas. To enhance the diversity of our dataset, we collected 3 player personas for each NPC persona. The player personas include their level of proficiency in Minecraft, which is categorized into beginner, intermediate, and expert."}, {"title": "3.2 Conversation Generation", "content": "Figure 2 provides an overview of our data augmentation method for generating high-quality persona-driven conversations between NPC and players based on their persona descriptions. The method consists of the following steps. For a given pair of persona descriptions, we first find the most relevant conversations from the gold dataset (Section 3.2.1). These conversations are used as in-context examples for the LLM which is then tasked with generating the utterances (Section 3.2.2) and function calls (Section 3.2.3). We decided to use the GPT3.5 model for our experiments."}, {"title": "3.2.1 In Context Examples", "content": "To ensure the LLM receives the most relevant and helpful in-context example conversations from our gold dataset, we embedded the persona descriptions with sentence transformers (Reimers and Gurevych, 2019) and identified the most similar k = 2 examples in the gold dataset."}, {"title": "3.2.2 Utterance Generation", "content": "In all conversations in our dataset, the player initiates and concludes the conversation. We start by generating the first utterance conditioned on the player persona. The prompt, exemplified in Table 2, consists of the few-shot example conversations obtained in Sec 3.2.1, followed by instructions to generate the player's utterance and the player persona. The prompt ends with \"Player:\" to guide the model to generate the utterance. To ensure the model understands which utterances are generated by the player, we replace the player utterance tag (e.g., \"Dan:\" in Figure 1) with \"Player:\u201d. We iteratively generate the player's utterance and the NPC utterance. In subsequent turns, we include the conversation history. The conversation ends if on the player's turn the LM generated \"***end conversation***\u201d. Alternatively, we stop gener-"}, {"title": "3.2.3 Function call Generation", "content": "Although function calls appear in the middle of the conversation, we generate them as a post-processing step that inserts function calls between player and NPC utterances. This approach allows us to generate accurate function calls without compromising the natural conversation flow.\nAppendix A.2 provides an example prompt for generating function calls. Unlike previous steps, we provide the model with a small window of the 5 previously logged utterances from the conversation history (including function calls) and a placeholder for the target function call inbetween the last player and NPC utterances. The instructions include 26 examples of function calls from the gold dataset. We stop the generation if the model generated \u201cPlayer:\" or \"NPC:\". In contrast to utterance generation, we specifically set the temperature to 0 in order to constrain the LLM to generate one of our predefined function calls.\nMCPDial comprises 250 NPC personas, 750 player personas, 49 human-written conversations and 220 automatically-generated conversations. The average length of conversations is 15 turns (excluding function calls), and the average utterance length is 21 words. The player personas, on average, consist of 41 words, while the NPC personas have an average length of around 42 words."}, {"title": "4 Evaluation", "content": "To evaluate the quality of the automatically-generated conversations, we asked 3 expert annotators to rate the following aspects of conversations on a scale of 1 to 5 (a higher rating indicating better quality):\n\u2460 Player Persona: The conversation is effective in representing the player's characteristics and behaviors.\n\u2461 NPC Persona: The conversation is effective in representing the NPC characteristics and behaviors.\n\u2462 Function Calls: The function calls are appropriate and adequately support the flow and progression of the conversation.\n4 Overall Conversation Flow and Quality: The conversation is coherent and the dialogue is meaningful.\nWe sampled 60 conversations. Each annotator evaluated 30 conversations, with a 15 conversation overlap between every pair of annotators. The average pairwise Cohen's kappa inter-annotator agreement was 0.42, and the average absolute differences between scores given by multiple annotators were 0.96 for player persona, 0.6 for NPC persona, 0.83 for function calls, and 1.13 for overall conversation flow and quality. Table 3 shows the average scores across conversations. The high scores across criteria indicate that the conversations in MCPDial are coherent and adequately represent the persona, and the use of function calls is appropriate."}, {"title": "5 Conclusion", "content": "We introduced MCPDial, a persona-driven dialogue dataset for Minecraft. Each example in the dataset includes complex human-written player and NPC personas and a conversation between them. These conversations incorporate natural language utterances, as well as canonical function calls representing game APIs. We collected 49 conversations from experts, and proposed an LM-based approach to extend the dataset, generating over 200 additional conversations. Human evaluation confirmed that the overall quality of the generated conversations is high, that they are consistent with the NPC and player personas, and that function calls were used appropriately. We believe that the MCPDial dataset and the proposed approach offer valuable resources for dialogue system research in gaming. They enable the creation of immersive interactions between players and NPCs, enhancing user experiences in Minecraft and beyond."}, {"title": "Limitations", "content": "One limitation of our dataset is the relatively small number (49) of human-written conversations. This limited size may impact the diversity of the dataset, potentially constraining the coverage of various conversation topics and scenarios. Additionally, there is an imbalance between the number of automatically generated conversations (220 instances) and the human-written conversations. This imbalance may introduce biases and discrepancies in the quality and naturalness of the generated conversations compared to the human-written counterparts. To address this limitation, we have taken steps to mitigate the impact by releasing the human-written conversations separately. This allows researchers and developers to have access to these high-quality human-written instances, enabling them to make informed decisions when using our dataset."}, {"title": "Ethical Statement", "content": "Bias. A big part of our dataset is generated by LMs. It is important to note that LMs have the potential to generate biased, offensive or harmful content in response to certain prompts. In order to mitigate this risk, the authors of this paper carefully evaluated the narratives to ensure they are free from such content. The authors also thoroughly reviewed the written personas and conversations to ensure the absence of offensive content and sensitive information, and guarantee their adherence solely to the Minecraft game context.\nCompensation. The expert annotators were compensated at an hourly rate of 20 USD, which exceeds the minimum wage in the United States. The human evaluation was conducted by the authors of this paper."}, {"title": "A Appendices", "content": ""}, {"title": "A.1 NPC Utterance Prompt", "content": "Table 4 shows an example prompt for generating the NPC's responses."}, {"title": "A.2 Function Call Generation Prompt", "content": "Table 5 shows an example function call generation prompt."}, {"title": "A.3 List of all Function Calls", "content": "Table 6 shows all the function calls in MCPDial."}]}