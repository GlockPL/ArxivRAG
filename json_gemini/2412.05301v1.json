{"title": "DocEDA: Automated Extraction and Design of Analog Circuits from Documents with Large Language Model", "authors": ["Hong Cai Chen", "Longchang Wu", "Ming Gao", "Lingrui Shen", "Jiarui Zhong", "Yipin Xu"], "abstract": "Efficient and accurate extraction of electrical parameters from circuit datasheets and design documents is critical for accelerating circuit design in Electronic Design Automation (EDA). Traditional workflows often rely on engineers manually searching and extracting these parameters, which is time-consuming, and prone to human error. To address these challenges, we introduce DocEDA, an automated system that leverages advanced computer vision techniques and Large Language Models (LLMs) to extract electrical parameters seamlessly from documents. The layout analysis model specifically designed for datasheet is proposed to classify documents into circuit-related parts. Utilizing the inherent Chain-of-Thought reasoning capabilities of LLMs, DocEDA automates the extraction of electronic component parameters from documents. For circuit diagrams parsing, an improved GAM-YOLO model is hybrid with topology identification to transform diagrams into circuit netlists. Then, a space mapping enhanced optimization framework is evoked for optimization the layout in the document. Experimental evaluations demonstrate that DocEDA significantly enhances the efficiency of processing circuit design documents and the accuracy of electrical parameter extraction. It exhibits adaptability to various circuit design scenarios and document formats, offering a novel solution for EDA with the potential to transform traditional methodologies.", "sections": [{"title": "I. INTRODUCTION", "content": "The rapid advancement of Electronic Design Automation (EDA) has drastically transformed how engineers design and simulate complex electronic circuits [1,2]. A crucial challenge within this domain is the accurate and efficient extraction of electrical parameters from circuit datasheets and design documents [3]. Historically, this process has been performed manually, which is both time-consuming and prone to human error. As circuit designs become increasingly sophisticated, the need for automated solutions that enhance both the speed and accuracy of data extraction has grown significantly.\nTo address these challenges, we introduce DocEDA, a novel automated system that leverages cutting-edge artificial intelligence techniques to streamline the extraction of critical electrical parameters from a wide array of circuit documentation and optimizing the circuit. DocEDA integrates the capabilities of advanced computer vision methods and Large Language Models (LLMs) to significantly enhance the efficiency of traditional workflows. The system contains five key parts:\n1) Document Layout Analysis: We propose a specialized layout analysis model that effectively dissects circuit datasheets and technical documents into distinct sections, including parameters, circuit diagrams, performance curves, etc. This enables the precise extraction of relevant information, forming the foundation for subsequent tasks.\n2) Parameter Extraction Using CoT: By harnessing the Chain-of-Thought reasoning capabilities of LLMs, DocEDA automates the extraction of critical component parameters from both textual and tabular formats. Our approach integrates document retrieval, iterative refinement, and dynamic preference optimization, providing accurate and structured data for circuit simulation.\n3) Database: The database stores structured electronic component and circuit design data derived from document layout parsing and parameter extraction. The designed data structure enables rapid query and design optimization, while the structured content within this database provides substantial data for training other models.\n4) Circuit Diagram Analysis: This model combines component recognition with topology recognition enabling the system to accurately extract circuit topologies and generate standard-compliant netlists, a vital component for seamless integration with circuit simulation tools.\n5) Circuit Layout Optimization: The system incorporates a dynamic optimization framework that refines circuit layouts, beginning with an initial schematic and evolving towards an optimized layout design. By applying space mapping, EM simulations are replaced with schematic simulations which significantly reduce the optimization time.\nDocEDA adapts to various circuit design scenarios and document formats, offering an innovative solution for electronic design automation with the potential to transform traditional methodologies. In the following sections, we will provide a detailed overview of these five key models."}, {"title": "II. THE PROPOSED DOCEDA FRAMEWORK", "content": "The architecture of our DocEDA is shown in Fig. 1. Initially, it employs a specialized document layout analysis model to classify and segment input circuit datasheets and technical documents into sections like model numbers, tables, parameters, circuit diagrams, and performance curves, laying the groundwork for parameter extraction and circuit design. DocEDA then leverages the Chain-of-Thought reasoning capabilities of Large Language Models (LLMs) to automatically extract key component parameters from these sections. Accurately identifying parameters in both text and tables, the system generates structured data stored in a comprehensive database of electronic components and circuit information. This database supports subsequent circuit design and simulation and aids in training large models to enhance system performance. Next, using an improved GAM-YOLO model combined with topology recognition techniques, it precisely extracts the circuit's topological structure. By integrating the circuit diagrams with the extracted parameters, it generates standard-compliant netlists for circuit simulation tools. Finally, a dynamic optimization framework is introduced to iteratively refine the circuit design. Utilizing the initial schematic, generated netlists, and parameter data, the system enhances the layout through a Bayesian optimization and space-mapping method to obtain an optimized layout design efficiently. This workflow significantly improves the efficiency of processing circuit design documents, reducing reliance on manual intervention."}, {"title": "III. METHODOLOGY", "content": ""}, {"title": "A. Document Layout Analysis", "content": "The existing document parsing models, such as LayoutLM [4], Dit [5], etc., has limited capacity to analyze the specific characteristics of the document related to electronic components and circuit design. Parsing electronic component documentation is complex due to the vast number of components, and their varying attributes like shape, size, color, and markings. The documents are packed with model numbers, parameters, specs, and functions, often presented in various formats including text, symbols, and tables. To address this limitation, this paper proposes the EDocNet model [6] specifically designed for electronic datasheets and design documents.\nThe EDocNet model is based on a multi-layer depthwise convolutional neural network. It is trained using both focal and global distillation techniques to enhance its ability to capture fine-grained details and global patterns, thereby improving the accuracy of document feature extraction. To meet the specific parsing needs of electronic device documentation, we developed a specialized dataset containing 21 categories, enabling the model to precisely recognize and classify various types of information within these documents. As the network structure shown in Fig. 2, EDocNet employs deep separation convolution to reduce convolution computation and introduces the SE module (Squeeze and Excitation) to enhance feature representation capability. Additionally, lightweight activation function H-swish and optimized network structure are used, allowing EDocNet to achieve a good balance between speed and accuracy.\nIn the model training, the FGD method is used, which is a knowledge distillation method combining local and global information to improve the feature learning ability of neural networks. Focus distillation enhances understanding of local details by directing student models to focus on key regions or fine-grained features in the input data; Global distillation, on the other hand, helps models capture broader context information and ensures global consistency. This dual strategy not only guarantees the local accuracy, but also enhances the overall feature representation ability of the model, which is especially suitable for tasks that need to pay attention to details and global structure at the same time."}, {"title": "B. Parameter Extraction Using CoT", "content": "During the Layout Analysis phase of circuit technical documentation, the document is segmented into several circuit related contents. These modules are represented in three main formats: text, tables, and images. The subsequent task is to extract relevant technical parameters and key data from these information types to support further analysis. To achieve this, we apply a Chain of Thought approach [7], utilizing large language models (LLMs) to guide the efficient extraction of parameters from the document. This section introduces two key methods\u2014Iterative Refinement Optimization (IRO) and Priority Ordering (PO). These methods work in tandem to enhance the search and extraction process, improving both accuracy and efficiency. Specifically, IRO iteratively refines the search strategy to pinpoint relevant parameters with increasing precision, while PO prioritizes text blocks, enabling the model to focus on the most pertinent information. Together, these methods provide an effective solution for extracting technical parameters from complex document structures. The following sections will detail their implementation and advantages."}, {"title": "Iterative Retrieval Optimization (IRO)", "content": "Traditional retrieval methods often fall short due to the semantic gap between the user's query and the required knowledge [8]. IRO addresses this challenge by iteratively alternating between retrieval and generation processes, progressively narrowing this gap, and improving parameter extraction accuracy. In each iteration, the model leverages the output from the previous generation step, combining it with the original query to refine the retrieval process. Specifically, given a user query q and a corpus D = {d}, the IRO method performs the following steps in the t-th iteration:\n(1) Retrieval Stage: Concatenate the previous output Yt-1 with the query q to form a new query. Use this to retrieve relevant documents from the corpus D, resulting in a retrieval set Dyt-1||q.\n(2) Generation Stage: Utilize an LLM M to generate a new output yt based on the retrieved documents Dyt-1||q and the original query q.\nThis iterative process is formalized as:\n$Yt = M(y_t|prompt(D_{yt-1}llq, q), 1<t<T$                                                                                                                                            (1)\nwhere T is the maximum number of iterations, and yr is the final output provided by the model [9]. Fig. 3 depicts the IRO workflow, illustrating how each iteration refines the retrieval and generation processes."}, {"title": "The Priority Ordering (PO)", "content": "method aims to enhance the parameter extraction within circuit research papers by defining the priority of knowledge blocks obtained from the preliminary layout recognition. Through structured analysis, the model is able to identify and label different knowledge blocks, such as \"Abstract,\" \"Introduction,\" \"Circuit Design,\" \"Measurement Results,\" and \"Simulation Results.\" These knowledge blocks form a hierarchical structure that provides a clear path for subsequent searches. Leveraging expert knowledge of typical parameter locations, the system assigns varying priority levels to each knowledge block. For example, critical modeling parameters are often concisely recorded in the \"Abstract\", thus this section is assigned the highest priority. By applying constraint optimization theory, the search process is primarily conducted within high-priority sections, and consider lower-priority sections only when necessary."}, {"title": "C. Database", "content": "The database is designed to comprehensively store and manage structured data parsed from electronic design documents, meeting the needs of electrical parameter extraction, document layout analysis, and large model training. The database comprises multiple tables to store different types of critical data.\nThe Document Information Table records the essential metadata for each circuit document, including document ID, source, and parsing status, etc., enabling the management and tracking of all documents. For extracted parameters, the database includes a Parameter Table, which stores each parameter's name, value, unit, and other details, ensuring that these data can be efficiently referenced in subsequent analyses. The Layout Information Table accurately categorizes document layouts, recording the category (e.g., model number, table, circuit diagram, performance curve) and precise location within the document (page number and coordinates). The Circuit Topology Table is dedicated to storing the parsed results of circuit diagrams, including node, component list, connection, and generated netlist, enabling seamless integration with simulation tools. The Image Data Table stores all image data within documents, including image type, annotated region coordinates, captions, etc., making it suitable for further analysis. Finally, the Label Table records label content associated with various layout elements, assisting the model in associating labels with document content.\nThe relationships among these tables ensure that document information, parameter data, layout information, images, and labels are efficiently managed within the system, facilitating quick queries, parameter substitutions, circuit design optimization, and providing rich structured data support for model training. This enhances the overall efficiency of data management and analysis."}, {"title": "D. Image-to-Circuit Process", "content": "The circuit diagram obtained from documents are in the image form. To use them in circuit design, it is preferred transform them into circuit netlists. This transformation process consists of two main steps: circuit component recognition and circuit topology recognition. The overall method is described in Fig. 6."}, {"title": "(1) Circuit component recognition", "content": "This paper proposed GAM-YOLO [10], an enhanced Attentional YOLOv8 model tailored for circuit component recognition. YOLOv8 [11], a state-of-the-art (SOTA) object detection model, is composed of three main architectural components: the backbone, the neck, and the head. To improve the detection of components within circuit diagrams, which display unique foreground and spatial features, GAM-YOLO incorporates the Global Attention Module (GAM) [12] between the neck and the head of the YOLOv8 network. The GAM mechanism effectively combines channel and spatial attention, allows the network to weight or adjust the feature maps before generating bounding boxes and class predictions, thereby enhancing the feature representation of the regions of interest. thereby enhancing the model's ability to recognize circuit components. By doing so, the method can enhance the network's ability to detect circuit components under complex scenes and small targets."}, {"title": "(2) Circuit topology recognition", "content": "Circuit topology recognition involves two main stages: gray-scaling and binarization. For light-background circuit diagrams, Otsu's method is preferred for binarization as it effectively removes scattered points and grid-like backgrounds without introducing noise, which is more efficient than the triangle method. In contrast, for dark-background diagrams, the triangle method is more appropriate for binarization as it preserves dark wire details, with any noise being manageable through post-processing.\nAfter preprocessing, a two-step connected domain filtering algorithm is applied to extract net information vital for determining circuit topology. The first step filters out small connectivity domains, typically less than 10% of the image's total pixel count, removing text and noise while retaining the main circuit components. The second step refines this by integrating component location data, discarding any connectivity domains that do not intersect with the predicted bounding boxes of components. The remaining connectivity domains represent the circuit's nets.\nAfter the extraction of both component and net information from the circuit diagram, intersection detection can establish the topological relationships within the circuit. This method provides a detailed understanding of the circuit's structure, which is crucial for subsequent analysis and design processes."}, {"title": "E. Circuit Layout Optimization", "content": "After obtaining circuit netlist and parameters, the circuit can be automatically simulated and optimized. As layout optimization requires time-consuming EM simulations, the optimization should be designed with least EM simulations. The circuit diagram optimization framework, as depicted in Fig. 7, accepts the initial circuit schematic as input and automatically yields an optimized layout suitable for chip fabrication. This approach employs Implicit Space Mapping (ISM) for iterative optimization, where each iteration involves a coarse model representing the schematic and a fine model representing the layout [13]. Both the coarse and fine models incorporate the same design parameters xc, with the coarse model also including additional auxiliary parameters xa. The initial schematic serves as the coarse model for the first iteration. The process of the i-th ISM iteration are as follows:\nAll auxiliary parameters xa(i) are fixed and the coarse model is optimized for optimal response to obtain the parameters xx(i) and the response F(i), based on Eq. (1). Then, based on xx(i), generate the circuit layout and perform layout simulation to obtain the fine model response Ff(i).\n$x_c^*(i) = arg min_{x_c} F(x_c, x_a(i))$ (1)\nThen, with all design parameters xx(i) fixed, the auxiliary parameters xa in the schematic are adjusted so that response deviation of two models converges to zero based on Eq. (2), resulting in refreshment of xa (i + 1) in coarse model.\n$x_a(i + 1) = arg min_{x_a} |F(x_c(i), x_a) - F_f (x_f(i))$ (2)\nAfter a few iterations, the responses of the coarse model and the fine model are consistent. Since the coarse model has been optimized to the target response and the fine model has also achieved the optimal response, xe in the last iteration is used as the design parameter to achieve the optimal response of the layout.\nThe process of response optimization and parameter adjustment, which involves minimizing Eq. (1) and Eq. (2), is a high-dimensional black-box optimization problem. Dynamic Bayesian Optimization (DBO) is used for Efficiently obtaining the global optimum of a function. In DBO, A multi-trust region-based batch BO (mTURBO) algorithm is used for global search [14]. Global search parallelizes the training of Gaussian Process (GP) in multiple regions, using Thompson Sampling (TS) to obtain candidate points. The boundary of the regions is dynamically adjusted based on sample value to explore the global optimum. When global regions converge, Expected Coordinate Improvement BO (ECIBO) is used as a local search to accelerate local convergence speed and adjust global search area [15]. ECIBO measures the potential improvement along a particular coordinate, shifting high-dimensional problems to low-dimensional ones, showing high efficiency when searching within a small range in high dimensions."}, {"title": "IV. PARAMETER EXTRACTION RESULTS ANALYSIS", "content": "To validate the effectiveness of the proposed framework, the performance of each model is presented with testing results for the dataset and an example of low noise amplifier design paper."}, {"title": "A. Dateset", "content": "The dataset for this paper is derived from 8,766 electronic component documents or datasheets and has been manually annotated to categorize the content into 21 categories, including Text, Title, List, Table, functional block diagrams, flowcharts, characteristic curve diagrams, timing diagrams, circuit diagrams, pin diagrams, engineering drawings, sampling diagrams, 3D schematics, pin name diagrams, marking diagrams, appearance diagrams, functional register diagrams, layout diagrams, data structure diagrams, and other parts diagrams. Meanwhile, a paper [16] on low noise amplifier (LNA) is parsed as the example of the whole framework, whose design is optimized automatically."}, {"title": "B. Document Layout Analysis Result", "content": "The document layout analysis was carried out on the dataset. For comparison, state-of-art methods including Yolov8, LayoutLMv3 and Dit are also evaluated. The performance indexes of the evaluation are Average Recall (AR) and Average Precision (AP), and the results are shown in Table I.\nThe results in the table demonstrate that the model excels in both Average Precision (AP) and Average Recall (AR) metrics. Notably, there is a substantial increase in the recall rate, with AR reaching 0.945, which signifies that the model is adept at identifying targets even when there is a high volume of detections. This capability is precisely what is required for the model to be effectively utilized in the context of electronic device documentation. The LNA paper is parsed using EdocNet and the results are shown in Fig. 8."}, {"title": "C. Chain-of-Thought (CoT) Result", "content": "To validate the effectiveness of the CoT approach in extracting parameters from circuit technology documents, we selected a paper focusing on a Ka-band integrated PIN diode limiter and low-noise amplifier (Limiter-LNA). Using our proposed CoT-based parameter search strategy, integrated within the DocEDA framework, we conducted the analysis. The interaction process between the user and the agent is illustrated in Fig. 9. By analyzing the paper, the system first identifies the circuit type and its functionality. Subsequently, it precisely searches for the design parameters and experimentally measured response parameters within the paper and presents the results in a structured format, enabling further analysis and informed decision-making."}, {"title": "D. Image-to-Circuit Result", "content": "To evaluate the effectiveness of the image-to-circuit conversion process, a testing dataset consisting of 200 circuit diagrams sourced from real-world industrial environments was assembled and tested. The generated circuit graphs were manually inspected for precision to ensure the accuracy of the conversion. The results of this evaluation are summarized in Table II. The transformation accuracy is larger than 90% ensuring it can be applied in practical engineering. Additionally, an illustrative example of the process is provided in Fig. 10, which demonstrates the conversion of circuit diagram in the studied paper [16]."}, {"title": "E. Circuit Layout Optimization Result", "content": "Obtained netlist of the circuit is then fed into optimization model. Firstly, the circuit is optimized using circuit schematic with initial parameters obtained from CoT. Then, the model replaces time-consuming EM simulation with schematic simulation and corrects the differences between them using ISM. During the entire optimization process, there are only 6 EM simulations for the layout and thousands of simulations for the schematic. As most of iterations are evaluated on schematic, the time is significantly reduced compared to the optimization using EM simulations. The results shown in Table III, the optimized LNA is superior than reported ones proving its efficiency."}, {"title": "V. CONCLUSION", "content": "In this paper, we introduced DocEDA, an automated system that streamlines the extraction of electrical parameters from circuit datasheets and design documents. By leveraging advanced computer vision techniques and the reasoning capabilities of Large Language Models (LLMs), DocEDA addresses the inefficiencies and errors inherent in traditional manual extraction methods within Electronic Design Automation (EDA). The implementation of DocEDA demonstrates significant improvements in both the efficiency and accuracy of processing circuit design documents. Experimental results confirm that the system effectively reduces reliance on manual intervention, minimizes human error, and adapts to a variety of circuit design scenarios and document formats. This adaptability indicates DocEDA's potential to significantly impact and transform traditional methodologies in EDA."}]}