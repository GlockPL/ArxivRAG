{"title": "Scalable Frame-based Construction of Sociocultural NormBases for Socially-Aware Dialogues", "authors": ["SHILIN QU", "WEIQING WANG", "XIN ZHOU", "HAOLAN ZHAN", "ZHUANG LI", "LIZHEN QU", "LINHAO LUO", "YUAN-FANG LI", "GHOLAMREZA HAFFARI"], "abstract": "Sociocultural norms serve as guiding principles for personal conduct in social interactions, emphasizing respect, cooperation, and appropriate behavior, which is able to benefit tasks including conversational information retrieval, contextual information retrieval and retrieval-enhanced machine learning. We propose a scalable approach for constructing a Sociocultural Norm (SCN) Base using Large Language Models (LLMs) for socially aware dialogues. We construct a comprehensive and publicly accessible Chinese Sociocultural NormBase (CHINESENORMBASE). Our approach utilizes socially-aware dialogues, enriched with contextual frames, as the primary data source to constrain the generating process and reduce the hallucinations. This enables extracting of high-quality and nuanced natural-language norm statements, leveraging the pragmatic implications of utterances with respect to the situation. As real dialogue annotated with gold frames are not readily available, we propose using synthetic data. Our empirical results show: (i) the quality of the Scns derived from synthetic data is comparable to that from real dialogues annotated with gold frames, and (ii) the quality of the SCNS extracted from real data, annotated with either silver (predicted) or gold frames, surpasses that without the frame annotations. We further show the effectiveness of the extracted Scus in a RAG-based (Retrieval-Augmented Generation) model to reason about multiple downstream dialogue tasks.", "sections": [{"title": "1 INTRODUCTION", "content": "Sociocultural norms (Scn)s greatly influence the way people behave and the structures of soci-ety. Good knowledge of these norms can help better understand people's beliefs, attitudes, and actions. A better understanding of people is able to benefit several very recent and promising"}, {"title": "2 RELATED WORK", "content": "Commonsense Knowledge Bases (CSKB). They include systematically organized information concerning everyday experiences, spanning extensive taxonomic relationships, logical interconnections, and fundamental principles of causality and physical mechanics. Since the proposal of Cyc, a growing number of large-scale human-annotated CSKBs have been developed. For instance, ConceptNet, a large commonsense knowledge graph, embodies the traditional knowledge graph format comprising triples of head entities, relations, and tail entities. ATOMIC contains nine social interaction relations and approximately 880,000 annotated triples. ATOMIC2020 integrates the relations of ConceptNet along with several novel relations, thereby establishing a more extensive CSKB composed of 16 event-related relations. Another notable CSKB is GLUCOSE which is constructed from text culled from ROC Stories and specifies ten commonsense dimensions to comprehensively study the causes and effects originating from a base event.\nSociocultural NormBase Construction. SOCIAL CHEMISTRY is a large-scale corpus of social and moral norms, which was constructed by crowdsourcing to elicit descriptive norms from situations via open-text rules-of-thumb as the basic conceptual units. developed a dialogue corpus named SOCIALDIAL, which is annotated with a variety of social factors to facilitate the study of Chinese social norms within conversations. Different in focus from ours, SocIALDIAL is a corpus of dialogues rather than a database of norms. Additional pivotal work includes the study by . They developed a hierarchical taxonomy of constraints, named the Situational Constraints for Social Expectations, Norms, and Etiquette (SCENE). Following this, they engaged humans to annotate the rich SCENE taxonomy. Our work primarily deviates from NORMBANK as we introduce an automated pipeline for extracting socio-cultural norms, whereas NORMBANK depends on human annotation. Furthermore, another study proposed the NORMSAGE framework, which was designed to tackle"}, {"title": "3 SCALABLE SITUATED NORM EXTRACTION", "content": "We define the problem of extracting sociocultural norms (Scn)s from dialogues through their sociocultural frames. Given a dialogue \\(X_{dialogue}\\) and its related sociocultural frame \\(X_{Frame}\\), we aim to extract the relevant Scn natural-language statements \\(X_{SCN 1}, ..., X_{SCN n}\\).\nWe propose a pipeline (detailed in \u00a73.2) based on LLMs . Our approach is innovative in several key aspects. By integrating a sociocultural frame into the pipeline, we enhance the extraction of SCN statements due to leveraging the pragmatic implication of utterances. Furthermore, our pipeline is versatile, applicable not only to real dialogues but also effective in extracting high-quality SCN statements from synthetic dialogues, as analyzed in the experimental section 4.1."}, {"title": "3.1 Sociocultural Dialogue Frames", "content": "Context plays a pivotal role in understanding social interactions . We have adopted the frame elements from SOCIALDIAL, which comprises six key social factors: Norm Category, Formality, Social Distance, Social Relation, Topic, and Location.\nSame as SOCIALDIAL, in our work, Norm Category can take values from greetings, requests, apologies, persuasion, and criticism. Social Distance encompasses five distinct values: family, friends, romantic partners, working relationships, and strangers. Social Relation covers the following cases: peer-to-peer, elder-junior, chief-subordinate, mentor-mentee, commander-soldier, student-professor, customer-server, and partner-partner. Formality is dichotomous, characterized as either formal or informal. Location spans various settings, including open areas, online platforms, homes, police stations, restaurants, stores, hotels, and refugee camps. Finally, Topic covers a wide array of subjects, such as sales, everyday life trivialities, office affairs, school life, culinary topics, farming, poverty assistance, police corruption, counter-terrorism, and cases of child disappearance.\nAs the real dialogue data annotated with gold frames may not be readily available, we propose to generate synthetic dialogues based on the content of the frames. Previous work has shown that LLMs can generate dialogue data with reasonable quality when prompted with key elements about the dialogue . So we propose prompting LLMs with our sociocultural frames to generate corresponding synthetic dialogues (with the gold frame). This has the additional benefit that it can cover a wide range of situations via changig the frame. We show in our experiments that the quality of Scns extracted from such synthetic data is on-par with real dialogues. We further show that when real dialogues without gold frames are available, a viable approach is to their predict silver frames, which then results in the extraction of reasonably good quality ScNs."}, {"title": "3.2 Norm Extraction Pipeline", "content": "To extract a set of Scn statements from sociocultural frame based dialogues, we introduce the PROMPT operator. The operator functions by executing four distinct parts:\n\u2022 A template header describing the nature of the dialogue data (i.e., conversation), followed by a fill-in slot \\(X_{dialogue}\\) for the actual dialogue;\n\u2022 The body of the template outlining the nature of the social factors (frame) of the dialogue. The sociocultural factors, denoted by \\(X_{Frame}\\), include \\(X_{SNCategory}\\), \\(X_{Formality}\\), \\(X_{SDistance}\\), \\(X_{SRelation}\\), \\(X_{Topic}\\), and \\(X_{Location}\\).\n\u2022 A directed question describing the task of SCN extraction.\n\u2022 A verbalized constraint to ensure the format of the generated content (norm statements) is more unified and controllable.\nGiven a dialogue and its frame, we apply the PROMPT and feed its output to the LLM to produce the SCN statements."}, {"title": "3.3 Quality Control", "content": "Following the standard process for norm extraction, the last step should involve ensuring the quality of SCN statements. SOCIALCHEMISTRY101 and NORMBANK have utilized crowd-sourcing and manual verification of the SCN statements. NORMSAGE has introduced another round of prompting LLM to assure accuracy and relevance after generating the norms with LLM. Similarly, our approach also employs LLM to assess the accuracy and relevance of SCN statements in the context of the specified dialogue and its sociocultural framework."}, {"title": "4 EVALUATION", "content": "We conduct two experiments to validate the quality and utility of our framework. The first ex-periment, Intrinsic Norm Discovery Evaluation, examines the quality of the constructed SCN knowledge base. The second experiment, Extrinsic Evaluation on Downstream tasks, seeks to demonstrate the applicability of SCN statements in an array of downstream tasks, such as detecting norm adherences and violations in dialogues and predicting social factors of dialogue. For the first one, the experiments are done based on both fine-tuned multilingual BERT model. For the latter one, the experiments are based on large language models (LLMs) equipped with retrieval-augmented generation (RAG).\nDialogue Data, Frames, and SCN Statements. We choose SOCIALDIAL dataset as source of socio-cultural frame based dialogues. SOCIALDIAL comprises a total of 6,433 instances of multi-round dialogues (synthetic dialogues and real dialogues). We extracted relevant SCN statements based on the dialogues of SOCIALDIAL following the methodology illustrated in Figure 1. Each dialogue underwent this extraction process twice, extracting 140,669 SCN statements.\nImplementation Considerations. We use ChatGPT (GPT-3.5-turbo) as the underlying LLM in the SCN extraction framework of Figure 1. For each dialogue, we set the maximum number of SCN statements that can be extracted to be 2\u00d7 the number of utterances in the dialogue. Dialogues contain varying numbers of utterances, making it difficult to define a universal upper limit for the number of sociocultural norms for all dialogues. However, it is easier to define it as a multiple of the number of utterances. For dialogues lacking a frame, ChatGPT is first employed to predict a silver frame. The potential values for sociocultural factors are outlined in Subsection 3. Our approach includes a Scn statement pool. When a new SCN statement is generated, its similarity with existing norms in the pool is assessed. If the similarity score is below a predefined threshold of 0.97 which is chosen based on empirical study, the statement is considered novel and added to the pool."}, {"title": "4.1 Intrinsic Norm Discovery Evaluation", "content": "Setting & Baselines. Similar to NORMSAGE , our evaluation of norm extracted from dialogues utilizes a 1-5 Likert scale, where 1 means \u201cawful\u201d and 5 denotes \u201cexcellent\u201d. We employ five evaluation criteria in our evaluation: Relevance, Well-Formedness, Correctness, Insightfulness, and Relatableness. We randomly sample 100 synthetic dialogues and 100 real dialogues from SOCIALDIAL, and follow our framework to generate relevant SCN.\nWe use NORMSAGE as our baseline, which is also a norm extraction pipeline but lacks the notion of frames in comparison to CHINESENORMBASE. We implement NormSAGE on the"}, {"title": "4.1.2 Result", "content": "Table 2 demonstrates that on synthetic dialogues, CHINESENORMBASE consistently outperforms NormSage across 4 (out of 5) dimensions. NORMSAGE's primary limitation lies in its failure to consider the social frame information within dialogues, including aspects such as norm category, social distance, social relation, topic, location, and formality. These details are crucial for SCN statements, and our framework utilizes them as sources. As a result, our scores for Relevance, Insightfulness and Relatableness show significant improvements in both real and synthetic dialogues. However, for the remaining two dimensions, Well-Formedness and Correctness, there isn't a significant difference between the two approaches, as frame information doesn't substantially impact SCN statement generation from these perspectives. Table 3, which focuses on real dialogues, validates that both CHINESENORMBaseSilver and CHINESENORMBaseGold outperform NORMSAGE when leveraging real dialogues. This further underscores the importance of incorporating social frame information. Notably, CHINESENORMBASESilver achieves competitive results compared to CHINESENORMBaseGold, indicating that even when the ground-truth frame is not available, the predicted frame using language models is still useful for norm extraction."}, {"title": "4.2 Extrinsic Evaluation on Norm Adherence and Violation Detection", "content": "We use the task of detecting dialogue norm adherence and violation to validate the importance of having a frame-based Chinese sociocultural norm base."}, {"title": "4.2.1 Dataset", "content": "NORMDIAL , labeled with social norm adherences and violations on a dialogue-turn, is dialogue dataset in Chinese and American cultures. We select the Chinese dialogues in NORMDIAL for this experiment. We divide the labeled dialogues from NORMDIAL into a 6:2:2 ratio for training, validation, and testing purposes."}, {"title": "4.2.2 Setting & Baselines", "content": "We fine-tune a pretrained Multilingual-BERT on three norm datasets: NORMBANK, NORMSAGE (i.e., the norms generated by NORMSAge using SocIALDIAL dataset), and CHINESENORMBASE (i.e., the norms generated by CHINESENORMBase also using SOCIALDIAL dataset) respectively, using masked language modeling. During this fine-tuning process, we randomly mask 15% of the words in each input sentence, and the model learn to predict these masked words. As a result, we learn and compare three models: NORMBANK-BERT, NORMSAGE-BERT, and CHINESENORMBASE-BERT. For these three models, after fine-tuning them on the three norm datasets with masking scheme, we further fine-tune them on the training set of NORMDIAL for the downstream task and then use them to predict on the test set. We also compare these three models with a Multilingual-BERT model which is directly fine-tuned on the training set of NORMDIAL for the downstream task without fine-tuning on the norm datasets. Our evaluation criteria include precision, recall, and F1-Score."}, {"title": "4.2.3 Result", "content": "Table 4 displays the results of norm adherence and norm violation prediction on NORMDIAL. It is evident that CHINESENORMBASE-BERT outperforms all the baselines in both norm adherence and norm violation prediction. While NORMSAGE-BERT also concentrates on Chinese culture, CHINESENORMBASE-BERT gains an advantage by incorporating social frame information. NORMBANK-BERT, despite having frame information, primarily focuses on American culture, whereas CHINESENORMBASE-BERT is tailored for Chinese culture. Multilingual-BERT consistently performs the worst, mainly as it has not been pretrained or fine-tuned on any social norm datasets."}, {"title": "4.3 Extrinsic Evaluation on Social Factors Prediction", "content": "In this section, we evaluate CHINESENORMBASE on the downstream task of social factors prediction. The foundation model we use here is Retrieval-Augmented Generation (RAG) based large language models (LLMs) . More specifically, given the target dialogue, top-k most similar dialogues are retrieved from a dialogue database. The target dialogue together with SCN statements of these top-k similar dialogues are input to the LLM for prediction. Here, we use SOCIALDIAL as the dialogue database to assess if it can help with the downstream task using RAG-based models. Note that this retrieval process is accomplished by embedding all dialogues using the pre-trained language model BERT . Then, we calculate cosine similarity to find the top-k similar dialogues of the target dialogue. The overview of the process is illustrated in Figure 2."}, {"title": "4.3.1 Setting & Baselines", "content": "We use SOCIALDIAL annotated with rich social factors as the evaluation dataset for the downstream task. The predicted social factors are norm category, formality, location, social distance, social relation, and topic. We use ChatGPT and GPT4 as the LLM reasoner, and use macro-precision, macro-recall, and macro-F1 as metrics with k = 5. In Table 5, '0' indicates that only the original dialogue (no Scn statement at all) is used for prediction. \u2018all' means that all"}, {"title": "4.3.2 Result", "content": "As we can see from Table 5, for the prediction of norm category, formality, social distance, social relation, and topic, both ChatGPT and GPT4 show a stronger performance with SCN statements than without them. This result suggests that SCN statements do facilitate dialogue-oriented downstream tasks. Moreover, we can observe that in most cases, all SCN statements induce better performance than 1 Scn statement. This indicates that the more relevant SCN statements are provided, the greater the improvements to predicting social factors in dialogues. As for location prediction, especially recall, the results without SCN statements are better than those given ScN statement. We posit this happens because Scn statements are less closely related to where a dialogue occurs. Providing such Scn adds noisy information, and can hurt location prediction.\nIn some instances, we noticed that the macro-F1 score is lower than the macro-precision and macro-recall scores. This can be attributed to the fact that predicting social factors in SOCIALDIAL data is a multi-class classification problem with significant variations in sample sizes among categories. For instance, in the case of social distance, there are 5 categories, and the \u2018working' category makes up 59.30% of them. Similarly, for social relation, there are 7 categories, but \u2018mentor-mentee' represents just 0.41%. As a result, models may struggle to achieve high macro-precision and macro-recall in specific categories, consequently affecting the overall multi-class macro-F1 score. And according to documents of sklearn, when using 'macro' to account for label imbalance, it can result in an F-score that is not between precision and recall. This observation is consistent with findings in SOCIALDIAL ."}, {"title": "5 SCN STATEMENT ANALYSIS", "content": "In this section, we will demonstrate that synthetic data, which includes dialogues and social frames, maintains sufficient quality for extracting SCN statements when compared to real-world dialogues and social factor frames. Additionally, we will present an overview of the distribution of SCN statements across various social factors. Finally, a case study will be provided to show the benefit of frames."}, {"title": "5.1 Scn from Synthetic Data", "content": "In this section we study the quality of the SCN generated from Real and Synthetic dialogues. We also delineate the effect of the ground-truth social frames and the predicted social frames, referred to as Gold and Silver, respectively. For our analysis, we randomly selected 100 Real dialogues and 100 Synthetic dialogues, each paired with their respective Gold frames. We ensured that both sets of dialogues shared the same frame combination.Following the framework in Figure 1, we extracted SCN statements from both Real + Gold and Synthetic + Gold. Then, we applied the same extraction pipeline on 100 Real dialogues with Gold frames and 100 Real dialogues with Silver frames, represented as Real + Gold and Real + Silver, respectively."}, {"title": "5.1.2 Evaluation Criteria", "content": "In our evaluation, we assess the overlap between two sets of statements using precision, recall, and F1 score. Let's denote the two statement sets as A and B, where set A is ground-truth. We calculate the Cosine similarity of the BERT embeddings between statements in A and B. If the similarity between a statement from A and a statement from B exceeds a pre-defined threshold (which we empirically set at 0.97), we consider the two statements to be the same. i.e., they belong to the intersetion of A and B. Based on the above procedure, Precision, Recall, and F1"}, {"title": "5.1.3 Result", "content": "As shown in Table 6, for the 100 real dialogues with gold frame, 100 synthetic dialogues with gold frame, and 100 real dialogue with silver frame, there are 486, 554, and 484 extracted SCN statements. The precision, recall, and F1 scores of the SCN statemens on Real + Gold vs Synthetic + Gold and Real + Gold vs Real + Silver both exceed 0.9. This result demonstrates the high quality of the synthetic dialogues and predicted frames: that they induce highly similar SCN to those induced from real dialogues and gold frames. Moreover, the experiment on Real + Gold v.s. Synthetic + Gold show a high overlap in SCN despite the different content in the two dialogue datasets, underscoring the significance of frames in SCN statements extraction. Additionally, the higher overlap observed in the experiment Real + Gold v.s. Real + Silver suggests that SCN statements are more influenced by the dialogue itself than by the frames."}, {"title": "5.2 Distribution of SCN Statements on Sociocultural Factors", "content": "Similar to Subsection 5.1, we extract Scn statements from real dialogues with gold frames, real dialogues with silver frames, and synthetic dialogues with gold frames. Subsequently, GPT-4 was employed to classify the extracted SCN statements into different categories of a specified social factor."}, {"title": "5.2.2 Result", "content": "From Figure 4, in each sub-plot, the vertical axis quantifies the frequency of each category, while the horizontal axis represents categories with the three bars corresponding to different dialogue and frame combinations.\nFor social factor norm categories, the candidates can be greetings, requests, apologies, persuasion, criticism, and others. The resulting distribution of SCN statements from different data sources is depicted in Figure 4(a). Our analysis reveals a non-uniform distribution of social norm categories across all datasets, a trend consistent in each dataset. This indicates the varied impact of different norm categories in daily life. Notably, the \u2018others' category significantly surpasses others, suggesting the existence of numerous norm categories not encompassed by the predefined five categories. Additionally, the 'request' and 'persuasion' categories exhibit moderate frequencies, implying these social norms are more prevalent in everyday interactions.\nAmong the various social factors analyzed, it is observed that \u2018Formal' is significantly more prevalent than \u2018Informal' in \u2018Formality\u2019. In \u2018Social Distance', the \u2018Working' relationship is the most common. As for 'Social Relation', the patterns of \u2018Elder-Junior\u2019, \u2018Chief-Subordinate', and"}, {"title": "5.3 Case Study", "content": "Figure 3 presents some sample SCN statements generated from real dialogues under three different conditions: with Gold Frames, with Silver Frames, and without Frames. Firstly, in the first sub-table with Gold Frames, the SCN statements encapsulate the \u201cchief-subordinate\" relationship within the context of \"office affairs\". Similarly, in the second sub-table with Silver Frames, the SCN statements encompass the \u201cstudent-professor\" dynamic in \u201cschool life\". However, in the third sub-table, where dialogues are presented without frames, all the SCN statements revolve solely around conducting reports. This approach overlooks the broader context of the real dialogues, resulting in a lack of relevance and depth in the extracted Scn statements. These observations underscore the value of incorporating frames in SCN statements extraction. By doing so, we can effectively infuse domain knowledge into the process, transcending the limitations of relying solely on the dialogue content."}, {"title": "6 CONCLUSION", "content": "We propose a scalable approach for constructing a Sociocultural norm base using large language models (LLMs) for socially-aware dialogues. This norm base is rooted in the dialogues' contexts, enriched with sociocultural frames, thus enabling pragmatic reasoning relevant to the situational context. As real dialogue annotated with gold frame are not readily available and expensive to collect, we also show that it is possible to extract high-quality SCN statements from synthetically generated data. This is particularly encouraging for low-resource languages and cultures, to the extent to which they can be covered by LLMs. We further show the effectiveness of the extracted Scns in a RAG-based model to reason about multiple downstream dialogue tasks. We believe"}, {"title": "LIMITATIONS", "content": "Our framework is based on the implicit commonsense knowledge and reasoning in ChatGPT (GPT-3.5-turbo) from OpenAI\u2074, as the underlying LLM, for pragmatic reasoning of situated dialogues and extracting the norm statements. ChatGPT is trained on large amount of online data. However, its commonsense knowledge and reasoning can be biased, although efforts has put into guardrails to address bias and increase the model safety. Furthermore, sociocultural norms can evolve and shift over the time, which requires the adaptation of the commonsense knowledge and reasoning of the underlying LLM with the evolving data. Due to limitation of time and computational resources, we did not rigorously study the extent to which recent publicly accessible LLMs are capable of extracting high-quality norm statements, and leveraging pragmatic reasoning on situated dialogues."}, {"title": "ETHICAL STATEMENT", "content": "We acknowledge that automated generation of sociocultural norm statements an be authoritative and normative . We thus emphasise that they are not intended to be used for forming a norm system for any society. Furthermore their use in any deployed system needs to be done with care. It needs to involve human in the loop to inspect the validity of them before the deployment. As such, these norm statements are mainly for research purposes. Our approach amounts to an explainable verification framework to assess the sociocultural knowledge and reasoning of LLMs. It can help to extract LLMs' norm rules (as described in our work), whose validity can then be assessed by human."}]}