{"title": "SpiroActive: Active Learning for Efficient Data Acquisition for Spirometry", "authors": ["Ankita Kumari Jain", "Nitish Sharma", "Madhav Kanda", "Nipun Batra"], "abstract": "Respiratory illnesses are a significant global health burden. Respiratory illnesses, primarily Chronic obstructive pulmonary disease (COPD), is the seventh leading cause of poor health worldwide and the third leading cause of death worldwide, causing 3.23 million deaths in 2019, necessitating early identification and diagnosis for effective mitigation. Among the diagnostic tools employed, spirometry plays a crucial role in detecting respiratory abnormalities. However, conventional clinical spirometry methods often entail considerable costs and practical limitations like the need for specialized equipment, trained personnel, and a dedicated clinical setting, making them less accessible. To address these challenges, wearable spirometry technologies have emerged as promising alternatives, offering accurate, cost-effective, and convenient solutions. The development of machine learning models for wearable spirometry heavily relies on the availability of high-quality ground truth spirometry data, which is a laborious and expensive endeavor. In this research, we propose using active learning, a sub-field of machine learning, to mitigate the challenges associated with data collection and labeling. By strategically selecting samples from the ground truth spirometer, we can mitigate the need for resource-intensive data collection. We present evidence that models trained on small subsets obtained through active learning achieve comparable/better results than models trained on the complete dataset.", "sections": [{"title": "I. INTRODUCTION", "content": "Respiratory illnesses pose a significant health challenge worldwide. Every year around 262 million people suffer from asthma, and 3.23 million deaths are attributed to Chronic Obstructive pulmonary disease (COPD) [1]. With the emergence of a global pandemic like COVID- 19, monitoring lung health has become an essential part of human survival [2]. Early detection and diagnosis of respiratory illnesses can mitigate their impact and reduce the risk [3], [4]. Studies have indicated that the diagnosis of lung-related conditions is often missed or delayed until the health conditions have significantly worsened and clear signs of poor lung health are evident. One contributing factor to this issue is the relatively high cost of medical tests, which typically costs $240\u00b9. Consequently, the availability of affordable and user-friendly equipment for diagnosing lung health is limited and poses a significant obstacle to timely diagnosis. [5]. Spirometry is a non-invasive pulmonary function test widely used to diagnose respiratory problems, and assess lung function [17]. Typically conducted in a clinical set- ting by trained clinician, the test requires certain prepara- tory measures such as avoiding smoking, consuming heavy meals, or engaging in tedious physical activity, as these factors can affect the accuracy of the results [18]. During the test, the patient exhales forcefully into a spirometer. The spirometer measures 23 different lung function parameters, such as forced vital capacity (FVC), peak expiratory flow (PEF) and forced expiratory volume in one second (FEV1), providing insights into respiratory health. Although spirometry helps assess the severity of lung diseases, performing clinical spirometry is expensive. Mobile and wearable spirometry [6], [12], [19] pose as affordable alternatives to clinical spirometry. These are cost-effective and have higher portability, enhancing accessibility. However, these approaches also have their drawbacks as accuracy is affected by factors like posi- tioning of the device, the user's lip posture, and external environmental conditions [7], [20] Verifying these techniques requires ground truth spirom- etry data, which is difficult to obtain due to logistical challenges in collecting consistent and reliable mea- surements across diverse environments and is hugely impacted by participants' cooperation and adherence to standardized testing procedures. Thus datasets used to test out mobile spirometry approaches like SpiroS- mart [6] and MobSpiro [10] are limited in participant size. The same trend is observed across majority of the"}, {"title": "II. BACKGROUND", "content": "This section discusses about the pertinent background for clinical spirometry, the recent advances in mobile and wearable spirometry and briefly introduces the concept of active learning.\nA. Clinical Spirometry\nSpirometry is a pulmonary test widely used to assess breathing patterns and detect lung ailments like asthma, cystic fibrosis, and COPD [17]. During a spirometry ma- neuver a patient breathes into a spirometer mouthpiece which measures the amount and speed of air exhaled. Spirometers processes the collected flow-volume curves (Figure 1) to extract lung paramters. The American Thoracic Society (ATS) discusses different lung health"}, {"title": "B. Mobile and Wearable Spirometry", "content": "Previous efforts have investigated alternative systems [6], [10] due to challenges in clinical Spirometry such as: i) Difficulty in ensuring patient cooperation, es- pecially with young children and elderly patients; ii) Spirometry instrumentation is expensive and requires time-consuming efforts for data collection. To address these issues, cheaper and more accessible alternatives such as wearable and smartphone spirometry have been studied in the past. [10], [19], [21], [22]. Recent efforts have also been made to incorporate wearables (such as masks) with audio and pressure sensors to extract vital lung parameters [7], [23]-[27]. They provide a more secure and enclosed environment to capture audio data, that is used as a proxy for the airflow, to estimate lung health indices such as FEV1, PEF and FVC. Despite promising results, studies in this area usually consists of small participant groups (typically <70 as shown in Table I) owing to difficulty in collecting ground truth spirometry data. The efficiency of active learning in low data settings coupled with the convenience of hand held spirometry motivated us towards studying active learning for mobile spirometry."}, {"title": "C. Active Learning", "content": "One of the main reasons behind the success of machine learning in the recent past has been the availability of large datasets. Collecting large quantities of unlabeled data in medical and imaging settings is often easy. However, obtaining the labels for such datasets is usually time-consuming and expensive. Active Learning is a sub-field of machine learning that aims to reduce the labeling or annotation cost by strate- gically labeling samples from the large unlabeled set. The active learning scenarios can be broadly divided into three types [28]: i) Membership Query Synthesis; ii) Stream-Based Selective Sampling and iii) Pool-Based Sampling. We direct the reader to a comprehensive active learning survey [28] and focus on the setting most pertinent for our application: pool-based sampling. Pool-based sampling is used in many real-world prob- lems like text classification [29], information extrac- tion [30], speech recognition [31], and cancer diagno- sis [32]. Pool-based sampling has also been widely used to reduce human annotations in the activity recognition task. [33], [34] Broadly, pool-based sampling is based on labeling samples from a large pool of unlabeled data instances via heuristics called acquisition functions. We now present the active learning workflow for pool-based sampling, as illustrated in Figure 2.\n1) The active learning loop consists of a machine learning model initially trained on the labeled dataset (usually small initially).\n2) The trained model is then used to make predictions on the large pool set."}, {"title": "III. PROBLEM STATEMENT", "content": "Mobile/wearable spirometry systems collect audio data while users perform forced breathing maneuvers. The collected raw audio data undergoes normalization and Hilbert transformation to generate its envelope. Various features are extracted from the audio as per [6] and the ground truth lung health indices are collected using a forced breathing spirometer maneuver Collecting wearable audio data is significantly easier as compared to acquiring the ground truth spirometer data, which requires expert supervision and clinic visit. Thus, we pose our active learning problem as follows:\n\u2022 We assume a large number of samples (pool data) of audio data and corresponding features collected from mobile/wearable spirometry setups.\n\u2022 We assume only a small fraction of samples (training data) to be associated with ground truth data containing the two lung health indices.\n\u2022 Our goal is to \u201cstrategically\u201d choose participants from the pool set and obtain their true labels.\n\u2022 The role of the oracle in our active learning setting is akin to visiting the lab where the ground truth spirometry can be performed."}, {"title": "IV. METHODOLOGY", "content": "We now present our method, focusing on the primary lung health indices: FEV1, FVC. Prior mobile/wearable spirometry literature has proposed distinct \"tuned\" fea- tures for each health index based on domain knowledge [7]. For example, FEV1 is the volume of air exhaled in the first second of a forced expiratory maneuver, so signals beyond 1s are not needed. In contrast, measuring FVC requires the complete signal. Given the different set of (partially overlapping) features, we consider esti- mating FEV1, and FVC, as two different tasks. For our experimentation, we use the Single Output setting where we train a different model for each individual task. Each trained model, though possibly of the same class has its own distinct parameters ($\\theta$) and hyperparameters ($\\Phi$). Previous literature [6], [7] has generally focused on this experimental setting."}, {"title": "B. Active Learning Settings", "content": "As discussed in section II-C, the active learning loop queries points that improve model performance. The querying for pool points can be done in two ways:\n1) Single-Task Active Learning where different points are queried for different tasks.\n2) Multi-Task Active Learning where the same point is queried for two tasks\nSingle-Task Active Learning\nIn this setting, the two tasks (FEV1 & FVC) are treated as two independent problems. The querying for each task, at each iteration, is done based on the given function:\n$x^* = argmax_{x \\in x_{pool}} A(x^*)$\nwhere $A (x^*) = var (y^*)$ This leads to difference in the order in which pool points are selected in each task. Single Task AL can be achieved by using the single output models as described in section IV-A . Multi-Task Active Learning\nWhile Single-Task AL tends to achieve the best results as the problems are independent of each other, it is often wasteful to acquire separate participant data for"}, {"title": "V. EVALUATION", "content": "For our experimentation, we have collaborated with SpiroMask authors [7] and collected 10 more samples to expand our dataset. Out of the total 58 samples (including 10 new sample), we remove 7 samples based on the Flow-Volume envelope and the back-extrapolated volume (BEV) [35]. Out of 51 participants (Table II), 10 suffer from various lung ailments (asthma, obstructive lung ailments, wheez- ing, COVID infections, and other restrictive ailments). The study consists of 16 female participants, and the age group of people varies from 21 to 68 years [7]. To generate the feature set for active learning, we pass the audio signal through a Butterworth bandpass filter with cut-off frequencies of 3000 and 5000 Hz that conserve all the tidal breathing information. The filtered audio is used to generate acoustic and temporal features like Spectrogram features (STFT), Mel Spectrogram, Mel-frequency energy (MFE), Mel- frequency cepstral coefficients (MFCC), and spectral features. We then apply Sequential Forward Selection to jointly optimize our dataset for both the output vari- ables [6], [7], [12]. Although PEF is commonly used for lung health prediction, discussions with the dataset authors revealed that a small number of samples were clamped partly impacting the signal and peak required for calculating PEF. However, it does not affect the features needed for FVC and FEV1. Hence, PEF is not considered for future experimentation."}, {"title": "B. Metrics", "content": "We use the mean absolute percentage error to compare performance across all the participants for FVC, and FEV1 tasks.\n$MAPE = (\\frac{1}{N} \\sum_{i=1}^{N} | \\frac{y_i - \\hat{y_i}}{y_i}|) * 100$\nwhere $y$ is the true value, $\\hat{y}$ is the predicted value and N is the total number of test points. The guidelines on standardized spirometry [35] and later studies [6], [36] describe the error between two spirometry efforts in percentages. Hence we choose MAPE scores as the measurement method."}, {"title": "C. Experiments", "content": "In this section, we discuss the experiments and their results to study the efficacy of active learning for spirom- etry. For our experiments, we use a committee consisting of Random Forest Regressor, Decision Tree Regressor,"}, {"title": "VI. LIMITATIONS AND FUTURE WORK", "content": "We now discuss some limitations of our present work and how we plan to address them in the future.\n\u2022 We presently assume uniform labeling costs associated with each sample, but in reality, different samples may have varying costs. For example, older participants are harder to recruit and may struggle to complete the spirometry test due to physical limitations [7]. In the future, we aim to incorporate variable labeling costs to make our systems more practical.\n\u2022 Currently, we do not consider a stopping criteria in active learning which can lead to diminishing returns or worsened performance with additional samples. Future work will include heuristics for stopping when performance plateaus, such as not adding a pool point if its distance to existing training points is below a threshold, or using confidence based stopping crite- ria [37] to stop when the confidence on the unlabeled data exceeds a threshold value."}, {"title": "VII. CONCLUSION", "content": "Collecting ground truth for medical applications is chal- lenging and incurs substantial costs. Intelligent querying techniques are essential to address the issue of limited datasets in this domain. This study presented active learning as a structured approach for strategically recruit- ing new participants from a pool, whose ground truth help improve overall model performance. We introduced various active learning and modeling strategies designed to efficiently acquire data by considering multiple health indices. Our proposed active learning methods outper- formed random acquisition and adhered to the error thresholds set by ATS.\nWe explored both single-task and multi-task active learn- ing settings, achieving errors of approximately ~3% in both settings. While multi-task active learning yielded"}]}