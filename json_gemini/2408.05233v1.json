{"title": "Large Language Model based Agent Framework for Electric Vehicle Charging Behavior Simulation", "authors": ["Junkang Feng", "Chenggang Cui", "Chuanlin Zhang", "Zizhu Fan"], "abstract": "This paper introduces a new LLM based agent framework for simulating electric vehicle (EV) charging behavior, integrating user preferences, psychological characteristics, and environmental factors to optimize the charging process. The framework comprises several modules-Persona, Planning, Perception, Memory, Decision Making, Reflection, Action, and Environment-enabling sophisticated, adaptive simulations. Dynamic decision making is supported by continuous reflection and memory updates, ensuring alignment with user expectations and enhanced efficiency. The framework's ability to generate personalized user profiles and real-time decisions offers significant advancements for urban EV charging management. Future work could focus on incorporating more intricate scenarios and expanding data sources to enhance predictive accuracy and practical utility.", "sections": [{"title": "I. INTRODUCTION", "content": "As electric vehicles (EVs) become more prevalent, their large-scale integration into the grid presents new challenges and opportunities. The charging behavior of EVs significantly impacts the grid, as it involves substantial fluctuations in power demand, affecting both the stability and economic efficiency of the power system [1]. EV charging demand is typically highly random and volatile, especially during peak hours, where a surge in demand can overload the grid and compromise its stability [2]. Additionally, the uncertainty in EV charging times and volumes poses significant challenges for power system planning and management. If these charging behaviors are not effectively managed and coordinated, they can lead to grid overload, increased operating costs, and even blackouts [3]. Therefore, accurately simulating and predicting EV charging behavior is crucial for optimizing the operation and management of power systems [4].\nCurrently, the main methods for simulating EV charging behavior include statistical analysis, data mining, stochastic modeling, and agent-based models. Statistical analysis employs statistical techniques to decompose and analyze EV charging behavior by identifying trends, periodicity, and other patterns [5]. While simple and easy to interpret, this method falls short when dealing with complex and nonlinear behaviors. Data mining techniques such as clustering and deep learning can extract and analyze user behavior from large datasets, demonstrating strong data processing capabilities [6]. However, these methods require substantial computational resources and high-quality data. Stochastic models, like Markov chains and Copula functions, are widely used to capture the randomness and variability of charging behavior, effectively handling uncertainty but involving complex mathematical models sensitive to parameter selection [7]. In recent years, agent-based methods have shown significant advantages in addressing the complexity and dynamism of EV charging behavior. By simulating individual users or vehicles as agents and modeling their interactions and decision-making processes, these methods can study overall behavior [8]. However, capturing the complex psychology and preferences of human behavior remains challenging.\nWith the advent of Large Language Models (LLM) and generative agents, the approach to simulating EV charging behavior is undergoing a transformation. Generative agent models leverage natural language understanding and generation capabilities to intricately simulate complex human behaviors and decision-making processes. For example, Park et al. introduced generative agents to simulate daily human activities, showcasing lifelike individual and social behaviors [9]. Lyfe agents integrate LLM to simulate complex social behaviors, enabling cost-effective real-time responses [10]. These agents exhibit self-motivation and social reasoning capabilities in multi-agent systems. Therefore, applying LLM based generative agent models to simulate EV charging behavior has shown immense potential.\nThis paper presents a generative agent-based model for simulating and analyzing EV charging behavior. The main contributions of this paper are listed as follows:\n\u2022 Introduction of a novel Generative Agent-Based Model (GABM) framework to address the complex psychology and preferences in EV charging behavior.\n\u2022 Development of the GABM framework based on five di-"}, {"title": "II. PROBLEM DESCRIPTION AND PRELIMINARIES", "content": "To simulate and predict electric vehicle (EV) charging behavior, a generative agent-based model for EV charging behavior is proposed. The EV charging behavior model is defined as a tuple {a, o,t}, representing its components and their significance, where a denotes the behavior type, describing the action taken by the user, o is the object on which the behavior acts, and t is the timestamp indicating when the behavior occurs.\nIn the simulation of EV charging behavior, the objective is to identify a function a = f(U, o, t) that accurately represents EV charging behavior, where U represents user characteristics, o represents the charging pile or station, and t represents the time. This function can be expressed by the following equation:\na = f(U, o,t)\nwhere a represents the behavior type, such as starting or stopping charging, U represents user characteristics, such as charging habits, vehicle type, and battery capacity, o represents the characteristics of the charging pile or station, such as location, availability, and price, and t represents the timestamp, indicating the specific time the behavior occurs.\nAn LLM based agent can be represented as a five part tuple U = (L,O, M, A, R), where L stands for the Large Language Model, O represents the Objective, M denotes Memory, A indicates Action, and R stands for Rethink [11].\nThe integration of LLM based agents into EV Charging Behavior models has the potential to create agents capable of simulating behavior in complex conditions. These agents would benefit from adaptability, interpretability, zero-shot learning, common-sense reasoning, and the ability to handle a variety of situations. Despite these advantages, the standard LLM based agent framework may not be directly suitable for electricity user behavior modeling. Therefore, a carefully designed framework is needed to enable these agents to execute complex tasks in power systems."}, {"title": "III. LLM BASED AGENT FRAMEWORK DESIGN FOR EV CHARGING BEHAVIOR", "content": "The agent framework is designed to effectively simulate and predict electric vehicle (EV) charging behavior. This framework comprises seven key components: Large Language Model, Persona, Planning, Memory, Perception, Action, and Reflection. The integration of these components allows for comprehensive modeling and decision-making processes, accounting for the complexities and dynamic nature of EV charging behaviors.\nThe overall framework can be represented as a function F that integrates these components to simulate EV charging behavior:\nA = f(L, C, P, M, S, A, R)\nwhere:\n\u2022 L represents the Large Language Model\n\u2022 C represents Persona\n\u2022 P represents Planning\n\u2022 M represents Memory\n\u2022 S represents Perception\n\u2022 A represents Action\n\u2022 R represents Reflection\n1) Large Language Model (L): The Large Language Model (LLM) is the core of the agent, responsible for natural language understanding and generation. The LLM interprets user inputs, generates realistic behavior patterns, and simulates decision-making processes.\n2) Persona (C): In the LLM-based EV charging behavior simulation, the persona module determines user preferences, personalities, and behaviors. By designing various personas, the model can better reflect the diverse behaviors of different user groups.\n3) Planning (P): Planning defines the objectives and tasks the agent aims to achieve and generates daily activity schedules, including work, shopping, and leisure activities. These plans influence the driving distances and charging needs of the electric vehicle.\n4) Memory (M): Memory stores historical data and contextual information, including past charging behaviors, user preferences, and environmental factors. It enables the agent to make informed decisions based on previous experiences. Memory is divided into short-term and long-term memory, which store charging behavior data from recent days and over longer periods, respectively.\n5) Perception (S): Perception collects and processes current and predicted information related to EV travel and charging to provide data support.\n6) Action (A): Action represents the set of possible actions the agent can take, such as initiating charging, stopping charging, selecting a charging station, and adjusting charging rates. The agent determines the optimal action based on the current state and objectives.\n7) Reflection (R): Reflection allows the agent to evaluate its actions and outcomes. This component is crucial for continuous learning and adaptation, enabling the agent to improve its performance by analyzing successes and failures. Reflection includes plan reflection, user satisfaction assessment, and persona reflection to optimize future decisions and behaviors."}, {"title": "B. Framework Dimensions", "content": "The GABM framework operates across five dimensions to ensure comprehensive and realistic simulations:\n1) Scenario: This dimension encompasses various charging scenarios such as home charging, workplace charging, public charging stations, and long-distance travel. Each scenario has unique characteristics and constraints that influence charging behavior.\n2) Time: The time dimension includes temporal factors such as time of day, day of the week, and season. Charging behaviors can vary significantly based on these temporal aspects, affecting grid load and energy consumption patterns.\n3) Space: The space dimension considers the geographical location of charging stations and users. Factors include the distance to the nearest charging station, station availability, and regional electricity prices.\n4) Energy: This dimension focuses on the energy aspects of EV charging, including battery capacity, state of charge, charging speed, and energy efficiency. Understanding these factors is crucial for optimizing charging strategies and managing grid load.\n5) Price: The price dimension accounts for the cost of electricity, including time-of-use tariffs, peak pricing, and incentives for off-peak charging. Economic factors significantly influence user decisions and charging behaviors."}, {"title": "C. Agent Interaction and Decision-Making Process", "content": "Within the framework, agents interact with each other and the environment to simulate realistic charging behaviors. The decision-making process includes:\n1) Plan Generation: The agent generates current goals based on its persona and develops specific plans, including travel plans and charging plans.\n2) Environmental Perception: The agent receives inputs from the environment, including travel conditions, station availability, and pricing information.\n3) Memory Retrieval: The agent retrieves relevant historical data and contextual information from its memory to inform its decisions.\n4) Action Selection: Based on the LLM's interpretation and the evaluation of goals and memory, the agent selects the optimal action.\n5) Action Assessment: After executing the action, the agent assesses the outcome and updates its memory, using the reflection component to improve future performance.\nThis process ensures that the agent can dynamically adapt to environmental changes, make optimal decisions, and achieve more efficient and stable power system management."}, {"title": "IV. IMPLEMENTATION OF THE LLM-BASED AGENT FRAMEWORK", "content": "The implementation of the LLM based agent framework for simulating EV charging behavior involves a comprehensive integration of various modules to create a robust and dynamic system. Each module plays a critical role in ensuring the agent can accurately predict and optimize EV charging processes by modeling user preferences, personalities, and behaviors. The key components of this framework include Persona, Planning, Perception, Memory, Decision Making, Reflection, Action, and Environment. Below is a detailed description of the implementation for each module."}, {"title": "A. Persona", "content": "In the LLM based agent framework for simulating EV charging behavior, user profiles determine user preferences, personalities, and behaviors. Various personas are designed to better reflect the diverse behaviors of different user groups. The following attributes are considered in EV charging:\n1) Demographic Information: Includes user age, gender, occupation, and other factors. These factors influence driving and charging behaviors. For example, younger users may be more open to adopting new technologies and more frequently use EVs and charging facilities, while occupation may influence driving needs and charging times.\n2) Economic Conditions: Includes income, assets, and other financial factors. These factors affect user charging preferences. For instance, users with higher economic conditions may be more willing to pay for high-priced fast charging services.\n3) Psychological Information: Includes user perceptions, attitudes, and willingness towards EV charging. These details can affect charging behaviors and choices.\n4) Vehicle Information: Includes the make, model, year, and type of the user's vehicle. These details influence charging behavior, as different vehicles have varying battery capacities and charging requirements. For instance, EVs with larger battery capacities may require longer charging times or higher power charging stations.\n5) Charging Habits: Includes user charging frequency, times, and choice of charging locations. These details influence user charging behavior and charging station usage."}, {"title": "B. Planning", "content": "The Planning module is responsible for generating daily activity, travel, and charging plans to optimize EV usage efficiency.\n1) Event Planning: The agent generates daily activity schedules based on its role, such as work, shopping, and leisure activities. These events may influence EV driving distance and charging demands.\n2) Travel Planning: Based on event planning, the agent formulates travel plans, specifying travel time and distance.\n3) Charging Planning: The agent formulates charging plans based on travel plans and the EV's battery status."}, {"title": "C. Perception", "content": "The Perception module collects and processes current and predicted information related to EV travel and charging to support efficient charging decisions.\n1) Travel Perception: Responsible for collecting and processing information related to EV travel to provide data support for charging plans.\n\u2022 Scenario: Current and predicted traffic conditions.\n\u2022 Time: Current time and planned travel time.\n\u2022 Space: Current vehicle location and distance to the travel destination.\n\u2022 Energy: Current vehicle battery level.\n2) Charging Station Perception: Involves gathering and analyzing various information to support efficient EV charging decisions.\n\u2022 Scenario: Number and operational status of available chargers.\n\u2022 Time: Total charging time, including travel time to the charging station, queue time, and actual charging duration.\n\u2022 Space: Geographic location of charging stations and their proximity to the vehicle's current position and travel route.\n\u2022 Energy: Charging speed offered by the stations, including fast-charging and standard options, which affects total charging time.\n\u2022 Price: Charging prices at the stations."}, {"title": "D. Memory", "content": "The Memory module is responsible for storing and managing charging behavior data to support the agent's decision-making and optimization.\n1) Short-Term Memory: Stores charging behavior data from the past three days, including charging scenarios, charging times, charging stations, charging amounts, charging power, and charging prices.\n2) Long-Term Memory: Stores charging behavior data from the past seven days, including charging times, charging stations, charging amounts, charging power, and charging prices. This data helps the agent analyze user charging habits and long-term trends, facilitating better behavior planning and decision-making."}, {"title": "E. Decision Making", "content": "The Decision Making module makes reasonable decisions based on user personas, plans, memory, and perception information. Decision results include charging decisions, charging scenarios, charging times, charging stations, charging amounts, charging power, and charging prices."}, {"title": "F. Reflection", "content": "The Reflection module helps the agent improve decision-making and optimize future charging behaviors. It includes the following components:\n1) Plan Reflection: The agent assesses whether the decisions meet user needs and expectations.\n2) User Satisfaction: The agent evaluates user satisfaction with charging decisions, including charging time, charging station selection, charging amount, charging power, and charging price.\n3) Persona Reflection: The agent evaluates how decisions align with user behavior and psychological patterns. This involves analyzing user and charging behaviors, considering both deterministic rules and the randomness inherent in human decision-making processes."}, {"title": "G. Action", "content": "In simulating EV charging behavior, the Action module enables the agent to interact with the environment through specific actions. These actions are guided by the quintuple of electricity consumption behaviors such as charging decisions, charging scenarios, charging times, charging stations, charging amounts, charging power, and charging prices."}, {"title": "H. Environment", "content": "The simulation environment module aims to emulate EV user charging behaviors and their impact on both the EVs and the charging stations. The agent can perceive its own state as well as the state of the charging equipment and interacts with the environment through a series of actions.\n1) Electric Vehicles: Simulates the real-world operation of EVs, focusing on aspects such as energy consumption, operational efficiency, battery state during operation, and power and speed during charging.\n2) Charging Stations: Simulates the EV charging process, considering the location of charging stations, charging costs, number and availability of charging piles, as well as queuing and charging power.\n3) Geographic Information: Integrates geographic information system (GIS) data, including the locations of charging stations, road networks, traffic conditions, and regional electricity prices. Geographic information helps the agent more accurately plan routes and select charging stations, optimizing charging decisions and travel routes."}, {"title": "V. SIMULATION AND RESULTS", "content": "In this study, we use the environment of Shanghai, China, as a simulation model to simulate the charging behavior of 10 taxi drivers over a 7-day period. Each electric vehicle starts with a battery level of 60kWh (total capacity of 75kWh). The specific simulation setup is as follows:\n1) User Information Generation: LLM generates the personal information, psychological characteristics, electric vehicle information, and charging habits of the taxi drivers.\n2) Work Plan Generation: Based on the daily work data of taxi drivers in Shanghai, LLM generates similar work plans and stores them in the database as LLM's memory.\n3) Distance Calculation and Charging Station Information Retrieval: Using the Amap API, the distance between two locations is calculated, and information on nearby charging stations is obtained. This data is matched with the database, assuming all charging stations are available."}, {"title": "4) Dynamic Decision-Making:", "content": "At the end of each event, the power consumption of the car is calculated, and a charging decision is made. Relevant information is provided to LLM, allowing it to make decisions that align with the user's profile. These decisions are then stored in the database."}, {"title": "5) Daily Reflection:", "content": "At 12:00 AM each day, LLM evaluates whether the decisions made during the day accurately met the user's needs and expectations, assesses user satisfaction with the charging decisions, and evaluates the cost-effectiveness of the decisions. The reflection results are stored in the database."}, {"title": "B. Simulation Visualization", "content": "To visualize the simulation operation, we present a map showing the routes of 10 taxi drivers, their starting and ending points, and the charging stations in Shanghai. Each driver's route is marked with lines, and the charging stations are indicated with specific icons. The map provides a detailed overview of the simulation environment and the movement patterns of the electric vehicles. On the right side of the visualization, we display the charging decisions for individual drivers, including the time, reason for charging, and chosen charging station.\nThis map helps to illustrate the practical aspects of the simulation, including the distances traveled by the taxis, the locations of charging stations they use, and the overall layout of the simulation within the urban environment of Shanghai. The decision details provide insights into the rationale behind each charging decision, enhancing the understanding of how the simulation operates in a real-world setting and highlighting the dynamics of electric vehicle charging behavior. This detailed visualization and description enhance the understanding of the simulation operation, showing both the geographical movement of the taxis and the decision-making process of each driver."}, {"title": "VI. CONCLUSION", "content": "This research introduces an LLM based agent framework for simulating EV charging behavior, integrating user preferences, psychological characteristics, and environmental factors to optimize the charging process. Conducted in Shanghai, China, the simulation of 10 taxi drivers over a 7-day period demonstrated the framework's effectiveness in generating personalized user profiles, planning daily activities, and making informed, adaptive decisions. The agent's dynamic decision-making, supported by continuous reflection and memory updates, ensured alignment with user expectations and optimized efficiency. The detailed visualization of taxi routes, charging stations, and charging decisions highlighted the framework's practical applicability in urban settings. This robust, innovative approach provides valuable insights for improving the management of EV charging infrastructure, with future research focusing on incorporating more complex scenarios and"}]}