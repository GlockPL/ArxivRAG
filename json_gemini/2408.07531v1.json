{"title": "Development of a Multi-Agent Clinical Decision Support System for Korean Triage and Acuity Scale (KTAS)-Based Triage and Treatment Planning in Emergency Departments", "authors": ["Seungjun Han", "Wongyung Choi"], "abstract": "Emergency department (ED) overcrowding and the complexity of rapid decision-making in critical care settings pose significant challenges to healthcare systems worldwide. While clinical decision support systems (CDSS) have shown promise, the integration of large language models (LLMs) offers new possibilities for enhancing triage accuracy and clinical decision-making. This study presents an LLM-driven CDSS designed to assist ED physicians and nurses in patient triage, treatment planning, and overall emergency care management.\nWe developed a multi-agent CDSS utilizing Llama-3-70b as the base LLM, orchestrated by CrewAI and Langchain. The system comprises four AI agents emulating key ED roles: Triage Nurse, Emergency Physician, Pharmacist, and ED Coordinator. It incorporates the Korean Triage and Acuity Scale (KTAS) for triage assessment and integrates with the RxNorm API for medication management.\nThe model was evaluated using the Asclepius dataset, with performance assessed by a clinical emergency medicine specialist. The CDSS demonstrated high accuracy in triage decision-making compared to the baseline of a single-agent system. Furthermore, the system exhibited strong performance in critical areas, including primary diagnosis, critical findings identification, disposition decision-making, treatment planning, and resource allocation.\nOur multi-agent CDSS demonstrates significant potential for supporting comprehensive emergency care management. By leveraging state-of-the-art AI technologies, this system offers a scalable and adaptable tool that could enhance emergency medical care delivery, potentially alleviating ED overcrowding and improving patient outcomes. This work contributes to the growing field of AI applications in emergency medicine and offers a promising direction for future research and clinical implementation.", "sections": [{"title": "I. INTRODUCTION", "content": "Emergency departments (EDs) worldwide are at the fore-front of healthcare, serving as critical access points for urgent medical care. However, these vital facilities face unprece-dented challenges that threaten their ability to provide timely and effective care. The most pressing of these challenges is overcrowding, a phenomenon that has reached crisis levels in many countries. For instance, ED visits increased by 23.1% in the United States from 1997 to 2007, reaching 116.8 million annual visits [1]. Similar trends have been observed globally, including in South Korea, where the number of patients who were treated in EDs in Korea was 10,609,107, which was an increase of 1.76% compared to the previous year 2017. [2], [3].\nThe consequences of ED overcrowding are severe and multifaceted. Prolonged wait times not only cause patient discomfort but can also lead to delayed treatments, poten-tially exacerbating medical conditions [17]. It is evident that ED waiting times are associated with short-term mortality and hospital admission in high-acuity patients. Furthermore, overcrowding has been linked to increased medical errors, reporting that ED crowding was associated with increased adverse events, medication errors, and patient mortality [4], [28].\nThe strain on healthcare providers in overcrowded EDs is equally concerning. Emergency physicians and nurses work under immense pressure to make rapid decisions with often incomplete information. This high-stress environment con-tributes to burnout among healthcare professionals, a problem that has been exacerbated in recent years [5]. ED physicians experiencing burnout symptoms has been a serious problem, significantly higher than the average across all physician specialties [6].\nIn this challenging environment, the need for efficient triage and rapid yet accurate clinical decision-making is paramount. Triage, the process of prioritizing patients based on the severity of their condition, is particularly crucial. The Korean Triage and Acuity Scale (KTAS) [13], adapted from the Canadian Triage and Acuity Scale [18], has been widely adopted in South Korea for standardizing emergency triage processes. While effective, the implementation of KTAS still faces chal-lenges related to inter-rater reliability and the cognitive load placed on triage nurses, especially during peak hours. There were also discrepancies in triage levels assigned by different nurses, particularly for mid-acuity patients [7]."}, {"title": null, "content": "To address these challenges, healthcare systems have in-creasingly turned to technology-driven solutions [29]. Clinical Decision Support Systems (CDSS) [31] has emerged as a promising approach to enhancing clinical decision-making and improving patient outcomes. Traditional CDSS, often rule-based or utilizing simple machine learning algorithms, have shown potential in improving clinical outcomes and reducing medical errors. For instance, Ehteshami et al. revealed that health information technologies, including CDSS, improved adherence to clinical guidelines and reduced medication errors in various healthcare settings [8].\nHowever, the application of CDSS in emergency medicine presents unique challenges. The dynamic and unpredictable nature of emergency care, coupled with the need for rapid decision-making, often stretches the capabilities of traditional CDSS. These systems frequently struggle with the complexity and variability inherent in emergency medicine, leading to limited adoption and impact [21], [22].\nRecent advancements in artificial intelligence, particularly in the field of large language models (LLMs), offer new possibilities for enhancing CDSS capabilities. LLMs, such as GPT-4 and its successors [23], have demonstrated remarkable proficiency in understanding context, processing natural lan-guage, and generating human-like responses across various domains. These models also have shown promise in medi-cal applications [24], including clinical text summarization, medical question answering [25], and even simulating patient-doctor conversations [26].\nDespite these advancements, the application of LLMs in emergency medicine remains largely unexplored, presenting a significant research opportunity. The potential of LLMs to understand and process complex medical information, com-bined with their ability to generate contextually appropriate responses, makes them particularly well-suited for the fast-paced, high-stakes environment of the ED.\nIn this study, we seek to address this gap by proposing a novel multi-agent CDSS powered by state-of-the-art large language models. This system aims to integrate KTAS-based triage with comprehensive emergency care management, lever-aging advanced AI technologies to support emergency room physicians and nurses in their decision-making processes."}, {"title": "II. MATERIALS AND METHODS", "content": null}, {"title": "A. System Architecture", "content": "Our Clinical Decision Support System (CDSS) is built upon a multi-agent architecture powered by the Llama-3-70b large language model [11]. At its core, Llama-3-70b serves as the foundation, chosen for its open-source capability and advanced natural language understanding. The system's multi-agent framework is orchestrated by CrewAI, which enables the creation and management of multiple AI agents [12]. This framework allows us to simulate key emergency room roles, enhancing the system's ability to provide comprehensive and coordinated care recommendations. Each agent operates with a specific role, goal, and set of tools, mirroring the collaborative nature of real emergency department teams."}, {"title": "B. AI Agents", "content": "Our CDSS comprises four distinct AI agents, each emulat-ing a crucial role in the emergency department. The Emer-gency Physician Agent initiates the process by diagnosing patients and developing treatment plans. This agent analyzes the patient's presenting information along with additional examination data to formulate a diagnosis and differential diagnoses, consider potential complications, and outline neces-sary follow-up care. Access to up-to-date medical information through an integrated search function enhances the agent's capabilities, allowing it to base its recommendations on the latest evidence-based practices.\nConcurrently, medication safety is ensured by the Phar-macist Agent, who reviews the patient's medication history, checks for drug interactions, and provides crucial information about proper medication administration and potential side effects. This agent leverages the RxNorm dataset [14], a comprehensive source of standard names for clinical drugs, to verify medications, check for interactions, and ensure ap-propriate dosing.\nFollowing these initial assessments, the Triage Nurse Agent conducts the patient assessment using the Korean Triage and Acuity Scale (KTAS) [13]. This agent synthesizes the infor-mation provided by the Emergency Physician and Pharmacist agents, along with the patient's symptoms, vital signs, and medical history, to determine the urgency of care needed. The agent's decision-making process is guided by KTAS guide-lines, ensuring accurate and consistent triage classifications based on a comprehensive view of the patient's condition.\nFinally, the ED Doctor in Charge agent oversees the en-tire patient care process. This agent integrates information from all other agents to make critical decisions about patient management, including finalizing treatment plans, determining admission or discharge, and planning follow-up care. The agent's role is to ensure coherent and comprehensive patient management, taking into account both clinical needs and resource utilization based on the collective insights of all preceding agents."}, {"title": "C. Data Integration and Tool Utilization", "content": "We integrated several key data sources and tools to en-hance the system's decision-making capabilities. The KTAS guidelines were implemented as a comprehensive prompt, enabling the Triage Nurse Agent to accurately classify patients based on their presenting symptoms and vital signs. The RxNorm dataset (version 2023AB) serves as the backbone for the Pharmacist Agent's medication management capabilities, providing a standardized nomenclature for clinical drugs and facilitating accurate interaction checking and dosing recom-mendations. Every agent has the ability to search the web via the DuckDuckGo search tool [27]."}, {"title": "D. System Workflow", "content": "The system employs a streamlined workflow that mirrors the collaborative nature of emergency department operations while optimizing patient care. At the core of this system, the Emergency Physician Agent initiates the process by analyzing the patient's presenting information to generate an initial diag-nosis and treatment strategy. Simultaneously, the Pharmacist Agent conducts a thorough review of the patient's medication history, utilizing the RxNorm database to identify potential drug interactions and provide critical pharmacological insights. These preliminary assessments inform the subsequent actions of the Triage Nurse Agent, who performs a comprehensive evaluation of the patient's condition, assigns a KTAS level, and compiles a succinct yet detailed triage report. The workflow culminates with the ED Doctor in Charge Agent, which integrates all preceding analyses to formulate definitive care decisions and management strategies."}, {"title": "E. Evaluation Methodology", "content": "We evaluated our CDSS using the Asclepius dataset, which comprises simulated emergency department scenarios [15]. Utilizing randomly selected 43 cases, scenarios were carefully curated to represent a diverse range of emergency medical situations, providing a comprehensive test of the system's capabilities across various clinical presentations.\nAn experienced emergency physician reviewed the CDSS outputs for each scenario. He assessed the accuracy of KTAS classification, appropriateness of diagnosis and treatment rec-ommendations, comprehensiveness of medication reviews, and overall clinical decision quality. This expert evaluation pro-vides a clinically relevant assessment of the system's perfor-mance.\nTo quantify the benefits of our multi-agent approach, we conducted a comparative analysis against a single-agent sys-tem using Llama-3-70b alone, with ED Doctor in Charge agent prompt. Key performance metrics included the concordance rate with expert KTAS classification, a clinical appropriateness score for management recommendations, and a coherence improvement rate compared to the single-agent system."}, {"title": "III. RESULTS", "content": null}, {"title": "A. Performance of Triage Assessment with KTAS", "content": "We evaluated the performance of our CDSS in classifying patients according to KTAS levels. The system's performance was compared to that of a single-agent system, which served as a control. Both systems were evaluated against the KTAS levels assigned by an experienced ED physician."}, {"title": "B. Evaluation on Clinical Decision Making", "content": "We evaluated the clinical decision-making capabilities of both the multi-agent and single-agent systems across various categories crucial to emergency care. The evaluation was conducted using two scales: a 5-point scale (1: very inaccurate, 5: very accurate) for primary diagnosis, critical findings, disposition decision, and justification; and a 1-point scale (0: inaccurate, 0.5: moderate, 1: accurate) for immediate action, medication, diagnostic test, consultation, and monitoring.\n1) 5-Point Scale Evaluation: Table III presents the results of the 5-point scale evaluation for both systems.\nBoth systems demonstrated high accuracy in primary diag-nosis, with identical performance. However, the multi-agent system showed superior performance in identifying critical findings and providing justifications, with a higher proportion of cases rated as \"very accurate\" (5 points).\n2) 1-Point Scale Evaluation: Table IV shows the results of the 1-point scale evaluation for both systems."}, {"title": "A. Model performance", "content": "Our LLM-based multi-agent CDSS demonstrated superior performance compared to the single-agent system across mul-tiple dimensions of emergency care decision-making. The system's effectiveness was particularly evident in KTAS-based triage and clinical decision-making.\nOur multi-agent system exhibited high accuracy in KTAS classification, especially for the most urgent (KTAS level 1) and urgent (KTAS level 2) cases. This level of accuracy is crucial in emergency settings, where rapid and correct triage can significantly impact patient outcomes."}, {"title": null, "content": "However, we observed a tendency for the system to over-estimate urgency, particularly for KTAS levels 3 to 5. This bias towards higher urgency ratings contrasts with the typically more conservative approach of human ED physicians, who are trained to err on the side of caution. This discrepancy high-lights an important difference between the decision-making processes of our LLM-based system and human clinicians. While the system's cautious approach might lead to over-triage in some cases, it could potentially reduce the risk of overlooking critically ill patients.\nThe multi-agent system's superiority over the single-agent system was particularly apparent in its decisiveness and consistency. While the single-agent system often provided range classifications or failed to predict a KTAS level, our multi-agent system consistently offered definitive classifica-tions. This decisiveness is invaluable in real-world emergency departments where clear, rapid decisions are essential for efficient patient flow and resource allocation.\nIn terms of clinical decision-making, the multi-agent system demonstrated high accuracy across all evaluated categories. Notably, it achieved perfect scores in immediate action, medi-cation, diagnostic tests, consultation, and monitoring on the 1-point scale evaluation. The system's strong performance in identifying critical findings and providing justifications for decisions, as evidenced by the 5-point scale evaluation, suggests its potential to enhance the quality and safety of emergency care delivery.\nThe consistent outperformance of the multi-agent system over the single-agent system across various aspects of emer-gency care decision-making underscores the effectiveness of our approach. This performance difference likely stems from the multi-agent system's ability to mimic the collaborative nature of real emergency department teams, where different specialists contribute their expertise to patient care."}, {"title": "B. Mutli-agent System Effectiveness", "content": "The superior performance of our multi-agent CDSS com-pared to the single-agent system underscores the potential of multi-agent strategies in leveraging LLMs for healthcare applications. This approach represents a significant advance-ment in the field of clinical decision support, particularly in the complex and time-sensitive environment of emergency departments.\nOur multi-agent system's effectiveness stems from its ability to emulate the collaborative nature of real emergency depart-ment teams. By dividing tasks among specialized agents - the Triage Nurse, Emergency Physician, Pharmacist, and ED Doctor in Charge - the system mirrors the diverse expertise found in actual ED settings. This division of labor allows each agent to focus on its specific domain, leading to more accurate and comprehensive decision-making.\nThe Triage Nurse agent's proficiency in KTAS classifica-tion, coupled with the Emergency Physician agent's diagnostic capabilities, creates a robust initial assessment process. The Pharmacist agent's role in medication management adds a crucial layer of patient safety, while the ED Doctor in Charge agent synthesizes all inputs to make final decisions. This struc-ture enables the system to handle the multifaceted nature of emergency care more effectively than a single-agent approach.\nMoreover, the multi-agent strategy addresses one of the key challenges in applying LLMs to healthcare: the need for domain-specific expertise. While LLMs possess broad knowledge, they may lack the specialized understanding re-quired for specific medical tasks. By creating agents with defined roles, we can fine-tune each agent or utilize specific biomedical-pertained models as agents to align more closely with the specialized knowledge and decision-making processes of different ED professionals."}, {"title": "C. Clinical Implications", "content": "The CDSS's strong performance in clinical decision-making across various categories (primary diagnosis, critical findings, disposition decision, immediate action, medication, diagnostic tests, consultation, and monitoring) suggests its potential to enhance the quality and consistency of care. The system could help standardize care practices by providing accurate, evidence-based recommendations, potentially reducing vari-ability in treatment decisions and improving adherence to clinical guidelines.\nThe system's pharmacological recommendations, supported by integration with the RxNorm database, generally resulted in medically correct suggestions and have implications for medi-cation safety. By providing an additional layer of checking for drug interactions and appropriate dosing, the CDSS could help reduce medication errors, a significant concern in emergency care settings. However, we observed instances where the system recommended medicines that were not widely used or prohibitively expensive. This highlights the importance of contextualizing the CDSS with hospital-specific formularies and considering medication costs. In real-world applications, integrating the hospital's own medication database and pro-viding the agent with context about medication pricing could significantly enhance the practical utility of these recommen-dations.\nThe system's comprehensive output, covering aspects from initial triage to disposition decisions, could facilitate better communication and handovers between different ED staff members. This improved information flow could lead to more coordinated care and potentially reduce errors related to mis-communication.\nIn terms of resource allocation, the CDSS's accurate predic-tions for necessary diagnostic tests, consultations, and moni-toring could help optimize the use of hospital resources. This efficiency could be particularly beneficial in addressing the challenges of ED overcrowding, potentially reducing length of stay and improving patient throughput.\nIt's crucial to note that while the CDSS shows promise in enhancing various aspects of emergency care, it is designed to support, not replace, clinical decision-making. The system's recommendations should be used in conjunction with clinical expertise and judgment."}, {"title": null, "content": "Importantly, the effective integration of the CDSS into clinical workflows remains a critical consideration. The system should complement rather than disrupt the established triage and treatment planning processes. Developing methodologies for seamless integration is essential for the system's success in real-world settings. This could involve creating an intuitive user interface (UI) that aligns with ED staff's needs and workflow patterns. Additionally, integration with the hospital's existing Electronic Medical Record (EMR) system could sig-nificantly enhance the CDSS's utility, allowing for real-time access to patient data and smoother incorporation of CDSS recommendations into patient care processes.\nFurthermore, the clinical implications of this CDSS extend beyond immediate patient care. By providing a standardized approach to decision-making, the system could also serve as a valuable tool for training new ED clinicians, offering consis-tent, evidence-based guidance that can supplement experiential learning."}, {"title": "D. Ethical Considerations", "content": "The implementation of AI-driven clinical decision support systems in emergency medicine raises important ethical con-siderations and data privacy concerns that must be carefully addressed.\nFirst and foremost, patient privacy and data protection are paramount. Our multi-agent CDSS was designed with these concerns in mind, utilizing the Llama-3-70b model, which can be run locally. This approach significantly reduces the risk of sensitive patient data being transmitted or stored externally, aligning with stringent healthcare data protection regulations such as HIPAA in the United States or GDPR in Europe [19], [20]. By keeping data processing on-premise, we mitigate the risks associated with data breaches or unauthorized access that could occur with cloud-based solutions.\nHowever, the use of AI in clinical decision-making raises questions about accountability and transparency. While our system demonstrates high accuracy, it's crucial to maintain a \u201chuman-in-the-loop\u201d approach where healthcare professionals retain ultimate responsibility for clinical decisions. The CDSS should be viewed as a tool to augment, not replace, clinical judgment. Clear guidelines must be established to delineate the roles of the AI system and human clinicians, ensuring that the ethical and legal responsibilities of care remain with healthcare professionals.\nTransparency in AI decision-making processes is another critical ethical consideration. Although large language models like Llama-3-70b can provide highly accurate outputs, their decision-making processes can be opaque. This \u201cblack box\u201d nature of AI can be problematic in healthcare settings where the rationale behind decisions is crucial. Future development should focus on improving the explainability of AI recom-mendations, possibly through the integration of explainable AI techniques.\nBias in AI systems is a significant ethical concern that requires ongoing attention [33]. While our multi-agent system aims to mimic the collaborative nature of ED teams, it's impor-tant to recognize that biases present in training data or model architecture could lead to systematic errors or unfair treatment of certain patient groups. Regular system performance audits across diverse patient populations will be necessary to identify and mitigate any biases.\nThe potential for AI systems to influence clinical decision-making also raises questions about patient autonomy and informed consent. Patients should be made aware when AI systems are being used to support their care, and consideration should be given to how this information is communicated without causing undue concern or eroding trust in healthcare providers."}, {"title": "E. Limitations and Future work", "content": "One significant limitation we encountered was related to the dataset used in the study. The Asclepius dataset, which is very descriptive and complex, may not fully represent real-world scenarios. Although comprehensive data is generally beneficial, real-world datasets in emergency medicine are often characterized by sparsity, imbalance, and a substantial proportion of missing values. These features pose significant challenges in developing robust models for clinical decision support. The discrepancy is particularly evident in emergency situations, such as those handled through emergency telephone calls. In these scenarios, information is often incomplete, rapidly changing, and collected under high-stress conditions. Emergency responders and dispatchers have been dealing with such data limitations since the inception of emergency call systems, often making critical decisions based on partial in-formation and relying heavily on experience and standardized protocols to fill in the gaps. However, the Asclepius database, which we used to evaluate our CDSS, contains comprehensive and well-structured data. While this allowed for a thorough initial assessment of our system's capabilities, it also means that our evaluation benchmarks may differ from what we would expect in real-world performance. The system's ability to handle incomplete or inconsistent data, a crucial skill in actual emergency settings, was not fully tested in this study. This limitation underscores the need for future research to bridge the gap between idealized datasets and the messy reality of emergency medicine, incorporating more realistic data scenarios in subsequent evaluations of our CDSS to better assess its robustness and applicability in real-world emergency departments.\nAn important consideration in our research was the potential use of real-world emergency phone call data. Although we were unable to acquire such data for this study, our AI system has the potential to interpret emergency situations and provide crucial information to ED staff by integrating Speech-to-Text (STT) models. This capability could signifi-cantly enhance preparedness in the ED, allowing medical staff to anticipate incoming patients' needs more effectively. By providing early insights into the patient's condition, the system could facilitate the proactive preparation of resources such as treatment spaces, medications, diagnostic tests, and necessary medical equipment. This advance notice could streamline ED operations, potentially reducing wait times and improving the overall quality of emergency care by ensuring that appropriate resources are ready when the patient arrives.\nWhile we equipped our Al with internet search capabili-ties via the DuckDuckGo tool, relying on internet searches for medical information is not optimal. The potential for information overload, exposure to false information, lack of source credibility, and the slight time delay associated with web searches could lead to misinformation, confusion, and inefficiencies in clinical decision-making. A more promising approach would be to utilize verified information from medical textbooks and databases, though this presents its own chal-lenges in terms of copyright issues and credibility verification. To enhance the quality of our CDSS's responses, implementing standardized medical terminologies such as the Systematized Nomenclature of Medicine Clinical Terms (SNOMED CT) [30] and Logical Observation Identifiers Names and Codes (LOINC) [32] could be beneficial. Furthermore, integrating the CDSS into existing Electronic Medical Record (EMR) systems could significantly improve the productivity of ED physicians and nurses by assisting in the creation of medical records based on trained medical concepts. This integration would not only streamline workflow but also ensure that the Al's recommendations are grounded in verified, standardized medical knowledge, thereby enhancing the overall quality and reliability of the clinical decision support provided."}, {"title": "CONCLUSION", "content": "In conclusion, our multi-agent CDSS represents a significant step forward in the application of AI to emergency medicine. By demonstrating high performance across the spectrum of emergency care tasks, our system shows promise in enhancing emergency care quality, efficiency, and safety. As we move forward with further validation and refinement, this technology has the potential to significantly improve patient outcomes in these critical healthcare settings."}]}