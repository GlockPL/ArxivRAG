{"title": "Real-Time Energy Pricing in New Zealand: An Evolving Stream Analysis", "authors": ["Yibin Sun", "Heitor Murilo Gomes", "Bernhard Pfahringer", "Albert Bifet"], "abstract": "This paper introduces a group of novel datasets representing real-time time-series and streaming data of energy prices in New Zealand, sourced from the Electricity Market Information (EMI) website maintained by the New Zealand government. The datasets are intended to address the scarcity of proper datasets for streaming regression learning tasks. We conduct extensive analyses and experiments on these datasets, covering preprocessing techniques, regression tasks, prediction intervals, concept drift detection, and anomaly detection. Our experiments demonstrate the datasets' utility and highlight the challenges and opportunities for future research in energy price forecasting.", "sections": [{"title": "1 Introduction", "content": "Data stream learning has been an active research field over the past two decades. As a promising and powerful tool for big data and AI, streaming algorithms cope with several tasks that are not considered in conventional machine learning.\nAs outlined in [2], a data stream can arrive at a high velocity with potentially infinite volume. Meanwhile, the distributional properties of streaming data may evolve over time. These issues require streaming algorithms to possess certain characteristics. First, they must digest data points from the data stream efficiently due to the high speed of arrival. Second, they must only read the instances once (or a small number of times) because it is unfeasible to store the large volume of data in memory and iterate as much as desired. Third, they must adapt to Concept Drifts (CD)[20], which is an essential phenomenon in data streams, referring to the property changes over time. Streaming algorithms must be able to detect and adapt to the new concept during the process.\nRegression tasks are a crucial subset of machine learning research. However, they are relatively overlooked compared to their classification counterpart, especially in stream learning [6]. Only a small number of works have concentrated"}, {"title": "2 Background and Related Work", "content": "On 1 November 2022, New Zealand introduced a real-time electricity pricing system, replacing the ex-post final prices system that had been operating since 1 October 1996. This system results in a new price series - Dispatch Energy Prices, which are usually derived from the SPD (Scheduling, Pricing, and Dispatch) model. The prices are summarized and then announced by the pricing manager.\nDispatch Energy Prices are produced throughout trading periods, each of which lasts for 30 minutes. During each trading period, multiple prices are announced and last for one to several minutes. At the end of the trading period, an interim price is calculated as a weighted sum of the produced prices in that period, where the weights are the duration of each price. If no price errors are claimed, the interim price is declared as the final price at 2 PM on the next business day. For more details, please refer to the EMI website.\nDue to the vitality of energy and electricity prices to the energy market, research concerning forecasting the energy price has drawn significant attention and produced many solutions. As summarized in [21,11], numerous techniques and methodologies have been applied to energy price forecasting tasks over the past decades, many of which are machine learning-based. However, data streams have been absent in this field.\nThe ML models utilized in this work are introduced as follows. Sliding Window KNN, Random AMRules [8], Adaptive Random Forest Regressor (ARF-Reg)[9], and Self-Optimising K-Nearest Leaves (SOKNL)[17], are advanced algorithms designed for data stream processing and adaptive learning. Sliding Window KNN uses a moving window to handle changing data distributions efficiently. Random AMRules improves rule-based learning by adapting to evolving data patterns. ARF-Reg leverages ensemble learning with random subspace sampling to provide robust regression predictions in dynamic environments. SOKNL integrates KNN and ARF techniques, using leaf centroids for maintaining relevant historical data and adapting to concept drift. The Adaptive Prediction Interval for Data Stream Regression by Sun [18] dynamically adjusts prediction"}, {"title": "3 Data and Preprocessing", "content": "Although EMI provides plenty of different types of data, this work focuses on the Dispatch Energy Prices themselves, leaving other data for future work."}, {"title": "3.1 Brief Data introduction", "content": "The daily dispatch energy prices are available on the website as CSV files. The files contain the following features:\nTrading Date\nthe date that the trading takes place in the format of yyyy-mm-dd.\nTrading Period\nthe trading period indices, usually 1 to 48.\nPublish Date Time\nISO 8601 formatted date and time in NZ of the prices published by the pricing manager.\nPointOfConnection (POC)\nthe point of connection on the grid, possesses more than 200 unique values, more details on the Network supply points (NSP) table website.\nIsland\nbinary values indicating the North Island or South Island of NZ.\nIsProxyPriceFlag\nboolean values indicating whether the price is a proxy price, which happens when the PoC is disconnected from the grid due to transmission outage.\nDollarsPerMegawattHour\nthe published dispatch energy price in dollars per megawatt-hour.\nAll the files are downloadable from the Dispatch Energy Prices site."}, {"title": "3.2 Data Preprocessing", "content": "As detailed in Section 3.1, most of the attributes included in the data are either time or location related, which are not directly correlated with the energy prices. In this work, we propose an example of preprocessing the provided data source for data stream research. We abstract from 1 Nov. 2022 to 30 Apr. 2024 (18 months) in this work."}, {"title": "Regionalization", "content": "Our first focus is the PoC attribute. There are over 200 Point of Connections throughout New Zealand. The energy demands and prices are based on the different locations themselves, that says, being close on the geographical level does not necessarily correlate with similar energy prices. Therefore, our preprocessing treats each location (PoC) as a separate case."}, {"title": "Trading Date and Period", "content": "Trading date and period represent the periodic information in a year and a day, respectively. We convert the date and period index information into numeric values using trigonometric functions. Specifically, the trading date and period are normalized into [0, 2\u03c0] using Equation 1:\n$x_i = 2\\pi \\cdot \\frac{X_i - X_{min}}{X_{max} - X_{min}}$\nwhere $x_i$ is the ith normalized value, $X_i$ is the ith raw value, and $X_{max}$ and $X_{min}$ are the maximum and minimum values in the series, respectively. Then, the trigonometric functions, Sine and Cosine, are applied to the normalized series. Four new columns are appended to the datasets in this manner: two for the trading period and two for the trading date.\nNote that this approach might remove the seasonal information in the original data; therefore, the original information is also retained. Users can select whether"}, {"title": "Define Targets and Relevant Features", "content": "Under the current NZ energy system, multiple price announcements are made during a single trading period, and the quantity varies for different periods. As a consequence, in our preprocessing phase, we take either the mean or the median value to represent a certain trading period as the target.\nConsidering the availability of the previously published prices and the high frequency of updates to the database, it is rational and reasonable to include the previous ground truths in the datasets. In our approach, we include both the mean and median values from the past in the feature space. Our scripts allow users to specify how many trading periods need to be predicted in advance, which is defined as Delay in this article as it is a simulation of the delay of the target values' arrival. We include four groups of datasets, predicting the energy prices 0.5, 4, 6, and 24 hours ahead. By adding these features, we include the time dependence information into the data [3]. However, in this article, we focus on data stream mining aspect, leaving other scenarios, such as time-series and auto-regression, for further study."}, {"title": "4 Experiments", "content": "This section introduces experimental settings conducted on the extracted datasets.\nRegression. As the main purpose and most general use case of this project, regression tasks regarding energy prices are the first assessment in this work. Four state-of-the-art streaming regression algorithms are tested: Sliding Window kNN, Random AMRules (RAMRules) [8], Adaptive Random Forest for Regression (ARF-Reg)[9], and Self-Optimising K Nearest Leaves (SOKNL)[17]. The parameter settings for these algorithms follow the defaults in the Massive Online Analysis (MOA) platform [2], one of the most famous and popular open-source machine learning platforms for data stream learning. All the algorithms used are available in the MOA library. The Coefficient of Determination (R2) is utilized as the evaluation metric in this work for the reason proposed in [5].\nPrediction Interval. Prediction Interval (PI) [10] is an extension to the regular regression tasks. Instead of a single-valued prediction, PI provides an interval as the prediction, expected to cover a desired ratio of the ground truths. The prediction interval technique is particularly suitable for energy price forecasting. A predicted range of future prices provides adequate information for decision-making regarding the energy market [16,22]. In this work, we conduct PI tasks with the first proposed, fully incremental, online prediction interval method Adaptive Prediction Interval (AdaPI)[18]. AdaPI adheres to the default settings at CapyMOA, another open-source online learning platform. Only SOKNL is used as the base learner in this work. Evaluating PI is a challenging task since there are two aspects requiring consideration - the coverage and the interval width. In this work, we exploit Coverage and NMPIW (Normalized Mean Prediction Interval Width) as the evaluation metrics. In the most common cases, Coverage is required to be close to the confidence level while narrowing NMPIW as much as possible [18].\nDrifts. Another challenging yet important issue in stream learning is concept drift. In this work, we use Page-Hinckley [13] and Adwin [1] detectors on the Mean Absolute Error (MAE) and Root Mean Squared Error (RMSE) metrics to demonstrate the drifts in the proposed datasets. Both detectors are available on the River online stream learning platform [12].\nAnomaly Detection. As supervised anomaly detection is excessively studied [4], in this paper, we only consider unsupervised streaming anomaly detection tasks. The Half-Space Trees [19] algorithm is presented here as a demonstration of the datasets' usefulness. We use the implementation on the River platform. All experiments are also repeated 10 times with different random seeds."}, {"title": "5 Results", "content": ""}, {"title": "5.1 Regression", "content": "Table 1 illustrates the overall Coefficient of Determination (R2) results from the extensive regression experiments. Ten runs with different random seeds were executed on all datasets and algorithms, and the average R2 values are exhibited in the table. However, all the standard deviation values were smaller than 0.01, so they are omitted in the table."}, {"title": "5.2 Prediction Interval", "content": ""}, {"title": "5.3 Drifts", "content": ""}, {"title": "5.4 Anomaly Detection", "content": "Table 3 exhibits the Receiver Operating Characteristic - Area Under the Curve (ROC AUC) scores from Half-Space Trees algorithm executed on the processed datasets with different anomaly ratios.\nOverall, these datasets appear quite challenging for Half-Space Trees as most of the AUC scores are under 0.5. Due to the temporal characteristics of the datasets, we did not apply a shuffle procedure to the data. Additionally, in most of the datasets, the anomalies (high values of price) are not distributed in a consistent pattern. As illustrated in Figure 3, the outliers are concentrated in a specific time period (possibly May - July 2023, taking into account Figure 6). This may cause difficulty for the streaming anomaly detection algorithms.\nMore specifically, the performance of Half-Space Trees is influenced by both the delay and the anomaly ratio. It performs best with shorter delays and lower anomaly ratios. However, with longer delays, it adapts and performs better with higher anomaly ratios. The regression tasks can benefit from the anomaly detection to determine if an \"abnormal\" target value should be treated as an anomaly or the start of a drift. To align with the data stream gist, we did not consider offline anomaly detection. Further research is required in this respect."}, {"title": "6 Conclusion", "content": "In this study, we presented a comprehensive analysis of a newly introduced real-time streaming dataset of energy prices in New Zealand. Our experiments with various state-of-the-art streaming regression algorithms and prediction interval techniques demonstrated the dataset's potential for accurate and reliable energy price forecasting. The dataset also proved valuable for detecting concept drifts and anomalies, providing a robust foundation for further research in these areas. Despite the promising results, our findings also highlight several challenges, such as the need for better handling of extreme outliers and the impact of seasonal"}]}