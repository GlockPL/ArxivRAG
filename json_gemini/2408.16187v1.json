{"title": "Real-Time Energy Pricing in New Zealand: An Evolving Stream Analysis", "authors": ["Yibin Sun", "Heitor Murilo Gomes", "Bernhard Pfahringer", "Albert Bifet"], "abstract": "This paper introduces a group of novel datasets representing real-time time-series and streaming data of energy prices in New Zealand, sourced from the Electricity Market Information (EMI) website main-tained by the New Zealand government. The datasets are intended to address the scarcity of proper datasets for streaming regression learning tasks. We conduct extensive analyses and experiments on these datasets, covering preprocessing techniques, regression tasks, prediction intervals, concept drift detection, and anomaly detection. Our experiments demonstrate the datasets' utility and highlight the challenges and opportunities for future research in energy price forecasting.", "sections": [{"title": "1 Introduction", "content": "Data stream learning has been an active research field over the past two decades. As a promising and powerful tool for big data and AI, streaming algorithms cope with several tasks that are not considered in conventional machine learning.\nAs outlined in [2], a data stream can arrive at a high velocity with poten-tially infinite volume. Meanwhile, the distributional properties of streaming data may evolve over time. These issues require streaming algorithms to possess cer-tain characteristics. First, they must digest data points from the data stream efficiently due to the high speed of arrival. Second, they must only read the in-stances once (or a small number of times) because it is unfeasible to store the large volume of data in memory and iterate as much as desired. Third, they must adapt to Concept Drifts (CD)[20], which is an essential phenomenon in data streams, referring to the property changes over time. Streaming algorithms must be able to detect and adapt to the new concept during the process.\nRegression tasks are a crucial subset of machine learning research. However, they are relatively overlooked compared to their classification counterpart, es-pecially in stream learning [6]. Only a small number of works have concentrated"}, {"title": "2 Background and Related Work", "content": "On 1 November 2022, New Zealand introduced a real-time electricity pricing system, replacing the ex-post final prices system that had been operating since 1 October 1996. This system results in a new price series - Dispatch Energy Prices, which are usually derived from the SPD (Scheduling, Pricing, and Dispatch) model. The prices are summarized and then announced by the pricing manager.\nDispatch Energy Prices are produced throughout trading periods, each of which lasts for 30 minutes. During each trading period, multiple prices are an-nounced and last for one to several minutes. At the end of the trading period, an interim price is calculated as a weighted sum of the produced prices in that period, where the weights are the duration of each price. If no price errors are claimed, the interim price is declared as the final price at 2 PM on the next business day. For more details, please refer to the EMI website.\nDue to the vitality of energy and electricity prices to the energy market, research concerning forecasting the energy price has drawn significant attention and produced many solutions. As summarized in [21,11], numerous techniques and methodologies have been applied to energy price forecasting tasks over the past decades, many of which are machine learning-based. However, data streams have been absent in this field.\nThe ML models utilized in this work are introduced as follows. Sliding Win-dow KNN, Random AMRules [8], Adaptive Random Forest Regressor (ARF-Reg)[9], and Self-Optimising K-Nearest Leaves (SOKNL)[17], are advanced al-gorithms designed for data stream processing and adaptive learning. Sliding Window KNN uses a moving window to handle changing data distributions effi-ciently. Random AMRules improves rule-based learning by adapting to evolving data patterns. ARF-Reg leverages ensemble learning with random subspace sam-pling to provide robust regression predictions in dynamic environments. SOKNL integrates KNN and ARF techniques, using leaf centroids for maintaining rel-evant historical data and adapting to concept drift. The Adaptive Prediction Interval for Data Stream Regression by Sun [18] dynamically adjusts prediction"}, {"title": "3 Data and Preprocessing", "content": "Although EMI provides plenty of different types of data, this work focuses on the Dispatch Energy Prices themselves, leaving other data for future work.\n3.1 Brief Data introduction\nThe daily dispatch energy prices are available on the website as CSV files. The files contain the following features:\nTrading Datethe date that the trading takes place in the format of yyyy-mm-dd.Trading Periodthe trading period indices, usually 1 to 48.Publish Date TimeISO 8601 formatted date and time in NZ of the prices published by the pricing manager.PointOfConnection (POC)the point of connection on the grid, possesses more than 200 unique values,more details on the Network supply points (NSP) table website.Islandbinary values indicating the North Island or South Island of NZ.IsProxyPriceFlagboolean values indicating whether the price is a proxy price, which happens when the PoC is disconnected from the grid due to transmission outage.DollarsPerMegawattHourthe published dispatch energy price in dollars per megawatt-hour.\nAll the files are downloadable from the Dispatch Energy Prices site.\n3.2 Data Preprocessing\nAs detailed in Section 3.1, most of the attributes included in the data are either time or location related, which are not directly correlated with the energy prices. In this work, we propose an example of preprocessing the provided data source for data stream research. We abstract from 1 Nov. 2022 to 30 Apr. 2024 (18 months) in this work."}, {"title": "4 Experiments", "content": "This section introduces experimental settings conducted on the extracted datasets.\nRegression. As the main purpose and most general use case of this project, regression tasks regarding energy prices are the first assessment in this work. Four state-of-the-art streaming regression algorithms are tested: Sliding Win-dow kNN, Random AMRules (RAMRules) [8], Adaptive Random Forest for Re-gression (ARF-Reg)[9], and Self-Optimising K Nearest Leaves (SOKNL)[17]. The parameter settings for these algorithms follow the defaults in the Massive Online Analysis (MOA) platform [2], one of the most famous and popular open-source machine learning platforms for data stream learning. All the algorithms used are available in the MOA library. The Coefficient of Determination (R2) is utilized as the evaluation metric in this work for the reason proposed in [5].\nPrediction Interval. Prediction Interval (PI) [10] is an extension to the regular regression tasks. Instead of a single-valued prediction, PI provides an interval as the prediction, expected to cover a desired ratio of the ground truths. The prediction interval technique is particularly suitable for energy price forecasting. A predicted range of future prices provides adequate information for decision-making regarding the energy market [16,22]. In this work, we conduct PI tasks with the first proposed, fully incremental, online prediction interval method Adaptive Prediction Interval (AdaPI)[18]. AdaPI adheres to the default settings at CapyMOA, another open-source online learning platform. Only SOKNL is used as the base learner in this work. Evaluating PI is a challenging task since there are two aspects requiring consideration - the coverage and the interval width. In this work, we exploit Coverage and NMPIW (Normalized Mean Prediction Interval Width) as the evaluation metrics. In the most common cases, Coverage is required to be close to the confidence level while narrowing NMPIW as much as possible [18].\nDrifts. Another challenging yet important issue in stream learning is concept drift. In this work, we use Page-Hinckley [13] and Adwin [1] detectors on the Mean Absolute Error (MAE) and Root Mean Squared Error (RMSE) metrics to demonstrate the drifts in the proposed datasets. Both detectors are available on the River online stream learning platform [12].\nAnomaly Detection. As supervised anomaly detection is excessively stud-ied [4], in this paper, we only consider unsupervised streaming anomaly detection tasks. The Half-Space Trees [19] algorithm is presented here as a demonstration of the datasets' usefulness. We use the implementation on the River platform. All experiments are also repeated 10 times with different random seeds."}, {"title": "5 Results", "content": "5.1 Regression\nTable 1 illustrates the overall Coefficient of Determination (R2) results from the extensive regression experiments. Ten runs with different random seeds were executed on all datasets and algorithms, and the average R2 values are exhibited in the table. However, all the standard deviation values were smaller than 0.01, so they are omitted in the table.\nKey takeaways of Table 1: (a) ISL0661, SDN0331, STK0331, and WIL0331 demonstrate relatively stable R\u00b2 values across different algorithms, while ALB0331 and HAM0331 show more fluctuation. (b) SOKNL consistently produces better R2 results for all PoCs. RAMRules performs less competitively in most cases.\n(c) As expected, the delay length has a negative impact on the performance of all algorithms. Whereas, the performance drops are at an acceptable level.\nFigure 4 illustrates an example exhibition of prequential R2 results. Due to the space limit, only SDN0331 PoC with mean values as the targets is displayed here. The performance for four algorithms fluctuates with a similar tendency, seemingly affirming several concept drifts in the data.\n5.2 Prediction Interval\nTable 2 presents the PI results with 80% and 95% confidence level. Overall, the coverage values are all higher than the desired confidence level, and the NMPIW values are at a low level. This means that for these datasets, AdaPI can generate relatively compact intervals that cover more-than-required ground truths. This can greatly benefit decision-making in the energy market.\nFor each PoC, both Coverage and NMPIW values remain relatively stable across different delays, indicating that the model's prediction accuracy and in-terval width do not significantly fluctuate with the delay. There is also a clear trade-off between coverage and NMPIW, i.e., higher coverage usually requires wider NMPIW. Among the PoCs, ALB0331 and HAM0331 generally show higher coverage and relatively lower NMPIW compared to other PoCs.\nFigure 5 is a visualization of the real-time generated prediction intervals. Only a small portion of the whole dataset is presented here. It can be seen that the data starts fluctuating around 250 instances, and AdaPI adapts to it by enlarging the PI area to protect the coverage from decreasing dramatically.\n5.3 Drifts\nFigure 6 illustrates examples of drift analysis on data from the STK0331 \u0420\u041e\u0421. Among them, Figure 6a includes the drifts detected by the Page-Hinckley test based on the RMSE values from the KNN regressor. Figure 6b, on the other"}, {"title": "6 Conclusion", "content": "In this study, we presented a comprehensive analysis of a newly introduced real-time streaming dataset of energy prices in New Zealand. Our experiments with various state-of-the-art streaming regression algorithms and prediction interval techniques demonstrated the dataset's potential for accurate and reliable energy price forecasting. The dataset also proved valuable for detecting concept drifts and anomalies, providing a robust foundation for further research in these areas. Despite the promising results, our findings also highlight several challenges, such as the need for better handling of extreme outliers and the impact of seasonal"}]}