{"title": "Identifying and Decomposing Compound Ingredients in Meal Plans Using Large Language Models", "authors": ["Leon Kopitar", "Leon Bedrac", "Larissa J Strath", "Jiang Bian", "Gregor Stiglic"], "abstract": "This study explores the effectiveness of Large Language Models in meal planning, focusing on their ability to identify and decompose compound ingredients. We evaluated three models-GPT-40, Llama-3 (70b), and Mixtral (8x7b)-to assess their proficiency in recognizing and breaking down complex ingredient combinations. Preliminary results indicate that while Llama-3 (70b) and GPT-4o excels in accurate decomposition, all models encounter difficulties with identifying essential elements like seasonings and oils. Despite strong overall performance, variations in accuracy and completeness were observed across models. These findings underscore LLMs' potential to enhance personalized nutrition but highlight the need for further refinement in ingredient decomposition. Future research should address these limitations to improve nutritional recommendations and health outcomes.", "sections": [{"title": "Introduction", "content": "Artificial intelligence (AI) has made significant impact on various industries, including nutrition, by enhancing dietary planning and health management. With global food trends and busy lifestyles complicating meal preparation, maintaining a nutritious diet can be challenging. Nutrient profiling a method for classifying foods based on their nutritional values is critical for promoting healthy eating patterns and preventing illness (Alrige et al. 2017).\nEffectively implementing nutrient profiling requires a thorough analysis of meal plans and individual food items, a task that can be labor-intensive and prone to errors for both healthcare providers and patients. AI improves this process by breaking down meals into their fundamental components with high accuracy. AI-driven tools offer precise quantitative and qualitative evaluations, ensuring that dietary plans are tailored to meet individual health conditions and dietary goals. This advanced approach not only allows for more personalized meal adjustments but also highlights the growing need for sophisticated, AI-powered solutions to analyze and optimize the nutritional profiles of diverse food combinations, supporting personalized nutrition and overall health.\nLarge Language Models (LLMs) excel in interpreting and producing text that closely resembles human communication. With training on extensive datasets, these models can understand and analyze intricate concepts, making them well-suited for a range of text processing tasks and advancing the pursuit of artificial general intelligence (AGI) in multiple fields (Wei et al. 2022; Naveed et al. 2023). The semantic and contextual abilities of LLMs make it possible to create systems that analyze meal plans and offer customized nutritional recommendations (Ma et al. 2024; Lu et al. 2020).\nMeal plans often feature foods in their completed form, such as a lasagna, without breaking them down into their component ingredients. Ingredients fall into two categories: basic, which are singular and cannot be further decomposed, and compound, which consist of multiple basic ingredients combined together.\nTherefore, decomposing compound ingredients within meal plans is crucial for several reasons. First, allergy and intolerance management is enhanced by identifying the individual components of compound ingredients. This allows for the substitution of problematic elements, ensuring meals are safe for those with specific dietary restrictions. Second, nutritional accuracy is improved by analyzing each ingredient separately, which allows for a precise assessment of the meal's overall nutritional profile and ensures it meets dietary guidelines and health standards. Third, cost estimation becomes more effective by breaking down ingredients, facilitating budget planning and cost management, especially when preparing meals in large quantities or for institutional settings. Next, personalization of meal plans is better supported when ingredients are decomposed, enabling customization to meet individual dietary preferences, health goals, and nutritional needs. And final, nutritional compliance is achieved by aligning meal plans with food group guidelines and using structured frameworks to monitor and adjust nutrient levels. This approach helps prevent both excesses of harmful nutrients and deficiencies of essential nutrients, contributing to healthier dietary patterns and supporting public health initiatives."}, {"title": "Materials and Methods", "content": "We assessed the performance of three LLMs: GPT-40 (OpenAI 2024a), Llama-3 (70b) (Meta 2024), and Mixtral (8x7b) (Jiang et al. 2024). The evaluation focused on each model's ability to identify and decompose compound ingredients into basic components. To verify the accuracy of the results, the decomposed ingredients were cross-referenced with entries in the USDA FoodData Central repository.\nThe research employed programming language Python and key libraries such as OpenAI (OpenAI 2024b) and Perplexity (Perplexity AI 2024). GPT-4o was utilized to generate meal plans and map the identified basic ingredients to the USDA FoodData through its API (USDA 2019). These libraries were instrumental in both recognizing and deconstructing compound ingredients."}, {"title": "2.2 Generation of Meal Plans", "content": "With GPT-40's default settings, 15 meal plans were generated in five iterations, including five each for breakfast, lunch, and dinner. Each plan specified exact portion sizes and ingredient quantities, with the plans created independently."}, {"title": "2.3 Ingredient Identification and Decomposition", "content": "For each model (GPT-40, Llama-3 (70b), Mixtral (8x7b)), we analyzed 15 meal plans and tasked the models with identifying and deconstructing compound ingredients into their simpler components, basic ingredients. For instance, 'Beef Stroganoff is a compound dish that can be deconstructed into basic ingredients like beef strips, sour cream, onions, mushrooms, beef broth, flour, and butter. These fundamental components were matched against the USDA FoodData entries, and their nutritional content was calculated and aggregated for the whole dish."}, {"title": "2.4 Model Evaluation and Performance Metrics", "content": "The evaluation of LLMs centers on their ability to accurately identify and decompose compound ingredients into their fundamental components. To establish a benchmark, nutritionists review 15 meal plans to identify the compound ingredients, which are then considered the ground truth for the assessment. These expert-identified ingredients are compared with those predicted by the models to assess their performance. The comparison is used to calculate key metrics such as accuracy and the F1-score. Accuracy measures the proportion of correctly identified compound ingredients relative to the total number assessed, while the F1-score provides a balanced evaluation of precision and recall, which is especially important in cases of class imbalance. Additionally, nutritionists review the decomposed basic ingredients and their quantities to ensure that they are realistic and consistent with the original compound ingredients.\nThe statistical significance of performance differences between models is assessed using either a paired t-test or a Wilcoxon signed-rank test. The choice of test depends on the data's distribution, as determined by the Shapiro-Wilk test."}, {"title": "Results", "content": "In this section, we present the outcomes of our evaluation across three models-Llama-3 (70b), GPT-40, and Mixtral (8x7b) focusing on their ability to identify and decompose compound ingredients within meal plans. The performance metrics and comparative analysis reveal each model's strengths and weaknesses in accurately handling ingredient data. We first address the identification of compound ingredients, followed by an examination of how effectively each model decomposes these ingredients into their basic components. The findings provide a comprehensive overview of the models' capabilities and highlight key areas for improvement."}, {"title": "3.1 Identification of Compound Ingredients", "content": "In the analysis of 15 meal plans, 101 ingredients were identified, reduced to 99 unique ingredients after accounting for repetitions. The analysis shows that Llama-3 (70b) and GPT-4o exhibit no statistically significant difference in performance for identifying compound ingredients (p > .1). Llama-3 (70b) had an F1-score of 0.894 (95% CI: 0.84-0.95) and an accuracy of 0.893 (95% CI: 0.85-0.94), while GPT-4o had an F1-score of 0.842 (95% CI: 0.79-0.89) and an accuracy of 0.835 (95% CI: 0.78-0.89), while Mixtral (8x7b) performance is significantly worse than both models in both metrics (p < .01)."}, {"title": "3.2 Decomposition of Compound Ingredients", "content": "The models exhibited different frequencies and accuracies in decomposing compound ingredients. GPT-4o and Llama-3 (70b) included basic ingredients such as salt, sugar, or pepper less frequently (3-times and 2-times) compared to Mixtral (8x7b), which included these ingredients more often (8-times).\nEvaluation of the GPT-40, Llama-3 (70b), and Mixtral (8x7b) models in decomposing compound ingredients showed varying accuracy across different meals. Common problems included missing oils, seasonings, and sweeteners in dishes like scrambled eggs and mixed salads. GPT-40 often failed to decompose items like whole wheat toast, while Llama-3 (70b) showed slightly better performance, such as including olive oil in ratatouille. Mixtral (8x7b) had difficulties with more complex items like hummus but managed simpler ones accurately. All models struggled with integrating seasonings and cooking methods, leading to incomplete nutritional profiles."}, {"title": "Discussion", "content": "In this study, we evaluated three models-Llama-3 (70b), GPT-40, and Mixtral (8x7b) on their ability to identify and decompose compound ingredients within meal plans. The results reveal clear distinctions among the models in their performance, with significant implications for future improvements in ingredient decomposition and knowledge representation.\nOverall, Mixtral (8x7b) consistently fell short of GPT-40 and Llama-3 (70b) in accuracy and F1-score, revealing significant gaps in several critical aspects. In contrast, GPT-40 and Llama-3 (70b) demonstrated comparable performance levels, with no statistically significant differences found between the two.\nAlthough all models demonstrated some ability to identify basic ingredients, none consistently included crucial elements such as salt, pepper, and sugar with sufficient frequency. However, Mixtral (8x7b) incorporated these basic ingredients more often than GPT-40 and Llama-3 (70b), with a rate of 12.9% compared to 9.7% for GPT-40 and 6.5% for Llama-3 (70b). This indicates that Mixtral (8x7b) tends to prioritize these essential ingredients more reliably when generating recipes or related content.\nThe analysis reveals both strengths and weaknesses in the GPT-40, Llama-3 (70b), and Mixtral (8x7b) models regarding meal decomposition. Although all models demonstrate some capability in identifying basic ingredients, they struggle with consistently handling oils, seasonings, and compound ingredients, highlighting areas for improvement. Llama-3 (70b) excels in certain culinary details, suggesting it may be better suited for applications that require detailed ingredient decomposition. Nevertheless, the frequent omission of essential ingredients by all models underscores the need for improved algorithms for more comprehensive ingredient recognition. Future enhancements should aim to address these issues, providing more accurate and reliable nutritional analysis to help users better understand the nutritional content of their meals.\nThe findings from this study have substantial real-world implications. For example, incorporating ingredient decomposition into dietary planning tools could improve the accuracy and personalization of nutrition recommendations, making them better suited to individual dietary requirements. Such tools would benefit from the model's capability to provide precise ingredient quantities and compositions,"}, {"title": "Conclusion", "content": "Our study highlights the capabilities of LLMs in significantly enhancing meal planning by accurately identifying compound ingredients. These models demonstrate a strong proficiency in recognizing complex ingredient combinations, contributing to more efficient and informed meal preparation. However, despite their strengths, LLMs fall short in the precise decomposition of compound ingredients into their individual components. This limitation suggests that while LLMs can greatly enhance meal planning, there remains room for improvement in their ability to break down and analyze compound ingredient content.\nPreliminary results highlight the promise of LLMs in improving meal planning through effective identification and interpretation of complex ingredient combinations. Models such as GPT-40, Llama-3 (70b), and Mixtral (8x7b) demonstrate notable skills in recognizing compound ingredients, though performance varies significantly among them."}]}