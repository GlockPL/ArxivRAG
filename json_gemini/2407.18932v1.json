{"title": "Be More Real: Travel Diary Generation Using LLM Agents and Individual Profiles", "authors": ["Xuchuan Li", "Fei Huang", "Jianrong Lv", "Zhixiong Xiao", "Guolong Li", "Yang Yue"], "abstract": "Human mobility is inextricably linked to social issues such as traffic congestion, energy consumption, and public health; however, privacy concerns restrict access to mobility data. Recently, research have utilized Large Language Models (LLMs) for human mobility generation, in which the challenge is how LLMs can understand individuals' mobility behavioral differences to generate realistic trajectories conforming to real world contexts. This study handles this problem by presenting an LLM agent-based framework (MobAgent) composing two phases: understanding-based mobility pattern extraction and reasoning-based trajectory generation, which enables generate more real travel diaries at urban scale, considering different individual profiles. MobAgent extracts reasons behind specific mobility trendiness and attribute influences to provide reliable patterns; infers the relationships between contextual factors and underlying motivations of mobility; and based on the patterns and the recursive reasoning process, MobAgent finally generates more authentic and personalized mobilities that reflect both individual differences and real-world constraints. We validate our framework with 0.2 million travel survey data, demonstrating its effectiveness in producing personalized and accurate travel diaries. This study highlights the capacity of LLMs to provide detailed and sophisticated understanding of human mobility through the real-world mobility data.", "sections": [{"title": "1. INTRODUCTION", "content": "Human mobility behaviors are intricately linked to personal preferences, social interactions, and environmental factors, the parsing of mobility data while extracting accurate mobility patterns is essential for urban planning and traffic management[1, 29]. Although human mobility is regular and predictable, it is also inherently complex under the space-time and social constrains [8, 24, 25]. For human mobility generation, it is essentially attempting to understand and model how various factors such as individual's preferences, social attributes, and environmental conditions influence the mobility behaviors[5].\nDeep learning methods, such as VAE[10, 16], GAN[4,\n12], and Diffusion models [3, 33] have made considerable progress for generating individual trajectories. However, they are limited in understanding the intentional and contextual aspects of human mobility, especially when faced with atypical or nuanced scenarios, which hinders their effectiveness in generating realistic and contextually rich travel diaries. Large language models (LLM) have shown emergent abilities for semantic interpreting and generalized purpose reasoning, which allows it to simulate human behaviors with a narrowly defined context[2, 18] by reformulating the trajectory generation problems into a reasoning problem, and thus, brings opportunities for generating more realistic individual trajectories. LLMs are expected to summarize and reason personal mobility patterns and motivations, and then generating customized behavior based on these templates [22, 26]. However, most of the existing studies fail to take into account personal profiling, such as gender, age, and socioeconomic status, resulting in unrealistic trajectories lack individual characteristics. As illustrated in Figure 1, individuals with the same occupation but varying ages exhibit distinct patterns of mobility over time. However, when all \"technical employees\" are considered as a homogeneous group, the generated trajectories may only reflect the overall mobility tendencies associated with their occupational identity, failing to capture their personal differences. Thus, the new paradigm for mobility generation using LLMs faces the challenge of accurately understanding the complex relationship between individual attributes and mobility tendencies, and generating more realistic trajectories that are not only statistically plausible but also consistent with real-world contexts.\nThis study attempts to address the following research questions: RQ 1: How do LLMs align individual attributes with motivations and behaviors of human daily mobility. RQ 2: Can LLMs generate more real and personalized travel diaries in urban contexts. RQ 3: What is the impact of individual attributes on the performance of LLMs.\nTo answer the questions, we propose a fine-grained individual travel diary generation framework, MobAgent, based on LLM agents, which consists of two parts: (1) understanding-based mobility pattern extraction, and (2) reason-based mobility generation. In the first part, LLM is intend to learn the fundamental principle behind mobility. LLM reveals the relationships between personal attributes and mobility behaviors through a comparison and self-evaluation mechanism; such that extracting thoughtful mobility patterns after understanding how and why mobility behavior occurs. In the Second part, we introduce a recursive rethink strategy to reason individual mobility motivation along with the retrieval information in Part 1; that facilitate the generation of consecutive daily trajectory with representative individual attributes. Then, the generated trajectories are mapped into a real urban context considering the shortest path based on road network.\nWe evaluate the proposed framework using GPT-4.0 and DeepSeek APIs on a 0.2 million real-world travel survey data with individual profiles. The results demonstrate that the proposed framework, MobAgent, excels in generating personalized and context-aware travel diaries over the space-time and semantic scale. We summarize our contribution as follows: (1) This study reveals the dependency between individual attributes and mobility behaviors and proves the feasibility of LLM agents for generating more realistic individual trajectories. (2) We introduce an understanding-based patterns extraction mechanism, which supports the LLM to figure out the fundamental principle behind personalized mobility behaviors. (3) We propose a reason-based rethink strategy that generates interpretable motivation and mobility with considering road network structures in physical environment, which is accurately matched with individual's attributes."}, {"title": "2. RELATE WORKS", "content": "2.1 Mobility Data Generation\nEarly mobility modeling has relied on statistical methods, such as Markov model [17, 30], which captured sequential dependencies in mobility patterns but fell short in representing the multi-faceted dimensions of human behavior. The emergence of generative deep learning models [9, 6, 10] marked a turning point in the field. Such as VAEs introduced the concept of a latent space that allows for the generation of diverse trajectories, capturing a wide range of human movements[10]. However, they often struggled with interpretability and sensitivity to contextual factors. GANs have been particularly notable for their ability to generate realistic and diverse data samples. Feifei Li's team [7] released a model called \"Social GAN\" to synthesize human movement trajectories with social attributes for robotic platforms, which led to research on human trajectory prediction in related fields[12, 20, 21]. However, they also face challenges such as mode collapse and the need for large amounts of training data. DDPMs, more recently, have shown promise in producing high- quality synthetic data by modeling the data distribution through iterative denoising processes. The step-by-step modeling process make its superiority of capturing spatial-temporal features derived from real trajectories[31-33]. In addition, the combination of statistic model and deep learning model has been purposed as a more robust framework for capturing the complex, multi-dimensional nature of human mobility[4, 23, 27]. However, the randomness, sparsity, and irregular patterns in mobility are challenging.\n2.2 LLM Agents and Human Behavior\nLLMs possessing extensive knowledge and reasoning capabilities have recently been leveraged to replicate real-world dynamics to generate believable behavior [14, 18]; such as utilizing agents based on LLMs to simulate human decision-making in fields of epidemiology[28], sociology[19], and economics[14]. For instance, utilizing LLMs agents to simulate individual emotions, attitudes, and interactive behaviors, in a simulation social network environment[15]. As well as the treating illness scenario, all patients, nurses, and doctors are autonomous agents to simulate disease onset and progression, promoting the doctor agent learns how to treat illness [13]. These applications have demonstrated the capability of LLM agents to simulate human behaviors and interactions, providing insights for modeling more realistic urban mobility. By integrating the strengths of data-driven, contextual, and motivational models, these LLM-agent approaches aim to create high-fidelity simulations that reflect the true diversity and complexity of human mobility[22, 26]. However, the privacy protection limited achievements of the large individual mobility data with fine-grained personal profile (including age, income-level, education level, marital and parental status), thus, it is hardly to simulate human mobility behaviors in the real world."}, {"title": "3. PROBLEM DEFINTION", "content": "Travel Diary. An individual travel diary is donated as a set of location-based trajectory point sequences, x = {S1,\nS2, ..., Sn}, where each point si can be expressed as (ti, li, ei, di, bi). li denotes the spatial location, either in the form of region ID or coordinate of latitude and longitude, ti refers to the visit time. ei, di, and bi represent the travel purpose, travel distance, and travel mode, respectively.\nIndividual Profiles. There are 10 categories individual attributes in this study, such as age, gender, occupation, income, education, car statue, housing statue, home address, primary transportation, and work address, presented as ui = {a1, a2, a10}. And individuals are divided into fine-grained group according to the multiscale combination of their attributes.\nTravel Diary Generation. Given a real-world travel survey dataset, (X = {X1, X2, ... Xn} and U = {U1, U2, ... Ui}). The goal of the mission is to learn realistic individual mobility patterns to generate new travel diary data Y = {y1, y2, ...yi} that has similar characteristics and mobility patterns as X."}, {"title": "4. METHOD", "content": "Individual's mobility decisions can be inferred according to the historical mobility pattern and motivations under specific situations or events. Our framework composes two progressive stages shown in Figure 2: Understanding-based Mobility Pattern Extraction and Reasoning-Based Travel Dairy Generation."}, {"title": "4.1 Understanding-Based Mobility Pattern Extraction", "content": "Explaining why mobility happens, and learning the behavioral difference in different groups allows LLM agents accurately understand and infer underlying mobility motivation. We extract fine-grained mobility patterns and generate explanation to construct contextual knowledge of human mobility in the real world.\n4.1.1 Group division and Pattern Identification\nTo capture the complex diversity in human mobility behaviors, we first divide the individuals into fine- grained groups based on multiple individual profiles, and then subgroups are created through hierarchical clustering. For instance, within the 'teacher' attribute, we differentiate between various age range, income levels, and education backgrounds. This allows us to observe more specific and personable mobility behaviors and avoid the pitfalls of averaging out individual differences. For each subgroup, LLM is employed to preliminarily"}, {"title": "4.1.2 Pattern Comparison and Self-Evaluation", "content": "We conduct the contextual analysis and pattern comparison to understand the underlying reasons behind observed mobility patterns i.e., general patterns for human mobility, and personal variations. At macro level, the general patterns include the commute needs, constrained travel distance and frequency in specific spatiotemporal frames. At micro level, personal mobility comparison aims to explain how individual attributes, like gender and income, influence mobility behaviors such as travel purposes and timing. For example, higher- income individuals might prefer private transportation and travel longer distances for leisure activities; gender differences can reveal that women, particularly in certain age groups, may have distinct travel patterns due to childcare responsibilities or safety concerns at specific times of the day.\nAs shown in Figure 3, we construct a self-evaluation workflow based on the chain-of-thought (CoT) mechanism. Specifically, given the extracted mobility patterns as prior context, we select anonymized personal trajectories to let the LLM infers the group they belonged to; and the LLM completes the masked information in personal travel diaries, such as the timing or intentions. In this process, the LLM recursively evaluate and update the hierarchies and mobility patterns of individuals, by simulating mobility decision process and explain the difference of mobility behaviors from the aspect of hierarchical attributes."}, {"title": "4.2 Reasoning-Based Travel Diary Generation", "content": "Retrieval augmentation provides additional information that aids LLM in more effectively responding to queries. Not only providing mobility patterns as the static background context for fine-grained groups, we also add the analysis and result of CoT achieved in section 4.1.2 to construct the cognition of mobility mechanisms. This strategy instructs the LLM to simulate a designated individual according to existed patterns with a human- like thought linking personal mobilities with extra or inner factors.\n4.2.1 Motivation Reasoning\nThe LLM agent begins by examining the motivations driving individual mobility, such as commuting, attending school, shopping, leisure activities, and social interactions. Integrating individual's profile with its retrieval information i.e., mobility patterns and prior thoughts as a complete prompt, the agent can initially construct an individual's daily plan. In the motivation reasoning process, the agent considers the intention, time, location category, distance, and travel mode for each travel activity. It then compares this with previously analyzed information to refine the generated motivation through a recursive learning process. For instance, when generating travel diary for a 38-year-old high-income female teacher with a randomly assigned home location. Based on the retrieval information that \"women with greater earnings or longer working years, who are typically not bound by the constraints of clocking in and out of work...\", the agent infers from her occupation and age that she prefers to avoid rush hour traffic on weekdays and visits family-friendly locations on weekends. Her high-income status influences her choice of travel mode and shopping destinations. Through the recursive thinking and reasoning process, the agent continually refines its output by comparing generated trajectories against real-world situations.\n4.2.2 Mapping to Physical Location with the Shortest Path of Road Network\nThere are two commonly used approaches to match the generated semantic mobility with the geo-location in a real urban environment: directly predict geographic coordinates in the generation process [26] and correspond travel intentions with real POI location by mechanistic model[22]. However, human movement is physically constrained by and influenced by the physical spatial structure, particularly the road network. Benefited from considering the attributes such as socioeconomic status, personal preferences, and lifestyles in the pattern extraction part, our framework generates more realistic individual mobility motivations."}, {"title": "5. EXPERIMENTS", "content": "5.1 Experimental Setup\nDatasets. We validate our framework on a city-wide travel survey dataset with 25,481 users and 199,380 records collected in Shenzhen, one of the largest megacities in China. The residents recorded their daily travel details in a travel surveying APP. This dataset contains 10 categories of individual attributes and 11 categories of travel details. Details of the dataset is presented in Appendix.\nEvaluation Metrics. We evaluate generated mobility behaviors based on two dimensions: statistical evaluation and multiscale attributes evaluation.\nStatistical evaluation. we calculate the Jensen-Shannon divergence (JSD) between the generated data and the real data in four metrics:\nStep Distance (SD): measures distance between two consecutive locations in a trajectory to evaluate the spatial pattern of mobilities.\nStep Interval (SI): measures time interval between two successive locations on an individual's trajectory to evaluate the temporal pattern of mobilities.\nST-LOC: calculates the number of visited Origin- Destination (OD), presented as (origin destination and time frame), to evaluate the spatial-temporal pattern of mobility.\nDailyLoc: calculates the number of different locations visited per day for each of the user to evaluate the visit frequency pattern of mobility.\nMultiscale attribute evaluation. This is conducted on groups with different attributes grains to compare the statistical evaluation. For example, the multi-grained attributes of group include (age), (age, income), (age, occupation), and (age, income, occupation), which are abbreviated as the A, A+I, A+O, and A+I+O in Table 2, respectively. The generated trajectories are aggregated on weekdays and weekends with the hourly time frame.\n5.2 Experiments and Result\nOur framework is designed in zero-shot. The pretrained LLM divided individuals into fine-grained hierarchies according to their multiple individual's attributes, and then extract mobility patterns while providing analysis under its CoT as the prior knowledge. LLM agents generate travel diaries only according to the provided individual attributes and prior knowledge.\n5.2.1 Over performance (RQ 1, RQ 2)\nResults of evaluations on the statistical and semantic dimension are shown in Table 1 \u2013 Table 2, respectively. Comparing with the abolition models in Table 1, it can be observed that the performance of our model decreases when we remove the designed pattern extraction mechanism and the recursive reasoning strategy, which proves the effectiveness of these two components for the model to generate realistic trajectories. Furtherly, it is shown that the model failing to grasp the fundamental principles of why and how people move (i.e., the individual attributes, preferences, and contextual factors driving their movements) performed worse than those that do not utilize recursive thinking for generating the next motivation in mobility sequences. This implies that understanding the \"why\" behind mobility is the prerequisite of refining the \"what\" in a step-by-step manner.\n5.2.2 Multiscale attribute evaluation (RQ 3)\nTo investigate the impact of individual attributes on the effectiveness of individual mobility generation, we conducted in-depth ablation experiments on the office staffs group divided by different attributes. In which we focused on three core dimensions of patterns: age, income, and occupation. The evaluation metrics are detailed in the Table 2. It is found that when the input prompt integrates all three dimensions age, income, and occupation, the generated data most closely resemble real-world scenarios, demonstrating optimal performance. Following this, the age alone significantly influences, likely due to the distinct mobility patterns exhibited by different age groups. The income also plays a crucial role, particularly in determining travel distance and destination choices. In contrast, the impact of occupation is relatively limited in this simulation, indicating that the coarse attribute of occupation is limited to reflect the nuanced diversity in mobility behaviors.\nIn summary, age, income, and occupation have been proven to be highly correlated with personalized mobility patterns, with age having the most pronounced impact. These findings highlight the significance of finely defining and dividing personal attributes in realistic mobility behaviors generation.\n5.2.3 Spatial-temporal Analysis (RQ 2, RQ 3)\nTo furtherly validate the effectiveness of the fine-grained mobility patterns extracted in Section 4.1, and explore how individuals' attributes affect their mobility choices over space and time scales. We conducted two specific experiments as illustrative examples, i.e., EXP 1 and EXP 2.\nEXP 1: We designed the experiment with 200 agents, modeled as women aged 30-35 living in a specific area. Figure 4 shows the spatial distribution of their destinations during a typical workday morning from 8:00 to 9:00 AM. In Figure 4-(a), agents without the guidance of fine-grained patterns displayed a broad distribution that primarily concentrated in the business district on the left side of the map, only simply simulated the commuting motivation to work. In contrast, in Figure 4-(b), the areas around schools had significantly increased activity. That is because, agents have learned that middle-aged women often juggle both family and work responsibilities, as shown in Figure 6-(a). Their morning travels not only include commuting to work but also taking children to school and other family obligations. It validates the effectiveness of our MobAgent in capturing the relationships between the (age, and gender) and their travel diaries.\nEXP 2: We generated the weekend trips of 200 male individuals, they are characterized as car owners aged 30 to 35, having middle to high-income family backgrounds. As displayed in Figure 5-(a), without the guidance of patterns, their activities tended to be centered around their residential areas, with few long-distance trips, aligning with the general preference for nearby leisure activities. In Figure 5-(b) there was a marked increase in long-distance trips, primarily to natural parks, cultural museums, seaside leisure areas, and large shopping centers on the left side of the map, which became popular choices for their leisure activities. Indicating that agents learned that the reality that high income level and the convenience of private cars often prefer planning longer trips on weekends, like the example shown in Figure 6-(b)."}, {"title": "6. CONCLUSIONS", "content": "In this study, we propose a new framework for generating realistic individual travel diaries using LLM agents (MobAgent) and 0.2 million individual survey data. We emphasize understanding-based and motivation-based mechanisms to facilitate LLM to capture the fundamentals and dependencies behind mobility and individual attributes. MobAgent enables insight to finer-grained and personalized mobility patterns confirming to the reality, and generate mobility data with zero-shot learning.\nExperimental results demonstrate that ignoring individual profiles would lead to the \"average person\" problem [11], which obscures and misleads personal mobility variations. While our framework can effectively generate more realistic individual travel diaries, especially, those who have same occupation but subtle differences in gender, age, and income level. Because this framework enables LLM to learn individual profiles at finer-grained and find associations between individual characters and their mobility behaviors. These findings demonstrate that integrating detailed individual and travel data into agent models can significantly improve the accuracy of mobility and travel behavior predictions, making simulations more reflective of real-life scenarios."}, {"title": "Prompt", "content": "Initial Group Division\nYou have a travel survey dataset regarding travel conditions. Preliminary data analysis has revealed several key insights <INPUT 1>.\nYour goal is to capture the complex diversity in human mobility behaviors present in these data across different groups, aiming to uncover the subtle differences and unique aspects of travel patterns among various subgroups. Currently, you have initially classified the subjects based on several criteria <INPUT 2>. To gain a more refined understanding of the diversity in travel patterns, please evaluate whether it is necessary to further segment the groups based on another specific dimension <INPUT 3>, considering the statistical distribution characteristics of the current data and general knowledge from daily life. Based on this consideration, please provide a rating (ranging from 1 to 10), where a higher score (closer to 10) indicates a strong recommendation for additional segmentation to obtain deeper insights.\nFine-grained Patterns Extraction\nThe profiles of this group are as follows <INPUT 1>.\nThe patterns and distributions of their travel behaviors are as follows <INPUT 2>.\nPlease use common knowledge and logical reasoning to deeply consider the impact of each dimension of the group's attributes on their travel patterns. Please list in detail the correlations between each attribute and travel behavior, and analyze the fundamental reasons behind these connections. Please first analyze the dimension <INPUT 3>.\nPatterns Update \u2013 STEP1\nThese are the mobility patterns you have identified <INPUT 1>. These are the travel trajectories I have provided <INPUT 2>. Please analyze the observed anonymous travel trajectories and compare them with the patterns you have identified.\nPlease follow the steps below:\nLook at each trajectory and compare it to the patterns you identified.\nDecide which group the trajectory belongs to. For example, if the trajectory shows regular long-distance travel during work hours, it might belong to 'young professionals'. Furthermore, you need to infer the age, income level, and gender of 'young professionals'.\nExplain your reasoning. For instance, \"This trajectory shows long commutes in the morning and evening, matching the 'young professionals' pattern.\"\nStart with the first trajectory: Describe it, infer the group, and explain your reasoning.\nPatterns Update - STEP2\nThese are the mobility patterns you have identified <INPUT 1>. This is a trajectory with some information masked <INPUT 2>.\nPlease follow the steps below:\nFill in missing details like travel times and reasons. For example, if you know someone is a 'student' and the trajectory is missing the reason for travel at 8 AM, infer it's likely for school.\nThink about why they travel the way they do. For instance, 'students' travel early for classes.\nUpdate the patterns if needed. If you find a new behavior that doesn't fit existing patterns, refine your groups.\nStart with the first anonymized trajectory: Fill in missing details, explain the reasoning, and update the patterns if necessary.\nDaily Plan Generation\nRole:\nYou are a daily planning expert, skilled at creating clear and reasonable daily plans for individuals based on various factors (such as location, external conditions, personal attributes, and previous reflections).\nSkill:\nCreating a daily life plan for someone.\nThe individual profiles are as follows: <INPUT 1>.\nThe mobility patterns of this group are as follows: <INPUT 2>.\nPlease deeply analyze the mobility patterns and accurately infer what activities the person will likely engage in throughout the day and for how long. Present the plan in a step-by-step, executable format.\nConstraints:\nThe plan should not include any speculative or uncertain terms.\nIf there are any unspecified contexts, you may make appropriate assumptions to ensure the plan appears realistic.\nProvide the plan directly, without explanations or summaries.\nNow, please provide the plan for <INPUT 3>.\nRecursive Reasoning of Activity Motivation\nCurrent time: <INPUT 1>\nOverall plan for today: <INPUT 2>\nEarlier schedule for today: <INPUT 3>\nIndividual profiles: <INPUT 4>\nMobility patterns of this group: <INPUT 5>\nTask: Based on the overall plan for today and the given earlier schedule, infer what the person is most likely doing at the current time. Please fully consider real-world plausibility. If there is any travel involved, provide the destination and the most likely range of travel distance, taking into account the group's attributes and mobility patterns."}]}