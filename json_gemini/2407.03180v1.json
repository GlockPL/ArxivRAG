{"title": "A MULTI-OBJECTIVE COMBINATORIAL OPTIMISATION FRAMEWORK FOR LARGE SCALE HIERARCHICAL POPULATION SYNTHESIS", "authors": ["Imran Mahmood", "Nicholas Bishop", "Anisoara Calinescu", "Michael Wooldridge", "Ioannis Zachos"], "abstract": "In agent-based simulations, synthetic populations of agents are commonly used to represent the structure, behaviour, and interactions of individuals. However, generating a synthetic population that accurately reflects real population statistics is a challenging task, particularly when performed at scale. In this paper, we propose a multi objective combinatorial optimisation technique for large scale population synthesis. We demonstrate the effectiveness of our approach by generating a synthetic population for selected regions and validating it on contingency tables from real population data. Our approach supports complex hierarchical structures between individuals and households, is scalable to large populations and achieves minimal contigency table reconstruction error. Hence, it provides a useful tool for policymakers and researchers for simulating the dynamics of complex populations.", "sections": [{"title": "INTRODUCTION", "content": "Population synthesis plays a crucial role in generating meaningful emergence structure from agent-based simulations. Common applications include urban planning, transportation and public health modelling Smith et al. (2017). A Synthetic Population (SP) is a simulated population that matches key demographic, social, economic, and geographic characteristics of a real world population. SPs assimilate real world data, which are often limited, sensitive, unavailable, or costly to obtain Barthelemy and Toint (2013); H\u00f6rl and Balac (2021) for modelling, and policy scenario testing. They are integral for initialising agent-based simulations (ABS), due to their realism, privacy preservation, flexibility, and reproducibility Ye et al. (2009),. ABS is a novel paradigm that helps the study of complex adaptive systems through a systematic bottom-up abstraction of the system, where the behaviour of individual agents and their interactions are studied to understand and predict the dynamics of these complex systems Macal and North (2005); Bonabeau (2002); Mahmood et al. (2022). They are used to explore and evaluate different assumptions, interventions, or policies Wu et al. (2022). This study aims to: (1) develop a methodology for generating synthetic populations at a selected scale and region that accurately matches the aggregate demographic characteristics and respects their hierarchical structure of the target population; (2)demonstrate the flexibility of the proposed approach in addressing diverse simulation requirements; (3) evaluate the synthesised population in terms of accuracy and computational efficiency. To achieve these objectives, we offer multi-objective combinatorial optimisation using the Non-dominated Sorting Genetic Algorithm II (NSGA-II) Deb et al. (2002). NSGA-II combines genetic algorithms with non-dominated sorting to efficiently search for optimal solutions in a combinatorial space. The optimisation objectives consist of individual demographic and spatial distributions, while allowing for weighting of these objectives depending on the simulation context. Key contributions of this paper are listed as follows:\n\u2022 The development of a novel methodology for generating country-scale synthetic populations that accurately represent the demographic structure, using multi-objective combinatorial optimisation techniques.\n\u2022 The assessment of the representativeness and accuracy of the generated population, the scalability of the approach, and the computational efficiency of the generation process.\n\u2022 Presentation of a case study demonstrating the generation of synthetic population of the selected regions in the city of Oxford, providing insights into the practical implementation of the proposed methodology.\n\u2022 Discussion of the advantages of our approach and of future work directions in the field of synthetic population generation for ABS."}, {"title": "Proposed Approach", "content": "In this section we discuss our proposed approach. First, we describe how synthetic population generation may be formulated as a multi-objective optimisation problem. Next, we discuss how the NGSAII genetic algorithm as a multi-objective evolutionary optimisation method to generate and optimise synthetic populations with respect to census contingency tables. As a proof of concept, we conduct a case study of the Oxfordshire region, using the UK census data to generate a hierarchical population of persons and households. At the end we discuss the results and we evaluate the proposed approach."}, {"title": "Problem Formulation", "content": "Given: A set of selected attributes in a real population where each attribute $A_i$ has a set of categories (or groups, e.g., age = 0-5, 6-10,...81 \u2013 85), with respective frequencies $F_{A_i}$ in the real population:\n$A = \\{a_1, a_2, ..., a_n\\}$\t\t(1)\n$CA_i = \\{CA_{i,1}, CA_{i,2}, ..., CA_{i,m_i} \\}$\t\t(2)\n$FA_i = \\{fa_{i,1}, fa_{i,2}, ..., f_{a_{i,m_i}} \\}$\t\t(3)\nObjective: Generate a synthetic population that closely resembles the real population's distribution of each attribute. Let $X$ be an individual  in the population, representing a synthetic population. For each attribute $A_i, i = 1, 2, ..., N$, the objective function is defined as: Minimise\n$\\mathcal{O}_i(X) = \\sum_{j=1}^{m_i}|f_{a_{i,j}} - \\mathcal{A}_{i,j}(X)|$,\t\t(4)\nwhere $f_{a_{i,j}}(X)$ is the frequency of category $ca_{i,j}$ in the synthetic population $X$.\nGoal: To find a synthetic population $X^*$ that minimises all objective functions $O_i(X)$, for $i = 1, 2, ..., N$.\nGenerating a synthetic population involves creating a sample of individuals and households with specific characteristics that closely resemble the actual population. The goal is to capture the distributions of selected attributes found in the real population while preserving privacy. Contingency tables, which display the relationship between categorical variables, are used to describe statistical relationships between population characteristics. These tables help analyse patterns and trends among different demographic groups. By recreating the frequency distributions given by contingency tables, the representativeness of a synthetic population can be measured. Trade-offs may be necessary when fitting multiple contingency tables, as some may be more important than others depending on the application. Our approach allows practitioners to naturally balance objectives and obtain a synthetic population that suits their needs. In this study, we validate our methodology using cross tables from the 2011 UK census Statistics (2010), which include bivariate and trivariate tables that combine different attributes. In this paper, we have considered trivariate contingency tables (e.g., Sex:Age:Ethnicity, Sex:Age:Religion, Sex:Age:Qualification \u2013 see Figure 4).\nA multi-objective optimisation algorithm can optimise two or more objectives simultaneously. This algorithm generates a set of Pareto-optimal solutions, providing a balance between objectives. The algorithm iteratively evolves a population of candidate solutions by applying genetic operators (selection, crossover, and mutation) while considering all the objectives having different weights according to their significance (e.g., in certain use-cases the economic attributes of persons and households may be more significant than ethnicity and religion). The Pareto-optimal solutions represent trade-offs between different distributions, allowing decision-makers to choose the most suitable synthetic population based on their requirements. Motivated by these features, as well as the complex hierarchical structure of synthetic populations, we employ the NSGA-II algorithm."}, {"title": "Multi-Objective Combinatorial Optimisation using Genetic Algorithms", "content": "We formulate population and household synthesis as a multi-objective combinatorial optimisation problem. We first present a brief primer on genetic algorithms (GAs) Wirsansky (2020), providing rationale for our use of this approach in population synthesis. GA is a type of evolutionary computation technique inspired by the process of natural selection. Genetic algorithms maintain a population of candidate solutions, which reproduce over multiple generations. In the context of our work, candidate solutions correspond to synthetic populations. A predefined selection process is used to determine which candidate solutions may reproduce at the end of each generation. The success of a candidate within the selection process is determined by their fitness, which is evaluated via a fitness function. The fitness of a synthetic population describes how well it recreates the frequency distributions of contingency tables. Reproduction consists of both crossover and mutation. We provide more details regarding each component of a genetic algorithm below:\n\u2022 Selection: This is the process of choosing individuals from the current population based on their fitness values. Selection favours individuals with higher fitness values (or lower in our case of minimisation the error), ensuring that the best solutions have a higher probability of being chosen for reproduction. Common selection methods include tournament selection, roulette wheel selection, and rank-based selection Deb (2011).\n\u2022 Crossover (or recombination): This operation combines the genetic material of two parent individuals to produce one or more offspring. The goal of crossover is to create new individuals that inherit the best traits from their parents, potentially leading to better solutions in the next generation. There are various types of crossover operators, such as one-point crossover, two-point crossover, and uniform crossover.\n\u2022 Mutation: This operation introduces small random changes in an individual's genetic material. Mutation helps maintain diversity in the population and prevents premature convergence to sub-optimal solutions. Mutation operators can vary depending on the problem representation; for example, bit-flipping mutation for binary strings or Gaussian mutation for real-valued representations.\n\u2022 Fitness Evaluation:The fitness function evaluates the quality of each individual in the population based on how well they solve the given problem. It assigns a fitness value to each individual, which is then used for selecting and determining the best solutions. The fitness function is problem-specific and designed to guide the search towards optimal or near-optimal solutions."}, {"title": "UK Case Study", "content": "This section presents the implementation details of our proposed approach In this section, we present the case study to generate a representative synthetic population of a selected region in the UK using our propose approach. Our case study is conducted at a geographical scale of Middle Super Output Areas (MSOA). There are approximately 7,200 MSOAs in England and each MSOA contains between 5,000 and 15,000 residents. They are used as geographic building blocks for analysing data and gaining insights into the distribution of characteristics across larger areas and assist in policy-making and interventions. We leverage UK Census data for the attributes of persons and households Statistics (2010). The ethnicity in the Persons data are symbolised as: W1-W4 are categories of White; M1-M4 are mixed categories; A1-A5 are Asian categories; B1-B3 are Black and 01-02 are Other categories. Similarly Religions are symbolised as: C=Christian, B=Buddhist, H=Hindu, J=Jewish, M=Muslim, S=Sikh, O=Other religions, N=No religion and NS=Religion not stated. Different compositions represented in the household data are categories in Table 4.\nIn this case-study we have selected two types of entities in our synthetic population: (i) Persons and (ii) Households. We aim to generate samples of persons and households according to the statistics of the selected MSOA and fit both sets using the contingency tables shown in Figure 4. Our proposed approach leverages Distributed Evolutionary Algorithms. We have extended the DEAP Python framework Fortin et al. (2012) to support the generation of synthetic population using: (a) a variety of input data; (b) selection of individual's attributes, (c) defining multiple objectives; (d) logical design of how random individuals are generated with rule-based validation; (d) design of complex fitness evaluation criteria; (e) addition or modification of genetic operators; and finally the performance improvements using parallel processing. Our implementation is available on Github.\nResults and Analysis\nThis section illustrates the outputs of the execution runs and the results of our case study. We performed our analysis on a selected MSOA at a time. It is however possible to execute multiple MSOAs in parallel in order to speed up the process of generating the entire population at the country scale. We devises the framework to operate in two stages: (i) Generating persons and (ii) Generating households, because to generate households we require persons population as input. Table 5 illustrates several generated samples of Persons and Households. Figure 6 shows the generation results in terms of actual and the predicted population. We group the age attributes into three categories: (a) Children (ch); (b) Adults (ad) and (c) Elders (el). Similarly we grouped ethnicity into main groups: (a) White (wht); (b) Mixed (mxd); (c) Asian (asn); (d) Black (blk) and Others (oth). The difference of sum of each generated group of attributes (red) with the actual data (blue) can be noted in the figure. We also calculated the root mean square error (RMSE) as an error measure to see the difference. In the next stage, we generated households as shown in Figure 7. At this stage, we implemented the household composition by allocating individuals from the persons population into suitable households based on their attributes such as size, type and composition structure (see Figure 4).\nFor example, in order to allocate persons in a household of size 7 and composition type: '2A 3C' we search and allocate two adults and 5 children from the pool of persons. Currently this allocation is not sensitive towards ethnicity, religion, or other pertinent features, and is considered as our future work. A typical run-time of a single generation for an area of 7000 persons, and population size of 100 ranges between 5-7 seconds. It takes 30-35 minutes to run 500 generations. With parallel random sampling of individuals, parallel fitness evaluation and parallel genetic operations the execution time can be substantially reduced, which is considered as our future work. After a run of 500 generations a convergence plot is generated, as shown in Figure 8, where each line represents an optimisation objective (i.e., five objectives for each attribute of persons), X-axis shows the number of generations, and Y-axis shows the descent of normalised fitness. The rate of convergence completely depends on the genetic makeup of the feature and the operators used. When the execution is complete we generate a Pareto frontier pair plot as shown in Figure 8. In the pair plot, each pair of objectives is placed against each other in a scatter plot, and the diagonal plots show the distribution of each objective. The plot shows the selected best solution (highlighted in red), based on our weighted sum of difference method."}, {"title": "Summary and Conclusion", "content": "In this paper We present a novel approach for synthetic population creation in agent-based simulations, addressing the challenges of accuracy and representation. By employing the NGAII algorithm, a multi-objective combinatorial optimisation technique, we demonstrate the effectiveness of our approach through a case study. The results exhibit its suitability for complex and large-scale problems, offering enhanced accuracy and representation compared to traditional methods.\nThis case study serves as a proof of concept, validating our population synthesis approach for agent-based simulations. The focus lies in optimising multiple objectives, such as demographic characteristics, to accurately represent the target population. The findings reveal that our proposed method generates high-quality synthetic populations mirroring the target population's characteristics. Furthermore, our approach is efficient, scalable, and easily adaptable to different geographic regions, input data, and types of individuals (e.g., persons, households, cars, organisations). Notably, it excels in creating and fitting hierarchical structures using input data, enabling allocation of persons in households, assignment of cars to individuals, and allocation of workplaces to persons.\nWe assert that multi-objective combinatorial optimisation is a comprehensive approach for synthetic population generation, capable of simultaneously optimising multiple objectives across diverse problem domains. This work contributes to the field of agent-based modelling and simulation, opening avenues for developing more realistic and large-scale models across various domains. Future work include expanding our household composition scheme to incorporate ethnicity and religion, as well as enhancing computational efficiency through parallel processing in random individual generation, fitness evaluation, and genetic operations."}]}